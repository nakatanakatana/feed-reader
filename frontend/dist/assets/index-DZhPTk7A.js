(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const q={context:void 0,registry:void 0,effects:void 0,done:!1,getContextId(){return cc(this.context.count)},getNextContextId(){return cc(this.context.count++)}};function cc(e){const t=String(e),n=t.length-1;return q.context.id+(n?String.fromCharCode(96+n):"")+t}function Dr(e){q.context=e}const Cp=!1,Ip=(e,t)=>e===t,Rt=Symbol("solid-proxy"),cf=typeof Proxy=="function",Vo=Symbol("solid-track"),ni={equals:Ip};let $r=null,lf=bf;const xt=1,jr=2,df={owned:null,cleanups:null,context:null,owner:null},so={};var Y=null;let U=null,Ap=null,oe=null,ze=null,Re=null,Di=0;function Jt(e,t){const n=oe,r=Y,s=e.length===0,i=t===void 0?r:t,o=s?df:{owned:null,cleanups:null,context:i?i.context:null,owner:i},u=s?e:()=>e(()=>De(()=>yn(o)));Y=o,oe=null;try{return it(u,!0)}finally{oe=n,Y=r}}function H(e,t){t=t?Object.assign({},ni,t):ni;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(U&&U.running&&U.sources.has(n)?s=s(n.tValue):s=s(n.value)),gf(n,s));return[mf.bind(n),r]}function pn(e,t,n){const r=bs(e,t,!0,xt);wr(r)}function L(e,t,n){const r=bs(e,t,!1,xt);wr(r)}function Qe(e,t,n){lf=Lp;const r=bs(e,t,!1,xt),s=Mn&&nn(Mn);s&&(r.suspense=s),(!n||!n.render)&&(r.user=!0),Re?Re.push(r):wr(r)}function J(e,t,n){n=n?Object.assign({},ni,n):ni;const r=bs(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,wr(r),mf.bind(r)}function Rp(e){return e&&typeof e=="object"&&"then"in e}function Jn(e,t,n){let r,s,i;typeof t=="function"?(r=e,s=t,i=n||{}):(r=!0,s=e,i=t||{});let o=null,u=so,a=null,c=!1,l=!1,d="initialValue"in i,p=typeof r=="function"&&J(r);const f=new Set,[h,m]=(i.storage||H)(i.initialValue),[g,y]=H(void 0),[w,v]=H(void 0,{equals:!1}),[b,x]=H(d?"ready":"unresolved");q.context&&(a=q.getNextContextId(),i.ssrLoadFrom==="initial"?u=i.initialValue:q.load&&q.has(a)&&(u=q.load(a)));function E(F,D,z,K){return o===F&&(o=null,K!==void 0&&(d=!0),(F===u||D===u)&&i.onHydrated&&queueMicrotask(()=>i.onHydrated(K,{value:D})),u=so,U&&F&&c?(U.promises.delete(F),c=!1,it(()=>{U.running=!0,R(D,z)},!1)):R(D,z)),D}function R(F,D){it(()=>{D===void 0&&m(()=>F),x(D!==void 0?"errored":d?"ready":"unresolved"),y(D);for(const z of f.keys())z.decrement();f.clear()},!1)}function S(){const F=Mn&&nn(Mn),D=h(),z=g();if(z!==void 0&&!o)throw z;return oe&&!oe.user&&F&&pn(()=>{w(),o&&(F.resolved&&U&&c?U.promises.add(o):f.has(F)||(F.increment(),f.add(F)))}),D}function _(F=!0){if(F!==!1&&l)return;l=!1;const D=p?p():r;if(c=U&&U.running,D==null||D===!1){E(o,De(h));return}U&&o&&U.promises.delete(o);let z;const K=u!==so?u:De(()=>{try{return s(D,{value:h(),refetching:F})}catch(Z){z=Z}});if(z!==void 0){E(o,void 0,Zs(z),D);return}else if(!Rp(K))return E(o,K,void 0,D),K;return o=K,"v"in K?(K.s===1?E(o,K.v,void 0,D):E(o,void 0,Zs(K.v),D),K):(l=!0,queueMicrotask(()=>l=!1),it(()=>{x(d?"refreshing":"pending"),v()},!1),K.then(Z=>E(K,Z,void 0,D),Z=>E(K,void 0,Zs(Z),D)))}Object.defineProperties(S,{state:{get:()=>b()},error:{get:()=>g()},loading:{get(){const F=b();return F==="pending"||F==="refreshing"}},latest:{get(){if(!d)return S();const F=g();if(F&&!o)throw F;return h()}}});let A=Y;return p?pn(()=>(A=Y,_(!1))):_(!1),[S,{refetch:F=>ff(A,()=>_(F)),mutate:m}]}function tr(e){return it(e,!1)}function De(e){if(oe===null)return e();const t=oe;oe=null;try{return e()}finally{oe=t}}function Qt(e,t,n){const r=Array.isArray(e);let s,i=n&&n.defer;return o=>{let u;if(r){u=Array(e.length);for(let c=0;c<e.length;c++)u[c]=e[c]()}else u=e();if(i)return i=!1,o;const a=De(()=>t(u,s,o));return s=u,a}}function Kn(e){Qe(()=>De(e))}function Ee(e){return Y===null||(Y.cleanups===null?Y.cleanups=[e]:Y.cleanups.push(e)),e}function Tp(e,t){$r||($r=Symbol("error")),Y=bs(void 0,void 0,!0),Y.context={...Y.context,[$r]:[t]},U&&U.running&&U.sources.add(Y);try{return e()}catch(n){ys(n)}finally{Y=Y.owner}}function ri(){return oe}function Uo(){return Y}function ff(e,t){const n=Y,r=oe;Y=e,oe=null;try{return it(t,!0)}catch(s){ys(s)}finally{Y=n,oe=r}}function hf(e){if(U&&U.running)return e(),U.done;const t=oe,n=Y;return Promise.resolve().then(()=>{oe=t,Y=n;let r;return Mn&&(r=U||(U={sources:new Set,effects:[],promises:new Set,disposed:new Set,queue:new Set,running:!0}),r.done||(r.done=new Promise(s=>r.resolve=s)),r.running=!0),it(e,!1),oe=Y=null,r?r.done:void 0})}const[Op,lc]=H(!1);function Fp(){return[Op,hf]}function Dp(e){Re.push.apply(Re,e),e.length=0}function Sn(e,t){const n=Symbol("context");return{id:n,Provider:Mp(n),defaultValue:e}}function nn(e){let t;return Y&&Y.context&&(t=Y.context[e.id])!==void 0?t:e.defaultValue}function pf(e){const t=J(e),n=J(()=>zo(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}let Mn;function Np(){return Mn||(Mn=Sn())}function mf(){const e=U&&U.running;if(this.sources&&(e?this.tState:this.state))if((e?this.tState:this.state)===xt)wr(this);else{const t=ze;ze=null,it(()=>ii(this),!1),ze=t}if(oe){const t=this.observers?this.observers.length:0;oe.sources?(oe.sources.push(this),oe.sourceSlots.push(t)):(oe.sources=[this],oe.sourceSlots=[t]),this.observers?(this.observers.push(oe),this.observerSlots.push(oe.sources.length-1)):(this.observers=[oe],this.observerSlots=[oe.sources.length-1])}return e&&U.sources.has(this)?this.tValue:this.value}function gf(e,t,n){let r=U&&U.running&&U.sources.has(e)?e.tValue:e.value;if(!e.comparator||!e.comparator(r,t)){if(U){const s=U.running;(s||!n&&U.sources.has(e))&&(U.sources.add(e),e.tValue=t),s||(e.value=t)}else e.value=t;e.observers&&e.observers.length&&it(()=>{for(let s=0;s<e.observers.length;s+=1){const i=e.observers[s],o=U&&U.running;o&&U.disposed.has(i)||((o?!i.tState:!i.state)&&(i.pure?ze.push(i):Re.push(i),i.observers&&yf(i)),o?i.tState=xt:i.state=xt)}if(ze.length>1e6)throw ze=[],new Error},!1)}return t}function wr(e){if(!e.fn)return;yn(e);const t=Di;dc(e,U&&U.running&&U.sources.has(e)?e.tValue:e.value,t),U&&!U.running&&U.sources.has(e)&&queueMicrotask(()=>{it(()=>{U&&(U.running=!0),oe=Y=e,dc(e,e.tValue,t),oe=Y=null},!1)})}function dc(e,t,n){let r;const s=Y,i=oe;oe=Y=e;try{r=e.fn(t)}catch(o){return e.pure&&(U&&U.running?(e.tState=xt,e.tOwned&&e.tOwned.forEach(yn),e.tOwned=void 0):(e.state=xt,e.owned&&e.owned.forEach(yn),e.owned=null)),e.updatedAt=n+1,ys(o)}finally{oe=i,Y=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?gf(e,r,!0):U&&U.running&&e.pure?(U.sources.add(e),e.tValue=r):e.value=r,e.updatedAt=n)}function bs(e,t,n,r=xt,s){const i={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:Y,context:Y?Y.context:null,pure:n};return U&&U.running&&(i.state=0,i.tState=r),Y===null||Y!==df&&(U&&U.running&&Y.pure?Y.tOwned?Y.tOwned.push(i):Y.tOwned=[i]:Y.owned?Y.owned.push(i):Y.owned=[i]),i}function si(e){const t=U&&U.running;if((t?e.tState:e.state)===0)return;if((t?e.tState:e.state)===jr)return ii(e);if(e.suspense&&De(e.suspense.inFallback))return e.suspense.effects.push(e);const n=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Di);){if(t&&U.disposed.has(e))return;(t?e.tState:e.state)&&n.push(e)}for(let r=n.length-1;r>=0;r--){if(e=n[r],t){let s=e,i=n[r+1];for(;(s=s.owner)&&s!==i;)if(U.disposed.has(s))return}if((t?e.tState:e.state)===xt)wr(e);else if((t?e.tState:e.state)===jr){const s=ze;ze=null,it(()=>ii(e,n[0]),!1),ze=s}}}function it(e,t){if(ze)return e();let n=!1;t||(ze=[]),Re?n=!0:Re=[],Di++;try{const r=e();return Pp(n),r}catch(r){n||(Re=null),ze=null,ys(r)}}function Pp(e){if(ze&&(bf(ze),ze=null),e)return;let t;if(U){if(!U.promises.size&&!U.queue.size){const r=U.sources,s=U.disposed;Re.push.apply(Re,U.effects),t=U.resolve;for(const i of Re)"tState"in i&&(i.state=i.tState),delete i.tState;U=null,it(()=>{for(const i of s)yn(i);for(const i of r){if(i.value=i.tValue,i.owned)for(let o=0,u=i.owned.length;o<u;o++)yn(i.owned[o]);i.tOwned&&(i.owned=i.tOwned),delete i.tValue,delete i.tOwned,i.tState=0}lc(!1)},!1)}else if(U.running){U.running=!1,U.effects.push.apply(U.effects,Re),Re=null,lc(!0);return}}const n=Re;Re=null,n.length&&it(()=>lf(n),!1),t&&t()}function bf(e){for(let t=0;t<e.length;t++)si(e[t])}function Lp(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:si(r)}if(q.context){if(q.count){q.effects||(q.effects=[]),q.effects.push(...e.slice(0,n));return}Dr()}for(q.effects&&(q.done||!q.count)&&(e=[...q.effects,...e],n+=q.effects.length,delete q.effects),t=0;t<n;t++)si(e[t])}function ii(e,t){const n=U&&U.running;n?e.tState=0:e.state=0;for(let r=0;r<e.sources.length;r+=1){const s=e.sources[r];if(s.sources){const i=n?s.tState:s.state;i===xt?s!==t&&(!s.updatedAt||s.updatedAt<Di)&&si(s):i===jr&&ii(s,t)}}}function yf(e){const t=U&&U.running;for(let n=0;n<e.observers.length;n+=1){const r=e.observers[n];(t?!r.tState:!r.state)&&(t?r.tState=jr:r.state=jr,r.pure?ze.push(r):Re.push(r),r.observers&&yf(r))}}function yn(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const i=s.pop(),o=n.observerSlots.pop();r<s.length&&(i.sourceSlots[o]=r,s[r]=i,n.observerSlots[r]=o)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)yn(e.tOwned[t]);delete e.tOwned}if(U&&U.running&&e.pure)vf(e,!0);else if(e.owned){for(t=e.owned.length-1;t>=0;t--)yn(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}U&&U.running?e.tState=0:e.state=0}function vf(e,t){if(t||(e.tState=0,U.disposed.add(e)),e.owned)for(let n=0;n<e.owned.length;n++)vf(e.owned[n])}function Zs(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function fc(e,t,n){try{for(const r of t)r(e)}catch(r){ys(r,n&&n.owner||null)}}function ys(e,t=Y){const n=$r&&t&&t.context&&t.context[$r],r=Zs(e);if(!n)throw r;Re?Re.push({fn(){fc(r,n,t)},state:xt}):fc(r,n,t)}function zo(e){if(typeof e=="function"&&!e.length)return zo(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=zo(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function Mp(e,t){return function(r){let s;return L(()=>s=De(()=>(Y.context={...Y.context,[e]:r.value},pf(()=>r.children))),void 0),s}}const Bp=Symbol("fallback");function hc(e){for(let t=0;t<e.length;t++)e[t]()}function $p(e,t,n={}){let r=[],s=[],i=[],o=0,u=t.length>1?[]:null;return Ee(()=>hc(i)),()=>{let a=e()||[],c=a.length,l,d;return a[Vo],De(()=>{let f,h,m,g,y,w,v,b,x;if(c===0)o!==0&&(hc(i),i=[],r=[],s=[],o=0,u&&(u=[])),n.fallback&&(r=[Bp],s[0]=Jt(E=>(i[0]=E,n.fallback())),o=1);else if(o===0){for(s=new Array(c),d=0;d<c;d++)r[d]=a[d],s[d]=Jt(p);o=c}else{for(m=new Array(c),g=new Array(c),u&&(y=new Array(c)),w=0,v=Math.min(o,c);w<v&&r[w]===a[w];w++);for(v=o-1,b=c-1;v>=w&&b>=w&&r[v]===a[b];v--,b--)m[b]=s[v],g[b]=i[v],u&&(y[b]=u[v]);for(f=new Map,h=new Array(b+1),d=b;d>=w;d--)x=a[d],l=f.get(x),h[d]=l===void 0?-1:l,f.set(x,d);for(l=w;l<=v;l++)x=r[l],d=f.get(x),d!==void 0&&d!==-1?(m[d]=s[l],g[d]=i[l],u&&(y[d]=u[l]),d=h[d],f.set(x,d)):i[l]();for(d=w;d<c;d++)d in m?(s[d]=m[d],i[d]=g[d],u&&(u[d]=y[d],u[d](d))):s[d]=Jt(p);s=s.slice(0,o=c),r=a.slice(0)}return s});function p(f){if(i[d]=f,u){const[h,m]=H(d);return u[d]=m,t(a[d],h)}return t(a[d])}}}function k(e,t){return De(()=>e(t||{}))}function Ds(){return!0}const Ko={get(e,t,n){return t===Rt?n:e.get(t)},has(e,t){return t===Rt?!0:e.has(t)},set:Ds,deleteProperty:Ds,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Ds,deleteProperty:Ds}},ownKeys(e){return e.keys()}};function io(e){return(e=typeof e=="function"?e():e)?e:{}}function Vp(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Mt(...e){let t=!1;for(let o=0;o<e.length;o++){const u=e[o];t=t||!!u&&Rt in u,e[o]=typeof u=="function"?(t=!0,J(u)):u}if(cf&&t)return new Proxy({get(o){for(let u=e.length-1;u>=0;u--){const a=io(e[u])[o];if(a!==void 0)return a}},has(o){for(let u=e.length-1;u>=0;u--)if(o in io(e[u]))return!0;return!1},keys(){const o=[];for(let u=0;u<e.length;u++)o.push(...Object.keys(io(e[u])));return[...new Set(o)]}},Ko);const n={},r=Object.create(null);for(let o=e.length-1;o>=0;o--){const u=e[o];if(!u)continue;const a=Object.getOwnPropertyNames(u);for(let c=a.length-1;c>=0;c--){const l=a[c];if(l==="__proto__"||l==="constructor")continue;const d=Object.getOwnPropertyDescriptor(u,l);if(!r[l])r[l]=d.get?{enumerable:!0,configurable:!0,get:Vp.bind(n[l]=[d.get.bind(u)])}:d.value!==void 0?d:void 0;else{const p=n[l];p&&(d.get?p.push(d.get.bind(u)):d.value!==void 0&&p.push(()=>d.value))}}}const s={},i=Object.keys(r);for(let o=i.length-1;o>=0;o--){const u=i[o],a=r[u];a&&a.get?Object.defineProperty(s,u,a):s[u]=a?a.value:void 0}return s}function Nn(e,...t){const n=t.length;if(cf&&Rt in e){const s=n>1?t.flat():t[0],i=t.map(o=>new Proxy({get(u){return o.includes(u)?e[u]:void 0},has(u){return o.includes(u)&&u in e},keys(){return o.filter(u=>u in e)}},Ko));return i.push(new Proxy({get(o){return s.includes(o)?void 0:e[o]},has(o){return s.includes(o)?!1:o in e},keys(){return Object.keys(e).filter(o=>!s.includes(o))}},Ko)),i}const r=[];for(let s=0;s<=n;s++)r[s]={};for(const s of Object.getOwnPropertyNames(e)){let i=n;for(let a=0;a<t.length;a++)if(t[a].includes(s)){i=a;break}const o=Object.getOwnPropertyDescriptor(e,s);!o.get&&!o.set&&o.enumerable&&o.writable&&o.configurable?r[i][s]=o.value:Object.defineProperty(r[i],s,o)}return r}const wf=e=>`Stale read from <${e}>.`;function At(e){const t="fallback"in e&&{fallback:()=>e.fallback};return J($p(()=>e.each,e.children,t||void 0))}function G(e){const t=e.keyed,n=J(()=>e.when,void 0,void 0),r=t?n:J(n,void 0,{equals:(s,i)=>!s==!i});return J(()=>{const s=r();if(s){const i=e.children;return typeof i=="function"&&i.length>0?De(()=>i(t?s:()=>{if(!De(r))throw wf("Show");return n()})):i}return e.fallback},void 0,void 0)}function xf(e){const t=pf(()=>e.children),n=J(()=>{const r=t(),s=Array.isArray(r)?r:[r];let i=()=>{};for(let o=0;o<s.length;o++){const u=o,a=s[o],c=i,l=J(()=>c()?void 0:a.when,void 0,void 0),d=a.keyed?l:J(l,void 0,{equals:(p,f)=>!p==!f});i=()=>c()||(d()?[u,l,a]:void 0)}return i});return J(()=>{const r=n()();if(!r)return e.fallback;const[s,i,o]=r,u=o.children;return typeof u=="function"&&u.length>0?De(()=>u(o.keyed?i():()=>{if(De(n)()?.[0]!==s)throw wf("Match");return i()})):u},void 0,void 0)}function Gt(e){return e}let Ns;function Up(e){let t;q.context&&q.load&&(t=q.load(q.getContextId()));const[n,r]=H(t,void 0);return Ns||(Ns=new Set),Ns.add(r),Ee(()=>Ns.delete(r)),J(()=>{let s;if(s=n()){const i=e.fallback;return typeof i=="function"&&i.length?De(()=>i(s,()=>r())):i}return Tp(()=>e.children,r)},void 0,void 0)}const zp=Sn();function $u(e){let t=0,n,r,s,i,o;const[u,a]=H(!1),c=Np(),l={increment:()=>{++t===1&&a(!0)},decrement:()=>{--t===0&&a(!1)},inFallback:u,effects:[],resolved:!1},d=Uo();if(q.context&&q.load){const h=q.getContextId();let m=q.load(h);if(m&&(typeof m!="object"||m.s!==1?s=m:q.gather(h)),s&&s!=="$$f"){const[g,y]=H(void 0,{equals:!1});i=g,s.then(()=>{if(q.done)return y();q.gather(h),Dr(r),y(),Dr()},w=>{o=w,y()})}}const p=nn(zp);p&&(n=p.register(l.inFallback));let f;return Ee(()=>f&&f()),k(c.Provider,{value:l,get children(){return J(()=>{if(o)throw o;if(r=q.context,i)return i(),i=void 0;r&&s==="$$f"&&Dr();const h=J(()=>e.children);return J(m=>{const g=l.inFallback(),{showContent:y=!0,showFallback:w=!0}=n?n():{};if((!g||s&&s!=="$$f")&&y)return l.resolved=!0,f&&f(),f=r=s=void 0,Dp(l.effects),h();if(w)return f?m:Jt(v=>(f=v,r&&(Dr({id:r.id+"F",count:0}),r=void 0),e.fallback),d)})})}})}const Kp=["allowfullscreen","async","alpha","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected","adauctionheaders","browsingtopics","credentialless","defaultchecked","defaultmuted","defaultselected","defer","disablepictureinpicture","disableremoteplayback","preservespitch","shadowrootclonable","shadowrootcustomelementregistry","shadowrootdelegatesfocus","shadowrootserializable","sharedstoragewritable"],Wp=new Set(["className","value","readOnly","noValidate","formNoValidate","isMap","noModule","playsInline","adAuctionHeaders","allowFullscreen","browsingTopics","defaultChecked","defaultMuted","defaultSelected","disablePictureInPicture","disableRemotePlayback","preservesPitch","shadowRootClonable","shadowRootCustomElementRegistry","shadowRootDelegatesFocus","shadowRootSerializable","sharedStorageWritable",...Kp]),Gp=new Set(["innerHTML","textContent","innerText","children"]),jp=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),Zp=Object.assign(Object.create(null),{class:"className",novalidate:{$:"noValidate",FORM:1},formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1},adauctionheaders:{$:"adAuctionHeaders",IFRAME:1},allowfullscreen:{$:"allowFullscreen",IFRAME:1},browsingtopics:{$:"browsingTopics",IMG:1},defaultchecked:{$:"defaultChecked",INPUT:1},defaultmuted:{$:"defaultMuted",AUDIO:1,VIDEO:1},defaultselected:{$:"defaultSelected",OPTION:1},disablepictureinpicture:{$:"disablePictureInPicture",VIDEO:1},disableremoteplayback:{$:"disableRemotePlayback",AUDIO:1,VIDEO:1},preservespitch:{$:"preservesPitch",AUDIO:1,VIDEO:1},shadowrootclonable:{$:"shadowRootClonable",TEMPLATE:1},shadowrootdelegatesfocus:{$:"shadowRootDelegatesFocus",TEMPLATE:1},shadowrootserializable:{$:"shadowRootSerializable",TEMPLATE:1},sharedstoragewritable:{$:"sharedStorageWritable",IFRAME:1,IMG:1}});function Yp(e,t){const n=Zp[e];return typeof n=="object"?n[t]?n.$:void 0:n}const qp=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Hp=new Set(["altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignObject","g","glyph","glyphRef","hkern","image","line","linearGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","set","stop","svg","switch","symbol","text","textPath","tref","tspan","use","view","vkern"]),Xp={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},le=e=>J(()=>e());function Jp(e,t,n){let r=n.length,s=t.length,i=r,o=0,u=0,a=t[s-1].nextSibling,c=null;for(;o<s||u<i;){if(t[o]===n[u]){o++,u++;continue}for(;t[s-1]===n[i-1];)s--,i--;if(s===o){const l=i<r?u?n[u-1].nextSibling:n[i-u]:a;for(;u<i;)e.insertBefore(n[u++],l)}else if(i===u)for(;o<s;)(!c||!c.has(t[o]))&&t[o].remove(),o++;else if(t[o]===n[i-1]&&n[u]===t[s-1]){const l=t[--s].nextSibling;e.insertBefore(n[u++],t[o++].nextSibling),e.insertBefore(n[--i],l),t[s]=n[i]}else{if(!c){c=new Map;let d=u;for(;d<i;)c.set(n[d],d++)}const l=c.get(t[o]);if(l!=null)if(u<l&&l<i){let d=o,p=1,f;for(;++d<s&&d<i&&!((f=c.get(t[d]))==null||f!==l+p);)p++;if(p>l-u){const h=t[o];for(;u<l;)e.insertBefore(n[u++],h)}else e.replaceChild(n[u++],t[o++])}else o++;else t[o++].remove()}}}const pc="_$DX_DELEGATE";function Qp(e,t,n,r={}){let s;return Jt(i=>{s=i,t===document?e():T(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function B(e,t,n,r){let s;const i=()=>{const u=document.createElement("template");return u.innerHTML=e,u.content.firstChild},o=()=>(s||(s=i())).cloneNode(!0);return o.cloneNode=o,o}function _t(e,t=window.document){const n=t[pc]||(t[pc]=new Set);for(let r=0,s=e.length;r<s;r++){const i=e[r];n.has(i)||(n.add(i),t.addEventListener(i,om))}}function st(e,t,n){Wn(e)||(n==null?e.removeAttribute(t):e.setAttribute(t,n))}function em(e,t,n,r){Wn(e)||(r==null?e.removeAttributeNS(t,n):e.setAttributeNS(t,n,r))}function tm(e,t,n){Wn(e)||(n?e.setAttribute(t,""):e.removeAttribute(t))}function C(e,t){Wn(e)||(t==null?e.removeAttribute("class"):e.className=t)}function Vu(e,t,n,r){if(r)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=i=>s.call(e,n[1],i))}else e.addEventListener(t,n,typeof n!="function"&&n)}function nm(e,t,n={}){const r=Object.keys(t||{}),s=Object.keys(n);let i,o;for(i=0,o=s.length;i<o;i++){const u=s[i];!u||u==="undefined"||t[u]||(mc(e,u,!1),delete n[u])}for(i=0,o=r.length;i<o;i++){const u=r[i],a=!!t[u];!u||u==="undefined"||n[u]===a||!a||(mc(e,u,!0),n[u]=a)}return n}function Sf(e,t,n){if(!t)return n?st(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,i;for(i in n)t[i]==null&&r.removeProperty(i),delete n[i];for(i in t)s=t[i],s!==n[i]&&(r.setProperty(i,s),n[i]=s);return n}function Ni(e,t={},n,r){const s={};return r||L(()=>s.children=Zr(e,t.children,s.children)),L(()=>typeof t.ref=="function"&&mn(t.ref,e)),L(()=>rm(e,t,n,!0,s,!0)),s}function mn(e,t,n){return De(()=>e(t,n))}function T(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Zr(e,t,r,n);L(s=>Zr(e,t(),s,n),r)}function rm(e,t,n,r,s={},i=!1){t||(t={});for(const o in s)if(!(o in t)){if(o==="children")continue;s[o]=gc(e,o,null,s[o],n,i,t)}for(const o in t){if(o==="children")continue;const u=t[o];s[o]=gc(e,o,u,s[o],n,i,t)}}function sm(e){let t,n;return!Wn()||!(t=q.registry.get(n=um()))?e():(q.completed&&q.completed.add(t),q.registry.delete(n),t)}function Wn(e){return!!q.context&&!q.done&&(!e||e.isConnected)}function im(e){return e.toLowerCase().replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function mc(e,t,n){const r=t.trim().split(/\s+/);for(let s=0,i=r.length;s<i;s++)e.classList.toggle(r[s],n)}function gc(e,t,n,r,s,i,o){let u,a,c,l,d;if(t==="style")return Sf(e,n,r);if(t==="classList")return nm(e,n,r);if(n===r)return r;if(t==="ref")i||n(e);else if(t.slice(0,3)==="on:"){const p=t.slice(3);r&&e.removeEventListener(p,r,typeof r!="function"&&r),n&&e.addEventListener(p,n,typeof n!="function"&&n)}else if(t.slice(0,10)==="oncapture:"){const p=t.slice(10);r&&e.removeEventListener(p,r,!0),n&&e.addEventListener(p,n,!0)}else if(t.slice(0,2)==="on"){const p=t.slice(2).toLowerCase(),f=qp.has(p);if(!f&&r){const h=Array.isArray(r)?r[0]:r;e.removeEventListener(p,h)}(f||n)&&(Vu(e,p,n,f),f&&_t([p]))}else if(t.slice(0,5)==="attr:")st(e,t.slice(5),n);else if(t.slice(0,5)==="bool:")tm(e,t.slice(5),n);else if((d=t.slice(0,5)==="prop:")||(c=Gp.has(t))||!s&&((l=Yp(t,e.tagName))||(a=Wp.has(t)))||(u=e.nodeName.includes("-")||"is"in o)){if(d)t=t.slice(5),a=!0;else if(Wn(e))return n;t==="class"||t==="className"?C(e,n):u&&!a&&!c?e[im(t)]=n:e[l||t]=n}else{const p=s&&t.indexOf(":")>-1&&Xp[t.split(":")[0]];p?em(e,p,t,n):st(e,jp[t]||t,n)}return n}function om(e){if(q.registry&&q.events&&q.events.find(([a,c])=>c===e))return;let t=e.target;const n=`$$${e.type}`,r=e.target,s=e.currentTarget,i=a=>Object.defineProperty(e,"target",{configurable:!0,value:a}),o=()=>{const a=t[n];if(a&&!t.disabled){const c=t[`${n}Data`];if(c!==void 0?a.call(t,c,e):a.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&i(t.host),!0},u=()=>{for(;o()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),q.registry&&!q.done&&(q.done=_$HY.done=!0),e.composedPath){const a=e.composedPath();i(a[0]);for(let c=0;c<a.length-2&&(t=a[c],!!o());c++){if(t._$host){t=t._$host,u();break}if(t.parentNode===s)break}}else u();i(r)}function Zr(e,t,n,r,s){const i=Wn(e);if(i){!n&&(n=[...e.childNodes]);let a=[];for(let c=0;c<n.length;c++){const l=n[c];l.nodeType===8&&l.data.slice(0,2)==="!$"?l.remove():a.push(l)}n=a}for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,u=r!==void 0;if(e=u&&n[0]&&n[0].parentNode||e,o==="string"||o==="number"){if(i||o==="number"&&(t=t.toString(),t===n))return n;if(u){let a=n[0];a&&a.nodeType===3?a.data!==t&&(a.data=t):a=document.createTextNode(t),n=Yn(e,n,r,a)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||o==="boolean"){if(i)return n;n=Yn(e,n,r)}else{if(o==="function")return L(()=>{let a=t();for(;typeof a=="function";)a=a();n=Zr(e,a,n,r)}),()=>n;if(Array.isArray(t)){const a=[],c=n&&Array.isArray(n);if(Wo(a,t,n,s))return L(()=>n=Zr(e,a,n,r,!0)),()=>n;if(i){if(!a.length)return n;if(r===void 0)return n=[...e.childNodes];let l=a[0];if(l.parentNode!==e)return n;const d=[l];for(;(l=l.nextSibling)!==r;)d.push(l);return n=d}if(a.length===0){if(n=Yn(e,n,r),u)return n}else c?n.length===0?bc(e,a,r):Jp(e,n,a):(n&&Yn(e),bc(e,a));n=a}else if(t.nodeType){if(i&&t.parentNode)return n=u?[t]:t;if(Array.isArray(n)){if(u)return n=Yn(e,n,r,t);Yn(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function Wo(e,t,n,r){let s=!1;for(let i=0,o=t.length;i<o;i++){let u=t[i],a=n&&n[e.length],c;if(!(u==null||u===!0||u===!1))if((c=typeof u)=="object"&&u.nodeType)e.push(u);else if(Array.isArray(u))s=Wo(e,u,a)||s;else if(c==="function")if(r){for(;typeof u=="function";)u=u();s=Wo(e,Array.isArray(u)?u:[u],Array.isArray(a)?a:[a])||s}else e.push(u),s=!0;else{const l=String(u);a&&a.nodeType===3&&a.data===l?e.push(a):e.push(document.createTextNode(l))}}return s}function bc(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function Yn(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let i=!1;for(let o=t.length-1;o>=0;o--){const u=t[o];if(s!==u){const a=u.parentNode===e;!i&&!o?a?e.replaceChild(s,u):e.insertBefore(s,n):a&&u.remove()}else i=!0}}else e.insertBefore(s,n);return[s]}function um(){return q.getNextContextId()}const am="http://www.w3.org/2000/svg";function _f(e,t=!1,n=void 0){return t?document.createElementNS(am,e):document.createElement(e,{is:n})}function cm(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,s=Uo();let i,o=!!q.context;return Qe(()=>{o&&(Uo().user=o=!1),i||(i=ff(s,()=>J(()=>e.children)));const u=r();if(u instanceof HTMLHeadElement){const[a,c]=H(!1),l=()=>c(!0);Jt(d=>T(u,()=>a()?d():i(),null)),Ee(l)}else{const a=_f(e.isSVG?"g":"div",e.isSVG),c=t&&a.attachShadow?a.attachShadow({mode:"open"}):a;Object.defineProperty(a,"_$host",{get(){return n.parentNode},configurable:!0}),T(c,i),u.appendChild(a),e.ref&&e.ref(a),Ee(()=>u.removeChild(a))}},void 0,{render:!o}),n}function lm(e,t){const n=J(e);return J(()=>{const r=n();switch(typeof r){case"function":return De(()=>r(t));case"string":const s=Hp.has(r),i=q.context?sm():_f(r,s,De(()=>t.is));return Ni(i,t,s),i}})}function Nt(e){const[,t]=Nn(e,["component"]);return lm(()=>e.component,t)}var xr=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},dm={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},fm=class{#e=dm;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},Tn=new fm;function hm(e){setTimeout(e,0)}var ar=typeof window>"u"||"Deno"in globalThis;function Ue(){}function pm(e,t){return typeof e=="function"?e(t):e}function Go(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ef(e,t){return Math.max(e+(t||0)-Date.now(),0)}function gn(e,t){return typeof e=="function"?e(t):e}function bt(e,t){return typeof e=="function"?e(t):e}function yc(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:i,queryKey:o,stale:u}=e;if(o){if(r){if(t.queryHash!==Uu(o,t.options))return!1}else if(!Yr(t.queryKey,o))return!1}if(n!=="all"){const a=t.isActive();if(n==="active"&&!a||n==="inactive"&&a)return!1}return!(typeof u=="boolean"&&t.isStale()!==u||s&&s!==t.state.fetchStatus||i&&!i(t))}function vc(e,t){const{exact:n,status:r,predicate:s,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(Ct(t.options.mutationKey)!==Ct(i))return!1}else if(!Yr(t.options.mutationKey,i))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function Uu(e,t){return(t?.queryKeyHashFn||Ct)(e)}function Ct(e){return JSON.stringify(e,(t,n)=>jo(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function Yr(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>Yr(e[n],t[n])):!1}var mm=Object.prototype.hasOwnProperty;function kf(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=wc(e)&&wc(t);if(!r&&!(jo(e)&&jo(t)))return t;const i=(r?e:Object.keys(e)).length,o=r?t:Object.keys(t),u=o.length,a=r?new Array(u):{};let c=0;for(let l=0;l<u;l++){const d=r?l:o[l],p=e[d],f=t[d];if(p===f){a[d]=p,(r?l<i:mm.call(e,d))&&c++;continue}if(p===null||f===null||typeof p!="object"||typeof f!="object"){a[d]=f;continue}const h=kf(p,f,n+1);a[d]=h,h===p&&c++}return i===u&&c===i?e:a}function oi(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function wc(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function jo(e){if(!xc(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!xc(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function xc(e){return Object.prototype.toString.call(e)==="[object Object]"}function gm(e){return new Promise(t=>{Tn.setTimeout(t,e)})}function Zo(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?kf(e,t):t}function bm(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function ym(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var zu=Symbol();function Cf(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===zu?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function If(e,t){return typeof e=="function"?e(...t):!!e}function vm(e,t,n){let r=!1,s;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(s??=t(),r||(r=!0,s.aborted?n():s.addEventListener("abort",n,{once:!0})),s)}),e}var wm=class extends xr{#e;#t;#n;constructor(){super(),this.#n=e=>{if(!ar&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},Ku=new wm;function Yo(){let e,t;const n=new Promise((s,i)=>{e=s,t=i});n.status="pending",n.catch(()=>{});function r(s){Object.assign(n,s),delete n.resolve,delete n.reject}return n.resolve=s=>{r({status:"fulfilled",value:s}),e(s)},n.reject=s=>{r({status:"rejected",reason:s}),t(s)},n}function xm(e){let t;if(e.then(n=>(t=n,n),Ue)?.catch(Ue),t!==void 0)return{data:t}}function Sm(e){return e}function _m(e,t,n){if(typeof t!="object"||t===null)return;const r=e.getMutationCache(),s=e.getQueryCache(),i=e.getDefaultOptions().hydrate?.deserializeData??Sm,o=t.mutations||[],u=t.queries||[];o.forEach(({state:a,...c})=>{r.build(e,{...e.getDefaultOptions().hydrate?.mutations,...n?.defaultOptions?.mutations,...c},a)}),u.forEach(({queryKey:a,state:c,queryHash:l,meta:d,promise:p,dehydratedAt:f})=>{const h=p?xm(p):void 0,m=c.data===void 0?h?.data:c.data,g=m===void 0?m:i(m);let y=s.get(l);const w=y?.state.status==="pending",v=y?.state.fetchStatus==="fetching";if(y){const b=h&&f!==void 0&&f>y.state.dataUpdatedAt;if(c.dataUpdatedAt>y.state.dataUpdatedAt||b){const{fetchStatus:x,...E}=c;y.setState({...E,data:g})}}else y=s.build(e,{...e.getDefaultOptions().hydrate?.queries,...n?.defaultOptions?.queries,queryKey:a,queryHash:l,meta:d},{...c,data:g,fetchStatus:"idle",status:g!==void 0?"success":c.status});p&&!w&&!v&&(f===void 0||f>y.state.dataUpdatedAt)&&y.fetch(void 0,{initialPromise:Promise.resolve(p).then(i)}).catch(Ue)})}var Em=hm;function km(){let e=[],t=0,n=u=>{u()},r=u=>{u()},s=Em;const i=u=>{t?e.push(u):s(()=>{n(u)})},o=()=>{const u=e;e=[],u.length&&s(()=>{r(()=>{u.forEach(a=>{n(a)})})})};return{batch:u=>{let a;t++;try{a=u()}finally{t--,t||o()}return a},batchCalls:u=>(...a)=>{i(()=>{u(...a)})},schedule:i,setNotifyFunction:u=>{n=u},setBatchNotifyFunction:u=>{r=u},setScheduler:u=>{s=u}}}var Me=km(),Cm=class extends xr{#e=!0;#t;#n;constructor(){super(),this.#n=e=>{if(!ar&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#n=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},ui=new Cm;function Im(e){return Math.min(1e3*2**e,3e4)}function Af(e){return(e??"online")==="online"?ui.isOnline():!0}var qo=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Rf(e){let t=!1,n=0,r;const s=Yo(),i=()=>s.status!=="pending",o=m=>{if(!i()){const g=new qo(m);p(g),e.onCancel?.(g)}},u=()=>{t=!0},a=()=>{t=!1},c=()=>Ku.isFocused()&&(e.networkMode==="always"||ui.isOnline())&&e.canRun(),l=()=>Af(e.networkMode)&&e.canRun(),d=m=>{i()||(r?.(),s.resolve(m))},p=m=>{i()||(r?.(),s.reject(m))},f=()=>new Promise(m=>{r=g=>{(i()||c())&&m(g)},e.onPause?.()}).then(()=>{r=void 0,i()||e.onContinue?.()}),h=()=>{if(i())return;let m;const g=n===0?e.initialPromise:void 0;try{m=g??e.fn()}catch(y){m=Promise.reject(y)}Promise.resolve(m).then(d).catch(y=>{if(i())return;const w=e.retry??(ar?0:3),v=e.retryDelay??Im,b=typeof v=="function"?v(n,y):v,x=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,y);if(t||!x){p(y);return}n++,e.onFail?.(n,y),gm(b).then(()=>c()?void 0:f()).then(()=>{t?p(y):h()})})};return{promise:s,status:()=>s.status,cancel:o,continue:()=>(r?.(),s),cancelRetry:u,continueRetry:a,canStart:l,start:()=>(l()?h():f().then(h),s)}}var Tf=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Go(this.gcTime)&&(this.#e=Tn.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(ar?1/0:300*1e3))}clearGcTimeout(){this.#e&&(Tn.clearTimeout(this.#e),this.#e=void 0)}},Am=class extends Tf{#e;#t;#n;#r;#s;#o;#u;constructor(e){super(),this.#u=!1,this.#o=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.client,this.#n=this.#r.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=_c(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){if(this.options={...this.#o,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=_c(this.options);t.data!==void 0&&(this.setState(Sc(t.data,t.dataUpdatedAt)),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,t){const n=Zo(this.state.data,e,this.options);return this.#i({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#s?.promise;return this.#s?.cancel(e),t?t.then(Ue).catch(Ue):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>bt(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===zu||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>gn(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Ef(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#s&&(this.#u?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#s?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const u=this.observers.find(a=>a.options.queryFn);u&&this.setOptions(u.options)}const n=new AbortController,r=u=>{Object.defineProperty(u,"signal",{enumerable:!0,get:()=>(this.#u=!0,n.signal)})},s=()=>{const u=Cf(this.options,t),c=(()=>{const l={client:this.#r,queryKey:this.queryKey,meta:this.meta};return r(l),l})();return this.#u=!1,this.options.persister?this.options.persister(u,c,this):u(c)},o=(()=>{const u={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#r,state:this.state,fetchFn:s};return r(u),u})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#s=Rf({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:u=>{u instanceof qo&&u.revert&&this.setState({...this.#t,fetchStatus:"idle"}),n.abort()},onFail:(u,a)=>{this.#i({type:"failed",failureCount:u,error:a})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const u=await this.#s.start();if(u===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(u),this.#n.config.onSuccess?.(u,this),this.#n.config.onSettled?.(u,this.state.error,this),u}catch(u){if(u instanceof qo){if(u.silent)return this.#s.promise;if(u.revert){if(this.state.data===void 0)throw u;return this.state.data}}throw this.#i({type:"error",error:u}),this.#n.config.onError?.(u,this),this.#n.config.onSettled?.(this.state.data,u,this),u}finally{this.scheduleGc()}}#i(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Of(n.data,this.options),fetchMeta:e.meta??null};case"success":const r={...n,...Sc(e.data,e.dataUpdatedAt),dataUpdateCount:n.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?r:void 0,r;case"error":const s=e.error;return{...n,error:s,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:s,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Me.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function Of(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Af(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Sc(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function _c(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Ff=class extends xr{constructor(e,t){super(),this.options=t,this.#e=e,this.#i=null,this.#u=Yo(),this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#n=void 0;#r=void 0;#s;#o;#u;#i;#m;#f;#h;#c;#l;#a;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),Ec(this.#t,this.options)?this.#d():this.updateResult(),this.#v())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ho(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ho(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#w(),this.#x(),this.#t.removeObserver(this)}setOptions(e){const t=this.options,n=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof bt(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#S(),this.#t.setOptions(this.options),t._defaulted&&!oi(this.options,t)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const r=this.hasListeners();r&&kc(this.#t,n,this.options,t)&&this.#d(),this.updateResult(),r&&(this.#t!==n||bt(this.options.enabled,this.#t)!==bt(t.enabled,this.#t)||gn(this.options.staleTime,this.#t)!==gn(t.staleTime,this.#t))&&this.#g();const s=this.#b();r&&(this.#t!==n||bt(this.options.enabled,this.#t)!==bt(t.enabled,this.#t)||s!==this.#a)&&this.#y(s)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return Tm(this,n)&&(this.#r=n,this.#o=this.options,this.#s=this.#t.state),n}getCurrentResult(){return this.#r}trackResult(e,t){return new Proxy(e,{get:(n,r)=>(this.trackProp(r),t?.(r),r==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&this.#u.status==="pending"&&this.#u.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(n,r))})}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#d({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#r))}#d(e){this.#S();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(Ue)),t}#g(){this.#w();const e=gn(this.options.staleTime,this.#t);if(ar||this.#r.isStale||!Go(e))return;const n=Ef(this.#r.dataUpdatedAt,e)+1;this.#c=Tn.setTimeout(()=>{this.#r.isStale||this.updateResult()},n)}#b(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#x(),this.#a=e,!(ar||bt(this.options.enabled,this.#t)===!1||!Go(this.#a)||this.#a===0)&&(this.#l=Tn.setInterval(()=>{(this.options.refetchIntervalInBackground||Ku.isFocused())&&this.#d()},this.#a))}#v(){this.#g(),this.#y(this.#b())}#w(){this.#c&&(Tn.clearTimeout(this.#c),this.#c=void 0)}#x(){this.#l&&(Tn.clearInterval(this.#l),this.#l=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#r,i=this.#s,o=this.#o,a=e!==n?e.state:this.#n,{state:c}=e;let l={...c},d=!1,p;if(t._optimisticResults){const S=this.hasListeners(),_=!S&&Ec(e,t),A=S&&kc(e,n,t,r);(_||A)&&(l={...l,...Of(c.data,e.options)}),t._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:f,errorUpdatedAt:h,status:m}=l;p=l.data;let g=!1;if(t.placeholderData!==void 0&&p===void 0&&m==="pending"){let S;s?.isPlaceholderData&&t.placeholderData===o?.placeholderData?(S=s.data,g=!0):S=typeof t.placeholderData=="function"?t.placeholderData(this.#h?.state.data,this.#h):t.placeholderData,S!==void 0&&(m="success",p=Zo(s?.data,S,t),d=!0)}if(t.select&&p!==void 0&&!g)if(s&&p===i?.data&&t.select===this.#m)p=this.#f;else try{this.#m=t.select,p=t.select(p),p=Zo(s?.data,p,t),this.#f=p,this.#i=null}catch(S){this.#i=S}this.#i&&(f=this.#i,p=this.#f,h=Date.now(),m="error");const y=l.fetchStatus==="fetching",w=m==="pending",v=m==="error",b=w&&y,x=p!==void 0,R={status:m,fetchStatus:l.fetchStatus,isPending:w,isSuccess:m==="success",isError:v,isInitialLoading:b,isLoading:b,data:p,dataUpdatedAt:l.dataUpdatedAt,error:f,errorUpdatedAt:h,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>a.dataUpdateCount||l.errorUpdateCount>a.errorUpdateCount,isFetching:y,isRefetching:y&&!w,isLoadingError:v&&!x,isPaused:l.fetchStatus==="paused",isPlaceholderData:d,isRefetchError:v&&x,isStale:Wu(e,t),refetch:this.refetch,promise:this.#u,isEnabled:bt(t.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const S=R.data!==void 0,_=R.status==="error"&&!S,A=z=>{_?z.reject(R.error):S&&z.resolve(R.data)},F=()=>{const z=this.#u=R.promise=Yo();A(z)},D=this.#u;switch(D.status){case"pending":e.queryHash===n.queryHash&&A(D);break;case"fulfilled":(_||R.data!==D.value)&&F();break;case"rejected":(!_||R.error!==D.reason)&&F();break}}return R}updateResult(){const e=this.#r,t=this.createResult(this.#t,this.options);if(this.#s=this.#t.state,this.#o=this.options,this.#s.data!==void 0&&(this.#h=this.#t),oi(t,e))return;this.#r=t;const n=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,s=typeof r=="function"?r():r;if(s==="all"||!s&&!this.#p.size)return!0;const i=new Set(s??this.#p);return this.options.throwOnError&&i.add("error"),Object.keys(this.#r).some(o=>{const u=o;return this.#r[u]!==e[u]&&i.has(u)})};this.#_({listeners:n()})}#S(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#n=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#v()}#_(e){Me.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#r)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function Rm(e,t){return bt(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Ec(e,t){return Rm(e,t)||e.state.data!==void 0&&Ho(e,t,t.refetchOnMount)}function Ho(e,t,n){if(bt(t.enabled,e)!==!1&&gn(t.staleTime,e)!=="static"){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&Wu(e,t)}return!1}function kc(e,t,n,r){return(e!==t||bt(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&Wu(e,n)}function Wu(e,t){return bt(t.enabled,e)!==!1&&e.isStaleByTime(gn(t.staleTime,e))}function Tm(e,t){return!oi(e.getCurrentResult(),t)}function Cc(e){return{onFetch:(t,n)=>{const r=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let u={pages:[],pageParams:[]},a=0;const c=async()=>{let l=!1;const d=h=>{vm(h,()=>t.signal,()=>l=!0)},p=Cf(t.options,t.fetchOptions),f=async(h,m,g)=>{if(l)return Promise.reject();if(m==null&&h.pages.length)return Promise.resolve(h);const w=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:m,direction:g?"backward":"forward",meta:t.options.meta};return d(E),E})(),v=await p(w),{maxPages:b}=t.options,x=g?ym:bm;return{pages:x(h.pages,v,b),pageParams:x(h.pageParams,m,b)}};if(s&&i.length){const h=s==="backward",m=h?Om:Ic,g={pages:i,pageParams:o},y=m(r,g);u=await f(g,y,h)}else{const h=e??i.length;do{const m=a===0?o[0]??r.initialPageParam:Ic(r,u);if(a>0&&m==null)break;u=await f(u,m),a++}while(a<h)}return u};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=c}}}function Ic(e,{pages:t,pageParams:n}){const r=t.length-1;return t.length>0?e.getNextPageParam(t[r],t,n[r],n):void 0}function Om(e,{pages:t,pageParams:n}){return t.length>0?e.getPreviousPageParam?.(t[0],t,n[0],n):void 0}var Fm=class extends Tf{#e;#t;#n;#r;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#n=e.mutationCache,this.#t=[],this.state=e.state||Df(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#n.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#n.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#s({type:"continue"})},n={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#r=Rf({fn:()=>this.options.mutationFn?this.options.mutationFn(e,n):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#s({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#s({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#n.canRun(this)});const r=this.state.status==="pending",s=!this.#r.canStart();try{if(r)t();else{this.#s({type:"pending",variables:e,isPaused:s}),this.#n.config.onMutate&&await this.#n.config.onMutate(e,this,n);const o=await this.options.onMutate?.(e,n);o!==this.state.context&&this.#s({type:"pending",context:o,variables:e,isPaused:s})}const i=await this.#r.start();return await this.#n.config.onSuccess?.(i,e,this.state.context,this,n),await this.options.onSuccess?.(i,e,this.state.context,n),await this.#n.config.onSettled?.(i,null,this.state.variables,this.state.context,this,n),await this.options.onSettled?.(i,null,e,this.state.context,n),this.#s({type:"success",data:i}),i}catch(i){try{await this.#n.config.onError?.(i,e,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onError?.(i,e,this.state.context,n)}catch(o){Promise.reject(o)}try{await this.#n.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,n)}catch(o){Promise.reject(o)}try{await this.options.onSettled?.(void 0,i,e,this.state.context,n)}catch(o){Promise.reject(o)}throw this.#s({type:"error",error:i}),i}finally{this.#n.runNext(this)}}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Me.batch(()=>{this.#t.forEach(n=>{n.onMutationUpdate(e)}),this.#n.notify({mutation:this,type:"updated",action:e})})}};function Df(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Dm=class extends xr{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#n=0}#e;#t;#n;build(e,t,n){const r=new Fm({client:e,mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){this.#e.add(e);const t=Ps(e);if(typeof t=="string"){const n=this.#t.get(t);n?n.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Ps(e);if(typeof t=="string"){const n=this.#t.get(t);if(n)if(n.length>1){const r=n.indexOf(e);r!==-1&&n.splice(r,1)}else n[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Ps(e);if(typeof t=="string"){const r=this.#t.get(t)?.find(s=>s.state.status==="pending");return!r||r===e}else return!0}runNext(e){const t=Ps(e);return typeof t=="string"?this.#t.get(t)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Me.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(n=>vc(t,n))}findAll(e={}){return this.getAll().filter(t=>vc(e,t))}notify(e){Me.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Me.batch(()=>Promise.all(e.map(t=>t.continue().catch(Ue))))}};function Ps(e){return e.options.scope?.id}var Nm=class extends xr{#e;#t=void 0;#n;#r;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),oi(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),n?.mutationKey&&this.options.mutationKey&&Ct(n.mutationKey)!==Ct(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(t){this.#s(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#o()}mutate(t,n){return this.#r=n,this.#n?.removeObserver(this),this.#n=this.#e.getMutationCache().build(this.#e,this.options),this.#n.addObserver(this),this.#n.execute(t)}#s(){const t=this.#n?.state??Df();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){Me.batch(()=>{if(this.#r&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};if(t?.type==="success"){try{this.#r.onSuccess?.(t.data,n,r,s)}catch(i){Promise.reject(i)}try{this.#r.onSettled?.(t.data,null,n,r,s)}catch(i){Promise.reject(i)}}else if(t?.type==="error"){try{this.#r.onError?.(t.error,n,r,s)}catch(i){Promise.reject(i)}try{this.#r.onSettled?.(void 0,t.error,n,r,s)}catch(i){Promise.reject(i)}}}this.listeners.forEach(n=>{n(this.#t)})})}},Pm=class extends xr{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??Uu(r,t);let i=this.get(s);return i||(i=new Am({client:e,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Me.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>yc(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>yc(e,n)):t}notify(e){Me.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Me.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Me.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Lm=class{#e;#t;#n;#r;#s;#o;#u;#i;constructor(t={}){this.#e=t.queryCache||new Pm,this.#t=t.mutationCache||new Dm,this.#n=t.defaultOptions||{},this.#r=new Map,this.#s=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#u=Ku.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=ui.subscribe(async t=>{t&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#u?.(),this.#u=void 0,this.#i?.(),this.#i=void 0)}isFetching(t){return this.#e.findAll({...t,fetchStatus:"fetching"}).length}isMutating(t){return this.#t.findAll({...t,status:"pending"}).length}getQueryData(t){const n=this.defaultQueryOptions({queryKey:t});return this.#e.get(n.queryHash)?.state.data}ensureQueryData(t){const n=this.defaultQueryOptions(t),r=this.#e.build(this,n),s=r.state.data;return s===void 0?this.fetchQuery(t):(t.revalidateIfStale&&r.isStaleByTime(gn(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(s))}getQueriesData(t){return this.#e.findAll(t).map(({queryKey:n,state:r})=>{const s=r.data;return[n,s]})}setQueryData(t,n,r){const s=this.defaultQueryOptions({queryKey:t}),o=this.#e.get(s.queryHash)?.state.data,u=pm(n,o);if(u!==void 0)return this.#e.build(this,s).setData(u,{...r,manual:!0})}setQueriesData(t,n,r){return Me.batch(()=>this.#e.findAll(t).map(({queryKey:s})=>[s,this.setQueryData(s,n,r)]))}getQueryState(t){const n=this.defaultQueryOptions({queryKey:t});return this.#e.get(n.queryHash)?.state}removeQueries(t){const n=this.#e;Me.batch(()=>{n.findAll(t).forEach(r=>{n.remove(r)})})}resetQueries(t,n){const r=this.#e;return Me.batch(()=>(r.findAll(t).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...t},n)))}cancelQueries(t,n={}){const r={revert:!0,...n},s=Me.batch(()=>this.#e.findAll(t).map(i=>i.cancel(r)));return Promise.all(s).then(Ue).catch(Ue)}invalidateQueries(t,n={}){return Me.batch(()=>(this.#e.findAll(t).forEach(r=>{r.invalidate()}),t?.refetchType==="none"?Promise.resolve():this.refetchQueries({...t,type:t?.refetchType??t?.type??"active"},n)))}refetchQueries(t,n={}){const r={...n,cancelRefetch:n.cancelRefetch??!0},s=Me.batch(()=>this.#e.findAll(t).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let o=i.fetch(void 0,r);return r.throwOnError||(o=o.catch(Ue)),i.state.fetchStatus==="paused"?Promise.resolve():o}));return Promise.all(s).then(Ue)}fetchQuery(t){const n=this.defaultQueryOptions(t);n.retry===void 0&&(n.retry=!1);const r=this.#e.build(this,n);return r.isStaleByTime(gn(n.staleTime,r))?r.fetch(n):Promise.resolve(r.state.data)}prefetchQuery(t){return this.fetchQuery(t).then(Ue).catch(Ue)}fetchInfiniteQuery(t){return t.behavior=Cc(t.pages),this.fetchQuery(t)}prefetchInfiniteQuery(t){return this.fetchInfiniteQuery(t).then(Ue).catch(Ue)}ensureInfiniteQueryData(t){return t.behavior=Cc(t.pages),this.ensureQueryData(t)}resumePausedMutations(){return ui.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#n}setDefaultOptions(t){this.#n=t}setQueryDefaults(t,n){this.#r.set(Ct(t),{queryKey:t,defaultOptions:n})}getQueryDefaults(t){const n=[...this.#r.values()],r={};return n.forEach(s=>{Yr(t,s.queryKey)&&Object.assign(r,s.defaultOptions)}),r}setMutationDefaults(t,n){this.#s.set(Ct(t),{mutationKey:t,defaultOptions:n})}getMutationDefaults(t){const n=[...this.#s.values()],r={};return n.forEach(s=>{Yr(t,s.mutationKey)&&Object.assign(r,s.defaultOptions)}),r}defaultQueryOptions(t){if(t._defaulted)return t;const n={...this.#n.queries,...this.getQueryDefaults(t.queryKey),...t,_defaulted:!0};return n.queryHash||(n.queryHash=Uu(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===zu&&(n.enabled=!1),n}defaultMutationOptions(t){return t?._defaulted?t:{...this.#n.mutations,...t?.mutationKey&&this.getMutationDefaults(t.mutationKey),...t,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}};const Xo=Symbol("store-raw"),nr=Symbol("store-node"),Zt=Symbol("store-has"),Nf=Symbol("store-self");function Pf(e){let t=e[Rt];if(!t&&(Object.defineProperty(e,Rt,{value:t=new Proxy(e,$m)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,i=n.length;s<i;s++){const o=n[s];r[o].get&&Object.defineProperty(e,o,{enumerable:r[o].enumerable,get:r[o].get.bind(t)})}}return t}function vn(e){let t;return e!=null&&typeof e=="object"&&(e[Rt]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function Bn(e,t=new Set){let n,r,s,i;if(n=e!=null&&e[Xo])return n;if(!vn(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let o=0,u=e.length;o<u;o++)s=e[o],(r=Bn(s,t))!==s&&(e[o]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const o=Object.keys(e),u=Object.getOwnPropertyDescriptors(e);for(let a=0,c=o.length;a<c;a++)i=o[a],!u[i].get&&(s=e[i],(r=Bn(s,t))!==s&&(e[i]=r))}return e}function ai(e,t){let n=e[t];return n||Object.defineProperty(e,t,{value:n=Object.create(null)}),n}function qr(e,t,n){if(e[t])return e[t];const[r,s]=H(n,{equals:!1,internal:!0});return r.$=s,e[t]=r}function Mm(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===Rt||t===nr||(delete n.value,delete n.writable,n.get=()=>e[Rt][t]),n}function Lf(e){ri()&&qr(ai(e,nr),Nf)()}function Bm(e){return Lf(e),Reflect.ownKeys(e)}const $m={get(e,t,n){if(t===Xo)return e;if(t===Rt)return n;if(t===Vo)return Lf(e),n;const r=ai(e,nr),s=r[t];let i=s?s():e[t];if(t===nr||t===Zt||t==="__proto__")return i;if(!s){const o=Object.getOwnPropertyDescriptor(e,t);ri()&&(typeof i!="function"||e.hasOwnProperty(t))&&!(o&&o.get)&&(i=qr(r,t,i)())}return vn(i)?Pf(i):i},has(e,t){return t===Xo||t===Rt||t===Vo||t===nr||t===Zt||t==="__proto__"?!0:(ri()&&qr(ai(e,Zt),t)(),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:Bm,getOwnPropertyDescriptor:Mm};function gt(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],i=e.length;n===void 0?(delete e[t],e[Zt]&&e[Zt][t]&&s!==void 0&&e[Zt][t].$()):(e[t]=n,e[Zt]&&e[Zt][t]&&s===void 0&&e[Zt][t].$());let o=ai(e,nr),u;if((u=qr(o,t,s))&&u.$(()=>n),Array.isArray(e)&&e.length!==i){for(let a=e.length;a<i;a++)(u=o[a])&&u.$();(u=qr(o,"length",i))&&u.$(e.length)}(u=o[Nf])&&u.$()}function Mf(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];gt(e,s,t[s])}}function Vm(e,t){if(typeof t=="function"&&(t=t(e)),t=Bn(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&gt(e,n,s)}gt(e,"length",r)}else Mf(e,t)}function Nr(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const o=typeof r,u=Array.isArray(e);if(Array.isArray(r)){for(let a=0;a<r.length;a++)Nr(e,[r[a]].concat(t),n);return}else if(u&&o==="function"){for(let a=0;a<e.length;a++)r(e[a],a)&&Nr(e,[a].concat(t),n);return}else if(u&&o==="object"){const{from:a=0,to:c=e.length-1,by:l=1}=r;for(let d=a;d<=c;d+=l)Nr(e,[d].concat(t),n);return}else if(t.length>1){Nr(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let i=t[0];typeof i=="function"&&(i=i(s,n),i===s)||r===void 0&&i==null||(i=Bn(i),r===void 0||vn(s)&&vn(i)&&!Array.isArray(i)?Mf(s,i):gt(e,r,i))}function vs(...[e,t]){const n=Bn(e||{}),r=Array.isArray(n),s=Pf(n);function i(...o){tr(()=>{r&&o.length===1?Vm(n,o[0]):Nr(n,o)})}return[s,i]}const Jo=Symbol("store-root");function Xn(e,t,n,r,s){const i=t[n];if(e===i)return;const o=Array.isArray(e);if(n!==Jo&&(!vn(e)||!vn(i)||o!==Array.isArray(i)||s&&e[s]!==i[s])){gt(t,n,e);return}if(o){if(e.length&&i.length&&(!r||s&&e[0]&&e[0][s]!=null)){let c,l,d,p,f,h,m,g;for(d=0,p=Math.min(i.length,e.length);d<p&&(i[d]===e[d]||s&&i[d]&&e[d]&&i[d][s]&&i[d][s]===e[d][s]);d++)Xn(e[d],i,d,r,s);const y=new Array(e.length),w=new Map;for(p=i.length-1,f=e.length-1;p>=d&&f>=d&&(i[p]===e[f]||s&&i[p]&&e[f]&&i[p][s]&&i[p][s]===e[f][s]);p--,f--)y[f]=i[p];if(d>f||d>p){for(l=d;l<=f;l++)gt(i,l,e[l]);for(;l<e.length;l++)gt(i,l,y[l]),Xn(e[l],i,l,r,s);i.length>e.length&&gt(i,"length",e.length);return}for(m=new Array(f+1),l=f;l>=d;l--)h=e[l],g=s&&h?h[s]:h,c=w.get(g),m[l]=c===void 0?-1:c,w.set(g,l);for(c=d;c<=p;c++)h=i[c],g=s&&h?h[s]:h,l=w.get(g),l!==void 0&&l!==-1&&(y[l]=i[c],l=m[l],w.set(g,l));for(l=d;l<e.length;l++)l in y?(gt(i,l,y[l]),Xn(e[l],i,l,r,s)):gt(i,l,e[l])}else for(let c=0,l=e.length;c<l;c++)Xn(e[c],i,c,r,s);i.length>e.length&&gt(i,"length",e.length);return}const u=Object.keys(e);for(let c=0,l=u.length;c<l;c++)Xn(e[u[c]],i,u[c],r,s);const a=Object.keys(i);for(let c=0,l=a.length;c<l;c++)e[a[c]]===void 0&&gt(i,a[c],void 0)}function Gu(e,t={}){const{merge:n,key:r="id"}=t,s=Bn(e);return i=>{if(!vn(i)||!vn(s))return s;const o=Xn(s,{[Jo]:i},Jo,n,r);return o===void 0?i:o}}var Bf=Sn(void 0),$f=e=>{if(e)return e;const t=nn(Bf);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t()},Um=e=>(L(t=>(t?.(),e.client.mount(),e.client.unmount.bind(e.client))),Ee(()=>e.client.unmount()),k(Bf.Provider,{value:()=>e.client,get children(){return e.children}})),Vf=Sn(()=>!1),zm=()=>nn(Vf);Vf.Provider;function Km(e,t,n,r){if(n===!1)return t;if(typeof n=="function"){const o=n(e.data,t.data);return{...t,data:o}}let s=t.data;if(e.data===void 0)try{s=structuredClone(s)}catch{}const i=Gu(s,{key:n})(e.data);return{...t,data:i}}var Wm=(e,t)=>t;function Gm(e,t,n){const r=J(()=>$f(n?.())),s=zm(),i=J(()=>{const b=r().defaultQueryOptions(e());return b._optimisticResults=s()?"isRestoring":"optimistic",b.structuralSharing=!1,b}),o=i(),[u,a]=H(new t(r(),i()));let c=u().getOptimisticResult(i());const[l,d]=vs(c),p=()=>u().subscribe(x=>{c=x,queueMicrotask(()=>{m&&w()})});function f(b){const x=u().options,E=x.reconcile;d(R=>Km(R,b,E===void 0?!1:E,x.queryHash))}function h(){return[()=>l,b=>{const x=Bn(l);if(typeof b=="function"&&(b=b(x)),b?.hydrationData){const{hydrationData:E,...R}=b;b=R}f(b)}]}let m=null,g=null;const[y,{refetch:w}]=Jn(()=>{const b=u();return new Promise((x,E)=>{if(g=x,!m&&!s()&&(m=p()),b.updateResult(),c.isError&&!c.isFetching&&!s()&&If(b.options.throwOnError,[c.error,b.getCurrentQuery()]))return f(c),E(c.error);if(!c.isLoading)return g=null,x(Wm(b.getCurrentQuery(),c));f(c)})},{storage:h,get deferStream(){return e().deferStream},onHydrated(b,x){if(x.value&&"hydrationData"in x.value&&_m(r(),{queries:[{...x.value.hydrationData}]}),m)return;const E={...o};(o.staleTime||!o.initialData)&&x.value&&(E.refetchOnMount=!1),u().setOptions(E),f(u().getOptimisticResult(E)),m=p()}});pn(Qt(r,b=>{m&&m();const x=new t(b,i());m=p(),a(x)},{defer:!0})),pn(Qt(s,b=>{b||w()},{defer:!0})),Ee(()=>{m&&(m(),m=null),g&&(g(c),g=null)}),pn(Qt([u,i],([b,x])=>{b.setOptions(x),f(b.getOptimisticResult(x)),w()},{defer:!0}));const v={get(b,x){return x==="data"?l.data!==void 0?y.latest?.data:y()?.data:Reflect.get(b,x)}};return new Proxy(l,v)}function jm(e,t){return Gm(J(()=>e()),Ff,t)}function Qo(e,t){const n=J(()=>$f(t?.())),r=new Nm(n(),e()),s=(a,c)=>{r.mutate(a,c).catch(Ue)},[i,o]=vs({...r.getCurrentResult(),mutate:s,mutateAsync:r.getCurrentResult().mutate});pn(()=>{r.setOptions(e())}),pn(Qt(()=>i.status,()=>{if(i.isError&&If(r.options.throwOnError,[i.error]))throw i.error}));const u=r.subscribe(a=>{o({...a,mutate:s,mutateAsync:a.mutate})});return Ee(u),i}var Zm=class extends Lm{constructor(e={}){super(e)}};const eu=new WeakMap,Ym=new WeakMap,ci={current:[]};let oo=!1,Vr=0;const Pr=new Set,Ls=new Map;function Uf(e){for(const t of e){if(ci.current.includes(t))continue;ci.current.push(t),t.recompute();const n=Ym.get(t);if(n)for(const r of n){const s=eu.get(r);s?.length&&Uf(s)}}}function qm(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function Hm(e){const t={prevVal:e.prevState,currentVal:e.state};for(const n of e.listeners)n(t)}function zf(e){if(Vr>0&&!Ls.has(e)&&Ls.set(e,e.prevState),Pr.add(e),!(Vr>0)&&!oo)try{for(oo=!0;Pr.size>0;){const t=Array.from(Pr);Pr.clear();for(const n of t){const r=Ls.get(n)??n.prevState;n.prevState=r,qm(n)}for(const n of t){const r=eu.get(n);r&&(ci.current.push(n),Uf(r))}for(const n of t){const r=eu.get(n);if(r)for(const s of r)Hm(s)}}}finally{oo=!1,ci.current=[],Ls.clear()}}function Xm(e){Vr++;try{e()}finally{if(Vr--,Vr===0){const t=Pr.values().next().value;t&&zf(t)}}}function Jm(e){return typeof e=="function"}class Qm{constructor(t,n){this.listeners=new Set,this.subscribe=r=>{var s,i;this.listeners.add(r);const o=(i=(s=this.options)==null?void 0:s.onSubscribe)==null?void 0:i.call(s,r,this);return()=>{this.listeners.delete(r),o?.()}},this.prevState=t,this.state=t,this.options=n}setState(t){var n,r,s;this.prevState=this.state,(n=this.options)!=null&&n.updateFn?this.state=this.options.updateFn(this.prevState)(t):Jm(t)?this.state=t(this.prevState):this.state=t,(s=(r=this.options)==null?void 0:r.onUpdate)==null||s.call(r),zf(this)}}const bn="__TSR_index",Ac="popstate",Rc="beforeunload";function eg(e){let t=e.getLocation();const n=new Set,r=o=>{t=e.getLocation(),n.forEach(u=>u({location:t,action:o}))},s=o=>{e.notifyOnIndexChange??!0?r(o):t=e.getLocation()},i=async({task:o,navigateOpts:u,...a})=>{if(u?.ignoreBlocker??!1){o();return}const l=e.getBlockers?.()??[],d=a.type==="PUSH"||a.type==="REPLACE";if(typeof document<"u"&&l.length&&d)for(const p of l){const f=li(a.path,a.state);if(await p.blockerFn({currentLocation:t,nextLocation:f,action:a.type})){e.onBlocked?.();return}}o()};return{get location(){return t},get length(){return e.getLength()},subscribers:n,subscribe:o=>(n.add(o),()=>{n.delete(o)}),push:(o,u,a)=>{const c=t.state[bn];u=Tc(c+1,u),i({task:()=>{e.pushState(o,u),r({type:"PUSH"})},navigateOpts:a,type:"PUSH",path:o,state:u})},replace:(o,u,a)=>{const c=t.state[bn];u=Tc(c,u),i({task:()=>{e.replaceState(o,u),r({type:"REPLACE"})},navigateOpts:a,type:"REPLACE",path:o,state:u})},go:(o,u)=>{i({task:()=>{e.go(o),s({type:"GO",index:o})},navigateOpts:u,type:"GO"})},back:o=>{i({task:()=>{e.back(o?.ignoreBlocker??!1),s({type:"BACK"})},navigateOpts:o,type:"BACK"})},forward:o=>{i({task:()=>{e.forward(o?.ignoreBlocker??!1),s({type:"FORWARD"})},navigateOpts:o,type:"FORWARD"})},canGoBack:()=>t.state[bn]!==0,createHref:o=>e.createHref(o),block:o=>{if(!e.setBlockers)return()=>{};const u=e.getBlockers?.()??[];return e.setBlockers([...u,o]),()=>{const a=e.getBlockers?.()??[];e.setBlockers?.(a.filter(c=>c!==o))}},flush:()=>e.flush?.(),destroy:()=>e.destroy?.(),notify:r}}function Tc(e,t){t||(t={});const n=ju();return{...t,key:n,__TSR_key:n,[bn]:e}}function tg(e){const t=typeof document<"u"?window:void 0,n=t.history.pushState,r=t.history.replaceState;let s=[];const i=()=>s,o=S=>s=S,u=(S=>S),a=(()=>li(`${t.location.pathname}${t.location.search}${t.location.hash}`,t.history.state));if(!t.history.state?.__TSR_key&&!t.history.state?.key){const S=ju();t.history.replaceState({[bn]:0,key:S,__TSR_key:S},"")}let c=a(),l,d=!1,p=!1,f=!1,h=!1;const m=()=>c;let g,y;const w=()=>{g&&(R._ignoreSubscribers=!0,(g.isPush?t.history.pushState:t.history.replaceState)(g.state,"",g.href),R._ignoreSubscribers=!1,g=void 0,y=void 0,l=void 0)},v=(S,_,A)=>{const F=u(_);y||(l=c),c=li(_,A),g={href:F,state:A,isPush:g?.isPush||S==="push"},y||(y=Promise.resolve().then(()=>w()))},b=S=>{c=a(),R.notify({type:S})},x=async()=>{if(p){p=!1;return}const S=a(),_=S.state[bn]-c.state[bn],A=_===1,F=_===-1,D=!A&&!F||d;d=!1;const z=D?"GO":F?"BACK":"FORWARD",K=D?{type:"GO",index:_}:{type:F?"BACK":"FORWARD"};if(f)f=!1;else{const Z=i();if(typeof document<"u"&&Z.length){for(const se of Z)if(await se.blockerFn({currentLocation:c,nextLocation:S,action:z})){p=!0,t.history.go(1),R.notify(K);return}}}c=a(),R.notify(K)},E=S=>{if(h){h=!1;return}let _=!1;const A=i();if(typeof document<"u"&&A.length)for(const F of A){const D=F.enableBeforeUnload??!0;if(D===!0){_=!0;break}if(typeof D=="function"&&D()===!0){_=!0;break}}if(_)return S.preventDefault(),S.returnValue=""},R=eg({getLocation:m,getLength:()=>t.history.length,pushState:(S,_)=>v("push",S,_),replaceState:(S,_)=>v("replace",S,_),back:S=>(S&&(f=!0),h=!0,t.history.back()),forward:S=>{S&&(f=!0),h=!0,t.history.forward()},go:S=>{d=!0,t.history.go(S)},createHref:S=>u(S),flush:w,destroy:()=>{t.history.pushState=n,t.history.replaceState=r,t.removeEventListener(Rc,E,{capture:!0}),t.removeEventListener(Ac,x)},onBlocked:()=>{l&&c!==l&&(c=l)},getBlockers:i,setBlockers:o,notifyOnIndexChange:!1});return t.addEventListener(Rc,E,{capture:!0}),t.addEventListener(Ac,x),t.history.pushState=function(...S){const _=n.apply(t.history,S);return R._ignoreSubscribers||b("PUSH"),_},t.history.replaceState=function(...S){const _=r.apply(t.history,S);return R._ignoreSubscribers||b("REPLACE"),_},R}function ng(e){let t=e.replace(/[\x00-\x1f\x7f]/g,"");return t.startsWith("//")&&(t="/"+t.replace(/^\/+/,"")),t}function li(e,t){const n=ng(e),r=n.indexOf("#"),s=n.indexOf("?"),i=ju();return{href:n,pathname:n.substring(0,r>0?s>0?Math.min(r,s):r:s>0?s:n.length),hash:r>-1?n.substring(r):"",search:s>-1?n.slice(s,r===-1?void 0:r):"",state:t||{[bn]:0,key:i,__TSR_key:i}}}function ju(){return(Math.random()+1).toString(36).substring(7)}const rg=!1;function Ur(e){let t;return Xm(()=>{t=e()}),t}function Hr(e){return e[e.length-1]}function sg(e){return typeof e=="function"}function cn(e,t){return sg(e)?e(t):e}const ig=Object.prototype.hasOwnProperty,Oc=Object.prototype.propertyIsEnumerable;function mt(e,t,n=0){if(e===t)return e;if(n>500)return t;const r=t,s=Nc(e)&&Nc(r);if(!s&&!(di(e)&&di(r)))return r;const i=s?e:Fc(e);if(!i)return r;const o=s?r:Fc(r);if(!o)return r;const u=i.length,a=o.length,c=s?new Array(a):{};let l=0;for(let d=0;d<a;d++){const p=s?d:o[d],f=e[p],h=r[p];if(f===h){c[p]=f,(s?d<u:ig.call(e,p))&&l++;continue}if(f===null||h===null||typeof f!="object"||typeof h!="object"){c[p]=h;continue}const m=mt(f,h,n+1);c[p]=m,m===f&&l++}return u===a&&l===u?e:c}function Fc(e){const t=Object.getOwnPropertyNames(e);for(const s of t)if(!Oc.call(e,s))return!1;const n=Object.getOwnPropertySymbols(e);if(n.length===0)return t;const r=t;for(const s of n){if(!Oc.call(e,s))return!1;r.push(s)}return r}function di(e){if(!Dc(e))return!1;const t=e.constructor;if(typeof t>"u")return!0;const n=t.prototype;return!(!Dc(n)||!n.hasOwnProperty("isPrototypeOf"))}function Dc(e){return Object.prototype.toString.call(e)==="[object Object]"}function Nc(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Pn(e,t,n){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!Pn(e[r],t[r],n))return!1;return!0}if(di(e)&&di(t)){const r=n?.ignoreUndefined??!0;if(n?.partial){for(const o in t)if((!r||t[o]!==void 0)&&!Pn(e[o],t[o],n))return!1;return!0}let s=0;if(!r)s=Object.keys(e).length;else for(const o in e)e[o]!==void 0&&s++;let i=0;for(const o in t)if((!r||t[o]!==void 0)&&(i++,i>s||!Pn(e[o],t[o],n)))return!1;return s===i}return!1}function cr(e){let t,n;const r=new Promise((s,i)=>{t=s,n=i});return r.status="pending",r.resolve=s=>{r.status="resolved",r.value=s,t(s),e?.(s)},r.reject=s=>{r.status="rejected",n(s)},r}function rr(e){return!!(e&&typeof e=="object"&&typeof e.then=="function")}function og(e){return e.replace(/[\x00-\x1f\x7f]/g,"")}function Pc(e){let t;try{t=decodeURI(e)}catch{t=e.replaceAll(/%[0-9A-F]{2}/gi,n=>{try{return decodeURI(n)}catch{return n}})}return og(t)}const Kf=["http:","https:","mailto:","tel:"];function fi(e){if(!e)return!1;try{const t=new URL(e);return!Kf.includes(t.protocol)}catch{return!1}}function Ir(e){if(!e)return{path:e,handledProtocolRelativeURL:!1};if(!/[%\\\x00-\x1f\x7f]/.test(e)&&!e.startsWith("//"))return{path:e,handledProtocolRelativeURL:!1};const t=/%25|%5C/gi;let n=0,r="",s;for(;(s=t.exec(e))!==null;)r+=Pc(e.slice(n,s.index))+s[0],n=t.lastIndex;r=r+Pc(n?e.slice(n):e);let i=!1;return r.startsWith("//")&&(i=!0,r="/"+r.replace(/^\/+/,"")),{path:r,handledProtocolRelativeURL:i}}function ug(e){return/\s|[^\u0000-\u007F]/.test(e)?e.replace(/\s|[^\u0000-\u007F]/gu,encodeURIComponent):e}var ag="Invariant failed";function $n(e,t){if(!e)throw new Error(ag)}function hi(e){const t=new Map;let n,r;const s=i=>{i.next&&(i.prev?(i.prev.next=i.next,i.next.prev=i.prev,i.next=void 0,r&&(r.next=i,i.prev=r)):(i.next.prev=void 0,n=i.next,i.next=void 0,r&&(i.prev=r,r.next=i)),r=i)};return{get(i){const o=t.get(i);if(o)return s(o),o.value},set(i,o){if(t.size>=e&&n){const a=n;t.delete(a.key),a.next&&(n=a.next,a.next.prev=void 0),a===r&&(r=void 0)}const u=t.get(i);if(u)u.value=o,s(u);else{const a={key:i,value:o,prev:r};r&&(r.next=a),r=a,n||(n=a),t.set(i,a)}},clear(){t.clear(),n=void 0,r=void 0}}}const lr=0,Vn=1,Un=2,Xr=3,On=4,Wf=5;function cg(e){const t=e.indexOf("{");if(t===-1)return null;const n=e.indexOf("}",t);return n===-1||t+1>=e.length?null:[t,n]}function Zu(e,t,n=new Uint16Array(6)){const r=e.indexOf("/",t),s=r===-1?e.length:r,i=e.substring(t,s);if(!i||!i.includes("$"))return n[0]=lr,n[1]=t,n[2]=t,n[3]=s,n[4]=s,n[5]=s,n;if(i==="$"){const u=e.length;return n[0]=Un,n[1]=t,n[2]=t,n[3]=u,n[4]=u,n[5]=u,n}if(i.charCodeAt(0)===36)return n[0]=Vn,n[1]=t,n[2]=t+1,n[3]=s,n[4]=s,n[5]=s,n;const o=cg(i);if(o){const[u,a]=o,c=i.charCodeAt(u+1);if(c===45){if(u+2<i.length&&i.charCodeAt(u+2)===36){const l=u+3,d=a;if(l<d)return n[0]=Xr,n[1]=t+u,n[2]=t+l,n[3]=t+d,n[4]=t+a+1,n[5]=s,n}}else if(c===36){const l=u+1,d=u+2;return d===a?(n[0]=Un,n[1]=t+u,n[2]=t+l,n[3]=t+d,n[4]=t+a+1,n[5]=e.length,n):(n[0]=Vn,n[1]=t+u,n[2]=t+d,n[3]=t+a,n[4]=t+a+1,n[5]=s,n)}}return n[0]=lr,n[1]=t,n[2]=t,n[3]=s,n[4]=s,n[5]=s,n}function Pi(e,t,n,r,s,i,o){o?.(n);let u=r;{const a=n.fullPath??n.from,c=a.length,l=n.options?.caseSensitive??e,d=!!(n.options?.params?.parse&&n.options?.skipRouteOnParseError?.params);for(;u<c;){const f=Zu(a,u,t);let h;const m=u,g=f[5];switch(u=g+1,i++,f[0]){case lr:{const w=a.substring(f[2],f[3]);if(l){const v=s.static?.get(w);if(v)h=v;else{s.static??=new Map;const b=Fn(n.fullPath??n.from);b.parent=s,b.depth=i,h=b,s.static.set(w,b)}}else{const v=w.toLowerCase(),b=s.staticInsensitive?.get(v);if(b)h=b;else{s.staticInsensitive??=new Map;const x=Fn(n.fullPath??n.from);x.parent=s,x.depth=i,h=x,s.staticInsensitive.set(v,x)}}break}case Vn:{const w=a.substring(m,f[1]),v=a.substring(f[4],g),b=l&&!!(w||v),x=w?b?w:w.toLowerCase():void 0,E=v?b?v:v.toLowerCase():void 0,R=!d&&s.dynamic?.find(S=>!S.skipOnParamError&&S.caseSensitive===b&&S.prefix===x&&S.suffix===E);if(R)h=R;else{const S=ao(Vn,n.fullPath??n.from,b,x,E);h=S,S.depth=i,S.parent=s,s.dynamic??=[],s.dynamic.push(S)}break}case Xr:{const w=a.substring(m,f[1]),v=a.substring(f[4],g),b=l&&!!(w||v),x=w?b?w:w.toLowerCase():void 0,E=v?b?v:v.toLowerCase():void 0,R=!d&&s.optional?.find(S=>!S.skipOnParamError&&S.caseSensitive===b&&S.prefix===x&&S.suffix===E);if(R)h=R;else{const S=ao(Xr,n.fullPath??n.from,b,x,E);h=S,S.parent=s,S.depth=i,s.optional??=[],s.optional.push(S)}break}case Un:{const w=a.substring(m,f[1]),v=a.substring(f[4],g),b=l&&!!(w||v),x=w?b?w:w.toLowerCase():void 0,E=v?b?v:v.toLowerCase():void 0,R=ao(Un,n.fullPath??n.from,b,x,E);h=R,R.parent=s,R.depth=i,s.wildcard??=[],s.wildcard.push(R)}}s=h}if(d&&n.children&&!n.isRoot&&n.id&&n.id.charCodeAt(n.id.lastIndexOf("/")+1)===95){const f=Fn(n.fullPath??n.from);f.kind=Wf,f.parent=s,i++,f.depth=i,s.pathless??=[],s.pathless.push(f),s=f}const p=(n.path||!n.children)&&!n.isRoot;if(p&&a.endsWith("/")){const f=Fn(n.fullPath??n.from);f.kind=On,f.parent=s,i++,f.depth=i,s.index=f,s=f}s.parse=n.options?.params?.parse??null,s.skipOnParamError=d,s.parsingPriority=n.options?.skipRouteOnParseError?.priority??0,p&&!s.route&&(s.route=n,s.fullPath=n.fullPath??n.from)}if(n.children)for(const a of n.children)Pi(e,t,a,u,s,i,o)}function uo(e,t){if(e.skipOnParamError&&!t.skipOnParamError)return-1;if(!e.skipOnParamError&&t.skipOnParamError)return 1;if(e.skipOnParamError&&t.skipOnParamError&&(e.parsingPriority||t.parsingPriority))return t.parsingPriority-e.parsingPriority;if(e.prefix&&t.prefix&&e.prefix!==t.prefix){if(e.prefix.startsWith(t.prefix))return-1;if(t.prefix.startsWith(e.prefix))return 1}if(e.suffix&&t.suffix&&e.suffix!==t.suffix){if(e.suffix.endsWith(t.suffix))return-1;if(t.suffix.endsWith(e.suffix))return 1}return e.prefix&&!t.prefix?-1:!e.prefix&&t.prefix?1:e.suffix&&!t.suffix?-1:!e.suffix&&t.suffix?1:e.caseSensitive&&!t.caseSensitive?-1:!e.caseSensitive&&t.caseSensitive?1:0}function on(e){if(e.pathless)for(const t of e.pathless)on(t);if(e.static)for(const t of e.static.values())on(t);if(e.staticInsensitive)for(const t of e.staticInsensitive.values())on(t);if(e.dynamic?.length){e.dynamic.sort(uo);for(const t of e.dynamic)on(t)}if(e.optional?.length){e.optional.sort(uo);for(const t of e.optional)on(t)}if(e.wildcard?.length){e.wildcard.sort(uo);for(const t of e.wildcard)on(t)}}function Fn(e){return{kind:lr,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:e,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0}}function ao(e,t,n,r,s){return{kind:e,depth:0,pathless:null,index:null,static:null,staticInsensitive:null,dynamic:null,optional:null,wildcard:null,route:null,fullPath:t,parent:null,parse:null,skipOnParamError:!1,parsingPriority:0,caseSensitive:n,prefix:r,suffix:s}}function lg(e,t){const n=Fn("/"),r=new Uint16Array(6);for(const s of e)Pi(!1,r,s,1,n,0);on(n),t.masksTree=n,t.flatCache=hi(1e3)}function dg(e,t){e||="/";const n=t.flatCache.get(e);if(n)return n;const r=Yu(e,t.masksTree);return t.flatCache.set(e,r),r}function fg(e,t,n,r,s){e||="/",r||="/";const i=t?`case\0${e}`:e;let o=s.singleCache.get(i);if(!o){o=Fn("/");const u=new Uint16Array(6);Pi(t,u,{from:e},1,o,0),s.singleCache.set(i,o)}return Yu(r,o,n)}function hg(e,t,n=!1){const r=n?e:`nofuzz\0${e}`,s=t.matchCache.get(r);if(s!==void 0)return s;e||="/";let i;try{i=Yu(e,t.segmentTree,n)}catch(o){if(o instanceof URIError)i=null;else throw o}return i&&(i.branch=gg(i.route)),t.matchCache.set(r,i),i}function pg(e){return e==="/"?e:e.replace(/\/{1,}$/,"")}function mg(e,t=!1,n){const r=Fn(e.fullPath),s=new Uint16Array(6),i={},o={};let u=0;return Pi(t,s,e,1,r,0,c=>{if(n?.(c,u),$n(!(c.id in i),`Duplicate routes found with id: ${String(c.id)}`),i[c.id]=c,u!==0&&c.path){const l=pg(c.fullPath);(!o[l]||c.fullPath.endsWith("/"))&&(o[l]=c)}u++}),on(r),{processedTree:{segmentTree:r,singleCache:hi(1e3),matchCache:hi(1e3),flatCache:null,masksTree:null},routesById:i,routesByPath:o}}function Yu(e,t,n=!1){const r=e.split("/"),s=yg(e,r,t,n);if(!s)return null;const[i]=Gf(e,r,s);return{route:s.node.route,rawParams:i,parsedParams:s.parsedParams}}function Gf(e,t,n){const r=bg(n.node);let s=null;const i={};let o=n.extract?.part??0,u=n.extract?.node??0,a=n.extract?.path??0,c=n.extract?.segment??0;for(;u<r.length;o++,u++,a++,c++){const l=r[u];if(l.kind===On)break;if(l.kind===Wf){c--,o--,a--;continue}const d=t[o],p=a;if(d&&(a+=d.length),l.kind===Vn){s??=n.node.fullPath.split("/");const f=s[c],h=l.prefix?.length??0;if(f.charCodeAt(h)===123){const g=l.suffix?.length??0,y=f.substring(h+2,f.length-g-1),w=d.substring(h,d.length-g);i[y]=decodeURIComponent(w)}else{const g=f.substring(1);i[g]=decodeURIComponent(d)}}else if(l.kind===Xr){if(n.skipped&1<<u){o--,a=p-1;continue}s??=n.node.fullPath.split("/");const f=s[c],h=l.prefix?.length??0,m=l.suffix?.length??0,g=f.substring(h+3,f.length-m-1),y=l.suffix||l.prefix?d.substring(h,d.length-m):d;y&&(i[g]=decodeURIComponent(y))}else if(l.kind===Un){const f=l,h=e.substring(p+(f.prefix?.length??0),e.length-(f.suffix?.length??0)),m=decodeURIComponent(h);i["*"]=m,i._splat=m;break}}return n.rawParams&&Object.assign(i,n.rawParams),[i,{part:o,node:u,path:a,segment:c}]}function gg(e){const t=[e];for(;e.parentRoute;)e=e.parentRoute,t.push(e);return t.reverse(),t}function bg(e){const t=Array(e.depth+1);do t[e.depth]=e,e=e.parent;while(e);return t}function yg(e,t,n,r){if(e==="/"&&n.index)return{node:n.index,skipped:0};const s=!Hr(t),i=s&&e!=="/",o=t.length-(s?1:0),u=[{node:n,index:1,skipped:0,depth:1,statics:1,dynamics:0,optionals:0}];let a=null,c=null,l=null;for(;u.length;){const d=u.pop(),{node:p,index:f,skipped:h,depth:m,statics:g,dynamics:y,optionals:w}=d;let{extract:v,rawParams:b,parsedParams:x}=d;if(p.skipOnParamError){if(!co(e,t,d))continue;b=d.rawParams,v=d.extract,x=d.parsedParams}r&&p.route&&p.kind!==On&&Ar(c,d)&&(c=d);const E=f===o;if(E&&(p.route&&!i&&Ar(l,d)&&(l=d),!p.optional&&!p.wildcard&&!p.index&&!p.pathless))continue;const R=E?void 0:t[f];let S;if(E&&p.index){const _={node:p.index,index:f,skipped:h,depth:m+1,statics:g,dynamics:y,optionals:w,extract:v,rawParams:b,parsedParams:x};let A=!0;if(p.index.skipOnParamError&&(co(e,t,_)||(A=!1)),A){if(g===o&&!y&&!w&&!h)return _;Ar(l,_)&&(l=_)}}if(p.wildcard&&Ar(a,d))for(const _ of p.wildcard){const{prefix:A,suffix:F}=_;if(A&&(E||!(_.caseSensitive?R:S??=R.toLowerCase()).startsWith(A)))continue;if(F){if(E)continue;const z=t.slice(f).join("/").slice(-F.length);if((_.caseSensitive?z:z.toLowerCase())!==F)continue}const D={node:_,index:o,skipped:h,depth:m,statics:g,dynamics:y,optionals:w,extract:v,rawParams:b,parsedParams:x};if(!(_.skipOnParamError&&!co(e,t,D))){a=D;break}}if(p.optional){const _=h|1<<m,A=m+1;for(let F=p.optional.length-1;F>=0;F--){const D=p.optional[F];u.push({node:D,index:f,skipped:_,depth:A,statics:g,dynamics:y,optionals:w,extract:v,rawParams:b,parsedParams:x})}if(!E)for(let F=p.optional.length-1;F>=0;F--){const D=p.optional[F],{prefix:z,suffix:K}=D;if(z||K){const Z=D.caseSensitive?R:S??=R.toLowerCase();if(z&&!Z.startsWith(z)||K&&!Z.endsWith(K))continue}u.push({node:D,index:f+1,skipped:h,depth:A,statics:g,dynamics:y,optionals:w+1,extract:v,rawParams:b,parsedParams:x})}}if(!E&&p.dynamic&&R)for(let _=p.dynamic.length-1;_>=0;_--){const A=p.dynamic[_],{prefix:F,suffix:D}=A;if(F||D){const z=A.caseSensitive?R:S??=R.toLowerCase();if(F&&!z.startsWith(F)||D&&!z.endsWith(D))continue}u.push({node:A,index:f+1,skipped:h,depth:m+1,statics:g,dynamics:y+1,optionals:w,extract:v,rawParams:b,parsedParams:x})}if(!E&&p.staticInsensitive){const _=p.staticInsensitive.get(S??=R.toLowerCase());_&&u.push({node:_,index:f+1,skipped:h,depth:m+1,statics:g+1,dynamics:y,optionals:w,extract:v,rawParams:b,parsedParams:x})}if(!E&&p.static){const _=p.static.get(R);_&&u.push({node:_,index:f+1,skipped:h,depth:m+1,statics:g+1,dynamics:y,optionals:w,extract:v,rawParams:b,parsedParams:x})}if(p.pathless){const _=m+1;for(let A=p.pathless.length-1;A>=0;A--){const F=p.pathless[A];u.push({node:F,index:f,skipped:h,depth:_,statics:g,dynamics:y,optionals:w,extract:v,rawParams:b,parsedParams:x})}}}if(l&&a)return Ar(a,l)?l:a;if(l)return l;if(a)return a;if(r&&c){let d=c.index;for(let f=0;f<c.index;f++)d+=t[f].length;const p=d===e.length?"/":e.slice(d);return c.rawParams??={},c.rawParams["**"]=decodeURIComponent(p),c}return null}function co(e,t,n){try{const[r,s]=Gf(e,t,n);n.rawParams=r,n.extract=s;const i=n.node.parse(r);return n.parsedParams=Object.assign({},n.parsedParams,i),!0}catch{return null}}function Ar(e,t){return e?t.statics>e.statics||t.statics===e.statics&&(t.dynamics>e.dynamics||t.dynamics===e.dynamics&&(t.optionals>e.optionals||t.optionals===e.optionals&&((t.node.kind===On)>(e.node.kind===On)||t.node.kind===On==(e.node.kind===On)&&t.depth>e.depth))):!0}function Ys(e){return qu(e.filter(t=>t!==void 0).join("/"))}function qu(e){return e.replace(/\/{2,}/g,"/")}function jf(e){return e==="/"?e:e.replace(/^\/{1,}/,"")}function Ht(e){const t=e.length;return t>1&&e[t-1]==="/"?e.replace(/\/{1,}$/,""):e}function Zf(e){return Ht(jf(e))}function pi(e,t){return e?.endsWith("/")&&e!=="/"&&e!==`${t}/`?e.slice(0,-1):e}function vg(e,t,n){return pi(e,n)===pi(t,n)}function wg({base:e,to:t,trailingSlash:n="never",cache:r}){const s=t.startsWith("/"),i=!s&&t===".";let o;if(r){o=s?t:i?e:e+"\0"+t;const d=r.get(o);if(d)return d}let u;if(i)u=e.split("/");else if(s)u=t.split("/");else{for(u=e.split("/");u.length>1&&Hr(u)==="";)u.pop();const d=t.split("/");for(let p=0,f=d.length;p<f;p++){const h=d[p];h===""?p?p===f-1&&u.push(h):u=[h]:h===".."?u.pop():h==="."||u.push(h)}}u.length>1&&(Hr(u)===""?n==="never"&&u.pop():n==="always"&&u.push(""));let a,c="";for(let d=0;d<u.length;d++){d>0&&(c+="/");const p=u[d];if(!p)continue;a=Zu(p,0,a);const f=a[0];if(f===lr){c+=p;continue}const h=a[5],m=p.substring(0,a[1]),g=p.substring(a[4],h),y=p.substring(a[2],a[3]);f===Vn?c+=m||g?`${m}{$${y}}${g}`:`$${y}`:f===Un?c+=m||g?`${m}{$}${g}`:"$":c+=`${m}{-$${y}}${g}`}c=qu(c);const l=c||"/";return o&&r&&r.set(o,l),l}function xg(e){const t=new Map(e.map(s=>[encodeURIComponent(s),s])),n=Array.from(t.keys()).map(s=>s.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")).join("|"),r=new RegExp(n,"g");return s=>s.replace(r,i=>t.get(i)??i)}function lo(e,t,n){const r=t[e];return typeof r!="string"?r:e==="_splat"?/^[a-zA-Z0-9\-._~!/]*$/.test(r)?r:r.split("/").map(s=>Lc(s,n)).join("/"):Lc(r,n)}function fo({path:e,params:t,decoder:n,...r}){let s=!1;const i={};if(!e||e==="/")return{interpolatedPath:"/",usedParams:i,isMissingParams:s};if(!e.includes("$"))return{interpolatedPath:e,usedParams:i,isMissingParams:s};const o=e.length;let u=0,a,c="";for(;u<o;){const d=u;a=Zu(e,d,a);const p=a[5];if(u=p+1,d===p)continue;const f=a[0];if(f===lr){c+="/"+e.substring(d,p);continue}if(f===Un){const h=t._splat;i._splat=h,i["*"]=h;const m=e.substring(d,a[1]),g=e.substring(a[4],p);if(!h){s=!0,(m||g)&&(c+="/"+m+g);continue}const y=lo("_splat",t,n);c+="/"+m+y+g;continue}if(f===Vn){const h=e.substring(a[2],a[3]);!s&&!(h in t)&&(s=!0),i[h]=t[h];const m=e.substring(d,a[1]),g=e.substring(a[4],p),y=lo(h,t,n)??"undefined";c+="/"+m+y+g;continue}if(f===Xr){const h=e.substring(a[2],a[3]),m=t[h];if(m==null)continue;i[h]=m;const g=e.substring(d,a[1]),y=e.substring(a[4],p),w=lo(h,t,n)??"";c+="/"+g+w+y;continue}}return e.endsWith("/")&&(c+="/"),{usedParams:i,interpolatedPath:c||"/",isMissingParams:s}}function Lc(e,t){const n=encodeURIComponent(e);return t?.(n)??n}function ot(e){return!!e?.isNotFound}function Sg(){try{if(typeof window<"u"&&typeof window.sessionStorage=="object")return window.sessionStorage}catch{}}const tu="tsr-scroll-restoration-v1_3",_g=(e,t)=>{let n;return(...r)=>{n||(n=setTimeout(()=>{e(...r),n=null},t))}};function Eg(){const e=Sg();if(!e)return null;const t=e.getItem(tu);let n=t?JSON.parse(t):{};return{state:n,set:r=>{n=cn(r,n)||n;try{e.setItem(tu,JSON.stringify(n))}catch{console.warn("[ts-router] Could not persist scroll restoration state to sessionStorage.")}}}}const Ms=Eg(),kg=e=>e.state.__TSR_key||e.href;function Cg(e){const t=[];let n;for(;n=e.parentNode;)t.push(`${e.tagName}:nth-child(${Array.prototype.indexOf.call(n.children,e)+1})`),e=n;return`${t.reverse().join(" > ")}`.toLowerCase()}let mi=!1;function Ig({storageKey:e,key:t,behavior:n,shouldScrollRestoration:r,scrollToTopSelectors:s,location:i}){let o;try{o=JSON.parse(sessionStorage.getItem(e)||"{}")}catch(c){console.error(c);return}const u=t||window.history.state?.__TSR_key,a=o[u];mi=!0;e:{if(r&&a&&Object.keys(a).length>0){for(const d in a){const p=a[d];if(d==="window")window.scrollTo({top:p.scrollY,left:p.scrollX,behavior:n});else if(d){const f=document.querySelector(d);f&&(f.scrollLeft=p.scrollX,f.scrollTop=p.scrollY)}}break e}const c=(i??window.location).hash.split("#",2)[1];if(c){const d=window.history.state?.__hashScrollIntoViewOptions??!0;if(d){const p=document.getElementById(c);p&&p.scrollIntoView(d)}break e}const l={top:0,left:0,behavior:n};if(window.scrollTo(l),s)for(const d of s){if(d==="window")continue;const p=typeof d=="function"?d():document.querySelector(d);p&&p.scrollTo(l)}}mi=!1}function Ag(e,t){if(!Ms||((e.options.scrollRestoration??!1)&&(e.isScrollRestoring=!0),e.isScrollRestorationSetup||!Ms))return;e.isScrollRestorationSetup=!0,mi=!1;const r=e.options.getScrollRestorationKey||kg;window.history.scrollRestoration="manual";const s=i=>{if(mi||!e.isScrollRestoring)return;let o="";if(i.target===document||i.target===window)o="window";else{const a=i.target.getAttribute("data-scroll-restoration-id");a?o=`[data-scroll-restoration-id="${a}"]`:o=Cg(i.target)}const u=r(e.state.location);Ms.set(a=>{const c=a[u]||={},l=c[o]||={};if(o==="window")l.scrollX=window.scrollX||0,l.scrollY=window.scrollY||0;else if(o){const d=document.querySelector(o);d&&(l.scrollX=d.scrollLeft||0,l.scrollY=d.scrollTop||0)}return a})};typeof document<"u"&&document.addEventListener("scroll",_g(s,100),!0),e.subscribe("onRendered",i=>{const o=r(i.toLocation);if(!e.resetNextScroll){e.resetNextScroll=!0;return}typeof e.options.scrollRestoration=="function"&&!e.options.scrollRestoration({location:e.latestLocation})||(Ig({storageKey:tu,key:o,behavior:e.options.scrollRestorationBehavior,shouldScrollRestoration:e.isScrollRestoring,scrollToTopSelectors:e.options.scrollToTopSelectors,location:e.history.location}),e.isScrollRestoring&&Ms.set(u=>(u[o]||={},u)))})}function Rg(e){if(typeof document<"u"&&document.querySelector){const t=e.state.location.state.__hashScrollIntoViewOptions??!0;if(t&&e.state.location.hash!==""){const n=document.getElementById(e.state.location.hash);n&&n.scrollIntoView(t)}}}function Tg(e,t=String){const n=new URLSearchParams;for(const r in e){const s=e[r];s!==void 0&&n.set(r,t(s))}return n.toString()}function ho(e){return e?e==="false"?!1:e==="true"?!0:+e*0===0&&+e+""===e?+e:e:""}function Og(e){const t=new URLSearchParams(e),n={};for(const[r,s]of t.entries()){const i=n[r];i==null?n[r]=ho(s):Array.isArray(i)?i.push(ho(s)):n[r]=[i,ho(s)]}return n}const Fg=Ng(JSON.parse),Dg=Pg(JSON.stringify,JSON.parse);function Ng(e){return t=>{t[0]==="?"&&(t=t.substring(1));const n=Og(t);for(const r in n){const s=n[r];if(typeof s=="string")try{n[r]=e(s)}catch{}}return n}}function Pg(e,t){const n=typeof t=="function";function r(s){if(typeof s=="object"&&s!==null)try{return e(s)}catch{}else if(n&&typeof s=="string")try{return t(s),e(s)}catch{}return s}return s=>{const i=Tg(s,r);return i?`?${i}`:""}}const yt="__root__";function Lg(e){if(e.statusCode=e.statusCode||e.code||307,!e._builtLocation&&typeof e.href=="string"&&fi(e.href))throw new Error(`Redirect blocked: unsafe protocol in href "${e.href}". Only ${Kf.join(", ")} protocols are allowed.`);if(!e._builtLocation&&!e.reloadDocument&&typeof e.href=="string")try{new URL(e.href),e.reloadDocument=!0}catch{}const t=new Headers(e.headers);e.href&&t.get("Location")===null&&t.set("Location",e.href);const n=new Response(null,{status:e.statusCode,headers:t});if(n.options=e,e.throw)throw n;return n}function wt(e){return e instanceof Response&&!!e.options}const qs=e=>{if(!e.rendered)return e.rendered=!0,e.onReady?.()},Li=(e,t)=>!!(e.preload&&!e.router.state.matches.some(n=>n.id===t)),sr=(e,t,n=!0)=>{const r={...e.router.options.context??{}},s=n?t:t-1;for(let i=0;i<=s;i++){const o=e.matches[i];if(!o)continue;const u=e.router.getMatch(o.id);u&&Object.assign(r,u.__routeContext,u.__beforeLoadContext)}return r},Yf=(e,t)=>{const n=e.router.routesById[t.routeId??""]??e.router.routeTree;!n.options.notFoundComponent&&e.router.options?.defaultNotFoundComponent&&(n.options.notFoundComponent=e.router.options.defaultNotFoundComponent),$n(n.options.notFoundComponent);const r=e.matches.find(s=>s.routeId===n.id);$n(r,"Could not find match for route: "+n.id),e.updateMatch(r.id,s=>({...s,status:"notFound",error:t,isFetching:!1})),t.routerCode==="BEFORE_LOAD"&&n.parentRoute&&(t.routeId=n.parentRoute.id,Yf(e,t))},ln=(e,t,n)=>{if(!(!wt(n)&&!ot(n))){if(wt(n)&&n.redirectHandled&&!n.options.reloadDocument)throw n;if(t){t._nonReactive.beforeLoadPromise?.resolve(),t._nonReactive.loaderPromise?.resolve(),t._nonReactive.beforeLoadPromise=void 0,t._nonReactive.loaderPromise=void 0;const r=wt(n)?"redirected":"notFound";t._nonReactive.error=n,e.updateMatch(t.id,s=>({...s,status:r,context:sr(e,t.index),isFetching:!1,error:n})),ot(n)&&!n.routeId&&(n.routeId=t.routeId),t._nonReactive.loadPromise?.resolve()}throw wt(n)?(e.rendered=!0,n.options._fromLocation=e.location,n.redirectHandled=!0,n=e.router.resolveRedirect(n),n):(Yf(e,n),n)}},qf=(e,t)=>!!e.router.getMatch(t)._nonReactive.dehydrated,Rr=(e,t,n,r)=>{const{id:s,routeId:i}=e.matches[t],o=e.router.looseRoutesById[i];if(n instanceof Promise)throw n;n.routerCode=r,e.firstBadMatchIndex??=t,ln(e,e.router.getMatch(s),n);try{o.options.onError?.(n)}catch(u){n=u,ln(e,e.router.getMatch(s),n)}e.updateMatch(s,u=>(u._nonReactive.beforeLoadPromise?.resolve(),u._nonReactive.beforeLoadPromise=void 0,u._nonReactive.loadPromise?.resolve(),{...u,error:n,status:"error",isFetching:!1,updatedAt:Date.now(),abortController:new AbortController}))},Hf=(e,t,n,r)=>{if(r._nonReactive.pendingTimeout!==void 0)return;const s=n.options.pendingMs??e.router.options.defaultPendingMs;if(!!(e.onReady&&!Li(e,t)&&(n.options.loader||n.options.beforeLoad||Qf(n))&&typeof s=="number"&&s!==1/0&&(n.options.pendingComponent??e.router.options?.defaultPendingComponent))){const o=setTimeout(()=>{qs(e)},s);r._nonReactive.pendingTimeout=o}},Mg=(e,t,n)=>{const r=e.router.getMatch(t);if(!r._nonReactive.beforeLoadPromise&&!r._nonReactive.loaderPromise)return;Hf(e,t,n,r);const s=()=>{const i=e.router.getMatch(t);i.preload&&(i.status==="redirected"||i.status==="notFound")&&ln(e,i,i.error)};return r._nonReactive.beforeLoadPromise?r._nonReactive.beforeLoadPromise.then(s):s()},Bg=(e,t,n,r)=>{const s=e.router.getMatch(t),i=s._nonReactive.loadPromise;s._nonReactive.loadPromise=cr(()=>{i?.resolve()});const{paramsError:o,searchError:u}=s;o&&Rr(e,n,o,"PARSE_PARAMS"),u&&Rr(e,n,u,"VALIDATE_SEARCH"),Hf(e,t,r,s);const a=new AbortController;let c=!1;const l=()=>{c||(c=!0,e.updateMatch(t,b=>({...b,isFetching:"beforeLoad",fetchCount:b.fetchCount+1,abortController:a})))},d=()=>{s._nonReactive.beforeLoadPromise?.resolve(),s._nonReactive.beforeLoadPromise=void 0,e.updateMatch(t,b=>({...b,isFetching:!1}))};if(!r.options.beforeLoad){Ur(()=>{l(),d()});return}s._nonReactive.beforeLoadPromise=cr();const p={...sr(e,n,!1),...s.__routeContext},{search:f,params:h,cause:m}=s,g=Li(e,t),y={search:f,abortController:a,params:h,preload:g,context:p,location:e.location,navigate:b=>e.router.navigate({...b,_fromLocation:e.location}),buildLocation:e.router.buildLocation,cause:g?"preload":m,matches:e.matches,routeId:r.id,...e.router.options.additionalContext},w=b=>{if(b===void 0){Ur(()=>{l(),d()});return}(wt(b)||ot(b))&&(l(),Rr(e,n,b,"BEFORE_LOAD")),Ur(()=>{l(),e.updateMatch(t,x=>({...x,__beforeLoadContext:b})),d()})};let v;try{if(v=r.options.beforeLoad(y),rr(v))return l(),v.catch(b=>{Rr(e,n,b,"BEFORE_LOAD")}).then(w)}catch(b){l(),Rr(e,n,b,"BEFORE_LOAD")}w(v)},$g=(e,t)=>{const{id:n,routeId:r}=e.matches[t],s=e.router.looseRoutesById[r],i=()=>u(),o=()=>Bg(e,n,t,s),u=()=>{if(qf(e,n))return;const a=Mg(e,n,s);return rr(a)?a.then(o):o()};return i()},Vg=(e,t,n)=>{const r=e.router.getMatch(t);if(!r||!n.options.head&&!n.options.scripts&&!n.options.headers)return;const s={ssr:e.router.options.ssr,matches:e.matches,match:r,params:r.params,loaderData:r.loaderData};return Promise.all([n.options.head?.(s),n.options.scripts?.(s),n.options.headers?.(s)]).then(([i,o,u])=>{const a=i?.meta,c=i?.links,l=i?.scripts,d=i?.styles;return{meta:a,links:c,headScripts:l,headers:u,scripts:o,styles:d}})},Xf=(e,t,n,r)=>{const s=e.matchPromises[n-1],{params:i,loaderDeps:o,abortController:u,cause:a}=e.router.getMatch(t),c=sr(e,n),l=Li(e,t);return{params:i,deps:o,preload:!!l,parentMatchPromise:s,abortController:u,context:c,location:e.location,navigate:d=>e.router.navigate({...d,_fromLocation:e.location}),cause:l?"preload":a,route:r,...e.router.options.additionalContext}},Mc=async(e,t,n,r)=>{try{const s=e.router.getMatch(t);try{(!(rg??e.router.isServer)||s.ssr===!0)&&Jf(r);const i=r.options.loader?.(Xf(e,t,n,r)),o=r.options.loader&&rr(i);if((o||r._lazyPromise||r._componentsPromise||r.options.head||r.options.scripts||r.options.headers||s._nonReactive.minPendingPromise)&&e.updateMatch(t,c=>({...c,isFetching:"loader"})),r.options.loader){const c=o?await i:i;ln(e,e.router.getMatch(t),c),c!==void 0&&e.updateMatch(t,l=>({...l,loaderData:c}))}r._lazyPromise&&await r._lazyPromise;const a=s._nonReactive.minPendingPromise;a&&await a,r._componentsPromise&&await r._componentsPromise,e.updateMatch(t,c=>({...c,error:void 0,context:sr(e,n),status:"success",isFetching:!1,updatedAt:Date.now()}))}catch(i){let o=i;if(o?.name==="AbortError"){if(s.abortController.signal.aborted){s._nonReactive.loaderPromise?.resolve(),s._nonReactive.loaderPromise=void 0;return}e.updateMatch(t,a=>({...a,status:a.status==="pending"?"success":a.status,isFetching:!1,context:sr(e,n)}));return}const u=s._nonReactive.minPendingPromise;u&&await u,ot(i)&&await r.options.notFoundComponent?.preload?.(),ln(e,e.router.getMatch(t),i);try{r.options.onError?.(i)}catch(a){o=a,ln(e,e.router.getMatch(t),a)}e.updateMatch(t,a=>({...a,error:o,context:sr(e,n),status:"error",isFetching:!1}))}}catch(s){const i=e.router.getMatch(t);i&&(i._nonReactive.loaderPromise=void 0),ln(e,i,s)}},Ug=async(e,t)=>{async function n(l,d,p,f){const h=Date.now()-d.updatedAt,m=l?f.options.preloadStaleTime??e.router.options.defaultPreloadStaleTime??3e4:f.options.staleTime??e.router.options.defaultStaleTime??0,g=f.options.shouldReload,y=typeof g=="function"?g(Xf(e,r,t,f)):g,{status:w,invalid:v}=p;i=w==="success"&&(v||(y??h>m)),l&&f.options.preload===!1||(i&&!e.sync?(o=!0,(async()=>{try{await Mc(e,r,t,f);const b=e.router.getMatch(r);b._nonReactive.loaderPromise?.resolve(),b._nonReactive.loadPromise?.resolve(),b._nonReactive.loaderPromise=void 0}catch(b){wt(b)&&await e.router.navigate(b.options)}})()):(w!=="success"||i&&e.sync)&&await Mc(e,r,t,f))}const{id:r,routeId:s}=e.matches[t];let i=!1,o=!1;const u=e.router.looseRoutesById[s];if(!qf(e,r)){const l=e.router.getMatch(r),d=Li(e,r);if(l._nonReactive.loaderPromise){if(l.status==="success"&&!e.sync&&!l.preload)return l;await l._nonReactive.loaderPromise;const p=e.router.getMatch(r),f=p._nonReactive.error||p.error;f&&ln(e,p,f),p.status==="pending"&&await n(d,l,p,u)}else{const p=d&&!e.router.state.matches.some(h=>h.id===r),f=e.router.getMatch(r);f._nonReactive.loaderPromise=cr(),p!==f.preload&&e.updateMatch(r,h=>({...h,preload:p})),await n(d,l,f,u)}}const a=e.router.getMatch(r);o||(a._nonReactive.loaderPromise?.resolve(),a._nonReactive.loadPromise?.resolve()),clearTimeout(a._nonReactive.pendingTimeout),a._nonReactive.pendingTimeout=void 0,o||(a._nonReactive.loaderPromise=void 0),a._nonReactive.dehydrated=void 0;const c=o?a.isFetching:!1;return c!==a.isFetching||a.invalid!==!1?(e.updateMatch(r,l=>({...l,isFetching:c,invalid:!1})),e.router.getMatch(r)):a};async function Bc(e){const t=Object.assign(e,{matchPromises:[]});t.router.state.matches.some(n=>n._forcePending)&&qs(t);try{for(let u=0;u<t.matches.length;u++){const a=$g(t,u);rr(a)&&await a}const n=t.firstBadMatchIndex??t.matches.length;for(let u=0;u<n;u++)t.matchPromises.push(Ug(t,u));const s=(await Promise.allSettled(t.matchPromises)).filter(u=>u.status==="rejected").map(u=>u.reason);let i;for(const u of s){if(wt(u))throw u;!i&&ot(u)&&(i=u)}for(const u of t.matches){const{id:a,routeId:c}=u,l=t.router.looseRoutesById[c];try{const d=Vg(t,a,l);if(d){const p=await d;t.updateMatch(a,f=>({...f,...p}))}}catch(d){console.error(`Error executing head for route ${c}:`,d)}}if(i)throw i;const o=qs(t);rr(o)&&await o}catch(n){if(ot(n)&&!t.preload){const r=qs(t);throw rr(r)&&await r,n}if(wt(n))throw n}return t.matches}async function Jf(e){if(!e._lazyLoaded&&e._lazyPromise===void 0&&(e.lazyFn?e._lazyPromise=e.lazyFn().then(t=>{const{id:n,...r}=t.options;Object.assign(e.options,r),e._lazyLoaded=!0,e._lazyPromise=void 0}):e._lazyLoaded=!0),!e._componentsLoaded&&e._componentsPromise===void 0){const t=()=>{const n=[];for(const r of eh){const s=e.options[r]?.preload;s&&n.push(s())}if(n.length)return Promise.all(n).then(()=>{e._componentsLoaded=!0,e._componentsPromise=void 0});e._componentsLoaded=!0,e._componentsPromise=void 0};e._componentsPromise=e._lazyPromise?e._lazyPromise.then(t):t()}return e._componentsPromise}function Qf(e){for(const t of eh)if(e.options[t]?.preload)return!0;return!1}const eh=["component","errorComponent","pendingComponent","notFoundComponent"];function zg(e){return{input:({url:t})=>{for(const n of e)t=nu(n,t);return t},output:({url:t})=>{for(let n=e.length-1;n>=0;n--)t=th(e[n],t);return t}}}function Kg(e){const t=Zf(e.basepath),n=`/${t}`,r=`${n}/`,s=e.caseSensitive?n:n.toLowerCase(),i=e.caseSensitive?r:r.toLowerCase();return{input:({url:o})=>{const u=e.caseSensitive?o.pathname:o.pathname.toLowerCase();return u===s?o.pathname="/":u.startsWith(i)&&(o.pathname=o.pathname.slice(n.length)),o},output:({url:o})=>(o.pathname=Ys(["/",t,o.pathname]),o)}}function nu(e,t){const n=e?.input?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function th(e,t){const n=e?.output?.({url:t});if(n){if(typeof n=="string")return new URL(n);if(n instanceof URL)return n}return t}function Ln(e){const t=e.resolvedLocation,n=e.location,r=t?.pathname!==n.pathname,s=t?.href!==n.href,i=t?.hash!==n.hash;return{fromLocation:t,toLocation:n,pathChanged:r,hrefChanged:s,hashChanged:i}}class Wg{constructor(t){this.tempLocationKey=`${Math.round(Math.random()*1e7)}`,this.resetNextScroll=!0,this.shouldViewTransition=void 0,this.isViewTransitionTypesSupported=void 0,this.subscribers=new Set,this.isScrollRestoring=!1,this.isScrollRestorationSetup=!1,this.startTransition=n=>n(),this.update=n=>{n.notFoundRoute&&console.warn("The notFoundRoute API is deprecated and will be removed in the next major version. See https://tanstack.com/router/v1/docs/framework/react/guide/not-found-errors#migrating-from-notfoundroute for more info.");const r=this.options,s=this.basepath??r?.basepath??"/",i=this.basepath===void 0,o=r?.rewrite;if(this.options={...r,...n},this.isServer=this.options.isServer??typeof document>"u",this.options.pathParamsAllowedCharacters&&(this.pathParamsDecoder=xg(this.options.pathParamsAllowedCharacters)),(!this.history||this.options.history&&this.options.history!==this.history)&&(this.options.history?this.history=this.options.history:this.history=tg()),this.origin=this.options.origin,this.origin||(window?.origin&&window.origin!=="null"?this.origin=window.origin:this.origin="http://localhost"),this.history&&this.updateLatestLocation(),this.options.routeTree!==this.routeTree){this.routeTree=this.options.routeTree;let p;this.resolvePathCache=hi(1e3),p=this.buildRouteTree(),this.setRoutes(p)}!this.__store&&this.latestLocation&&(this.__store=new Qm(jg(this.latestLocation),{onUpdate:()=>{this.__store.state={...this.state,cachedMatches:this.state.cachedMatches.filter(p=>!["redirected"].includes(p.status))}}}),Ag(this));let u=!1;const a=this.options.basepath??"/",c=this.options.rewrite;if(i||s!==a||o!==c){this.basepath=a;const p=[],f=Zf(a);f&&f!=="/"&&p.push(Kg({basepath:a})),c&&p.push(c),this.rewrite=p.length===0?void 0:p.length===1?p[0]:zg(p),this.history&&this.updateLatestLocation(),u=!0}u&&this.__store&&(this.__store.state={...this.state,location:this.latestLocation}),typeof window<"u"&&"CSS"in window&&typeof window.CSS?.supports=="function"&&(this.isViewTransitionTypesSupported=window.CSS.supports("selector(:active-view-transition-type(a)"))},this.updateLatestLocation=()=>{this.latestLocation=this.parseLocation(this.history.location,this.latestLocation)},this.buildRouteTree=()=>{const n=mg(this.routeTree,this.options.caseSensitive,(r,s)=>{r.init({originalIndex:s})});return this.options.routeMasks&&lg(this.options.routeMasks,n.processedTree),n},this.subscribe=(n,r)=>{const s={eventType:n,fn:r};return this.subscribers.add(s),()=>{this.subscribers.delete(s)}},this.emit=n=>{this.subscribers.forEach(r=>{r.eventType===n.type&&r.fn(n)})},this.parseLocation=(n,r)=>{const s=({pathname:a,search:c,hash:l,href:d,state:p})=>{if(!this.rewrite&&!/[ \x00-\x1f\x7f\u0080-\uffff]/.test(a)){const w=this.options.parseSearch(c),v=this.options.stringifySearch(w);return{href:a+v+l,publicHref:d,pathname:Ir(a).path,external:!1,searchStr:v,search:mt(r?.search,w),hash:Ir(l.slice(1)).path,state:mt(r?.state,p)}}const f=new URL(d,this.origin),h=nu(this.rewrite,f),m=this.options.parseSearch(h.search),g=this.options.stringifySearch(m);return h.search=g,{href:h.href.replace(h.origin,""),publicHref:d,pathname:Ir(h.pathname).path,external:!!this.rewrite&&h.origin!==this.origin,searchStr:g,search:mt(r?.search,m),hash:Ir(h.hash.slice(1)).path,state:mt(r?.state,p)}},i=s(n),{__tempLocation:o,__tempKey:u}=i.state;if(o&&(!u||u===this.tempLocationKey)){const a=s(o);return a.state.key=i.state.key,a.state.__TSR_key=i.state.__TSR_key,delete a.state.__tempLocation,{...a,maskedLocation:i}}return i},this.resolvePathWithBase=(n,r)=>wg({base:n,to:qu(r),trailingSlash:this.options.trailingSlash,cache:this.resolvePathCache}),this.matchRoutes=(n,r,s)=>typeof n=="string"?this.matchRoutesInternal({pathname:n,search:r},s):this.matchRoutesInternal(n,r),this.getMatchedRoutes=n=>Zg({pathname:n,routesById:this.routesById,processedTree:this.processedTree}),this.cancelMatch=n=>{const r=this.getMatch(n);r&&(r.abortController.abort(),clearTimeout(r._nonReactive.pendingTimeout),r._nonReactive.pendingTimeout=void 0)},this.cancelMatches=()=>{const n=this.state.matches.filter(i=>i.status==="pending"),r=this.state.matches.filter(i=>i.isFetching==="loader");new Set([...this.state.pendingMatches??[],...n,...r]).forEach(i=>{this.cancelMatch(i.id)})},this.buildLocation=n=>{const r=(i={})=>{const o=i._fromLocation||this.pendingBuiltLocation||this.latestLocation,u=this.matchRoutesLightweight(o);i.from;const a=i.unsafeRelative==="path"?o.pathname:i.from??u.fullPath,c=this.resolvePathWithBase(a,"."),l=u.search,d={...u.params},p=i.to?this.resolvePathWithBase(c,`${i.to}`):this.resolvePathWithBase(c,"."),f=i.params===!1||i.params===null?{}:(i.params??!0)===!0?d:Object.assign(d,cn(i.params,d)),h=fo({path:p,params:f,decoder:this.pathParamsDecoder,server:this.isServer}).interpolatedPath,m=this.getMatchedRoutes(h);let g=m.matchedRoutes;(m.foundRoute?m.foundRoute.path!=="/"&&m.routeParams["**"]:Ht(h))&&this.options.notFoundRoute&&(g=[...g,this.options.notFoundRoute]);let w=!1;if(Object.keys(f).length>0)for(const z of g){const K=z.options.params?.stringify??z.options.stringifyParams;K&&(w=!0,Object.assign(f,K(f)))}const v=n.leaveParams?p:Ir(w?fo({path:p,params:f,decoder:this.pathParamsDecoder,server:this.isServer}).interpolatedPath:h).path;let b=l;if(n._includeValidateSearch&&this.options.search?.strict){const z={};g.forEach(K=>{if(K.options.validateSearch)try{Object.assign(z,Hs(K.options.validateSearch,{...z,...b}))}catch{}}),b=z}b=Yg({search:b,dest:i,destRoutes:g,_includeValidateSearch:n._includeValidateSearch}),b=mt(l,b);const x=this.options.stringifySearch(b),E=i.hash===!0?o.hash:i.hash?cn(i.hash,o.hash):void 0,R=E?`#${E}`:"";let S=i.state===!0?o.state:i.state?cn(i.state,o.state):{};S=mt(o.state,S);const _=`${v}${x}${R}`;let A,F,D=!1;if(this.rewrite){const z=new URL(_,this.origin),K=th(this.rewrite,z);A=z.href.replace(z.origin,""),K.origin!==this.origin?(F=K.href,D=!0):F=K.pathname+K.search+K.hash}else A=ug(_),F=A;return{publicHref:F,href:A,pathname:v,search:b,searchStr:x,state:S,hash:E??"",external:D,unmaskOnReload:i.unmaskOnReload}},s=(i={},o)=>{const u=r(i);let a=o?r(o):void 0;if(!a){const c={};if(this.options.routeMasks){const l=dg(u.pathname,this.processedTree);if(l){Object.assign(c,l.rawParams);const{from:d,params:p,...f}=l.route,h=p===!1||p===null?{}:(p??!0)===!0?c:Object.assign(c,cn(p,c));o={from:n.from,...f,params:h},a=r(o)}}}return a&&(u.maskedLocation=a),u};return n.mask?s(n,{from:n.from,...n.mask}):s(n)},this.commitLocation=async({viewTransition:n,ignoreBlocker:r,...s})=>{const i=()=>{const a=["key","__TSR_key","__TSR_index","__hashScrollIntoViewOptions"];a.forEach(l=>{s.state[l]=this.latestLocation.state[l]});const c=Pn(s.state,this.latestLocation.state);return a.forEach(l=>{delete s.state[l]}),c},o=Ht(this.latestLocation.href)===Ht(s.href),u=this.commitLocationPromise;if(this.commitLocationPromise=cr(()=>{u?.resolve()}),o&&i())this.load();else{let{maskedLocation:a,hashScrollIntoView:c,...l}=s;a&&(l={...a,state:{...a.state,__tempKey:void 0,__tempLocation:{...l,search:l.searchStr,state:{...l.state,__tempKey:void 0,__tempLocation:void 0,__TSR_key:void 0,key:void 0}}}},(l.unmaskOnReload??this.options.unmaskOnReload??!1)&&(l.state.__tempKey=this.tempLocationKey)),l.state.__hashScrollIntoViewOptions=c??this.options.defaultHashScrollIntoView??!0,this.shouldViewTransition=n,this.history[s.replace?"replace":"push"](l.publicHref,l.state,{ignoreBlocker:r})}return this.resetNextScroll=s.resetScroll??!0,this.history.subscribers.size||this.load(),this.commitLocationPromise},this.buildAndCommitLocation=({replace:n,resetScroll:r,hashScrollIntoView:s,viewTransition:i,ignoreBlocker:o,href:u,...a}={})=>{if(u){const d=this.history.location.state.__TSR_index,p=li(u,{__TSR_index:n?d:d+1}),f=new URL(p.pathname,this.origin),h=nu(this.rewrite,f);a.to=h.pathname,a.search=this.options.parseSearch(p.search),a.hash=p.hash.slice(1)}const c=this.buildLocation({...a,_includeValidateSearch:!0});this.pendingBuiltLocation=c;const l=this.commitLocation({...c,viewTransition:i,replace:n,resetScroll:r,hashScrollIntoView:s,ignoreBlocker:o});return Promise.resolve().then(()=>{this.pendingBuiltLocation===c&&(this.pendingBuiltLocation=void 0)}),l},this.navigate=async({to:n,reloadDocument:r,href:s,publicHref:i,...o})=>{let u=!1;if(s)try{new URL(`${s}`),u=!0}catch{}if(u&&!r&&(r=!0),r){if(n!==void 0||!s){const c=this.buildLocation({to:n,...o});s=s??c.publicHref,i=i??c.publicHref}const a=!u&&i?i:s;if(fi(a))return Promise.resolve();if(!o.ignoreBlocker){const l=this.history.getBlockers?.()??[];for(const d of l)if(d?.blockerFn&&await d.blockerFn({currentLocation:this.latestLocation,nextLocation:this.latestLocation,action:"PUSH"}))return Promise.resolve()}return o.replace?window.location.replace(a):window.location.href=a,Promise.resolve()}return this.buildAndCommitLocation({...o,href:s,to:n,_isNavigate:!0})},this.beforeLoad=()=>{this.cancelMatches(),this.updateLatestLocation();const n=this.matchRoutes(this.latestLocation);this.__store.setState(r=>({...r,status:"pending",statusCode:200,isLoading:!0,location:this.latestLocation,pendingMatches:n,cachedMatches:r.cachedMatches.filter(s=>!n.some(i=>i.id===s.id))}))},this.load=async n=>{let r,s,i;for(i=new Promise(u=>{this.startTransition(async()=>{try{this.beforeLoad();const a=this.latestLocation,c=this.state.resolvedLocation;this.state.redirect||this.emit({type:"onBeforeNavigate",...Ln({resolvedLocation:c,location:a})}),this.emit({type:"onBeforeLoad",...Ln({resolvedLocation:c,location:a})}),await Bc({router:this,sync:n?.sync,matches:this.state.pendingMatches,location:a,updateMatch:this.updateMatch,onReady:async()=>{this.startTransition(()=>{this.startViewTransition(async()=>{let l=[],d=[],p=[];Ur(()=>{this.__store.setState(f=>{const h=f.matches,m=f.pendingMatches||f.matches;return l=h.filter(g=>!m.some(y=>y.id===g.id)),d=m.filter(g=>!h.some(y=>y.id===g.id)),p=m.filter(g=>h.some(y=>y.id===g.id)),{...f,isLoading:!1,loadedAt:Date.now(),matches:m,pendingMatches:void 0,cachedMatches:[...f.cachedMatches,...l.filter(g=>g.status!=="error"&&g.status!=="notFound")]}}),this.clearExpiredCache()}),[[l,"onLeave"],[d,"onEnter"],[p,"onStay"]].forEach(([f,h])=>{f.forEach(m=>{this.looseRoutesById[m.routeId].options[h]?.(m)})})})})}})}catch(a){wt(a)?(r=a,this.navigate({...r.options,replace:!0,ignoreBlocker:!0})):ot(a)&&(s=a),this.__store.setState(c=>({...c,statusCode:r?r.status:s?404:c.matches.some(l=>l.status==="error")?500:200,redirect:r}))}this.latestLoadPromise===i&&(this.commitLocationPromise?.resolve(),this.latestLoadPromise=void 0,this.commitLocationPromise=void 0),u()})}),this.latestLoadPromise=i,await i;this.latestLoadPromise&&i!==this.latestLoadPromise;)await this.latestLoadPromise;let o;this.hasNotFoundMatch()?o=404:this.__store.state.matches.some(u=>u.status==="error")&&(o=500),o!==void 0&&this.__store.setState(u=>({...u,statusCode:o}))},this.startViewTransition=n=>{const r=this.shouldViewTransition??this.options.defaultViewTransition;if(this.shouldViewTransition=void 0,r&&typeof document<"u"&&"startViewTransition"in document&&typeof document.startViewTransition=="function"){let s;if(typeof r=="object"&&this.isViewTransitionTypesSupported){const i=this.latestLocation,o=this.state.resolvedLocation,u=typeof r.types=="function"?r.types(Ln({resolvedLocation:o,location:i})):r.types;if(u===!1){n();return}s={update:n,types:u}}else s=n;document.startViewTransition(s)}else n()},this.updateMatch=(n,r)=>{this.startTransition(()=>{const s=this.state.pendingMatches?.some(i=>i.id===n)?"pendingMatches":this.state.matches.some(i=>i.id===n)?"matches":this.state.cachedMatches.some(i=>i.id===n)?"cachedMatches":"";s&&this.__store.setState(i=>({...i,[s]:i[s]?.map(o=>o.id===n?r(o):o)}))})},this.getMatch=n=>{const r=s=>s.id===n;return this.state.cachedMatches.find(r)??this.state.pendingMatches?.find(r)??this.state.matches.find(r)},this.invalidate=n=>{const r=s=>n?.filter?.(s)??!0?{...s,invalid:!0,...n?.forcePending||s.status==="error"||s.status==="notFound"?{status:"pending",error:void 0}:void 0}:s;return this.__store.setState(s=>({...s,matches:s.matches.map(r),cachedMatches:s.cachedMatches.map(r),pendingMatches:s.pendingMatches?.map(r)})),this.shouldViewTransition=!1,this.load({sync:n?.sync})},this.getParsedLocationHref=n=>n.publicHref||"/",this.resolveRedirect=n=>{const r=n.headers.get("Location");if(!n.options.href||n.options._builtLocation){const s=n.options._builtLocation??this.buildLocation(n.options),i=this.getParsedLocationHref(s);n.options.href=i,n.headers.set("Location",i)}else if(r)try{const s=new URL(r);if(this.origin&&s.origin===this.origin){const i=s.pathname+s.search+s.hash;n.options.href=i,n.headers.set("Location",i)}}catch{}return n.headers.get("Location")||n.headers.set("Location",n.options.href),n},this.clearCache=n=>{const r=n?.filter;r!==void 0?this.__store.setState(s=>({...s,cachedMatches:s.cachedMatches.filter(i=>!r(i))})):this.__store.setState(s=>({...s,cachedMatches:[]}))},this.clearExpiredCache=()=>{const n=r=>{const s=this.looseRoutesById[r.routeId];if(!s.options.loader)return!0;const i=(r.preload?s.options.preloadGcTime??this.options.defaultPreloadGcTime:s.options.gcTime??this.options.defaultGcTime)??300*1e3;return r.status==="error"?!0:Date.now()-r.updatedAt>=i};this.clearCache({filter:n})},this.loadRouteChunk=Jf,this.preloadRoute=async n=>{const r=this.buildLocation(n);let s=this.matchRoutes(r,{throwOnError:!0,preload:!0,dest:n});const i=new Set([...this.state.matches,...this.state.pendingMatches??[]].map(u=>u.id)),o=new Set([...i,...this.state.cachedMatches.map(u=>u.id)]);Ur(()=>{s.forEach(u=>{o.has(u.id)||this.__store.setState(a=>({...a,cachedMatches:[...a.cachedMatches,u]}))})});try{return s=await Bc({router:this,matches:s,location:r,preload:!0,updateMatch:(u,a)=>{i.has(u)?s=s.map(c=>c.id===u?a(c):c):this.updateMatch(u,a)}}),s}catch(u){if(wt(u))return u.options.reloadDocument?void 0:await this.preloadRoute({...u.options,_fromLocation:r});ot(u)||console.error(u);return}},this.matchRoute=(n,r)=>{const s={...n,to:n.to?this.resolvePathWithBase(n.from||"",n.to):void 0,params:n.params||{},leaveParams:!0},i=this.buildLocation(s);if(r?.pending&&this.state.status!=="pending")return!1;const u=(r?.pending===void 0?!this.state.isLoading:r.pending)?this.latestLocation:this.state.resolvedLocation||this.state.location,a=fg(i.pathname,r?.caseSensitive??!1,r?.fuzzy??!1,u.pathname,this.processedTree);return!a||n.params&&!Pn(a.rawParams,n.params,{partial:!0})?!1:r?.includeSearch??!0?Pn(u.search,i.search,{partial:!0})?a.rawParams:!1:a.rawParams},this.hasNotFoundMatch=()=>this.__store.state.matches.some(n=>n.status==="notFound"||n.globalNotFound),this.update({defaultPreloadDelay:50,defaultPendingMs:1e3,defaultPendingMinMs:500,context:void 0,...t,caseSensitive:t.caseSensitive??!1,notFoundMode:t.notFoundMode??"fuzzy",stringifySearch:t.stringifySearch??Dg,parseSearch:t.parseSearch??Fg}),typeof document<"u"&&(self.__TSR_ROUTER__=this)}isShell(){return!!this.options.isShell}isPrerendering(){return!!this.options.isPrerendering}get state(){return this.__store.state}setRoutes({routesById:t,routesByPath:n,processedTree:r}){this.routesById=t,this.routesByPath=n,this.processedTree=r;const s=this.options.notFoundRoute;s&&(s.init({originalIndex:99999999999}),this.routesById[s.id]=s)}get looseRoutesById(){return this.routesById}getParentContext(t){return t?.id?t.context??this.options.context??void 0:this.options.context??void 0}matchRoutesInternal(t,n){const r=this.getMatchedRoutes(t.pathname),{foundRoute:s,routeParams:i,parsedParams:o}=r;let{matchedRoutes:u}=r,a=!1;(s?s.path!=="/"&&i["**"]:Ht(t.pathname))&&(this.options.notFoundRoute?u=[...u,this.options.notFoundRoute]:a=!0);const c=a?Hg(this.options.notFoundMode,u):void 0,l=new Array(u.length),d=new Map(this.state.matches.map(p=>[p.routeId,p]));for(let p=0;p<u.length;p++){const f=u[p],h=l[p-1];let m,g,y;{const K=h?.search??t.search,Z=h?._strictSearch??void 0;try{const se=Hs(f.options.validateSearch,{...K})??void 0;m={...K,...se},g={...Z,...se},y=void 0}catch(se){let N=se;if(se instanceof gi||(N=new gi(se.message,{cause:se})),n?.throwOnError)throw N;m=K,g={},y=N}}const w=f.options.loaderDeps?.({search:m})??"",v=w?JSON.stringify(w):"",{interpolatedPath:b,usedParams:x}=fo({path:f.fullPath,params:i,decoder:this.pathParamsDecoder,server:this.isServer}),E=f.id+b+v,R=this.getMatch(E),S=d.get(f.id),_=R?._strictParams??x;let A;if(!R)try{$c(f,x,o,_)}catch(K){if(ot(K)||wt(K)?A=K:A=new Gg(K.message,{cause:K}),n?.throwOnError)throw A}Object.assign(i,_);const F=S?"stay":"enter";let D;if(R)D={...R,cause:F,params:S?.params??i,_strictParams:_,search:mt(S?S.search:R.search,m),_strictSearch:g};else{const K=f.options.loader||f.options.beforeLoad||f.lazyFn||Qf(f)?"pending":"success";D={id:E,ssr:f.options.ssr,index:p,routeId:f.id,params:S?.params??i,_strictParams:_,pathname:b,updatedAt:Date.now(),search:S?mt(S.search,m):m,_strictSearch:g,searchError:void 0,status:K,isFetching:!1,error:void 0,paramsError:A,__routeContext:void 0,_nonReactive:{loadPromise:cr()},__beforeLoadContext:void 0,context:{},abortController:new AbortController,fetchCount:0,cause:F,loaderDeps:S?mt(S.loaderDeps,w):w,invalid:!1,preload:!1,links:void 0,scripts:void 0,headScripts:void 0,meta:void 0,staticData:f.options.staticData||{},fullPath:f.fullPath}}n?.preload||(D.globalNotFound=c===f.id),D.searchError=y;const z=this.getParentContext(h);D.context={...z,...D.__routeContext,...D.__beforeLoadContext},l[p]=D}for(let p=0;p<l.length;p++){const f=l[p],h=this.looseRoutesById[f.routeId],m=this.getMatch(f.id),g=d.get(f.routeId);if(f.params=g?mt(g.params,i):i,!m){const y=l[p-1],w=this.getParentContext(y);if(h.options.context){const v={deps:f.loaderDeps,params:f.params,context:w??{},location:t,navigate:b=>this.navigate({...b,_fromLocation:t}),buildLocation:this.buildLocation,cause:f.cause,abortController:f.abortController,preload:!!f.preload,matches:l,routeId:h.id};f.__routeContext=h.options.context(v)??void 0}f.context={...w,...f.__routeContext,...f.__beforeLoadContext}}}return l}matchRoutesLightweight(t){const{matchedRoutes:n,routeParams:r,parsedParams:s}=this.getMatchedRoutes(t.pathname),i=Hr(n),o={...t.search};for(const l of n)try{Object.assign(o,Hs(l.options.validateSearch,o))}catch{}const u=Hr(this.state.matches),a=u&&u.routeId===i.id&&t.pathname===this.state.location.pathname;let c;if(a)c=u.params;else{const l={...r};for(const d of n)try{$c(d,r,s??{},l)}catch{}c=l}return{matchedRoutes:n,fullPath:i.fullPath,search:o,params:c}}}class gi extends Error{}class Gg extends Error{}function jg(e){return{loadedAt:0,isLoading:!1,isTransitioning:!1,status:"idle",resolvedLocation:void 0,location:e,matches:[],pendingMatches:[],cachedMatches:[],statusCode:200}}function Hs(e,t){if(e==null)return{};if("~standard"in e){const n=e["~standard"].validate(t);if(n instanceof Promise)throw new gi("Async validation not supported");if(n.issues)throw new gi(JSON.stringify(n.issues,void 0,2),{cause:n});return n.value}return"parse"in e?e.parse(t):typeof e=="function"?e(t):{}}function Zg({pathname:e,routesById:t,processedTree:n}){const r={},s=Ht(e);let i,o;const u=hg(s,n,!0);return u&&(i=u.route,Object.assign(r,u.rawParams),o=Object.assign({},u.parsedParams)),{matchedRoutes:u?.branch||[t[yt]],routeParams:r,foundRoute:i,parsedParams:o}}function Yg({search:e,dest:t,destRoutes:n,_includeValidateSearch:r}){return qg(n)(e,t,r??!1)}function qg(e){const t={dest:null,_includeValidateSearch:!1,middlewares:[]};for(const s of e){if("search"in s.options)s.options.search?.middlewares&&t.middlewares.push(...s.options.search.middlewares);else if(s.options.preSearchFilters||s.options.postSearchFilters){const i=({search:o,next:u})=>{let a=o;"preSearchFilters"in s.options&&s.options.preSearchFilters&&(a=s.options.preSearchFilters.reduce((l,d)=>d(l),o));const c=u(a);return"postSearchFilters"in s.options&&s.options.postSearchFilters?s.options.postSearchFilters.reduce((l,d)=>d(l),c):c};t.middlewares.push(i)}if(s.options.validateSearch){const i=({search:o,next:u})=>{const a=u(o);if(!t._includeValidateSearch)return a;try{return{...a,...Hs(s.options.validateSearch,a)??void 0}}catch{return a}};t.middlewares.push(i)}}const n=({search:s})=>{const i=t.dest;return i.search?i.search===!0?s:cn(i.search,s):{}};t.middlewares.push(n);const r=(s,i,o)=>{if(s>=o.length)return i;const u=o[s];return u({search:i,next:c=>r(s+1,c,o)})};return function(i,o,u){return t.dest=o,t._includeValidateSearch=u,r(0,i,t.middlewares)}}function Hg(e,t){if(e!=="root")for(let n=t.length-1;n>=0;n--){const r=t[n];if(r.children)return r.id}return yt}function $c(e,t,n,r){const s=e.options.params?.parse??e.options.parseParams;if(s)if(e.options.skipRouteOnParseError)for(const i in t)i in n&&(r[i]=n[i]);else{const i=s(r);Object.assign(r,i)}}const Xg="Error preloading route! ";class nh{constructor(t){if(this.init=n=>{this.originalIndex=n.originalIndex;const r=this.options,s=!r?.path&&!r?.id;this.parentRoute=this.options.getParentRoute?.(),s?this._path=yt:this.parentRoute||$n(!1);let i=s?yt:r?.path;i&&i!=="/"&&(i=jf(i));const o=r?.id||i;let u=s?yt:Ys([this.parentRoute.id===yt?"":this.parentRoute.id,o]);i===yt&&(i="/"),u!==yt&&(u=Ys(["/",u]));const a=u===yt?"/":Ys([this.parentRoute.fullPath,i]);this._path=i,this._id=u,this._fullPath=a,this._to=Ht(a)},this.addChildren=n=>this._addFileChildren(n),this._addFileChildren=n=>(Array.isArray(n)&&(this.children=n),typeof n=="object"&&n!==null&&(this.children=Object.values(n)),this),this._addFileTypes=()=>this,this.updateLoader=n=>(Object.assign(this.options,n),this),this.update=n=>(Object.assign(this.options,n),this),this.lazy=n=>(this.lazyFn=n,this),this.redirect=n=>Lg({from:this.fullPath,...n}),this.options=t||{},this.isRoot=!t?.getParentRoute,t?.id&&t?.path)throw new Error("Route cannot have both an 'id' and a 'path' option.")}get to(){return this._to}get id(){return this._id}get path(){return this._path}get fullPath(){return this._fullPath}}class Jg extends nh{constructor(t){super(t)}}var Qg=B('<div style=padding:.5rem;max-width:100%><div style=display:flex;align-items:center;gap:.5rem><strong style=font-size:1rem>Something went wrong!</strong><button style="appearance:none;font-size:.6em;border:1px solid currentColor;padding:.1rem .2rem;font-weight:bold;border-radius:.25rem"></button></div><div style=height:.25rem>'),eb=B('<div><pre style="font-size:.7em;border:1px solid red;border-radius:.25rem;padding:.3rem;color:red;overflow:auto">'),tb=B("<code>");function Hu(e){return k(Up,{fallback:(t,n)=>(e.onCatch?.(t),Qe(Qt([e.getResetKey],()=>n(),{defer:!0})),k(Nt,{get component(){return e.errorComponent??Xu},error:t,reset:n})),get children(){return e.children}})}function Xu({error:e}){const[t,n]=H(!1);return(()=>{var r=Qg(),s=r.firstChild,i=s.firstChild,o=i.nextSibling;return s.nextSibling,o.$$click=()=>n(u=>!u),T(o,()=>t()?"Hide Error":"Show Error"),T(r,(()=>{var u=le(()=>!!t());return()=>u()?(()=>{var a=eb(),c=a.firstChild;return T(c,(()=>{var l=le(()=>!!e.message);return()=>l()?(()=>{var d=tb();return T(d,()=>e.message),d})():null})()),a})():null})(),null),r})()}_t(["click"]);function nb(){const[e,t]=H(!1);return Kn(()=>{t(!0)}),e}function rb(e){return(...t)=>{for(const n of e)n&&n(...t)}}function Vc(...e){return rb(e)}function sb(e,t=r=>r,n={}){const[r,s]=H(t(e.state)),i=n.equal??ib,o=e.subscribe(()=>{const u=t(e.state);i(r(),u)||s(()=>u)});return Ee(()=>{o()}),r}function ib(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,s]of e)if(!t.has(r)||!Object.is(s,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r=0;r<n.length;r++)if(!Object.prototype.hasOwnProperty.call(t,n[r])||!Object.is(e[n[r]],t[n[r]]))return!1;return!0}const po=Sn(null);function rh(){return typeof document>"u"?po:window.__TSR_ROUTER_CONTEXT__?window.__TSR_ROUTER_CONTEXT__:(window.__TSR_ROUTER_CONTEXT__=po,po)}function Et(e){const t=nn(rh());return e?.warn,t}function sh(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(const s of n)if(!Object.prototype.hasOwnProperty.call(t,s)||!sh(e[s],t[s]))return!1;return!0}function Oe(e){const t=Et({warn:e?.router===void 0}),n=e?.router||t;return sb(n.__store,r=>e?.select?e.select(r):r,{equal:sh})}const mo=e=>J((t={current:null,previous:null})=>{const n=e();return t.current!==n&&(t.previous=t.current,t.current=n),t});function ob(e,t,n={},r={}){const s=typeof IntersectionObserver=="function";let i=null;return Qe(()=>{const o=e();!o||!s||r.disabled||(i=new IntersectionObserver(([u])=>{t(u)},n),i.observe(o),Ee(()=>{i?.disconnect()}))}),()=>i}var ub=B("<svg><a>");function ab(e){const t=Et(),[n,r]=H(!1),s=!!t.options.ssr,i=nb();let o=!1;const[u,a]=Nn(Mt({activeProps:()=>({class:"active"}),inactiveProps:()=>({})},e),["activeProps","inactiveProps","activeOptions","to","preload","preloadDelay","hashScrollIntoView","replace","startTransition","resetScroll","viewTransition","target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","onTouchStart","ignoreBlocker"]),[c,l]=Nn(a,["params","search","hash","state","mask","reloadDocument","unsafeRelative"]),d=Oe({select:P=>P.location}),p=Oe({select:P=>P.location.searchStr}),f=e.from,h=()=>({...e,from:f}),m=J(()=>(p(),t.buildLocation(h()))),g=J(()=>{if(h().disabled)return;const P=m().maskedLocation??m(),$=P.publicHref;return P.external?{href:$,external:!0}:{href:t.history.createHref($)||"/",external:!1}}),y=J(()=>{const P=g();if(P?.external)return fi(P.href)?void 0:P.href;const $=h().to;if(!(typeof $=="string"&&$.charCodeAt(0)===47&&$.charCodeAt(1)!==47))try{return new URL($),fi($)?void 0:$}catch{}}),w=J(()=>h().reloadDocument||y()?!1:u.preload??t.options.defaultPreload),v=()=>u.preloadDelay??t.options.defaultPreloadDelay??0,b=J(()=>{if(y())return!1;if(u.activeOptions?.exact){if(!vg(d().pathname,m().pathname,t.basepath))return!1}else{const P=pi(d().pathname,t.basepath).split("/");if(!pi(m()?.pathname,t.basepath)?.split("/")?.every((ne,V)=>ne===P[V]))return!1}return(u.activeOptions?.includeSearch??!0)&&!Pn(d().search,m().search,{partial:!u.activeOptions?.exact,ignoreUndefined:!u.activeOptions?.explicitUndefined})?!1:u.activeOptions?.includeHash?(s&&!i()?"":d().hash)===m().hash:!0}),x=()=>t.preloadRoute(h()).catch(P=>{console.warn(P),console.warn(Xg)}),E=P=>{P?.isIntersecting&&x()},[R,S]=H(null);if(ob(R,E,{rootMargin:"100px"},{disabled:!!u.disabled||w()!=="viewport"}),Qe(()=>{o||!u.disabled&&w()==="render"&&(x(),o=!0)}),y())return Mt(l,{ref:Vc(S,h().ref),href:y()},Nn(u,["target","disabled","style","class","onClick","onFocus","onMouseEnter","onMouseLeave","onMouseOut","onMouseOver","onTouchStart"])[0]);const _=P=>{const $=P.currentTarget.getAttribute("target"),W=u.target!==void 0?u.target:$;if(!u.disabled&&!cb(P)&&!P.defaultPrevented&&(!W||W==="_self")&&P.button===0){P.preventDefault(),r(!0);const ne=t.subscribe("onResolved",()=>{ne(),r(!1)});t.navigate({...h(),replace:u.replace,resetScroll:u.resetScroll,hashScrollIntoView:u.hashScrollIntoView,startTransition:u.startTransition,viewTransition:u.viewTransition,ignoreBlocker:u.ignoreBlocker})}},A=P=>{u.disabled||w()&&x()},F=A,D=P=>{if(u.disabled)return;const $=P.currentTarget||{};if(w()){if($.preloadTimeout)return;$.preloadTimeout=setTimeout(()=>{$.preloadTimeout=null,x()},v())}},z=P=>{if(u.disabled)return;const $=P.currentTarget||{};$.preloadTimeout&&(clearTimeout($.preloadTimeout),$.preloadTimeout=null)};function K(P,$){return $&&(typeof $=="function"?$(P):$[0]($[1],P)),P.defaultPrevented}function Z(P){return $=>{for(const W of P)K($,W)}}const se=()=>b()?cn(u.activeProps,{})??{}:{},N=()=>b()?{}:cn(u.inactiveProps,{}),ee=()=>[u.class,se().class,N().class].filter(Boolean).join(" "),ie=()=>({...u.style,...se().style,...N().style});return Mt(l,se,N,()=>({href:g()?.href,ref:Vc(S,h().ref),onClick:Z([u.onClick,_]),onFocus:Z([u.onFocus,A]),onMouseEnter:Z([u.onMouseEnter,D]),onMouseOver:Z([u.onMouseOver,D]),onMouseLeave:Z([u.onMouseLeave,z]),onMouseOut:Z([u.onMouseOut,z]),onTouchStart:Z([u.onTouchStart,F]),disabled:!!u.disabled,target:u.target,...(()=>{const P=ie();return Object.keys(P).length?{style:P}:{}})(),...(()=>{const P=ee();return P?{class:P}:{}})(),...u.disabled&&{role:"link","aria-disabled":!0},...b()&&{"data-status":"active","aria-current":"page"},...n()&&{"data-transitioning":"transitioning"}}))}const ir=e=>{const[t,n]=Nn(e,["_asChild","children"]),[r,s]=Nn(ab(n),["type"]),i=J(()=>{const o=t.children;return typeof o=="function"?o({get isActive(){return s["data-status"]==="active"},get isTransitioning(){return s["data-transitioning"]==="transitioning"}}):o});if(t._asChild==="svg"){const[o,u]=Nn(s,["class"]);return(()=>{var a=ub(),c=a.firstChild;return Ni(c,u,!1,!0),T(c,i),a})()}return k(Nt,Mt({get component(){return le(()=>!!t._asChild)()?t._asChild:"a"}},s,{get children(){return i()}}))};function cb(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}const Mi=Sn(()=>{}),lb=Sn(()=>{});function $t(e){const t=nn(e.from?lb:Mi),n=Oe({select:r=>{const s=r.matches.find(i=>e.from?e.from===i.routeId:i.id===t());return s===void 0?{match:void 0,shouldThrowError:!r.pendingMatches?.find(u=>e.from?e.from===u.routeId:u.id===t())&&!r.isTransitioning&&(e.shouldThrow??!0)}:{match:e.select?e.select(s):s,shouldThrowError:!1}}});return Qe(()=>{n().shouldThrowError&&$n(!1,`Could not find ${e.from?`an active match from "${e.from}"`:"a nearest match!"}`)}),J(()=>n().match)}function Ju(e){return $t({from:e.from,strict:e.strict,select:t=>e.select?e.select(t.loaderData):t.loaderData})}function Qu(e){const{select:t,...n}=e;return $t({...n,select:r=>t?t(r.loaderDeps):r.loaderDeps})}function ea(e){return $t({from:e.from,shouldThrow:e.shouldThrow,strict:e.strict,select:t=>{const n=e.strict===!1?t.params:t._strictParams;return e.select?e.select(n):n}})}function ta(e){return $t({from:e.from,strict:e.strict,shouldThrow:e.shouldThrow,select:t=>e.select?e.select(t.search):t.search})}function ws(e){const t=Et();return n=>t.navigate({...n,from:n.from??e?.from})}let db=class extends nh{constructor(t){super(t),this.useMatch=n=>$t({select:n?.select,from:this.id}),this.useRouteContext=n=>$t({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>ta({select:n?.select,from:this.id}),this.useParams=n=>ea({select:n?.select,from:this.id}),this.useLoaderDeps=n=>Qu({...n,from:this.id}),this.useLoaderData=n=>Ju({...n,from:this.id}),this.useNavigate=()=>ws({from:this.fullPath}),this.Link=n=>{const r=this;return k(ir,Mt({get from(){return r.fullPath}},n))}}};function fb(e){return new db(e)}class hb extends Jg{constructor(t){super(t),this.useMatch=n=>$t({select:n?.select,from:this.id}),this.useRouteContext=n=>$t({...n,from:this.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>ta({select:n?.select,from:this.id}),this.useParams=n=>ea({select:n?.select,from:this.id}),this.useLoaderDeps=n=>Qu({...n,from:this.id}),this.useLoaderData=n=>Ju({...n,from:this.id}),this.useNavigate=()=>ws({from:this.fullPath}),this.Link=n=>{const r=this;return k(ir,Mt({get from(){return r.fullPath}},n))}}}function pb(e){return new hb(e)}function zn(e){return typeof e=="object"?new Uc(e,{silent:!0}).createRoute(e):new Uc(e,{silent:!0}).createRoute}class Uc{constructor(t,n){this.path=t,this.createRoute=r=>{this.silent;const s=fb(r);return s.isRoot=!1,s},this.silent=n?.silent}}class zc{constructor(t){this.useMatch=n=>$t({select:n?.select,from:this.options.id}),this.useRouteContext=n=>$t({from:this.options.id,select:r=>n?.select?n.select(r.context):r.context}),this.useSearch=n=>ta({select:n?.select,from:this.options.id}),this.useParams=n=>ea({select:n?.select,from:this.options.id}),this.useLoaderDeps=n=>Qu({...n,from:this.options.id}),this.useLoaderData=n=>Ju({...n,from:this.options.id}),this.useNavigate=()=>{const n=Et();return ws({from:n.routesById[this.options.id].fullPath})},this.options=t}}function Kc(e){return typeof e=="object"?new zc(e):t=>new zc({id:e,...t})}function mb(){const e=Et();let t={router:e,mounted:!1};const n=Oe({select:({isLoading:d})=>d}),[r,s]=Fp(),i=Oe({select:d=>d.matches.some(p=>p.status==="pending")}),o=mo(n),u=()=>n()||r()||i(),a=mo(u),c=()=>n()||i(),l=mo(c);return e.startTransition=d=>{hf(()=>{s(d)})},Kn(()=>{const d=e.history.subscribe(e.load),p=e.buildLocation({to:e.latestLocation.pathname,search:!0,params:!0,hash:!0,state:!0,_includeValidateSearch:!0});Ht(e.latestLocation.publicHref)!==Ht(p.publicHref)&&e.commitLocation({...p,replace:!0}),Ee(()=>{d()})}),L(()=>{De(()=>{if(typeof window<"u"&&e.ssr||t.router===e&&t.mounted)return;t={router:e,mounted:!0},(async()=>{try{await e.load()}catch(p){console.error(p)}})()})}),L(Qt([o,n],([d,p])=>{d.previous&&!p&&e.emit({type:"onLoad",...Ln(e.state)})})),pn(Qt([c,l],([d,p])=>{p.previous&&!d&&e.emit({type:"onBeforeRouteMount",...Ln(e.state)})})),L(Qt([u,a],([d,p])=>{if(p.previous&&!d){const f=Ln(e.state);e.emit({type:"onResolved",...f}),e.__store.setState(h=>({...h,status:"idle",resolvedLocation:h.location})),f.hrefChanged&&Rg(e)}})),null}function Dn(e){return le(()=>e.children)}var gb=B("<p>Not Found");function bb(e){const t=Oe({select:n=>`not-found-${n.location.pathname}-${n.status}`});return k(Hu,{getResetKey:()=>t(),onCatch:n=>{if(ot(n))e.onCatch?.(n);else throw n},errorComponent:({error:n})=>{if(ot(n))return e.fallback?.(n);throw n},get children(){return e.children}})}function yb(){return gb()}function ih(e,t,n){return t.options.notFoundComponent?k(t.options.notFoundComponent,n):e.options.defaultNotFoundComponent?k(e.options.defaultNotFoundComponent,n):k(yb,{})}function vb(){return Et().isScrollRestoring,null}const ru=e=>{const t=Et(),n=Oe({select:m=>{const g=m.matches.find(y=>y.id===e.matchId);return g?{routeId:g.routeId,ssr:g.ssr,_displayPending:g._displayPending}:null}});if(!n())return null;const r=()=>t.routesById[n().routeId],s=()=>r().options.pendingComponent??t.options.defaultPendingComponent,i=()=>r().options.errorComponent??t.options.defaultErrorComponent,o=()=>r().options.onCatch??t.options.defaultOnCatch,u=()=>r().isRoot?r().options.notFoundComponent??t.options.notFoundRoute?.options.component:r().options.notFoundComponent,a=n().ssr===!1||n().ssr==="data-only",c=()=>$u,l=()=>i()?Hu:Dn,d=()=>u()?bb:Dn,p=Oe({select:m=>m.loadedAt}),f=Oe({select:m=>{const g=m.matches.findIndex(y=>y.id===e.matchId);return m.matches[g-1]?.routeId}}),h=r().isRoot?r().options.shellComponent??Dn:Dn;return k(h,{get children(){return[k(Mi.Provider,{value:()=>e.matchId,get children(){return k(Nt,{get component(){return c()},get fallback(){return le(()=>!!a)()?void 0:k(Nt,{get component(){return s()}})},get children(){return k(Nt,{get component(){return l()},getResetKey:()=>p(),get errorComponent(){return i()||Xu},onCatch:m=>{if(ot(m))throw m;`${n().routeId}`,o()?.(m)},get children(){return k(Nt,{get component(){return d()},fallback:m=>{if(!u()||m.routeId&&m.routeId!==n().routeId||!m.routeId&&!r().isRoot)throw m;return k(Nt,Mt({get component(){return u()}},m))},get children(){return k(xf,{get children(){return[k(Gt,{when:a,get children(){return k(G,{get when(){return!0},get fallback(){return k(Nt,{get component(){return s()}})},get children(){return k(Wc,{get matchId(){return e.matchId}})}})}}),k(Gt,{when:!a,get children(){return k(Wc,{get matchId(){return e.matchId}})}})]}})}})}})}})}}),le(()=>le(()=>f()===yt)()?[k(wb,{}),k(vb,{})]:null)]}})};function wb(){const e=Et(),t=Oe({select:n=>n.resolvedLocation?.state.__TSR_key});return Qe(Qt([t],()=>{e.emit({type:"onRendered",...Ln(e.state)})})),null}const Wc=e=>{const t=Et(),n=Oe({select:a=>{const c=a.matches.find(h=>h.id===e.matchId);if(!c)return null;const l=c.routeId,p=(t.routesById[l].options.remountDeps??t.options.defaultRemountDeps)?.({routeId:l,loaderDeps:c.loaderDeps,params:c._strictParams,search:c._strictSearch});return{key:p?JSON.stringify(p):void 0,routeId:l,match:{id:c.id,status:c.status,error:c.error,_forcePending:c._forcePending,_displayPending:c._displayPending}}}});if(!n())return null;const r=()=>t.routesById[n().routeId],s=()=>n().match,i=()=>n().key??n().match.id,o=()=>{const a=r().options.component??t.options.defaultComponent;return a?k(a,{}):k(Bi,{})},u=()=>k(G,{get when(){return i()},keyed:!0,children:a=>o()});return k(xf,{get children(){return[k(Gt,{get when(){return s()._displayPending},children:a=>{const[c]=Jn(()=>t.getMatch(s().id)?._nonReactive.displayPendingPromise);return le(c)}}),k(Gt,{get when(){return s()._forcePending},children:a=>{const[c]=Jn(()=>t.getMatch(s().id)?._nonReactive.minPendingPromise);return le(c)}}),k(Gt,{get when(){return s().status==="pending"},children:a=>{const c=r().options.pendingMinMs??t.options.defaultPendingMinMs;if(c){const p=t.getMatch(s().id);if(p&&!p._nonReactive.minPendingPromise){const f=cr();p._nonReactive.minPendingPromise=f,setTimeout(()=>{f.resolve(),p._nonReactive.minPendingPromise=void 0},c)}}const[l]=Jn(async()=>(await new Promise(p=>setTimeout(p,0)),t.getMatch(s().id)?._nonReactive.loadPromise)),d=r().options.pendingComponent??t.options.defaultPendingComponent;return[d&&c>0?k(Nt,{component:d}):null,le(l)]}}),k(Gt,{get when(){return s().status==="notFound"},children:a=>($n(ot(s().error)),k(G,{get when(){return n().routeId},keyed:!0,children:c=>ih(t,r(),s().error)}))}),k(Gt,{get when(){return s().status==="redirected"},children:a=>{$n(wt(s().error));const[c]=Jn(async()=>(await new Promise(l=>setTimeout(l,0)),t.getMatch(s().id)?._nonReactive.loadPromise));return le(c)}}),k(Gt,{get when(){return s().status==="error"},children:a=>{throw s().error}}),k(Gt,{get when(){return s().status==="success"},get children(){return u()}})]}})},Bi=()=>{const e=Et(),t=nn(Mi),n=Oe({select:a=>a.matches.find(c=>c.id===t())?.routeId}),r=()=>e.routesById[n()],s=Oe({select:a=>{const l=a.matches.find(d=>d.id===t());return l?l.globalNotFound:!1}}),i=Oe({select:a=>{const c=a.matches,l=c.findIndex(p=>p.id===t());return c[l+1]?.id}}),o=Oe({select:a=>{const c=a.matches,l=c.findIndex(d=>d.id===t());return c[l+1]?.status}}),u=()=>o()!=="redirected"&&s();return k(G,{get when(){return le(()=>!u())()&&i()},get fallback(){return k(G,{get when(){return u()},get children(){return ih(e,r(),void 0)}})},children:a=>{const c=J(()=>a());return k(G,{get when(){return n()===yt},get fallback(){return k(ru,{get matchId(){return c()}})},get children(){return k($u,{get fallback(){return k(Nt,{get component(){return e.options.defaultPendingComponent}})},get children(){return k(ru,{get matchId(){return c()}})}})}})}})};function xb(){const e=Et(),t=typeof document<"u"&&e.ssr?Dn:$u,r=e.routesById[yt].options.pendingComponent??e.options.defaultPendingComponent,s=e.options.InnerWrap||Dn;return k(s,{get children(){return k(t,{get fallback(){return r?k(r,{}):null},get children(){return[k(mb,{}),k(Sb,{})]}})}})}function Sb(){const e=Et(),t=Oe({select:s=>s.matches[0]?.id}),n=Oe({select:s=>s.loadedAt}),r=()=>k(G,{get when(){return t()},get children(){return k(ru,{get matchId(){return t()}})}});return k(Mi.Provider,{value:t,get children(){return le(()=>!!e.options.disableGlobalCatchBoundary)()?r():k(Hu,{getResetKey:()=>n(),errorComponent:Xu,onCatch:s=>{s.message||s.toString()},get children(){return r()}})}})}const _b=e=>new Eb(e);class Eb extends Wg{constructor(t){super(t)}}typeof globalThis<"u"?(globalThis.createFileRoute=zn,globalThis.createLazyFileRoute=Kc):typeof window<"u"&&(window.createFileRoute=zn,window.createLazyFileRoute=Kc);function kb({router:e,children:t,...n}){e.update({...e.options,...n,context:{...e.options.context,...n.context}});const r=rh(),s=e.options.Wrap||Dn;return k(s,{get children(){return k(r.Provider,{value:e,get children(){return t()}})}})}function Cb({router:e,...t}){return k(kb,Mt({router:e},t,{children:()=>k(xb,{})}))}function Ib(e){return Oe({select:t=>t.location})}const Ab="modulepreload",Rb=function(e){return"/"+e},Gc={},Tb=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){let c=function(l){return Promise.all(l.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};var o=c;document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),a=u?.nonce||u?.getAttribute("nonce");s=c(n.map(l=>{if(l=Rb(l),l in Gc)return;Gc[l]=!0;const d=l.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${p}`))return;const f=document.createElement("link");if(f.rel=d?"stylesheet":Ab,d||(f.as="script"),f.crossOrigin="",f.href=l,a&&f.setAttribute("nonce",a),document.head.appendChild(f),d)return new Promise((h,m)=>{f.addEventListener("load",h),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(u){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=u,window.dispatchEvent(a),!a.defaultPrevented)throw u}return s.then(u=>{for(const a of u||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})};function Ob(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:r,onRegistered:s,onRegisteredSW:i,onRegisterError:o}=e;let u,a;const c=async(d=!0)=>{await a};async function l(){if("serviceWorker"in navigator){if(u=await Tb(async()=>{const{Workbox:d}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:d}},[]).then(({Workbox:d})=>new d("/sw.js",{scope:"/",type:"classic"})).catch(d=>{o?.(d)}),!u)return;u.addEventListener("activated",d=>{(d.isUpdate||d.isExternal)&&window.location.reload()}),u.addEventListener("installed",d=>{d.isUpdate||r?.()}),u.register({immediate:t}).then(d=>{i?i("/sw.js",d):s?.(d)}).catch(d=>{o?.(d)})}}return a=l(),c}function Fb(){Ob({immediate:!0})}const Db={equals:!1},Nb=Db;class jc{#e;constructor(t=Map){this.#e=new t}dirty(t){this.#e.get(t)?.$$()}dirtyAll(){for(const t of this.#e.values())t.$$()}track(t){if(!ri())return;let n=this.#e.get(t);if(n)n.n++;else{const[r,s]=H(void 0,Nb);this.#e.set(t,n={$:r,$$:s,n:1})}Ee(()=>{--n.n===0&&queueMicrotask(()=>n.n===0&&this.#e.delete(t))}),n.$()}}const rt=Symbol("track-object");class Pb extends Map{#e=new jc;#t=new jc;[Symbol.iterator](){return this.entries()}constructor(t){if(super(),t)for(const n of t)super.set(...n)}get size(){return this.#e.track(rt),super.size}*keys(){this.#e.track(rt);for(const t of super.keys())yield t}*values(){this.#t.track(rt);for(const t of super.values())yield t}*entries(){this.#e.track(rt),this.#t.track(rt);for(const t of super.entries())yield t}forEach(t,n){this.#e.track(rt),this.#t.track(rt),super.forEach(t,n)}has(t){return this.#e.track(t),super.has(t)}get(t){return this.#t.track(t),super.get(t)}set(t,n){const r=!super.has(t),s=super.get(t)!==n,i=super.set(t,n);return(s||r)&&tr(()=>{r&&(this.#e.dirty(rt),this.#e.dirty(t)),s&&(this.#t.dirty(rt),this.#t.dirty(t))}),i}delete(t){const n=super.get(t)!==void 0,r=super.delete(t);return r&&tr(()=>{this.#e.dirty(rt),this.#t.dirty(rt),this.#e.dirty(t),n&&this.#t.dirty(t)}),r}clear(){super.size!==0&&tr(()=>{this.#e.dirty(rt),this.#t.dirty(rt);for(const t of super.keys())this.#e.dirty(t),this.#t.dirty(t);super.clear()})}}class Sr{}class dr extends Sr{constructor(t,n){super(),this.collection=t,this.alias=n,this.type="collectionRef"}}class vt extends Sr{constructor(t,n){super(),this.query=t,this.alias=n,this.type="queryRef"}}class Ze extends Sr{constructor(t){super(),this.path=t,this.type="ref"}}class He extends Sr{constructor(t){super(),this.value=t,this.type="val"}}class ct extends Sr{constructor(t,n){super(),this.name=t,this.args=n,this.type="func"}}class na extends Sr{constructor(t,n){super(),this.name=t,this.args=n,this.type="agg"}}function Jr(e){return e instanceof na||e instanceof ct||e instanceof Ze||e instanceof He}function ra(e){return typeof e=="object"&&"expression"in e?e.expression:e}function Zc(e){return typeof e=="object"&&"expression"in e?e.expression:e}function Yc(e){return typeof e=="object"&&"expression"in e&&e.residual===!0}function Lb(e){return{expression:e,residual:!0}}function Mb(e,t){if(e.from.alias===t)return e.from;for(const n of e.join||[])if(n.from.alias===t)return n.from}function Qr(e,t,n){if(t.path.length!==0){if(t.path.length===1){const r=t.path[0];if(e.select){const s=e.select[r];if(s&&s.type==="ref")return Qr(e,s,n)}return{collection:n,path:[r]}}if(t.path.length>1){const[r,...s]=t.path,i=Mb(e,r);return i?i.type==="queryRef"?Qr(i.query,new Ze(s),n):{collection:i.collection,path:s}:void 0}}}class lt extends Error{constructor(t){super(t),this.name="TanStackDBError"}}class qc extends lt{constructor(t,n,r){const s=`${t==="insert"?"Insert":"Update"} validation failed: ${n.map(i=>`
- ${i.message} - path: ${i.path}`).join("")}`;super(r||s),this.name="SchemaValidationError",this.type=t,this.issues=n}}class xs extends lt{constructor(t){super(t),this.name="CollectionConfigurationError"}}class Bb extends xs{constructor(){super("Collection requires a config")}}class $b extends xs{constructor(){super("Collection requires a sync config")}}class Vb extends xs{constructor(){super("Schema must implement the standard-schema interface")}}class Hc extends xs{constructor(){super("Schema validation must be synchronous")}}class Ss extends lt{constructor(t){super(t),this.name="CollectionStateError"}}class Ub extends Ss{constructor(t,n){super(`Cannot perform ${t} on collection "${n}" - collection is in error state. Try calling cleanup() and restarting the collection.`)}}class zb extends Ss{constructor(t,n,r){super(`Invalid collection status transition from "${t}" to "${n}" for collection "${r}"`)}}class Kb extends Ss{constructor(){super("Collection is in error state")}}class Wb extends Ss{constructor(){super("Active subscribers count is negative - this should never happen")}}class Vt extends lt{constructor(t){super(t),this.name="CollectionOperationError"}}class Gb extends Vt{constructor(t){super(`An object was created without a defined key: ${JSON.stringify(t)}`)}}class jb extends Vt{constructor(t,n){const r=t===null?"null":typeof t;super(`getKey returned an invalid key type. Expected string or number, but got ${r}: ${JSON.stringify(t)}. Item: ${JSON.stringify(n)}`)}}class Zb extends Vt{constructor(t){super(`Cannot insert document with ID "${t}" because it already exists in the collection`)}}class Yb extends Vt{constructor(t,n,r){const s=`Cannot insert document with key "${t}" from sync because it already exists in the collection "${n}"`;r?.hasCustomGetKey&&r.hasDistinct?super(`${s}. This collection uses a custom getKey with .distinct(). The .distinct() operator deduplicates by the ENTIRE selected object (standard SQL behavior), but your custom getKey extracts only a subset of fields. This causes multiple distinct rows (with different values in non-key fields) to receive the same key. To fix this, either: (1) ensure your SELECT only includes fields that uniquely identify each row, (2) use .groupBy() with min()/max() aggregates to select one value per group, or (3) remove the custom getKey to use the default key behavior.`):r?.hasCustomGetKey&&r.hasJoins?super(`${s}. This collection uses a custom getKey with joined queries. Joined queries can produce multiple rows with the same key when relationships are not 1:1. Consider: (1) using a composite key in your getKey function (e.g., \`\${item.key1}-\${item.key2}\`), (2) ensuring your join produces unique rows per key, or (3) removing the custom getKey to use the default composite key behavior.`):super(s)}}class qb extends Vt{constructor(){super("The first argument to update is missing")}}class Hb extends Vt{constructor(){super("No keys were passed to update")}}class Xb extends Vt{constructor(t){super(`The key "${t}" was passed to update but an object for this key was not found in the collection`)}}class Jb extends Vt{constructor(t,n){super(`Updating the key of an item is not allowed. Original key: "${t}", Attempted new key: "${n}". Please delete the old item and create a new one if a key change is necessary.`)}}class Qb extends Vt{constructor(){super("No keys were passed to delete")}}class ey extends Vt{constructor(t){super(`Collection.delete was called with key '${t}' but there is no item in the collection with this key`)}}class sa extends lt{constructor(t){super(t),this.name="MissingHandlerError"}}class ty extends sa{constructor(){super("Collection.insert called directly (not within an explicit transaction) but no 'onInsert' handler is configured.")}}class ny extends sa{constructor(){super("Collection.update called directly (not within an explicit transaction) but no 'onUpdate' handler is configured.")}}class ry extends sa{constructor(){super("Collection.delete called directly (not within an explicit transaction) but no 'onDelete' handler is configured.")}}class _n extends lt{constructor(t){super(t),this.name="TransactionError"}}class sy extends _n{constructor(){super("mutationFn is required when creating a transaction")}}class iy extends _n{constructor(){super("You can no longer call .mutate() as the transaction is no longer pending")}}class oy extends _n{constructor(){super("You can no longer call .rollback() as the transaction is already completed")}}class uy extends _n{constructor(){super("You can no longer call .commit() as the transaction is no longer pending")}}class Xc extends _n{constructor(){super("No pending sync transaction to write to")}}class Jc extends _n{constructor(){super("The pending sync transaction is already committed, you can't still write to it.")}}class ay extends _n{constructor(){super("No pending sync transaction to commit")}}class cy extends _n{constructor(){super("The pending sync transaction is already committed, you can't commit it again.")}}class Gn extends lt{constructor(t){super(t),this.name="QueryBuilderError"}}class ly extends Gn{constructor(t){super(`Only one source is allowed in the ${t}`)}}class dy extends Gn{constructor(t){super(`A sub query passed to a ${t} must have a from clause itself`)}}class fy extends Gn{constructor(t){super(`Invalid source for live query: The value provided for alias "${t}" is not a Collection or subquery. Live queries only accept Collection instances or subqueries. Please ensure you're passing a valid Collection or QueryBuilder, not a plain array or other data type.`)}}class Bs extends Gn{constructor(t,n){super(`Invalid source for ${t}: Expected an object with a single key-value pair like { alias: collection }. For example: .from({ todos: todosCollection }). Got: ${n}`)}}class hy extends Gn{constructor(){super("Join condition must be an equality expression")}}class py extends Gn{constructor(){super("Query must have a from clause")}}class Qc extends Gn{constructor(t){super(`Invalid where() expression: Expected a query expression, but received a ${t}. This usually happens when using JavaScript's comparison operators (===, !==, <, >, etc.) directly. Instead, use the query builder functions:

   .where(({ user }) => user.id === 'abc')
   .where(({ user }) => eq(user.id, 'abc'))

Available comparison functions: eq, gt, gte, lt, lte, and, or, not, like, ilike, isNull, isUndefined`)}}class dt extends lt{constructor(t){super(t),this.name="QueryCompilationError"}}class my extends dt{constructor(){super("DISTINCT requires a SELECT clause.")}}class gy extends dt{constructor(){super("HAVING clause requires GROUP BY clause")}}class by extends dt{constructor(){super("LIMIT and OFFSET require an ORDER BY clause to ensure deterministic results")}}class oh extends dt{constructor(t,n,r){const s=n?`alias "${t}" (collection "${n}")`:`collection "${t}"`,i=r?.length?`. Available keys: ${r.join(", ")}`:"";super(`Input for ${s} not found in inputs map${i}`)}}class yy extends dt{constructor(t,n){super(`Subquery uses alias "${t}" which is already used in the parent query. Each alias must be unique across parent and subquery contexts. Parent query aliases: ${n.join(", ")}. Please rename "${t}" in either the parent query or subquery to avoid conflicts.`)}}class vy extends dt{constructor(t){super(`Unsupported FROM type: ${t}`)}}class wy extends dt{constructor(t){super(`Unknown expression type: ${t}`)}}class xy extends dt{constructor(){super("Reference path cannot be empty")}}class Sy extends dt{constructor(t){super(`Unknown function: ${t}`)}}class el extends dt{constructor(t){super(`Collection "${t}" not found during compilation of join`)}}class jn extends lt{constructor(t){super(t),this.name="JoinError"}}class _y extends jn{constructor(t){super(`Unsupported join type: ${t}`)}}class Ey extends jn{constructor(t){super(`Invalid join condition: both expressions refer to the same source "${t}"`)}}class ky extends jn{constructor(){super("Invalid join condition: expressions must reference source aliases")}}class Cy extends jn{constructor(t){super(`Invalid join condition: left expression refers to an unavailable source "${t}"`)}}class Iy extends jn{constructor(t){super(`Invalid join condition: right expression does not refer to the joined source "${t}"`)}}class Ay extends jn{constructor(){super("Invalid join condition")}}class Ry extends jn{constructor(t){super(`Unsupported join source type: ${t}`)}}class $i extends lt{constructor(t){super(t),this.name="GroupByError"}}class Ty extends $i{constructor(t){super(`Non-aggregate expression '${t}' in SELECT must also appear in GROUP BY clause`)}}class Oy extends $i{constructor(t){super(`Unsupported aggregate function: ${t}`)}}class Fy extends $i{constructor(t){super(`Aggregate function in HAVING clause must also be in SELECT clause: ${t}`)}}class Dy extends $i{constructor(t){super(`Unknown expression type in HAVING clause: ${t}`)}}class tl extends lt{constructor(t,n){const r=n instanceof Error?n.message:String(n);super(`Collection "${t}" sync cleanup function threw an error: ${r}`),this.name="SyncCleanupError"}}class Ny extends lt{constructor(t){super(t),this.name="QueryOptimizerError"}}class Py extends Ny{constructor(){super("Cannot combine empty expression list")}}class Ly extends dt{constructor(t,n,r,s){super(`Internal error: subscription for alias '${t}' (remapped from '${n}', collection '${r}') is missing in join pipeline. Available aliases: ${s.join(", ")}. This indicates a bug in alias tracking.`)}}class My extends dt{constructor(t){super(`Internal error: compiler returned aliases without inputs: ${t.join(", ")}. This indicates a bug in query compilation. Please report this issue.`)}}class By extends dt{constructor(){super("setWindow() can only be called on collections with an ORDER BY clause. Add .orderBy() to your query to enable window movement.")}}const go=new WeakMap;let $y=1;function nl(e){if(go.has(e))return go.get(e);const t=$y++;return go.set(e,t),t}const ia=(e,t,n)=>{const{nulls:r}=n;if(e==null&&t==null)return 0;if(e==null)return r==="first"?-1:1;if(t==null)return r==="first"?1:-1;if(typeof e=="string"&&typeof t=="string"&&n.stringSort==="locale")return e.localeCompare(t,n.locale,n.localeOptions);if(Array.isArray(e)&&Array.isArray(t)){for(let o=0;o<Math.min(e.length,t.length);o++){const u=ia(e[o],t[o],n);if(u!==0)return u}return e.length-t.length}if(e instanceof Date&&t instanceof Date)return e.getTime()-t.getTime();const s=typeof e=="object",i=typeof t=="object";if(s||i){if(s&&i){const o=nl(e),u=nl(t);return o-u}if(s)return 1;if(i)return-1}return e<t?-1:e>t?1:0},Vy=(e,t,n)=>ia(t,e,{...n,nulls:n.nulls==="first"?"last":"first"});function bi(e){return(t,n)=>e.direction==="asc"?ia(t,n,e):Vy(t,n,e)}const su=bi({direction:"asc",nulls:"first",stringSort:"locale"});function Uy(e,t){if(e.byteLength!==t.byteLength)return!1;for(let n=0;n<e.byteLength;n++)if(e[n]!==t[n])return!1;return!0}const zy=128,uh="__TS_DB_BTREE_UNDEFINED_VALUE__";function iu(e){return e instanceof Date?e.getTime():(typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array)&&e.byteLength<=zy?`__u8__${Array.from(e).join(",")}`:e}function rn(e){return e===void 0?uh:iu(e)}function Tr(e){if(e!==uh)return e}function Ky(e,t){if(e===t)return!0;const n=typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array,r=typeof Buffer<"u"&&t instanceof Buffer||t instanceof Uint8Array;return n&&r?Uy(e,t):!1}function Ce(e){return e==null}function or(e){return e===!0}function Xe(e,t=!1){return ua(e,t)}function oa(e){return ua(e,!0)}function ua(e,t){switch(e.type){case"val":{const n=e.value;return()=>n}case"ref":return t?Gy(e):Wy(e);case"func":return jy(e,t);default:throw new wy(e.type)}}function Wy(e){const[t,...n]=e.path;if(!t)throw new xy;if(t==="$selected"){if(n.length===0)return s=>s.$selected;if(n.length===1){const s=n[0];return i=>i.$selected?.[s]}else return s=>{const i=s.$selected;if(i===void 0)return;let o=i;for(const u of n){if(o==null)return o;o=o[u]}return o}}const r=t;if(n.length===0)return s=>s[r];if(n.length===1){const s=n[0];return i=>i[r]?.[s]}else return s=>{const i=s[r];if(i===void 0)return;let o=i;for(const u of n){if(o==null)return o;o=o[u]}return o}}function Gy(e){const t=e.path;return n=>{let r=n;for(const s of t){if(r==null)return r;r=r[s]}return r}}function jy(e,t){const n=e.args.map(r=>ua(r,t));switch(e.name){case"eq":{const r=n[0],s=n[1];return i=>{const o=iu(r(i)),u=iu(s(i));return Ce(o)||Ce(u)?null:Ky(o,u)}}case"gt":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)||Ce(u)?null:o>u}}case"gte":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)||Ce(u)?null:o>=u}}case"lt":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)||Ce(u)?null:o<u}}case"lte":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)||Ce(u)?null:o<=u}}case"and":return r=>{let s=!1;for(const i of n){const o=i(r);if(o===!1)return!1;Ce(o)&&(s=!0)}return s?null:!0};case"or":return r=>{let s=!1;for(const i of n){const o=i(r);if(o===!0)return!0;Ce(o)&&(s=!0)}return s?null:!1};case"not":{const r=n[0];return s=>{const i=r(s);return Ce(i)?null:!i}}case"in":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)?null:Array.isArray(u)?u.includes(o):!1}}case"like":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)||Ce(u)?null:rl(o,u,!1)}}case"ilike":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return Ce(o)||Ce(u)?null:rl(o,u,!0)}}case"upper":{const r=n[0];return s=>{const i=r(s);return typeof i=="string"?i.toUpperCase():i}}case"lower":{const r=n[0];return s=>{const i=r(s);return typeof i=="string"?i.toLowerCase():i}}case"length":{const r=n[0];return s=>{const i=r(s);return typeof i=="string"||Array.isArray(i)?i.length:0}}case"concat":return r=>n.map(s=>{const i=s(r);try{return String(i??"")}catch{try{return JSON.stringify(i)||""}catch{return"[object]"}}}).join("");case"coalesce":return r=>{for(const s of n){const i=s(r);if(i!=null)return i}return null};case"add":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return(o??0)+(u??0)}}case"subtract":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return(o??0)-(u??0)}}case"multiply":{const r=n[0],s=n[1];return i=>{const o=r(i),u=s(i);return(o??0)*(u??0)}}case"divide":{const r=n[0],s=n[1];return i=>{const o=r(i),a=s(i)??0;return a!==0?(o??0)/a:null}}case"isUndefined":{const r=n[0];return s=>r(s)===void 0}case"isNull":{const r=n[0];return s=>r(s)===null}default:throw new Sy(e.name)}}function rl(e,t,n){if(typeof e!="string"||typeof t!="string")return!1;const r=n?e.toLowerCase():e;let i=(n?t.toLowerCase():t).replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return i=i.replace(/%/g,".*"),i=i.replace(/_/g,"."),new RegExp(`^${i}$`).test(r)}function It(e,t){return Xs(e,t,new Map)}function Xs(e,t,n){if(e===t)return!0;if(e==null||t==null||typeof e!=typeof t)return!1;if(e instanceof Date)return t instanceof Date?e.getTime()===t.getTime():!1;if(t instanceof Date)return!1;if(e instanceof RegExp)return t instanceof RegExp?e.source===t.source&&e.flags===t.flags:!1;if(t instanceof RegExp)return!1;if(e instanceof Map){if(!(t instanceof Map)||e.size!==t.size)return!1;if(n.has(e))return n.get(e)===t;n.set(e,t);const s=Array.from(e.entries()).every(([i,o])=>t.has(i)&&Xs(o,t.get(i),n));return n.delete(e),s}if(t instanceof Map)return!1;if(e instanceof Set){if(!(t instanceof Set)||e.size!==t.size)return!1;if(n.has(e))return n.get(e)===t;n.set(e,t);const r=Array.from(e),s=Array.from(t);if(r.every(o=>typeof o!="object"))return n.delete(e),r.every(o=>t.has(o));const i=r.length===s.length;return n.delete(e),i}if(t instanceof Set)return!1;if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)&&!(e instanceof DataView)&&!(t instanceof DataView)){const r=e,s=t;if(r.length!==s.length)return!1;for(let i=0;i<r.length;i++)if(r[i]!==s[i])return!1;return!0}if(ArrayBuffer.isView(t)&&!(t instanceof DataView)&&!ArrayBuffer.isView(e))return!1;if(zr(e)&&zr(t)){const r=ou(e),s=ou(t);return r!==s?!1:typeof e.equals=="function"?e.equals(t):e.toString()===t.toString()}if(zr(t))return!1;if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(n.has(e))return n.get(e)===t;n.set(e,t);const r=e.every((s,i)=>Xs(s,t[i],n));return n.delete(e),r}if(Array.isArray(t))return!1;if(typeof e=="object"){if(n.has(e))return n.get(e)===t;n.set(e,t);const r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return n.delete(e),!1;const i=r.every(o=>o in t&&Xs(e[o],t[o],n));return n.delete(e),i}return!1}const Zy=["Temporal.Duration","Temporal.Instant","Temporal.PlainDate","Temporal.PlainDateTime","Temporal.PlainMonthDay","Temporal.PlainTime","Temporal.PlainYearMonth","Temporal.ZonedDateTime"];function ou(e){return e[Symbol.toStringTag]}function zr(e){const t=ou(e);return typeof t=="string"&&Zy.includes(t)}const aa={direction:"asc",nulls:"first",stringSort:"locale"};class Yy{constructor(t){this.originalIndex=t}lookup(t,n){const r=t==="gt"?"lt":t==="gte"?"lte":t==="lt"?"gt":t==="lte"?"gte":t;return this.originalIndex.lookup(r,n)}rangeQuery(t={}){return this.originalIndex.rangeQueryReversed(t)}rangeQueryReversed(t={}){return this.originalIndex.rangeQuery(t)}take(t,n,r){return this.originalIndex.takeReversed(t,n,r)}takeFromStart(t,n){return this.originalIndex.takeReversedFromEnd(t,n)}takeReversed(t,n,r){return this.originalIndex.take(t,n,r)}takeReversedFromEnd(t,n){return this.originalIndex.takeFromStart(t,n)}get orderedEntriesArray(){return this.originalIndex.orderedEntriesArrayReversed}get orderedEntriesArrayReversed(){return this.originalIndex.orderedEntriesArray}supports(t){return this.originalIndex.supports(t)}matchesField(t){return this.originalIndex.matchesField(t)}matchesCompareOptions(t){return this.originalIndex.matchesCompareOptions(t)}matchesDirection(t){return this.originalIndex.matchesDirection(t)}getStats(){return this.originalIndex.getStats()}add(t,n){this.originalIndex.add(t,n)}remove(t,n){this.originalIndex.remove(t,n)}update(t,n,r){this.originalIndex.update(t,n,r)}build(t){this.originalIndex.build(t)}clear(){this.originalIndex.clear()}get keyCount(){return this.originalIndex.keyCount}equalityLookup(t){return this.originalIndex.equalityLookup(t)}inArrayLookup(t){return this.originalIndex.inArrayLookup(t)}get indexedKeysSet(){return this.originalIndex.indexedKeysSet}get valueMapData(){return this.originalIndex.valueMapData}}function _s(e,t,n){const r=n??{...aa,...e.compareOptions};for(const s of e.indexes.values())if(s.matchesField(t)&&s.matchesCompareOptions(r))return s.matchesDirection(r.direction)?s:new Yy(s)}function qy(e){if(e.length===0)return new Set;if(e.length===1)return new Set(e[0]);let t=new Set(e[0]);for(let n=1;n<e.length;n++){const r=new Set;for(const s of t)e[n].has(s)&&r.add(s);t=r}return t}function Hy(e){const t=new Set;for(const n of e)for(const r of n)t.add(r);return t}function Xy(e,t){return ca(e,t)}function ca(e,t){if(e.type==="func")switch(e.name){case"eq":case"gt":case"gte":case"lt":case"lte":return Qy(e,t);case"and":return e1(e,t);case"or":return t1(e,t);case"in":return n1(e,t)}return{canOptimize:!1,matchingKeys:new Set}}function Jy(e,t){if(e.type!=="func"||e.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=new Map;for(const r of e.args)if(r.type==="func"&&["gt","gte","lt","lte"].includes(r.name)){const s=r;if(s.args.length===2){const i=s.args[0],o=s.args[1];let u=null,a=null,c=s.name;if(i.type==="ref"&&o.type==="val")u=i,a=o;else if(i.type==="val"&&o.type==="ref")switch(u=o,a=i,c){case"gt":c="lt";break;case"gte":c="lte";break;case"lt":c="gt";break;case"lte":c="gte";break}if(u&&a){const d=u.path.join("."),p=a.value;n.has(d)||n.set(d,[]),n.get(d).push({operation:c,value:p})}}}for(const[r,s]of n)if(s.length>=2){const i=r.split("."),o=_s(t,i);if(o&&o.supports("gt")&&o.supports("lt")){let u,a,c=!0,l=!0;for(const{operation:p,value:f}of s)switch(p){case"gt":(u===void 0||f>u)&&(u=f,c=!1);break;case"gte":(u===void 0||f>u)&&(u=f,c=!0);break;case"lt":(a===void 0||f<a)&&(a=f,l=!1);break;case"lte":(a===void 0||f<a)&&(a=f,l=!0);break}return{canOptimize:!0,matchingKeys:o.rangeQuery({from:u,to:a,fromInclusive:c,toInclusive:l})}}}return{canOptimize:!1,matchingKeys:new Set}}function Qy(e,t){if(e.type!=="func"||e.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=e.args[0],r=e.args[1];let s=null,i=null,o=e.name;if(n.type==="ref"&&r.type==="val")s=n,i=r;else if(n.type==="val"&&r.type==="ref")switch(s=r,i=n,o){case"gt":o="lt";break;case"gte":o="lte";break;case"lt":o="gt";break;case"lte":o="gte";break}if(s&&i){const u=s.path,a=_s(t,u);if(a){const c=i.value,l=o;return a.supports(l)?{canOptimize:!0,matchingKeys:a.lookup(l,c)}:{canOptimize:!1,matchingKeys:new Set}}}return{canOptimize:!1,matchingKeys:new Set}}function e1(e,t){if(e.type!=="func"||e.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=Jy(e,t);if(n.canOptimize)return n;const r=[];for(const s of e.args){const i=ca(s,t);i.canOptimize&&r.push(i)}if(r.length>0){const s=r.map(o=>o.matchingKeys);return{canOptimize:!0,matchingKeys:qy(s)}}return{canOptimize:!1,matchingKeys:new Set}}function t1(e,t){if(e.type!=="func"||e.args.length<2)return{canOptimize:!1,matchingKeys:new Set};const n=[];for(const r of e.args){const s=ca(r,t);s.canOptimize&&n.push(s)}if(n.length>0){const r=n.map(i=>i.matchingKeys);return{canOptimize:!0,matchingKeys:Hy(r)}}return{canOptimize:!1,matchingKeys:new Set}}function n1(e,t){if(e.type!=="func"||e.args.length!==2)return{canOptimize:!1,matchingKeys:new Set};const n=e.args[0],r=e.args[1];if(n.type==="ref"&&r.type==="val"&&Array.isArray(r.value)){const s=n.path,i=r.value,o=_s(t,s);if(o){if(o.supports("in"))return{canOptimize:!0,matchingKeys:o.lookup("in",i)};if(o.supports("eq")){const u=new Set;for(const a of i){const c=o.lookup("eq",a);for(const l of c)u.add(l)}return{canOptimize:!0,matchingKeys:u}}}}return{canOptimize:!1,matchingKeys:new Set}}class r1 extends Map{constructor(t,n){super(n),this.defaultValue=t}get(t){return this.has(t)?super.get(t):this.defaultValue()}update(t,n){const r=this.get(t),s=n(r);return this.set(t,s),s}}const bo=3e4;function yo(e,t){if(t.length<=bo)e.push(...t);else for(let n=0;n<t.length;n+=bo){const r=t.slice(n,n+bo);e.push(...r)}}function s1(e,t,n){let r=0,s=e.length;for(;r<s;){const i=Math.floor((r+s)/2),o=n(e[i],t);if(o<0)r=i+1;else if(o>0)s=i;else return i}return r}class i1{constructor(){this.objectIds=new WeakMap,this.nextId=0}getId(t){if(typeof t!="object"||t===null){const n=String(t);let r=0;for(let s=0;s<n.length;s++){const i=n.charCodeAt(s);r=(r<<5)-r+i,r=r&r}return r}return this.objectIds.has(t)||this.objectIds.set(t,this.nextId++),this.objectIds.get(t)}getStringId(t){return t===null?"null":t===void 0?"undefined":typeof t!="object"?`str_${String(t)}`:`obj_${this.getId(t)}`}}const vo=new i1;function o1(e,t){const[n,r]=e,[s,i]=t,o=[...$s(n,Math.min(r,s)),...$s(Math.max(n,i),r)],u=[...$s(s,Math.min(i,n)),...$s(Math.max(s,r),i)];return{onlyInA:o,onlyInB:u}}function $s(e,t){const n=[];for(let r=e;r<t;r++)n.push(r);return n}function yi(e,t){return typeof e==typeof t?e<t?-1:e>t?1:0:typeof e=="string"?-1:1}function la(e){return JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString():n instanceof Date?n.toISOString():n)}const u1=Be(),a1=Be(),c1=Be(),l1=Be(),d1=Be();function Be(){return Math.random()*(2**31-1)>>>0}const ah=new ArrayBuffer(8),f1=new DataView(ah),sn=new Uint8Array(ah);class Vi{constructor(){this.hash=u1,this.length=0,this.carry=0,this.carryBytes=0}_mix(t){t=Math.imul(t,3432918353),t=t<<15|t>>>17,t=Math.imul(t,461845907),this.hash^=t,this.hash=this.hash<<13|this.hash>>>19,this.hash=Math.imul(this.hash,5)+3864292196}writeByte(t){this.carry|=(t&255)<<8*this.carryBytes,this.carryBytes++,this.length++,this.carryBytes===4&&(this._mix(this.carry>>>0),this.carry=0,this.carryBytes=0)}update(t){switch(typeof t){case"symbol":{this.update(d1);const n=t.description;if(!n)return;for(let r=0;r<n.length;r++){const s=n.charCodeAt(r);this.writeByte(s&255),this.writeByte(s>>>8&255)}return}case"string":this.update(a1);for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);this.writeByte(r&255),this.writeByte(r>>>8&255)}return;case"number":f1.setFloat64(0,t,!0),this.writeByte(sn[0]),this.writeByte(sn[1]),this.writeByte(sn[2]),this.writeByte(sn[3]),this.writeByte(sn[4]),this.writeByte(sn[5]),this.writeByte(sn[6]),this.writeByte(sn[7]);return;case"bigint":{let n=t;for(n<0n?(n=-n,this.update(l1)):this.update(c1);n>0n;)this.writeByte(Number(n&0xffn)),n>>=8n;t===0n&&this.writeByte(0);return}default:throw new TypeError(`Unsupported input type: ${typeof t}`)}}digest(){if(this.carryBytes>0){let t=this.carry>>>0;t=Math.imul(t,3432918353),t=t<<15|t>>>17,t=Math.imul(t,461845907),this.hash^=t}return this.hash^=this.length,this.hash^=this.hash>>>16,this.hash=Math.imul(this.hash,2246822507),this.hash^=this.hash>>>13,this.hash=Math.imul(this.hash,3266489909),this.hash^=this.hash>>>16,this.hash>>>0}}const h1=Be(),p1=Be(),m1=Be(),g1=Be(),b1=Be(),y1=Be(),v1=Be(),w1=Be(),x1=Be(),S1=Be(),_1=Be(),E1=Be(),k1=128,es=new WeakMap;function Ge(e){const t=new Vi;return ch(t,e),t.digest()}function C1(e){const t=es.get(e);if(t!==void 0)return t;let n;if(e instanceof Date)n=I1(e);else if(typeof Buffer<"u"&&e instanceof Buffer||e instanceof Uint8Array)if(e.byteLength<=k1)n=A1(e);else return uu(e);else{if(e instanceof File)return uu(e);{let r=e,s=w1;e instanceof Array&&(s=x1),e instanceof Map&&(s=S1,r=[...e.entries()]),e instanceof Set&&(s=_1,r=[...e.entries()]),n=R1(r,s)}}return es.set(e,n),n}function I1(e){const t=new Vi;return t.update(v1),t.update(e.getTime()),t.digest()}function A1(e){const t=new Vi;t.update(E1),t.update(e.byteLength);for(let n=0;n<e.byteLength;n++)t.writeByte(e[n]);return t.digest()}function R1(e,t){const n=new Vi;n.update(t);const r=Object.keys(e);r.sort(O1);for(const s of r)n.update(b1),n.update(s),ch(n,e[s]);return n.digest()}function ch(e,t){if(t===null){e.update(m1);return}switch(typeof t){case"undefined":e.update(g1);return;case"boolean":e.update(t?h1:p1);return;case"number":e.update(isNaN(t)?NaN:t===0?0:t);return;case"bigint":case"string":case"symbol":e.update(t);return;case"object":e.update(T1(t));return;case"function":e.update(uu(t));return;default:console.warn(`Ignored input during hashing because it is of type ${typeof t} which is not supported`)}}function T1(e){let t=es.get(e);return t===void 0&&(t=C1(e)),t}let sl=1;function uu(e){let t=es.get(e);return t===void 0&&(t=sl^y1,sl++,es.set(e,t)),t}function O1(e,t){return e.localeCompare(t)}class _e{#e;constructor(t=[]){this.#e=t}toString(t=!1){return`MultiSet(${JSON.stringify(this.#e,null,t?2:void 0)})`}toJSON(){return JSON.stringify(Array.from(this.getInner()))}static fromJSON(t){return new _e(JSON.parse(t))}map(t){return new _e(this.#e.map(([n,r])=>[t(n),r]))}filter(t){return new _e(this.#e.filter(([n,r])=>t(n)))}negate(){return new _e(this.#e.map(([t,n])=>[t,-n]))}concat(t){const n=[];return yo(n,this.#e),yo(n,t.getInner()),new _e(n)}consolidate(){if(this.#e.length>0){const t=this.#e[0]?.[0];if(Array.isArray(t)&&t.length===2)return this.#t()}return this.#n()}#t(){const t=new Map,n=new Map,r=i=>{if(i.length!==2)throw new Error("Expected tuple of length 2");const[o,u]=i;return`${vo.getStringId(o)}|${vo.getStringId(u)}`};for(const[i,o]of this.#e){if(!Array.isArray(i)||i.length!==2)return this.#n();const[u,a]=i;if(typeof u!="string"&&typeof u!="number")return this.#n();let c;Array.isArray(a)&&a.length===2?c=r(a):c=vo.getStringId(a);const l=u+"|"+c;t.set(l,(t.get(l)||0)+o),n.has(l)||n.set(l,i)}const s=[];for(const[i,o]of t)o!==0&&s.push([n.get(i),o]);return new _e(s)}#n(){const t=new r1(()=>0),n=new Map;let r=!1,s=!1,i=!1;for(const[a,c]of this.#e)if(typeof a=="string")r=!0;else if(typeof a=="number")s=!0;else{i=!0;break}const o=i||r&&s;for(const[a,c]of this.#e){const l=o?Ge(a):a;o&&!n.has(l)&&n.set(l,a),t.update(l,d=>d+c)}const u=[];for(const[a,c]of t.entries())if(c!==0){const l=o?n.get(a):a;u.push([l,c])}return new _e(u)}extend(t){const n=t instanceof _e?t.getInner():t;yo(this.#e,n)}add(t,n){n!==0&&this.#e.push([t,n])}getInner(){return this.#e}}class F1{#e;constructor(t){this.#e=t}drain(){const t=[...this.#e].reverse();return this.#e.length=0,t}isEmpty(){return this.#e.length===0}}class Ut{#e=[];sendData(t){t instanceof _e||(t=new _e(t));for(const n of this.#e)n.unshift(t)}newReader(){const t=[];return this.#e.push(t),new F1(t)}}class lh{constructor(t,n,r){this.id=t,this.inputs=n,this.output=r}hasPendingWork(){return this.inputs.some(t=>!t.isEmpty())}}class _r extends lh{constructor(t,n,r){super(t,[n],r),this.id=t}inputMessages(){return this.inputs[0].drain()}}class D1 extends lh{constructor(t,n,r,s){super(t,[n,r],s),this.id=t}inputAMessages(){return this.inputs[0].drain()}inputBMessages(){return this.inputs[1].drain()}}class da extends _r{run(){for(const t of this.inputMessages())this.output.sendData(this.inner(t))}}class N1{#e=[];#t=0;#n=!1;constructor(){}#r(){if(this.#n)throw new Error("Graph already finalized")}getNextOperatorId(){return this.#r(),this.#t++}newInput(){this.#r();const t=new Ut;return new P1(this,t)}addOperator(t){this.#r(),this.#e.push(t)}finalize(){this.#r(),this.#n=!0}step(){if(!this.#n)throw new Error("Graph not finalized");for(const t of this.#e)t.run()}pendingWork(){return this.#e.some(t=>t.hasPendingWork())}run(){for(;this.pendingWork();)this.step()}}class zt{#e;#t;constructor(t,n){this.#e=t,this.#t=n}connectReader(){return this.#t.newReader()}get writer(){return this.#t}get graph(){return this.#e}pipe(...t){return t.reduce((n,r)=>r(n),this)}}class P1 extends zt{sendData(t){this.writer.sendData(t)}}class L1 extends da{#e;constructor(t,n,r,s){super(t,n,r),this.#e=s}inner(t){return t.map(this.#e)}}function je(e){return t=>{const n=new zt(t.graph,new Ut),r=new L1(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}const Lr=Symbol("NO_PREFIX");class il extends Map{addValue(t,n){if(n===0)return this.size===0;const r=Kr(t),s=this.get(r);if(Js(s)){const[i,o]=s;if(Kr(i)!==r)throw new Error("Mismatching prefixes, this should never happen");if(i===t||Ge(i)===Ge(t)){const a=o+n;a===0?this.delete(r):this.set(r,[t,a])}else{const a=new Mr;a.set(Ge(i),s),a.set(Ge(t),[t,n]),this.set(r,a)}}else s===void 0?this.set(r,[t,n]):s.addValue(t,n)&&this.delete(r);return this.size===0}}class Mr extends Map{addValue(t,n){if(n===0)return this.size===0;const r=Ge(t),s=this.get(r);if(s){const[,i]=s,o=i+n;o===0?this.delete(r):this.set(r,[t,o])}else this.set(r,[t,n]);return this.size===0}}class dn{#e;#t=new Map;constructor(){this.#e=new Map}static fromMultiSets(t){const n=new dn;for(const r of t)for(const[s,i]of r.getInner()){const[o,u]=s;n.addValue(o,[u,i])}return n}toString(t=!1){return`Index(${JSON.stringify([...this.entries()],void 0,t?2:void 0)})`}get size(){return this.#e.size}has(t){return this.#e.has(t)}hasPresence(t){return(this.#t.get(t)||0)!==0}getConsolidatedMultiplicity(t){return this.#t.get(t)||0}getPresenceKeys(){return this.#t.keys()}get(t){return[...this.getIterator(t)]}*getIterator(t){const n=this.#e.get(t);if(Js(n))yield n;else{if(n===void 0)return;if(n instanceof Mr)for(const r of n.values())yield r;else for(const r of n.values())if(Js(r))yield r;else for(const s of r.values())yield s}}*entries(){for(const t of this.#e.keys())for(const n of this.getIterator(t))yield[t,n]}*entriesIterators(){for(const t of this.#e.keys())yield[t,this.getIterator(t)]}addValue(t,n){const[r,s]=n;if(s===0)return;const i=(this.#t.get(t)||0)+s;i===0?this.#t.delete(t):this.#t.set(t,i);const o=this.#e.get(t);if(o===void 0){this.#e.set(t,n);return}if(Js(o)){this.#n(t,o,r,s);return}if(o instanceof Mr){const u=Kr(r);if(u!==Lr){const a=new il;a.set(Lr,o),a.set(u,n),this.#e.set(t,a)}else o.addValue(r,s)&&this.#e.delete(t)}else o.addValue(r,s)&&this.#e.delete(t)}#n(t,n,r,s){const[i,o]=n;if(i===r){const c=o+s;c===0?this.#e.delete(t):this.#e.set(t,[r,c]);return}const u=Kr(r),a=Kr(i);if(a===u&&(i===r||Ge(i)===Ge(r))){const c=o+s;c===0?this.#e.delete(t):this.#e.set(t,[r,c]);return}if(a===Lr&&u===Lr){const c=new Mr;c.set(Ge(i),n),c.set(Ge(r),[r,s]),this.#e.set(t,c)}else{const c=new il;if(a===u){const l=new Mr;l.set(Ge(i),n),l.set(Ge(r),[r,s]),c.set(a,l)}else c.set(a,n),c.set(u,[r,s]);this.#e.set(t,c)}}append(t){for(const[n,r]of t.entries())this.addValue(n,r)}join(t){const n=[];if(this.size<=t.size)for(const[r,s]of this.entriesIterators()){if(!t.has(r))continue;const i=t.get(r);for(const[o,u]of s)for(const[a,c]of i)u!==0&&c!==0&&n.push([[r,[o,a]],u*c])}else for(const[r,s]of t.entriesIterators()){if(!this.has(r))continue;const i=this.get(r);for(const[o,u]of s)for(const[a,c]of i)c!==0&&u!==0&&n.push([[r,[a,o]],c*u])}return new _e(n)}}function Kr(e){return Array.isArray(e)&&(typeof e[0]=="string"||typeof e[0]=="number"||typeof e[0]=="bigint")?e[0]:Lr}function Js(e){return Array.isArray(e)}class M1 extends _r{#e=new dn;#t=new dn;#n;constructor(t,n,r,s){super(t,n,r),this.#n=s}run(){const t=new Set;for(const r of this.inputMessages())for(const[s,i]of r.getInner()){const[o,u]=s;this.#e.addValue(o,[u,i]),t.add(o)}const n=[];for(const r of t){const s=this.#e.get(r),i=this.#t.get(r),o=this.#n(s),u=new Map,a=new Map;for(const[c,l]of o){const d=u.get(c)??0;u.set(c,d+l)}for(const[c,l]of i){const d=a.get(c)??0;a.set(c,d+l)}for(const[c,l]of a)u.has(c)||(n.push([[r,c],-l]),this.#t.addValue(r,[c,-l]));for(const[c,l]of u)a.has(c)||l!==0&&(n.push([[r,c],l]),this.#t.addValue(r,[c,l]));for(const[c,l]of u){const d=a.get(c);if(d!==void 0){const p=l-d;p!==0&&(n.push([[r,c],p]),this.#t.addValue(r,[c,p]))}}}n.length>0&&this.output.sendData(new _e(n))}}function B1(e){return t=>{const n=new zt(t.graph,new Ut),r=new M1(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}function ol(e){return"pipe"in e}function ul(e,t={}){const n=Object.fromEntries(Object.entries(t).filter(([r,s])=>!ol(s)));return Object.fromEntries(Object.entries(t).filter(([r,s])=>ol(s))),r=>{const s="__original_key__";return r.pipe(je(u=>{const a=e(u),c=la(a),l={};l[s]=a;for(const[d,p]of Object.entries(n))l[d]=p.preMap(u);return[c,l]})).pipe(B1(u=>{let a=0;for(const[d,p]of u)a+=p;if(a<=0)return[];const c={},l=u[0]?.[0]?.[s];c[s]=l;for(const[d,p]of Object.entries(n)){const f=u.map(([h,m])=>[h[d],m]);c[d]=p.reduce(f)}return[[c,1]]})).pipe(je(([u,a])=>{const c=a[s],l={};Object.assign(l,c);for(const[d,p]of Object.entries(n))p.postMap?l[d]=p.postMap(a[d]):l[d]=a[d];return[u,l]}))}}function $1(e=t=>t){return{preMap:t=>e(t),reduce:t=>{let n=0;for(const[r,s]of t)n+=r*s;return n}}}function V1(e=t=>t){return{preMap:t=>e(t)==null?0:1,reduce:t=>{let n=0;for(const[r,s]of t)n+=r*s;return n}}}function U1(e=t=>t){return{preMap:t=>({sum:e(t),count:0}),reduce:t=>{let n=0,r=0;for(const[s,i]of t)n+=s.sum*i,r+=i;return{sum:n,count:r}},postMap:t=>t.sum/t.count}}function z1(e){const t=e??(n=>n);return{preMap:n=>t(n),reduce:n=>{let r;for(const[s,i]of n)(!r||s&&s<r)&&(r=s);return r}}}function K1(e){const t=e??(n=>n);return{preMap:n=>t(n),reduce:n=>{let r;for(const[s,i]of n)(!r||s&&s>r)&&(r=s);return r}}}const W1={sum:$1,count:V1,avg:U1,min:z1,max:K1};class G1 extends da{#e;constructor(t,n,r,s){super(t,n,r),this.#e=s}inner(t){return this.#e(t),t}}function j1(e){return t=>{const n=new zt(t.graph,new Ut),r=new G1(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}class Z1 extends da{#e;constructor(t,n,r,s){super(t,n,r),this.#e=s}inner(t){return t.filter(this.#e)}}function fn(e){return t=>{const n=new zt(t.graph,new Ut),r=new Z1(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}class Y1 extends _r{#e;constructor(t,n,r,s){super(t,n,r),this.#e=s}run(){for(const t of this.inputMessages())this.#e(t),this.output.sendData(t)}}function q1(e){return t=>{const n=new zt(t.graph,new Ut),r=new Y1(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}class H1 extends _r{run(){const t=this.inputMessages();if(t.length===0)return;const n=new _e;for(const s of t)n.extend(s);const r=n.consolidate();r.getInner().length>0&&this.output.sendData(r)}}function X1(){return e=>{const t=new zt(e.graph,new Ut),n=new H1(e.graph.getNextOperatorId(),e.connectReader(),t.writer);return e.graph.addOperator(n),t}}class J1 extends D1{#e=new dn;#t=new dn;#n;constructor(t,n,r,s,i="inner"){super(t,n,r,s),this.#n=i}run(){const t=dn.fromMultiSets(this.inputAMessages()),n=dn.fromMultiSets(this.inputBMessages());if(t.size===0&&n.size===0)return;const r=new _e;this.#n!=="anti"&&this.emitInnerResults(t,n,r),(this.#n==="left"||this.#n==="full"||this.#n==="anti")&&this.emitLeftOuterResults(t,n,r),(this.#n==="right"||this.#n==="full")&&this.emitRightOuterResults(t,n,r),this.#e.append(t),this.#t.append(n),r.getInner().length>0&&this.output.sendData(r)}emitInnerResults(t,n,r){t.size>0&&r.extend(t.join(this.#t)),n.size>0&&r.extend(this.#e.join(n)),t.size>0&&n.size>0&&r.extend(t.join(n))}emitLeftOuterResults(t,n,r){if(t.size>0)for(const[s,i]of t.entriesIterators()){const o=this.#t.getConsolidatedMultiplicity(s),u=n.getConsolidatedMultiplicity(s);if(o+u===0)for(const[c,l]of i)l!==0&&r.add([s,[c,null]],l)}if(n.size>0)for(const s of n.getPresenceKeys()){const i=this.#t.getConsolidatedMultiplicity(s),o=n.getConsolidatedMultiplicity(s);if(o===0)continue;const u=i+o;if(i===0==(u===0))continue;const a=i===0;for(const[c,l]of this.#e.getIterator(s))l!==0&&r.add([s,[c,null]],a?-l:+l)}}emitRightOuterResults(t,n,r){if(n.size>0)for(const[s,i]of n.entriesIterators()){const o=this.#e.getConsolidatedMultiplicity(s),u=t.getConsolidatedMultiplicity(s);if(o+u===0)for(const[c,l]of i)l!==0&&r.add([s,[null,c]],l)}if(t.size>0)for(const s of t.getPresenceKeys()){const i=this.#e.getConsolidatedMultiplicity(s),o=t.getConsolidatedMultiplicity(s);if(o===0)continue;const u=i+o;if(i===0==(u===0))continue;const a=i===0;for(const[c,l]of this.#t.getIterator(s))l!==0&&r.add([s,[null,c]],a?-l:+l)}}}function Q1(e,t="inner"){return n=>{if(n.graph!==e.graph)throw new Error("Cannot join streams from different graphs");const r=new zt(n.graph,new Ut),s=new J1(n.graph.getNextOperatorId(),n.connectReader(),e.connectReader(),r.writer,t);return n.graph.addOperator(s),r}}class e2 extends _r{#e;#t;constructor(t,n,r,s=i=>i){super(t,n,r),this.#e=s,this.#t=new Map}run(){const t=new Map;for(const r of this.inputMessages())for(const[s,i]of r.getInner()){const o=Ge(this.#e(s)),a=(t.get(o)?.[0]??this.#t.get(o)??0)+i;t.set(o,[a,s])}const n=[];for(const[r,[s,i]]of t.entries()){const o=this.#t.get(r)??0;s===0?this.#t.delete(r):this.#t.set(r,s),o<=0&&s>0?n.push([[Ge(this.#e(i)),i[1]],1]):o>0&&s<=0&&n.push([[Ge(this.#e(i)),i[1]],-1])}n.length>0&&this.output.sendData(new _e(n))}}function t2(e=t=>t){return t=>{const n=new zt(t.graph,new Ut),r=new e2(t.graph.getNextOperatorId(),t.connectReader(),n.writer,e);return t.graph.addOperator(r),n}}const n2="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";function Qn(e,t,n){const r=n[0];if(t!=null&&e>=t)throw new Error(e+" >= "+t);if(e.slice(-1)===r||t&&t.slice(-1)===r)throw new Error("trailing zero");if(t){let o=0;for(;(e[o]||r)===t[o];)o++;if(o>0)return t.slice(0,o)+Qn(e.slice(o),t.slice(o),n)}const s=e?n.indexOf(e[0]):0,i=t!=null?n.indexOf(t[0]):n.length;if(i-s>1){const o=Math.round(.5*(s+i));return n[o]}else return t&&t.length>1?t.slice(0,1):n[s]+Qn(e.slice(1),null,n)}function dh(e){if(e.length!==fh(e[0]))throw new Error("invalid integer part of order key: "+e)}function fh(e){if(e>="a"&&e<="z")return e.charCodeAt(0)-97+2;if(e>="A"&&e<="Z")return 90-e.charCodeAt(0)+2;throw new Error("invalid order key head: "+e)}function Br(e){const t=fh(e[0]);if(t>e.length)throw new Error("invalid order key: "+e);return e.slice(0,t)}function al(e,t){if(e==="A"+t[0].repeat(26))throw new Error("invalid order key: "+e);const n=Br(e);if(e.slice(n.length).slice(-1)===t[0])throw new Error("invalid order key: "+e)}function cl(e,t){dh(e);const[n,...r]=e.split("");let s=!0;for(let i=r.length-1;s&&i>=0;i--){const o=t.indexOf(r[i])+1;o===t.length?r[i]=t[0]:(r[i]=t[o],s=!1)}if(s){if(n==="Z")return"a"+t[0];if(n==="z")return null;const i=String.fromCharCode(n.charCodeAt(0)+1);return i>"a"?r.push(t[0]):r.pop(),i+r.join("")}else return n+r.join("")}function r2(e,t){dh(e);const[n,...r]=e.split("");let s=!0;for(let i=r.length-1;s&&i>=0;i--){const o=t.indexOf(r[i])-1;o===-1?r[i]=t.slice(-1):(r[i]=t[o],s=!1)}if(s){if(n==="a")return"Z"+t.slice(-1);if(n==="A")return null;const i=String.fromCharCode(n.charCodeAt(0)-1);return i<"Z"?r.push(t.slice(-1)):r.pop(),i+r.join("")}else return n+r.join("")}function s2(e,t,n=n2){if(e!=null&&al(e,n),t!=null&&al(t,n),e!=null&&t!=null&&e>=t)throw new Error(e+" >= "+t);if(e==null){if(t==null)return"a"+n[0];const a=Br(t),c=t.slice(a.length);if(a==="A"+n[0].repeat(26))return a+Qn("",c,n);if(a<t)return a;const l=r2(a,n);if(l==null)throw new Error("cannot decrement any more");return l}if(t==null){const a=Br(e),c=e.slice(a.length),l=cl(a,n);return l??a+Qn(c,null,n)}const r=Br(e),s=e.slice(r.length),i=Br(t),o=t.slice(i.length);if(r===i)return r+Qn(s,o,n);const u=cl(r,n);if(u==null)throw new Error("cannot increment any more");return u<t?u:r+Qn(s,null,n)}function ll(e,t){return[e,t]}function dl(e){return e[0]}function fl(e){return e[1]}function i2(e){return([t,n],[r,s])=>{const i=e(n,s);return i!==0?i:yi(t,r)}}class hh{#e=[];#t;#n;#r;constructor(t,n,r){this.#n=t,this.#r=t+n,this.#t=r}get size(){const t=this.#n,n=this.#r-this.#n,r=this.#e.length-t;return Math.max(0,Math.min(n,r))}move({offset:t,limit:n}){const r=this.#n,s=this.#r-this.#n,i=[this.#n,this.#r===1/0?this.#n+this.size:this.#r];this.#n=t??r,this.#r=this.#n+(n??s);const o=[this.#n,this.#r===1/0?Math.max(this.#n+this.size,i[1]):this.#r],{onlyInA:u,onlyInB:a}=o1(i,o),c=[];a.forEach(d=>{const p=this.#e[d];p&&c.push(p)});const l=[];return u.forEach(d=>{const p=this.#e[d];p&&l.push(p)}),{moveIns:c,moveOuts:l,changes:u.length+a.length>0}}insert(t){const n={moveIn:null,moveOut:null},r=this.#s(t),s=r===0?null:fl(this.#e[r-1]),i=r===this.#e.length?null:fl(this.#e[r]),o=s2(s,i),u=ll(t,o);if(this.#e.splice(r,0,u),r<this.#r){const a=Math.max(r,this.#n);a<this.#e.length&&(n.moveIn=this.#e[a],this.#r<this.#e.length&&(n.moveOut=this.#e[this.#r]))}return n}delete(t){const n={moveIn:null,moveOut:null},r=this.#s(t),[s]=this.#e.splice(r,1);if(r<this.#r){if(n.moveOut=s,r<this.#n){const o=this.#n-1;o<this.#e.length?n.moveOut=this.#e[o]:n.moveOut=null}const i=this.#r-1;i<this.#e.length&&(n.moveIn=this.#e[i])}return n}#s(t){return s1(this.#e,ll(t,""),(n,r)=>this.#t(dl(n),dl(r)))}}class o2{#e=new Map;#t;constructor(t){this.#t=t}get size(){return this.#t.size}get isEmpty(){return this.#e.size===0&&this.#t.size===0}processElement(t,n,r){const{oldMultiplicity:s,newMultiplicity:i}=this.#n(t,r);return s<=0&&i>0?this.#t.insert([t,n]):s>0&&i<=0?this.#t.delete([t,n]):{moveIn:null,moveOut:null}}move(t){if(!(this.#t instanceof hh))throw new Error("Cannot move B+-tree implementation of TopK with fractional index");return this.#t.move(t)}#n(t,n){if(n===0){const i=this.#e.get(t)??0;return{oldMultiplicity:i,newMultiplicity:i}}const r=this.#e.get(t)??0,s=r+n;return s===0?this.#e.delete(t):this.#e.set(t,s),{oldMultiplicity:r,newMultiplicity:s}}}function hl(e,t){if(e){const[[n,r],s]=e;t.push([[n,[r,s]],1])}}function pl(e,t){if(e){const[[n,r],s]=e;t.push([[n,[r,s]],-1])}}class u2 extends _r{#e;constructor(t,n,r,s,i){super(t,n,r);const o=i.limit??1/0,u=i.offset??0,a=this.createTopK(u,o,i2(s));this.#e=new o2(a),i.setSizeCallback?.(()=>this.#e.size),i.setWindowFn?.(this.moveTopK.bind(this))}createTopK(t,n,r){return new hh(t,n,r)}moveTopK({offset:t,limit:n}){const r=[],s=this.#e.move({offset:t,limit:n});s.moveIns.forEach(i=>hl(i,r)),s.moveOuts.forEach(i=>pl(i,r)),s.changes&&this.output.sendData(new _e(r))}run(){const t=[];for(const n of this.inputMessages())for(const[r,s]of n.getInner()){const[i,o]=r;this.processElement(i,o,s,t)}t.length>0&&this.output.sendData(new _e(t))}processElement(t,n,r,s){const i=this.#e.processElement(t,n,r);hl(i.moveIn,s),pl(i.moveOut,s)}}function a2(e,t){const n=t||{};return r=>{const s=new zt(r.graph,new Ut),i=new u2(r.graph.getNextOperatorId(),r.connectReader(),s.writer,e,n);return r.graph.addOperator(i),s}}function c2(e,t,n){const r=n?.limit??1/0,s=n?.offset??0,i=n?.setSizeCallback,o=n?.setWindowFn,u=n?.comparator??((a,c)=>a===c?0:a<c?-1:1);return a=>a.pipe(e((c,l)=>u(t(c),t(l)),{limit:r,offset:s,setSizeCallback:i,setWindowFn:o}),X1())}function l2(e,t){return c2(a2,e,t)}class d2{constructor(t,n,r){this._root=wo,this._size=0,this._maxNodeSize=r>=4?Math.min(r,256):32,this._compare=t,n&&this.setPairs(n)}get size(){return this._size}get length(){return this._size}get isEmpty(){return this._size===0}clear(){this._root=wo,this._size=0}get(t,n){return this._root.get(t,n,this)}set(t,n,r){this._root.isShared&&(this._root=this._root.clone());const s=this._root.set(t,n,r,this);return s===!0||s===!1?s:(this._root=new fa([this._root,s]),!0)}has(t){return this.forRange(t,t,!0,void 0)!==0}delete(t){return this.editRange(t,t,!0,h2)!==0}get maxNodeSize(){return this._maxNodeSize}minKey(){return this._root.minKey()}maxKey(){return this._root.maxKey()}keysArray(){const t=[];return this._root.forRange(this.minKey(),this.maxKey(),!0,!1,this,0,(n,r)=>{t.push(n)}),t}nextHigherPair(t,n){return n=n||[],t===void 0?this._root.minPair(n):this._root.getPairOrNextHigher(t,this._compare,!1,n)}nextHigherKey(t){const n=this.nextHigherPair(t,ml);return n&&n[0]}nextLowerPair(t,n){return n=n||[],t===void 0?this._root.maxPair(n):this._root.getPairOrNextLower(t,this._compare,!1,n)}nextLowerKey(t){const n=this.nextLowerPair(t,ml);return n&&n[0]}setPairs(t,n){let r=0;for(const s of t)this.set(s[0],s[1],n)&&r++;return r}forRange(t,n,r,s,i){const o=this._root.forRange(t,n,r,!1,this,i||0,s);return typeof o=="number"?o:o.break}editRange(t,n,r,s,i){let o=this._root;o.isShared&&(this._root=o=o.clone());try{const u=o.forRange(t,n,r,!0,this,i||0,s);return typeof u=="number"?u:u.break}finally{let u;for(;o.keys.length<=1&&!o.isLeaf;)u||=o.isShared,this._root=o=o.keys.length===0?wo:o.children[0];u&&(o.isShared=!0)}}}class ts{get isLeaf(){return this.children===void 0}constructor(t=[],n){this.keys=t,this.values=n||Ve,this.isShared=void 0}maxKey(){return this.keys[this.keys.length-1]}indexOf(t,n,r){const s=this.keys;let i=0,o=s.length,u=o>>1;for(;i<o;){const a=r(s[u],t);if(a<0)i=u+1;else if(a>0)o=u;else{if(a===0)return u;if(t===t)return s.length;throw new Error("BTree: NaN was used as a key")}u=i+o>>1}return u^n}minKey(){return this.keys[0]}minPair(t){if(this.keys.length!==0)return t[0]=this.keys[0],t[1]=this.values[0],t}maxPair(t){if(this.keys.length===0)return;const n=this.keys.length-1;return t[0]=this.keys[n],t[1]=this.values[n],t}clone(){const t=this.values;return new ts(this.keys.slice(0),t===Ve?t:t.slice(0))}get(t,n,r){const s=this.indexOf(t,-1,r._compare);return s<0?n:this.values[s]}getPairOrNextLower(t,n,r,s){const i=this.indexOf(t,-1,n),o=i<0?~i-1:r?i:i-1;if(o>=0)return s[0]=this.keys[o],s[1]=this.values[o],s}getPairOrNextHigher(t,n,r,s){const i=this.indexOf(t,-1,n),o=i<0?~i:r?i:i+1,u=this.keys;if(o<u.length)return s[0]=u[o],s[1]=this.values[o],s}set(t,n,r,s){let i=this.indexOf(t,-1,s._compare);if(i<0){if(i=~i,s._size++,this.keys.length<s._maxNodeSize)return this.insertInLeaf(i,t,n,s);{const o=this.splitOffRightSide();let u=this;return i>this.keys.length&&(i-=this.keys.length,u=o),u.insertInLeaf(i,t,n,s),o}}else return r!==!1&&(n!==void 0&&this.reifyValues(),this.keys[i]=t,this.values[i]=n),!1}reifyValues(){return this.values===Ve?this.values=this.values.slice(0,this.keys.length):this.values}insertInLeaf(t,n,r,s){if(this.keys.splice(t,0,n),this.values===Ve){for(;Ve.length<s._maxNodeSize;)Ve.push(void 0);if(r===void 0)return!0;this.values=Ve.slice(0,this.keys.length-1)}return this.values.splice(t,0,r),!0}takeFromRight(t){let n=this.values;t.values===Ve?n!==Ve&&n.push(void 0):(n=this.reifyValues(),n.push(t.values.shift())),this.keys.push(t.keys.shift())}takeFromLeft(t){let n=this.values;t.values===Ve?n!==Ve&&n.unshift(void 0):(n=this.reifyValues(),n.unshift(t.values.pop())),this.keys.unshift(t.keys.pop())}splitOffRightSide(){const t=this.keys.length>>1,n=this.keys.splice(t),r=this.values===Ve?Ve:this.values.splice(t);return new ts(n,r)}forRange(t,n,r,s,i,o,u){const a=i._compare;let c,l;if(n===t){if(!r||(l=(c=this.indexOf(t,-1,a))+1,c<0))return o}else c=this.indexOf(t,0,a),l=this.indexOf(n,-1,a),l<0?l=~l:r===!0&&l++;const d=this.keys,p=this.values;if(u!==void 0)for(let f=c;f<l;f++){const h=d[f],m=u(h,p[f],o++);if(m!==void 0){if(s===!0){if(h!==d[f]||this.isShared===!0)throw new Error("BTree illegally changed or cloned in editRange");m.delete?(this.keys.splice(f,1),this.values!==Ve&&this.values.splice(f,1),i._size--,f--,l--):m.hasOwnProperty("value")&&(p[f]=m.value)}if(m.break!==void 0)return m}}else o+=l-c;return o}mergeSibling(t,n){if(this.keys.push.apply(this.keys,t.keys),this.values===Ve){if(t.values===Ve)return;this.values=this.values.slice(0,this.keys.length)}this.values.push.apply(this.values,t.reifyValues())}}class fa extends ts{constructor(t,n){if(!n){n=[];for(let r=0;r<t.length;r++)n[r]=t[r].maxKey()}super(n),this.children=t}minKey(){return this.children[0].minKey()}minPair(t){return this.children[0].minPair(t)}maxPair(t){return this.children[this.children.length-1].maxPair(t)}get(t,n,r){const s=this.indexOf(t,0,r._compare),i=this.children;return s<i.length?i[s].get(t,n,r):void 0}getPairOrNextLower(t,n,r,s){const i=this.indexOf(t,0,n),o=this.children;if(i>=o.length)return this.maxPair(s);const u=o[i].getPairOrNextLower(t,n,r,s);return u===void 0&&i>0?o[i-1].maxPair(s):u}getPairOrNextHigher(t,n,r,s){const i=this.indexOf(t,0,n),o=this.children,u=o.length;if(i>=u)return;const a=o[i].getPairOrNextHigher(t,n,r,s);return a===void 0&&i<u-1?o[i+1].minPair(s):a}set(t,n,r,s){const i=this.children,o=s._maxNodeSize,u=s._compare;let a=Math.min(this.indexOf(t,0,u),i.length-1),c=i[a];if(c.isShared&&(i[a]=c=c.clone()),c.keys.length>=o){let d;a>0&&(d=i[a-1]).keys.length<o&&u(c.keys[0],t)<0?(d.isShared&&(i[a-1]=d=d.clone()),d.takeFromRight(c),this.keys[a-1]=d.maxKey()):(d=i[a+1])!==void 0&&d.keys.length<o&&u(c.maxKey(),t)<0&&(d.isShared&&(i[a+1]=d=d.clone()),d.takeFromLeft(c),this.keys[a]=i[a].maxKey())}const l=c.set(t,n,r,s);if(l===!1)return!1;if(this.keys[a]=c.maxKey(),l===!0)return!0;if(this.keys.length<o)return this.insert(a+1,l),!0;{const d=this.splitOffRightSide();let p=this;return u(l.maxKey(),this.maxKey())>0&&(p=d,a-=this.keys.length),p.insert(a+1,l),d}}insert(t,n){this.children.splice(t,0,n),this.keys.splice(t,0,n.maxKey())}splitOffRightSide(){const t=this.children.length>>1;return new fa(this.children.splice(t),this.keys.splice(t))}takeFromRight(t){this.keys.push(t.keys.shift()),this.children.push(t.children.shift())}takeFromLeft(t){this.keys.unshift(t.keys.pop()),this.children.unshift(t.children.pop())}forRange(t,n,r,s,i,o,u){const a=i._compare,c=this.keys,l=this.children;let d=this.indexOf(t,0,a),p=d;const f=Math.min(n===t?d:this.indexOf(n,0,a),c.length-1);if(s){if(p<=f)try{for(;p<=f;p++){l[p].isShared&&(l[p]=l[p].clone());const h=l[p].forRange(t,n,r,s,i,o,u);if(c[p]=l[p].maxKey(),typeof h!="number")return h;o=h}}finally{const h=i._maxNodeSize>>1;for(d>0&&d--,p=f;p>=d;p--)l[p].keys.length<=h&&(l[p].keys.length!==0?this.tryMerge(p,i._maxNodeSize):(c.splice(p,1),l.splice(p,1)));l.length!==0&&l[0].keys.length===0&&p2(!1,"emptiness bug")}}else for(;p<=f;p++){const h=l[p].forRange(t,n,r,s,i,o,u);if(typeof h!="number")return h;o=h}return o}tryMerge(t,n){const r=this.children;return t>=0&&t+1<r.length&&r[t].keys.length+r[t+1].keys.length<=n?(r[t].isShared&&(r[t]=r[t].clone()),r[t].mergeSibling(r[t+1],n),r.splice(t+1,1),this.keys.splice(t+1,1),this.keys[t]=r[t].maxKey(),!0):!1}mergeSibling(t,n){const r=this.keys.length;this.keys.push.apply(this.keys,t.keys);const s=t.children;if(this.children.push.apply(this.children,s),t.isShared&&!this.isShared)for(const i of s)i.isShared=!0;this.tryMerge(r-1,n)}}const Ve=[],f2={delete:!0},h2=()=>f2,wo=(function(){const e=new ts;return e.isShared=!0,e})(),ml=[];function p2(e,...t){throw t.unshift("B+ tree"),new Error(t.join(" "))}function ph(){const e=new Map;function t(n){const r=n.join(".");if(e.has(r))return e.get(r);const s=new Proxy({},{get(i,o,u){if(o==="__refProxy")return!0;if(o==="__path")return n;if(o==="__type")return;if(typeof o=="symbol")return Reflect.get(i,o,u);const a=[...n,String(o)];return t(a)},has(i,o){return o==="__refProxy"||o==="__path"||o==="__type"?!0:Reflect.has(i,o)},ownKeys(i){return Reflect.ownKeys(i)},getOwnPropertyDescriptor(i,o){return o==="__refProxy"||o==="__path"||o==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(i,o)}});return e.set(r,s),s}return t([])}function An(e){const t=new Map;let n=0;function r(i){const o=i.join(".");if(t.has(o))return t.get(o);const u=new Proxy({},{get(a,c,l){if(c==="__refProxy")return!0;if(c==="__path")return i;if(c==="__type")return;if(typeof c=="symbol")return Reflect.get(a,c,l);const d=[...i,String(c)];return r(d)},has(a,c){return c==="__refProxy"||c==="__path"||c==="__type"?!0:Reflect.has(a,c)},ownKeys(a){const c=++n,l=`__SPREAD_SENTINEL__${i.join(".")}__${c}`;return Object.prototype.hasOwnProperty.call(a,l)||Object.defineProperty(a,l,{enumerable:!0,configurable:!0,value:!0}),Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,c){return c==="__refProxy"||c==="__path"||c==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,c)}});return t.set(o,u),u}return new Proxy({},{get(i,o,u){if(o==="__refProxy")return!0;if(o==="__path")return[];if(o==="__type")return;if(typeof o=="symbol")return Reflect.get(i,o,u);const a=String(o);if(e.includes(a))return r([a])},has(i,o){return o==="__refProxy"||o==="__path"||o==="__type"||typeof o=="string"&&e.includes(o)?!0:Reflect.has(i,o)},ownKeys(i){return[...e,"__refProxy","__path","__type"]},getOwnPropertyDescriptor(i,o){if(o==="__refProxy"||o==="__path"||o==="__type")return{enumerable:!1,configurable:!0};if(typeof o=="string"&&e.includes(o))return{enumerable:!0,configurable:!0}}})}function gl(e){const t=An(e),n=new Map;function r(i){const o=i.join(".");if(n.has(o))return n.get(o);const u=new Proxy({},{get(a,c,l){if(c==="__refProxy")return!0;if(c==="__path")return["$selected",...i];if(c==="__type")return;if(typeof c=="symbol")return Reflect.get(a,c,l);const d=[...i,String(c)];return r(d)},has(a,c){return c==="__refProxy"||c==="__path"||c==="__type"?!0:Reflect.has(a,c)},ownKeys(a){return Reflect.ownKeys(a)},getOwnPropertyDescriptor(a,c){return c==="__refProxy"||c==="__path"||c==="__type"?{enumerable:!1,configurable:!0}:Reflect.getOwnPropertyDescriptor(a,c)}});return n.set(o,u),u}const s=r([]);return new Proxy(t,{get(i,o,u){return o==="$selected"?s:Reflect.get(i,o,u)},has(i,o){return o==="$selected"?!0:Reflect.has(i,o)},ownKeys(i){return[...Reflect.ownKeys(i),"$selected"]},getOwnPropertyDescriptor(i,o){return o==="$selected"?{enumerable:!0,configurable:!0,value:s}:Reflect.getOwnPropertyDescriptor(i,o)}})}function ve(e){return m2(e)?new Ze(e.__path):e&&typeof e=="object"&&"type"in e&&(e.type==="func"||e.type==="ref"||e.type==="val"||e.type==="agg")?e:new He(e)}function m2(e){return e&&typeof e=="object"&&e.__refProxy===!0}function Je(e,t){return new ct("eq",[ve(e),ve(t)])}function bl(e,t){return new ct("gt",[ve(e),ve(t)])}function g2(e,t){return new ct("gte",[ve(e),ve(t)])}function au(e,t){return new ct("lt",[ve(e),ve(t)])}function cu(e,t,...n){const r=[e,t,...n];return new ct("and",r.map(s=>ve(s)))}function b2(e,t,...n){const r=[e,t,...n];return new ct("or",r.map(s=>ve(s)))}function y2(e){return new ct("isUndefined",[ve(e)])}function v2(e,t){return new ct("in",[ve(e),ve(t)])}function lu(e){return new na("count",[ve(e)])}class w2{constructor(t,n,r,s){this.lookupCount=0,this.totalLookupTime=0,this.lastUpdated=new Date,this.id=t,this.expression=n,this.compareOptions=aa,this.name=r,this.initialize(s)}supports(t){return this.supportedOperations.has(t)}matchesField(t){return this.expression.type==="ref"&&this.expression.path.length===t.length&&this.expression.path.every((n,r)=>n===t[r])}matchesCompareOptions(t){const n={...this.compareOptions,direction:void 0},r={...t,direction:void 0};return It(n,r)}matchesDirection(t){return this.compareOptions.direction===t}getStats(){return{entryCount:this.keyCount,lookupCount:this.lookupCount,averageLookupTime:this.lookupCount>0?this.totalLookupTime/this.lookupCount:0,lastUpdated:this.lastUpdated}}evaluateIndexExpression(t){return oa(this.expression)(t)}trackLookup(t){const n=performance.now()-t;this.lookupCount++,this.totalLookupTime+=n}updateTimestamp(){this.lastUpdated=new Date}}class du extends w2{constructor(t,n,r,s){super(t,n,r,s),this.supportedOperations=new Set(["eq","gt","gte","lt","lte","in"]),this.valueMap=new Map,this.indexedKeys=new Set,this.compareFn=su;const i=s?.compareFn??su;this.compareFn=(o,u)=>i(Tr(o),Tr(u)),s?.compareOptions&&(this.compareOptions=s.compareOptions),this.orderedEntries=new d2(this.compareFn)}initialize(t){}add(t,n){let r;try{r=this.evaluateIndexExpression(n)}catch(i){throw new Error(`Failed to evaluate index expression for key ${t}: ${i}`)}const s=rn(r);if(this.valueMap.has(s))this.valueMap.get(s).add(t);else{const i=new Set([t]);this.valueMap.set(s,i),this.orderedEntries.set(s,void 0)}this.indexedKeys.add(t),this.updateTimestamp()}remove(t,n){let r;try{r=this.evaluateIndexExpression(n)}catch(i){console.warn(`Failed to evaluate index expression for key ${t} during removal:`,i);return}const s=rn(r);if(this.valueMap.has(s)){const i=this.valueMap.get(s);i.delete(t),i.size===0&&(this.valueMap.delete(s),this.orderedEntries.delete(s))}this.indexedKeys.delete(t),this.updateTimestamp()}update(t,n,r){this.remove(t,n),this.add(t,r)}build(t){this.clear();for(const[n,r]of t)this.add(n,r)}clear(){this.orderedEntries.clear(),this.valueMap.clear(),this.indexedKeys.clear(),this.updateTimestamp()}lookup(t,n){const r=performance.now();let s;switch(t){case"eq":s=this.equalityLookup(n);break;case"gt":s=this.rangeQuery({from:n,fromInclusive:!1});break;case"gte":s=this.rangeQuery({from:n,fromInclusive:!0});break;case"lt":s=this.rangeQuery({to:n,toInclusive:!1});break;case"lte":s=this.rangeQuery({to:n,toInclusive:!0});break;case"in":s=this.inArrayLookup(n);break;default:throw new Error(`Operation ${t} not supported by BTreeIndex`)}return this.trackLookup(r),s}get keyCount(){return this.indexedKeys.size}equalityLookup(t){const n=rn(t);return new Set(this.valueMap.get(n)??[])}rangeQuery(t={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:i=!0}=t,o=new Set,u="from"in t,a="to"in t,c=u?rn(n):this.orderedEntries.minKey(),l=a?rn(r):this.orderedEntries.maxKey();return this.orderedEntries.forRange(c,l,i,(d,p)=>{if(!s&&this.compareFn(d,n)===0)return;const f=this.valueMap.get(d);f&&f.forEach(h=>o.add(h))}),o}rangeQueryReversed(t={}){const{from:n,to:r,fromInclusive:s=!0,toInclusive:i=!0}=t,o="from"in t,u="to"in t;return this.rangeQuery({from:u?r:this.orderedEntries.maxKey(),to:o?n:this.orderedEntries.minKey(),fromInclusive:i,toInclusive:s})}takeInternal(t,n,r,s,i=!1){const o=new Set,u=[];let a,c=r;for(;(a=n(c))!==void 0&&u.length<t;){c=a[0];const l=this.valueMap.get(c);if(l&&l.size>0){const d=Array.from(l).sort(yi);i&&d.reverse();for(const p of d){if(u.length>=t)break;!o.has(p)&&(s?.(p)??!0)&&(u.push(p),o.add(p))}}}return u}take(t,n,r){const s=o=>this.orderedEntries.nextHigherPair(o),i=rn(n);return this.takeInternal(t,s,i,r)}takeFromStart(t,n){const r=s=>this.orderedEntries.nextHigherPair(s);return this.takeInternal(t,r,void 0,n)}takeReversed(t,n,r){const s=o=>this.orderedEntries.nextLowerPair(o),i=rn(n);return this.takeInternal(t,s,i,r,!0)}takeReversedFromEnd(t,n){const r=s=>this.orderedEntries.nextLowerPair(s);return this.takeInternal(t,r,void 0,n,!0)}inArrayLookup(t){const n=new Set;for(const r of t){const s=rn(r),i=this.valueMap.get(s);i&&i.forEach(o=>n.add(o))}return n}get indexedKeysSet(){return this.indexedKeys}get orderedEntriesArray(){return this.orderedEntries.keysArray().map(t=>[Tr(t),this.valueMap.get(t)??new Set])}get orderedEntriesArrayReversed(){return this.takeReversedFromEnd(this.orderedEntries.size).map(t=>[Tr(t),this.valueMap.get(t)??new Set])}get valueMapData(){const t=new Map;for(const[n,r]of this.valueMap)t.set(Tr(n),r);return t}}function mh(e){return e.config.autoIndex==="eager"}function Ui(e,t,n,r,s){if(!mh(n))return;const i=r??{...aa,...n.compareOptions};if(!Array.from(n.indexes.values()).find(u=>u.matchesField(t)&&u.matchesCompareOptions(i)))try{n.createIndex(u=>{let a=u;for(const c of t)a=a[c];return a},{name:`auto:${t.join(".")}`,indexType:du,options:s?{compareFn:s,compareOptions:i}:{}})}catch(u){console.warn(`${n.id?`[${n.id}] `:""}Failed to create auto-index for field path "${t.join(".")}":`,u)}}function x2(e,t){if(!mh(t))return;const n=S2(e);for(const{fieldName:r,fieldPath:s}of n)Ui(r,s,t)}function S2(e){const t=[];function n(r){if(r.type!=="func")return;const s=r;if(s.name==="and"){for(const c of s.args)n(c);return}if(!["eq","gt","gte","lt","lte","in"].includes(s.name)||s.args.length<1||s.args[0].type!=="ref")return;const u=s.args[0].path;if(u.length===0)return;const a=u.join("_");t.push({fieldName:a,fieldPath:u})}return n(e),t}const{sum:_2,count:E2,avg:k2,min:C2,max:I2}=W1;function A2(e,t){const n=new Map,r=[...e];if(!t)return{selectToGroupByIndex:n,groupByExpressions:r};for(const[s,i]of Object.entries(t)){if(i.type==="agg")continue;const o=r.findIndex(u=>vi(i,u));if(o===-1)throw new Ty(s);n.set(s,o)}return{selectToGroupByIndex:n,groupByExpressions:r}}function yl(e,t,n,r,s){if(t.length===0){const c={};if(r){for(const[d,p]of Object.entries(r))if(p.type==="agg"){const f=p;c[d]=vl(f)}}const l=()=>({__singleGroup:!0});if(e=e.pipe(ul(l,c)),e=e.pipe(je(([,d])=>{const f={...d.$selected||{}};if(r)for(const[h,m]of Object.entries(r))m.type==="agg"&&(f[h]=d[h]);return["single_group",{...d,$selected:f}]})),n&&n.length>0)for(const d of n){const p=Zc(d),f=wi(p,r||{},"$selected"),h=Xe(f);e=e.pipe(fn(([,m])=>{const g={$selected:m.$selected};return or(h(g))}))}if(s&&s.length>0)for(const d of s)e=e.pipe(fn(([,p])=>{const f={$selected:p.$selected};return or(d(f))}));return e}const i=A2(t,r),o=t.map(c=>Xe(c)),u=([,c])=>{const l={...c};delete l.$selected;const d={};for(let p=0;p<t.length;p++){const f=o[p],h=f(l);d[`__key_${p}`]=h}return d},a={};if(r){for(const[c,l]of Object.entries(r))if(l.type==="agg"){const d=l;a[c]=vl(d)}}if(e=e.pipe(ul(u,a)),e=e.pipe(je(([,c])=>{const l=c.$selected||{},d={};if(r)for(const[f,h]of Object.entries(r))if(h.type!=="agg"){const m=i.selectToGroupByIndex.get(f);m!==void 0?d[f]=c[`__key_${m}`]:d[f]=l[f]}else d[f]=c[f];else for(let f=0;f<t.length;f++)d[`__key_${f}`]=c[`__key_${f}`];let p;if(t.length===1)p=c.__key_0;else{const f=[];for(let h=0;h<t.length;h++)f.push(c[`__key_${h}`]);p=la(f)}return[p,{...c,$selected:d}]})),n&&n.length>0)for(const c of n){const l=Zc(c),d=wi(l,r||{}),p=Xe(d);e=e.pipe(fn(([,f])=>{const h={$selected:f.$selected};return p(h)}))}if(s&&s.length>0)for(const c of s)e=e.pipe(fn(([,l])=>{const d={$selected:l.$selected};return or(c(d))}));return e}function vi(e,t){if(!e||!t||e.type!==t.type)return!1;switch(e.type){case"ref":return!e.path||!t.path||e.path.length!==t.path.length?!1:e.path.every((n,r)=>n===t.path[r]);case"val":return e.value===t.value;case"func":return e.name===t.name&&e.args?.length===t.args?.length&&(e.args||[]).every((n,r)=>vi(n,t.args[r]));case"agg":return e.name===t.name&&e.args?.length===t.args?.length&&(e.args||[]).every((n,r)=>vi(n,t.args[r]));default:return!1}}function vl(e){const t=Xe(e.args[0]),n=([,i])=>{const o=t(i);return typeof o=="number"?o:o!=null?Number(o):0},r=([,i])=>{const o=t(i);return typeof o=="number"||typeof o=="string"||typeof o=="bigint"||o instanceof Date?o:o!=null?Number(o):0},s=([,i])=>t(i);switch(e.name.toLowerCase()){case"sum":return _2(n);case"count":return E2(s);case"avg":return k2(n);case"min":return C2(r);case"max":return I2(r);default:throw new Oy(e.name)}}function wi(e,t,n="$selected"){switch(e.type){case"agg":{const r=e;for(const[s,i]of Object.entries(t))if(i.type==="agg"&&R2(r,i))return new Ze([n,s]);throw new Fy(r.name)}case"func":{const r=e,s=r.args.map(i=>wi(i,t));return new ct(r.name,s)}case"ref":return e;case"val":return e;default:throw new Dy(e.type)}}function R2(e,t){return e.name===t.name&&e.args.length===t.args.length&&e.args.every((n,r)=>vi(n,t.args[r]))}function T2(e,t,n,r,s,i,o,u,a){const c=n.map(h=>{const m=wi(h.expression,r,"$selected");return{compiledExpression:Xe(m),compareOptions:fu(h,s)}}),l=h=>{const m=h;return n.length>1?c.map(g=>g.compiledExpression(m)):n.length===1?c[0].compiledExpression(m):null},d=(h,m)=>{if(n.length>1){const g=h,y=m;for(let w=0;w<n.length;w++){const v=c[w],x=bi(v.compareOptions)(g[w],y[w]);if(x!==0)return x}return g.length-y.length}if(n.length===1){const g=c[0];return bi(g.compareOptions)(h,m)}return su(h,m)};let p,f;if(u){let h,m,g,y=e.from.alias;const w=n[0],v=w.expression;if(v.type==="ref"){const b=Qr(e,v,s);if(b){m=b.collection;const x=b.path[0],E=fu(w,m);x&&Ui(x,b.path,m,E,d),g=Xe(new Ze(b.path),!0),h=_s(m,b.path,E),h?.supports("gt")||(h=void 0),y=v.path.length>1?String(v.path[0]):e.from.alias}}if(g){const x=n.every(_=>_.expression.type==="ref")?n.map(_=>{const A=_.expression,F=Qr(e,A,s);return Xe(F?new Ze(F.path):_.expression,!0)}):void 0;f={alias:y,offset:a??0,limit:u,comparator:(_,A)=>{if(n.length===1){const F=_&&g(_),D=A&&g(A);return d(F,D)}if(x){const F=D=>D&&x.map(z=>z(D));return d(F(_),F(A))}return 0},valueExtractorForRawRow:_=>{if(n.length===1)return g(_);if(x)return x.map(A=>A(_))},firstColumnValueExtractor:g,index:h,orderBy:n};const S=m?.id??s.id;i[S]=f,h&&(p=_=>{i[S].dataNeeded=()=>{const A=_();return Math.max(0,f.limit-A)}})}}return t.pipe(l2(l,{limit:u,offset:a,comparator:d,setSizeCallback:p,setWindowFn:h=>{o(m=>{h(m),f&&(f.offset=m.offset??f.offset,f.limit=m.limit??f.limit)})}}))}function fu(e,t){return e.compareOptions.stringSort!==void 0?e.compareOptions:{...t.compareOptions,direction:e.compareOptions.direction,nulls:e.compareOptions.nulls}}function O2(e,t={}){const n=r=>{const s=[];for(const[i,o]of e.entries())(r?.(o)??!0)&&s.push({type:"insert",key:i,value:o});return s};if(t.limit!==void 0&&!t.orderBy)throw new Error("limit cannot be used without orderBy");if(t.orderBy){const r=t.where?Wr(t.where):void 0,s=D2(e,t.orderBy,t.limit,r,t.optimizedOnly);if(s===void 0)return;const i=[];for(const o of s){const u=e.get(o);u!==void 0&&i.push({type:"insert",key:o,value:u})}return i}if(!t.where)return n();try{const r=t.where,s=Xy(r,e);if(s.canOptimize){const i=[];for(const o of s.matchingKeys){const u=e.get(o);u!==void 0&&i.push({type:"insert",key:o,value:u})}return i}else{if(t.optimizedOnly)return;const i=Wr(r);return n(i)}}catch(r){console.warn(`${e.id?`[${e.id}] `:""}Error processing where clause, falling back to full scan:`,r);const s=Wr(t.where);return t.optimizedOnly?void 0:n(s)}}function Wr(e){const t=oa(e);return n=>{try{const r=t(n);return or(r)}catch{return!1}}}function F2(e,t){const n=Wr(t.whereExpression);return r=>{const s=[];for(const i of r)if(i.type==="insert")n(i.value)&&s.push(i);else if(i.type==="update"){const o=n(i.value),u=i.previousValue?n(i.previousValue):!1;o&&u?s.push(i):o&&!u?s.push({...i,type:"insert"}):!o&&u&&s.push({...i,type:"delete",value:i.previousValue})}else n(i.value)&&s.push(i);(s.length>0||r.length===0)&&e(s)}}function D2(e,t,n,r,s){if(t.length===1){const a=t[0],c=a.expression;if(c.type==="ref"){const d=c.path,p=fu(a,e);Ui(d[0],d,e,p);const f=_s(e,d,p);if(f&&f.supports("gt")){const h=m=>{const g=e.get(m);return g===void 0?!1:r?.(g)??!0};return f.takeFromStart(n??f.keyCount,h)}}}if(s)return;const i=[];for(const[a,c]of e.entries())(r?.(c)??!0)&&i.push({key:a,value:c});const o=(a,c)=>{for(const l of t){const d=bi(l.compareOptions),p=wl(a.value,l.expression),f=wl(c.value,l.expression),h=d(p,f);if(h!==0)return h}return 0};i.sort(o);const u=i.map(a=>a.key);return n!==void 0?u.slice(0,n):u}function wl(e,t){if(t.type==="ref"){const n=t;let r=e;for(const s of n.path)r=r?.[s];return r}else return t.type==="val"?t.value:oa(t)(e)}class xl{constructor(t){this.map=new Map,this.sortedKeys=[],this.comparator=t}indexOf(t,n){let r=0,s=this.sortedKeys.length;if(!this.comparator){for(;r<s;){const i=Math.floor((r+s)/2),o=this.sortedKeys[i],u=yi(t,o);if(u<0)s=i;else if(u>0)r=i+1;else return i}return r}for(;r<s;){const i=Math.floor((r+s)/2),o=this.sortedKeys[i],u=this.map.get(o),a=this.comparator(n,u);if(a<0)s=i;else if(a>0)r=i+1;else{const c=yi(t,o);if(c<0)s=i;else if(c>0)r=i+1;else return i}}return r}set(t,n){if(this.map.has(t)){const s=this.map.get(t),i=this.indexOf(t,s);this.sortedKeys.splice(i,1)}const r=this.indexOf(t,n);return this.sortedKeys.splice(r,0,t),this.map.set(t,n),this}get(t){return this.map.get(t)}delete(t){if(this.map.has(t)){const n=this.map.get(t),r=this.indexOf(t,n);return this.sortedKeys.splice(r,1),this.map.delete(t)}return!1}has(t){return this.map.has(t)}clear(){this.map.clear(),this.sortedKeys=[]}get size(){return this.map.size}*[Symbol.iterator](){for(const t of this.sortedKeys)yield[t,this.map.get(t)]}entries(){return this[Symbol.iterator]()}keys(){return this.sortedKeys[Symbol.iterator]()}values(){return(function*(){for(const t of this.sortedKeys)yield this.map.get(t)}).call(this)}forEach(t){for(const n of this.sortedKeys)t(this.map.get(n),n,this.map)}}class N2{constructor(t){this.pendingSyncedTransactions=[],this.syncedMetadata=new Map,this.optimisticUpserts=new Map,this.optimisticDeletes=new Set,this.size=0,this.syncedKeys=new Set,this.preSyncVisibleState=new Map,this.recentlySyncedKeys=new Set,this.hasReceivedFirstCommit=!1,this.isCommittingSyncTransactions=!1,this.commitPendingTransactions=()=>{let n=!1;for(const u of this.transactions.values())if(u.state==="persisting"){n=!0;break}const{committedSyncedTransactions:r,uncommittedSyncedTransactions:s,hasTruncateSync:i,hasImmediateSync:o}=this.pendingSyncedTransactions.reduce((u,a)=>(a.committed?(u.committedSyncedTransactions.push(a),a.truncate&&(u.hasTruncateSync=!0),a.immediate&&(u.hasImmediateSync=!0)):u.uncommittedSyncedTransactions.push(a),u),{committedSyncedTransactions:[],uncommittedSyncedTransactions:[],hasTruncateSync:!1,hasImmediateSync:!1});if(!n||i||o){this.isCommittingSyncTransactions=!0;const u=i?r.find(f=>f.truncate)?.optimisticSnapshot:null,a=new Set;for(const f of r)for(const h of f.operations)a.add(h.key);let c=this.preSyncVisibleState;if(c.size===0){c=new Map;for(const f of a){const h=this.get(f);h!==void 0&&c.set(f,h)}}const l=[],d=this.config.sync.rowUpdateMode||"partial";for(const f of r){if(f.truncate){const h=new Set([...this.syncedData.keys(),...u?.upserts.keys()||[]]);for(const m of h){if(u?.deletes.has(m))continue;const g=u?.upserts.get(m)||this.syncedData.get(m);g!==void 0&&l.push({type:"delete",key:m,value:g})}this.syncedData.clear(),this.syncedMetadata.clear(),this.syncedKeys.clear();for(const m of a)c.delete(m);this._events.emit("truncate",{type:"truncate",collection:this.collection})}for(const h of f.operations){const m=h.key;switch(this.syncedKeys.add(m),h.type){case"insert":this.syncedMetadata.set(m,h.metadata);break;case"update":this.syncedMetadata.set(m,Object.assign({},this.syncedMetadata.get(m),h.metadata));break;case"delete":this.syncedMetadata.delete(m);break}switch(h.type){case"insert":this.syncedData.set(m,h.value);break;case"update":{if(d==="partial"){const g=Object.assign({},this.syncedData.get(m),h.value);this.syncedData.set(m,g)}else this.syncedData.set(m,h.value);break}case"delete":this.syncedData.delete(m);break}}}if(i){const f=new Set;for(const g of r)for(const y of g.operations)(y.type==="insert"||y.type==="update")&&f.add(y.key);const h=new Map(u.upserts),m=new Set(u.deletes);for(const[g,y]of h)if(!m.has(g))if(f.has(g)){let w=!1;for(let v=l.length-1;v>=0;v--){const b=l[v];if(b.key===g&&b.type==="insert"){b.value=y,w=!0;break}}w||l.push({type:"insert",key:g,value:y})}else l.push({type:"insert",key:g,value:y});if(l.length>0&&m.size>0){const g=[];for(const y of l)y.type==="insert"&&m.has(y.key)||g.push(y);l.length=0,l.push(...g)}this.lifecycle.status!=="ready"&&this.lifecycle.markReady()}if(this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.isCommittingSyncTransactions=!1,i&&u){for(const[f,h]of u.upserts)this.optimisticUpserts.set(f,h);for(const f of u.deletes)this.optimisticDeletes.add(f)}for(const f of this.transactions.values())if(!["completed","failed"].includes(f.state)){for(const h of f.mutations)if(this.isThisCollection(h.collection)&&h.optimistic)switch(h.type){case"insert":case"update":this.optimisticUpserts.set(h.key,h.modified),this.optimisticDeletes.delete(h.key);break;case"delete":this.optimisticUpserts.delete(h.key),this.optimisticDeletes.add(h.key);break}}const p=new Map;for(const f of this.transactions.values())if(f.state==="completed")for(const h of f.mutations)h.optimistic&&this.isThisCollection(h.collection)&&a.has(h.key)&&p.set(h.key,{type:h.type,value:h.modified});for(const f of a){const h=c.get(f),m=this.get(f),g=p.get(f);let y=!1;g&&(g.type==="delete"&&h!==void 0&&m===void 0&&It(g.value,h)||m!==void 0&&It(g.value,m))&&(y=!0),y||(h===void 0&&m!==void 0?l.push({type:"insert",key:f,value:m}):h!==void 0&&m===void 0?l.push({type:"delete",key:f,value:h}):h!==void 0&&m!==void 0&&!It(h,m)&&l.push({type:"update",key:f,value:m,previousValue:h}))}this.size=this.calculateSize(),l.length>0&&this.indexes.updateIndexes(l),this.changes.emitEvents(l,!0),this.pendingSyncedTransactions=s,this.preSyncVisibleState.clear(),Promise.resolve().then(()=>{this.recentlySyncedKeys.clear()}),this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0)}},this.config=t,this.transactions=new xl((n,r)=>n.compareCreatedAt(r)),this.syncedData=new xl(t.compare)}setDeps(t){this.collection=t.collection,this.lifecycle=t.lifecycle,this.changes=t.changes,this.indexes=t.indexes,this._events=t.events}get(t){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;if(!n.has(t))return r.has(t)?r.get(t):s.get(t)}has(t){const{optimisticDeletes:n,optimisticUpserts:r,syncedData:s}=this;return n.has(t)?!1:r.has(t)?!0:s.has(t)}*keys(){const{syncedData:t,optimisticDeletes:n,optimisticUpserts:r}=this;for(const s of t.keys())n.has(s)||(yield s);for(const s of r.keys())!t.has(s)&&!n.has(s)&&(yield s)}*values(){for(const t of this.keys()){const n=this.get(t);n!==void 0&&(yield n)}}*entries(){for(const t of this.keys()){const n=this.get(t);n!==void 0&&(yield[t,n])}}*[Symbol.iterator](){for(const[t,n]of this.entries())yield[t,n]}forEach(t){let n=0;for(const[r,s]of this.entries())t(s,r,n++)}map(t){const n=[];let r=0;for(const[s,i]of this.entries())n.push(t(i,s,r++));return n}isThisCollection(t){return t===this.collection}recomputeOptimisticState(t=!1){if(this.isCommittingSyncTransactions&&!t)return;const n=new Map(this.optimisticUpserts),r=new Set(this.optimisticDeletes);this.optimisticUpserts.clear(),this.optimisticDeletes.clear();const s=[];for(const u of this.transactions.values())["completed","failed"].includes(u.state)||s.push(u);for(const u of s)for(const a of u.mutations)if(this.isThisCollection(a.collection)&&a.optimistic)switch(a.type){case"insert":case"update":this.optimisticUpserts.set(a.key,a.modified),this.optimisticDeletes.delete(a.key);break;case"delete":this.optimisticUpserts.delete(a.key),this.optimisticDeletes.add(a.key);break}this.size=this.calculateSize();const i=[];this.collectOptimisticChanges(n,r,i);const o=i.filter(u=>!!(!this.recentlySyncedKeys.has(u.key)||t));if(this.pendingSyncedTransactions.length>0&&!t){const u=new Set;for(const c of this.pendingSyncedTransactions)for(const l of c.operations)u.add(l.key);const a=o.filter(c=>!(c.type==="delete"&&u.has(c.key)&&!s.some(d=>d.mutations.some(p=>this.isThisCollection(p.collection)&&p.key===c.key))));a.length>0&&this.indexes.updateIndexes(a),this.changes.emitEvents(a,t)}else o.length>0&&this.indexes.updateIndexes(o),this.changes.emitEvents(o,t)}calculateSize(){const t=this.syncedData.size,n=Array.from(this.optimisticDeletes).filter(s=>this.syncedData.has(s)&&!this.optimisticUpserts.has(s)).length,r=Array.from(this.optimisticUpserts.keys()).filter(s=>!this.syncedData.has(s)).length;return t-n+r}collectOptimisticChanges(t,n,r){const s=new Set([...t.keys(),...this.optimisticUpserts.keys(),...n,...this.optimisticDeletes]);for(const i of s){const o=this.get(i),u=this.getPreviousValue(i,t,n);u!==void 0&&o===void 0?r.push({type:"delete",key:i,value:u}):u===void 0&&o!==void 0?r.push({type:"insert",key:i,value:o}):u!==void 0&&o!==void 0&&u!==o&&r.push({type:"update",key:i,value:o,previousValue:u})}}getPreviousValue(t,n,r){if(!r.has(t))return n.has(t)?n.get(t):this.syncedData.get(t)}scheduleTransactionCleanup(t){if(t.state==="completed"){this.transactions.delete(t.id);return}t.isPersisted.promise.then(()=>{this.transactions.delete(t.id)}).catch(()=>{})}capturePreSyncVisibleState(){if(this.pendingSyncedTransactions.length===0)return;const t=new Set;for(const n of this.pendingSyncedTransactions)for(const r of n.operations)t.add(r.key);for(const n of t)this.recentlySyncedKeys.add(n);for(const n of t)if(!this.preSyncVisibleState.has(n)){const r=this.get(n);r!==void 0&&this.preSyncVisibleState.set(n,r)}}onTransactionStateChange(){this.changes.shouldBatchEvents=this.pendingSyncedTransactions.length>0,this.capturePreSyncVisibleState(),this.recomputeOptimisticState(!1)}cleanup(){this.syncedData.clear(),this.syncedMetadata.clear(),this.optimisticUpserts.clear(),this.optimisticDeletes.clear(),this.size=0,this.pendingSyncedTransactions=[],this.syncedKeys.clear(),this.hasReceivedFirstCommit=!1}}class gh{constructor(){this.listeners=new Map}on(t,n){return this.listeners.has(t)||this.listeners.set(t,new Set),this.listeners.get(t).add(n),()=>{this.listeners.get(t)?.delete(n)}}once(t,n){const r=this.on(t,s=>{n(s),r()});return r}off(t,n){this.listeners.get(t)?.delete(n)}waitFor(t,n){return new Promise((r,s)=>{let i;const o=this.on(t,u=>{i&&(clearTimeout(i),i=void 0),r(u),o()});n&&(i=setTimeout(()=>{i=void 0,o(),s(new Error(`Timeout waiting for event ${String(t)}`))},n))})}emitInner(t,n){this.listeners.get(t)?.forEach(r=>{try{r(n)}catch(s){queueMicrotask(()=>{throw s})}})}clearListeners(){this.listeners.clear()}}function P2(e,t){if(t.length===0||e.length===0)return;if(e.length===1){const{expression:r,compareOptions:s}=e[0];return(s.direction==="asc"?bl:au)(r,new He(t[0]))}const n=[];for(let r=0;r<e.length&&r<t.length;r++){const s=e[r],i=t[r],o=[];for(let c=0;c<r;c++){const l=e[c],d=t[c];o.push(Je(l.expression,new He(d)))}const a=(s.compareOptions.direction==="asc"?bl:au)(s.expression,new He(i));if(o.length===0)n.push(a);else{const c=[...o,a];n.push(c.reduce((l,d)=>cu(l,d)))}}return n.length===1?n[0]:n.reduce((r,s)=>b2(r,s))}class L2 extends gh{constructor(t,n,r){super(),this.collection=t,this.callback=n,this.options=r,this.loadedInitialState=!1,this.skipFiltering=!1,this.snapshotSent=!1,this.loadedSubsets=[],this.sentKeys=new Set,this.limitedSnapshotRowCount=0,this._status="ready",this.pendingLoadSubsetPromises=new Set,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches=new Set,r.onUnsubscribe&&this.on("unsubscribed",i=>r.onUnsubscribe(i)),r.whereExpression&&x2(r.whereExpression,this.collection);const s=i=>{n(i),this.trackSentKeys(i)};this.callback=s,this.filteredCallback=r.whereExpression?F2(this.callback,r):this.callback,this.truncateCleanup=this.collection.on("truncate",()=>{this.handleTruncate()})}get status(){return this._status}handleTruncate(){const t=[...this.loadedSubsets],n=this.collection._sync.syncLoadSubsetFn!==null;if(t.length===0||!n){this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[];return}this.isBufferingForTruncate=!0,this.truncateBuffer=[],this.pendingTruncateRefetches.clear(),this.snapshotSent=!1,this.loadedInitialState=!1,this.limitedSnapshotRowCount=0,this.lastSentKey=void 0,this.loadedSubsets=[],queueMicrotask(()=>{if(this.isBufferingForTruncate){for(const r of t){const s=this.collection._sync.loadSubset(r);this.loadedSubsets.push(r),this.trackLoadSubsetPromise(s),s instanceof Promise&&(this.pendingTruncateRefetches.add(s),s.catch(()=>{}).finally(()=>{this.pendingTruncateRefetches.delete(s),this.checkTruncateRefetchComplete()}))}this.pendingTruncateRefetches.size===0&&this.flushTruncateBuffer()}})}checkTruncateRefetchComplete(){this.pendingTruncateRefetches.size===0&&this.isBufferingForTruncate&&this.flushTruncateBuffer()}flushTruncateBuffer(){this.isBufferingForTruncate=!1;const t=this.truncateBuffer.flat();t.length>0&&this.filteredCallback(t),this.truncateBuffer=[]}setOrderByIndex(t){this.orderByIndex=t}setStatus(t){if(this._status===t)return;const n=this._status;this._status=t,this.emitInner("status:change",{type:"status:change",subscription:this,previousStatus:n,status:t});const r=`status:${t}`;this.emitInner(r,{type:r,subscription:this,previousStatus:n,status:t})}trackLoadSubsetPromise(t){t instanceof Promise&&(this.pendingLoadSubsetPromises.add(t),this.setStatus("loadingSubset"),t.finally(()=>{this.pendingLoadSubsetPromises.delete(t),this.pendingLoadSubsetPromises.size===0&&this.setStatus("ready")}))}hasLoadedInitialState(){return this.loadedInitialState}hasSentAtLeastOneSnapshot(){return this.snapshotSent}emitEvents(t){const n=this.filterAndFlipChanges(t);this.isBufferingForTruncate?n.length>0&&this.truncateBuffer.push(n):this.filteredCallback(n)}requestSnapshot(t){if(this.loadedInitialState)return!1;const n={where:this.options.whereExpression,optimizedOnly:t?.optimizedOnly??!1};if(t){if("where"in t){const a=t.where;if(n.where){const c=n.where,l=cu(c,a);n.where=l}else n.where=a}}else this.loadedInitialState=!0;const r={where:n.where,subscription:this,orderBy:t?.orderBy,limit:t?.limit},s=this.collection._sync.loadSubset(r);t?.onLoadSubsetResult?.(s),this.loadedSubsets.push(r),(t?.trackLoadSubsetPromise??!0)&&this.trackLoadSubsetPromise(s);const o=this.collection.currentStateAsChanges(n);if(o===void 0)return!1;const u=o.filter(a=>!this.sentKeys.has(a.key));for(const a of u)this.sentKeys.add(a.key);return this.snapshotSent=!0,this.callback(u),!0}requestLimitedSnapshot({orderBy:t,limit:n,minValues:r,offset:s,trackLoadSubsetPromise:i=!0,onLoadSubsetResult:o}){if(!n)throw new Error("limit is required");if(!this.orderByIndex)throw new Error("Ordered snapshot was requested but no index was found. You have to call setOrderByIndex before requesting an ordered snapshot.");const u=r!==void 0&&r.length>0,c=r?.[0],l=this.orderByIndex,d=this.options.whereExpression,p=d?Wr(d):void 0,f=_=>{if(_!==void 0&&this.sentKeys.has(_))return!1;const A=this.collection.get(_);return A===void 0?!1:p?.(A)??!0};let h=c;const m=[];let g=[];if(u){const{expression:_}=t[0],A=this.collection.currentStateAsChanges({where:Je(_,new He(c))});if(A){const F=A.map(z=>z.key).filter(z=>!this.sentKeys.has(z)&&f(z));g.push(...F);const D=l.take(n-g.length,c,f);g.push(...D)}else g=l.take(n,c,f)}else g=l.takeFromStart(n,f);const y=()=>Math.max(n-m.length,0),w=()=>g.length===0,v=t[0].expression,b=v.type==="ref"?Xe(new Ze(v.path),!0):null;for(;y()>0&&!w();){const _=new Set;for(const A of g){const F=this.collection.get(A);m.push({type:"insert",key:A,value:F}),h=b?b(F):F,_.add(A)}g=l.take(y(),h,f)}const x=this.limitedSnapshotRowCount;for(const _ of m)this.sentKeys.add(_.key);this.callback(m),this.limitedSnapshotRowCount+=m.length,m.length>0&&(this.lastSentKey=m[m.length-1].key);let E;if(r!==void 0&&r.length>0){const _=P2(t,r);if(_){const{expression:A}=t[0],F=r[0];let D;if(F instanceof Date){const z=new Date(F.getTime()+1);D=cu(g2(A,new He(F)),au(A,new He(z)))}else D=Je(A,new He(F));E={whereFrom:_,whereCurrent:D,lastKey:this.lastSentKey}}}const R={where:d,limit:n,orderBy:t,cursor:E,offset:s??x,subscription:this},S=this.collection._sync.loadSubset(R);o?.(S),this.loadedSubsets.push(R),i&&this.trackLoadSubsetPromise(S)}filterAndFlipChanges(t){if(this.loadedInitialState||this.skipFiltering)return t;const n=this.isBufferingForTruncate,r=[];for(const s of t){let i=s;if(this.sentKeys.has(s.key)){if(s.type==="insert")continue;s.type==="delete"&&this.sentKeys.delete(s.key)}else{if(s.type==="update")i={...s,type:"insert",previousValue:void 0};else if(s.type==="delete"&&!n)continue;this.sentKeys.add(s.key)}r.push(i)}return r}trackSentKeys(t){if(!(this.loadedInitialState||this.skipFiltering)){for(const n of t)n.type==="delete"?this.sentKeys.delete(n.key):this.sentKeys.add(n.key);this.orderByIndex&&(this.limitedSnapshotRowCount=Math.max(this.limitedSnapshotRowCount,this.sentKeys.size))}}markAllStateAsSeen(){this.skipFiltering=!0}unsubscribe(){this.truncateCleanup?.(),this.truncateCleanup=void 0,this.isBufferingForTruncate=!1,this.truncateBuffer=[],this.pendingTruncateRefetches.clear();for(const t of this.loadedSubsets)this.collection._sync.unloadSubset(t);this.loadedSubsets=[],this.emitInner("unsubscribed",{type:"unsubscribed",subscription:this}),this.clearListeners()}}class M2{constructor(){this.activeSubscribersCount=0,this.changeSubscriptions=new Set,this.batchedEvents=[],this.shouldBatchEvents=!1}setDeps(t){this.lifecycle=t.lifecycle,this.sync=t.sync,this.events=t.events,this.collection=t.collection}emitEmptyReadyEvent(){for(const t of this.changeSubscriptions)t.emitEvents([])}emitEvents(t,n=!1){if(this.shouldBatchEvents&&!n){this.batchedEvents.push(...t);return}let r=t;if(n&&(this.batchedEvents.length>0&&(r=[...this.batchedEvents,...t]),this.batchedEvents=[],this.shouldBatchEvents=!1),r.length!==0)for(const s of this.changeSubscriptions)s.emitEvents(r)}subscribeChanges(t,n={}){if(this.addSubscriber(),n.where&&n.whereExpression)throw new Error("Cannot specify both 'where' and 'whereExpression' options. Use one or the other.");const{where:r,...s}=n;let i=s.whereExpression;if(r){const u=ph(),a=r(u);i=ve(a)}const o=new L2(this.collection,t,{...s,whereExpression:i,onUnsubscribe:()=>{this.removeSubscriber(),this.changeSubscriptions.delete(o)}});return n.onStatusChange&&o.on("status:change",n.onStatusChange),n.includeInitialState?o.requestSnapshot({trackLoadSubsetPromise:!1,orderBy:n.orderBy,limit:n.limit,onLoadSubsetResult:n.onLoadSubsetResult}):n.includeInitialState===!1&&o.markAllStateAsSeen(),this.changeSubscriptions.add(o),o}addSubscriber(){const t=this.activeSubscribersCount;this.activeSubscribersCount++,this.lifecycle.cancelGCTimer(),(this.lifecycle.status==="cleaned-up"||this.lifecycle.status==="idle")&&this.sync.startSync(),this.events.emitSubscribersChange(this.activeSubscribersCount,t)}removeSubscriber(){const t=this.activeSubscribersCount;if(this.activeSubscribersCount--,this.activeSubscribersCount===0)this.lifecycle.startGCTimer();else if(this.activeSubscribersCount<0)throw new Wb;this.events.emitSubscribersChange(this.activeSubscribersCount,t)}cleanup(){this.batchedEvents=[],this.shouldBatchEvents=!1}}const B2=e=>setTimeout(()=>{e({didTimeout:!0,timeRemaining:()=>50})},0),$2=e=>{clearTimeout(e)},V2=typeof window<"u"&&"requestIdleCallback"in window?(e,t)=>window.requestIdleCallback(e,t):(e,t)=>B2(e),xo=typeof window<"u"&&"cancelIdleCallback"in window?e=>window.cancelIdleCallback(e):$2;class U2{constructor(t,n){this.status="idle",this.hasBeenReady=!1,this.hasReceivedFirstCommit=!1,this.onFirstReadyCallbacks=[],this.gcTimeoutId=null,this.idleCallbackId=null,this.config=t,this.id=n}setDeps(t){this.indexes=t.indexes,this.events=t.events,this.changes=t.changes,this.sync=t.sync,this.state=t.state}validateStatusTransition(t,n){if(t===n)return;if(!{idle:["loading","error","cleaned-up"],loading:["ready","error","cleaned-up"],ready:["cleaned-up","error"],error:["cleaned-up","idle"],"cleaned-up":["loading","error"]}[t].includes(n))throw new zb(t,n,this.id)}setStatus(t,n=!1){if(t==="ready"&&!n)throw new Ss(`You can't directly call "setStatus('ready'). You must use markReady instead.`);this.validateStatusTransition(this.status,t);const r=this.status;this.status=t,t==="ready"&&!this.indexes.isIndexesResolved&&this.indexes.resolveAllIndexes().catch(s=>{console.warn(`${this.config.id?`[${this.config.id}] `:""}Failed to resolve indexes:`,s)}),this.events.emitStatusChange(t,r)}validateCollectionUsable(t){switch(this.status){case"error":throw new Ub(t,this.id);case"cleaned-up":this.sync.startSync();break}}markReady(){if(this.validateStatusTransition(this.status,"ready"),this.status==="loading"){if(this.setStatus("ready",!0),!this.hasBeenReady){this.hasBeenReady=!0,this.hasReceivedFirstCommit||(this.hasReceivedFirstCommit=!0);const t=[...this.onFirstReadyCallbacks];this.onFirstReadyCallbacks=[],t.forEach(n=>n())}this.changes.changeSubscriptions.size>0&&this.changes.emitEmptyReadyEvent()}}startGCTimer(){this.gcTimeoutId&&clearTimeout(this.gcTimeoutId);const t=this.config.gcTime??3e5;t<=0||!Number.isFinite(t)||(this.gcTimeoutId=setTimeout(()=>{this.changes.activeSubscribersCount===0&&this.scheduleIdleCleanup()},t))}cancelGCTimer(){this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.idleCallbackId!==null&&(xo(this.idleCallbackId),this.idleCallbackId=null)}scheduleIdleCleanup(){this.idleCallbackId!==null&&xo(this.idleCallbackId),this.idleCallbackId=V2(t=>{this.changes.activeSubscribersCount===0?this.performCleanup(t)&&(this.idleCallbackId=null):this.idleCallbackId=null},{timeout:1e3})}performCleanup(t){if(!t||t.timeRemaining()>0||t.didTimeout){this.sync.cleanup(),this.state.cleanup(),this.changes.cleanup(),this.indexes.cleanup(),this.gcTimeoutId&&(clearTimeout(this.gcTimeoutId),this.gcTimeoutId=null),this.hasBeenReady=!1;const r=[...this.onFirstReadyCallbacks];return this.onFirstReadyCallbacks=[],r.forEach(s=>{try{s()}catch(i){console.error(`${this.config.id?`[${this.config.id}] `:""}Error in onFirstReady callback during cleanup:`,i)}}),this.setStatus("cleaned-up"),this.events.cleanup(),!0}else return this.scheduleIdleCleanup(),!1}onFirstReady(t){if(this.hasBeenReady){t();return}this.onFirstReadyCallbacks.push(t)}cleanup(){this.idleCallbackId!==null&&(xo(this.idleCallbackId),this.idleCallbackId=null),this.performCleanup()}}const ha=Symbol("liveQueryInternal");class z2{constructor(t,n){this.preloadPromise=null,this.syncCleanupFn=null,this.syncLoadSubsetFn=null,this.syncUnloadSubsetFn=null,this.pendingLoadSubsetPromises=new Set,this.config=t,this.id=n,this.syncMode=t.syncMode??"eager"}setDeps(t){this.collection=t.collection,this.state=t.state,this.lifecycle=t.lifecycle,this._events=t.events}startSync(){if(!(this.lifecycle.status!=="idle"&&this.lifecycle.status!=="cleaned-up")){this.lifecycle.setStatus("loading");try{const t=K2(this.config.sync.sync({collection:this.collection,begin:n=>{this.state.pendingSyncedTransactions.push({committed:!1,operations:[],deletedKeys:new Set,immediate:n?.immediate})},write:n=>{const r=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!r)throw new Xc;if(r.committed)throw new Jc;let s;"key"in n?s=n.key:s=this.config.getKey(n.value);let i=n.type;if(n.type==="insert"){const u=this.state.syncedData.has(s),a=r.deletedKeys.has(s),c=r.truncate===!0;if(u&&!a&&!c){const l=this.state.syncedData.get(s);if(l!==void 0&&It(l,n.value))i="update";else{const f=this.config.utils[ha];throw new Yb(s,this.id,{hasCustomGetKey:f?.hasCustomGetKey??!1,hasJoins:f?.hasJoins??!1,hasDistinct:f?.hasDistinct??!1})}}}const o={...n,type:i,key:s};r.operations.push(o),i==="delete"&&r.deletedKeys.add(s)},commit:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new ay;if(n.committed)throw new cy;n.committed=!0,this.state.commitPendingTransactions()},markReady:()=>{this.lifecycle.markReady()},truncate:()=>{const n=this.state.pendingSyncedTransactions[this.state.pendingSyncedTransactions.length-1];if(!n)throw new Xc;if(n.committed)throw new Jc;n.operations=[],n.deletedKeys.clear(),n.truncate=!0,n.optimisticSnapshot={upserts:new Map(this.state.optimisticUpserts),deletes:new Set(this.state.optimisticDeletes)}}}));if(this.syncCleanupFn=t?.cleanup??null,this.syncLoadSubsetFn=t?.loadSubset??null,this.syncUnloadSubsetFn=t?.unloadSubset??null,this.syncMode==="on-demand"&&!this.syncLoadSubsetFn)throw new xs(`Collection "${this.id}" is configured with syncMode "on-demand" but the sync function did not return a loadSubset handler. Either provide a loadSubset handler or use syncMode "eager".`)}catch(t){throw this.lifecycle.setStatus("error"),t}}}preload(){return this.preloadPromise?this.preloadPromise:(this.syncMode==="on-demand"&&console.warn(`${this.id?`[${this.id}] `:""}Calling .preload() on a collection with syncMode "on-demand" is a no-op. In on-demand mode, data is only loaded when queries request it. Instead, create a live query and call .preload() on that to load the specific data you need. See https://tanstack.com/blog/tanstack-db-0.5-query-driven-sync for more details.`),this.preloadPromise=new Promise((t,n)=>{if(this.lifecycle.status==="ready"){t();return}if(this.lifecycle.status==="error"){n(new Kb);return}if(this.lifecycle.onFirstReady(()=>{t()}),this.lifecycle.status==="idle"||this.lifecycle.status==="cleaned-up")try{this.startSync()}catch(r){n(r);return}}),this.preloadPromise)}get isLoadingSubset(){return this.pendingLoadSubsetPromises.size>0}trackLoadPromise(t){const n=!this.isLoadingSubset;this.pendingLoadSubsetPromises.add(t),n&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!0,previousIsLoadingSubset:!1,loadingSubsetTransition:"start"}),t.finally(()=>{const r=this.pendingLoadSubsetPromises.size===1&&this.pendingLoadSubsetPromises.has(t);this.pendingLoadSubsetPromises.delete(t),r&&this._events.emit("loadingSubset:change",{type:"loadingSubset:change",collection:this.collection,isLoadingSubset:!1,previousIsLoadingSubset:!0,loadingSubsetTransition:"end"})})}loadSubset(t){if(this.syncMode==="eager")return!0;if(this.syncLoadSubsetFn){const n=this.syncLoadSubsetFn(t);if(n instanceof Promise)return this.trackLoadPromise(n),n}return!0}unloadSubset(t){this.syncUnloadSubsetFn&&this.syncUnloadSubsetFn(t)}cleanup(){try{this.syncCleanupFn&&(this.syncCleanupFn(),this.syncCleanupFn=null)}catch(t){queueMicrotask(()=>{if(t instanceof Error){const n=new tl(this.id,t);throw n.cause=t,n.stack=t.stack,n}else throw new tl(this.id,t)})}this.preloadPromise=null}}function K2(e){if(typeof e=="function")return{cleanup:e};if(typeof e=="object")return e}function bh(e){return typeof e=="function"&&e.prototype!==void 0&&e.prototype.constructor===e}async function W2(e){return bh(e)?e:await e()}class G2{constructor(t,n,r,s,i,o){this.id=t,this.expression=n,this.name=r,this.resolver=s,this.options=i,this.collectionEntries=o,this.indexPromise=null,this.resolvedIndex=null,bh(this.resolver)&&(this.resolvedIndex=new this.resolver(this.id,this.expression,this.name,this.options),this.collectionEntries&&this.resolvedIndex.build(this.collectionEntries))}async resolve(){return this.resolvedIndex?this.resolvedIndex:(this.indexPromise||(this.indexPromise=this.createIndex()),this.resolvedIndex=await this.indexPromise,this.resolvedIndex)}isResolved(){return this.resolvedIndex!==null}getResolved(){if(!this.resolvedIndex)throw new Error(`Index ${this.id} has not been resolved yet. Ensure collection is synced.`);return this.resolvedIndex}getId(){return this.id}getName(){return this.name}getExpression(){return this.expression}async createIndex(){const t=await W2(this.resolver);return new t(this.id,this.expression,this.name,this.options)}}class j2{constructor(t,n){this.indexId=t,this.lazyIndex=n}get index(){return this.lazyIndex.getResolved()}get isReady(){return this.lazyIndex.isResolved()}async whenReady(){return await this.lazyIndex.resolve()}get id(){return this.indexId}get name(){return this.isReady?this.index.name:this.lazyIndex.getName()}get expression(){return this.lazyIndex.getExpression()}supports(t){return this.index.supports(t)}getStats(){return this.index.getStats()}matchesField(t){const n=this.expression;return n.type==="ref"&&n.path.length===t.length&&n.path.every((r,s)=>r===t[s])}get keyCount(){return this.index.keyCount}get indexedKeysSet(){return this.index.indexedKeysSet}get orderedEntriesArray(){return this.index.orderedEntriesArray}get valueMapData(){return this.index.valueMapData}equalityLookup(t){return this.index.equalityLookup?.(t)??new Set}rangeQuery(t){return this.index.rangeQuery?.(t)??new Set}inArrayLookup(t){return this.index.inArrayLookup?.(t)??new Set}_getLazyWrapper(){return this.lazyIndex}}class Z2{constructor(){this.lazyIndexes=new Map,this.resolvedIndexes=new Map,this.isIndexesResolved=!1,this.indexCounter=0}setDeps(t){this.state=t.state,this.lifecycle=t.lifecycle}createIndex(t,n={}){this.lifecycle.validateCollectionUsable("createIndex");const r=++this.indexCounter,s=ph(),i=t(s),o=ve(i),u=n.indexType??du,a=new G2(r,o,n.name,u,n.options,this.state.entries());if(this.lazyIndexes.set(r,a),u===du)try{const c=a.getResolved();this.resolvedIndexes.set(r,c)}catch(c){console.warn("Failed to resolve BTreeIndex:",c)}else if(typeof u=="function"&&u.prototype)try{const c=a.getResolved();this.resolvedIndexes.set(r,c)}catch{this.resolveSingleIndex(r,a).catch(c=>{console.warn("Failed to resolve single index:",c)})}else this.isIndexesResolved&&this.resolveSingleIndex(r,a).catch(c=>{console.warn("Failed to resolve single index:",c)});return new j2(r,a)}async resolveAllIndexes(){if(this.isIndexesResolved)return;const t=Array.from(this.lazyIndexes.entries()).map(async([n,r])=>{const s=await r.resolve();return s.build(this.state.entries()),this.resolvedIndexes.set(n,s),{indexId:n,resolvedIndex:s}});await Promise.all(t),this.isIndexesResolved=!0}async resolveSingleIndex(t,n){const r=await n.resolve();return r.build(this.state.entries()),this.resolvedIndexes.set(t,r),r}get indexes(){return this.resolvedIndexes}updateIndexes(t){for(const n of this.resolvedIndexes.values())for(const r of t)switch(r.type){case"insert":n.add(r.key,r.value);break;case"update":r.previousValue?n.update(r.key,r.previousValue,r.value):n.add(r.key,r.value);break;case"delete":n.remove(r.key,r.value);break}}cleanup(){this.lazyIndexes.clear(),this.resolvedIndexes.clear()}}var Y2={};const q2=new Set(["find","findLast","findIndex","findLastIndex","filter","map","flatMap","forEach","some","every","reduce","reduceRight"]),H2=new Set(["pop","push","shift","unshift","splice","sort","reverse","fill","copyWithin"]),X2=new Set(["set","delete","clear","add"]),J2=new Set(["entries","keys","values","forEach"]);function pa(e){return e!==null&&typeof e=="object"&&!(e instanceof Date)&&!(e instanceof RegExp)&&!zr(e)}function Q2(e,t,n,r){if(q2.has(e))return function(...s){const i=s[0];if(typeof i!="function")return t.apply(n.copy_,s);const o=(c,l)=>{if(pa(c)){const d={tracker:n,prop:String(l)},{proxy:p}=r(c,d);return p}return c},u=function(c,l,d){const p=o(c,l);return i.call(this,p,l,d)};if(e==="reduce"||e==="reduceRight"){const c=function(l,d,p,f){const h=o(d,p);return i.call(this,l,h,p,f)};return t.apply(n.copy_,[c,...s.slice(1)])}const a=t.apply(n.copy_,[u,...s.slice(1)]);if((e==="find"||e==="findLast")&&a&&typeof a=="object"){const c=n.copy_.indexOf(a);if(c!==-1)return o(a,c)}return e==="filter"&&Array.isArray(a)?a.map(c=>{const l=n.copy_.indexOf(c);return l!==-1?o(c,l):c}):a}}function ev(e,t){return function(){const n=e.copy_;let r=0;return{next(){if(r>=n.length)return{done:!0,value:void 0};const s=n[r];let i=s;if(pa(s)){const o={tracker:e,prop:String(r)},{proxy:u}=t(s,o);i=u}return r++,{done:!1,value:i}},[Symbol.iterator](){return this}}}}function Sl(e,t,n){return function(...r){const s=e.apply(t.copy_,r);return n(t),s}}function tv(e,t,n,r,s,i,o){if(J2.has(e)||t===Symbol.iterator)return function(...a){const c=n.apply(s.copy_,a);if(e==="forEach"){const d=a[0];if(typeof d=="function"){const p=function(f,h,m){const g=d.call(this,f,h,m);return o(s),g};return n.apply(r,[p,...a.slice(1)])}}if(e==="entries"||e==="values"||e===Symbol.iterator.toString()||t===Symbol.iterator){const d=c,p=new Map;if(e==="values"&&r instanceof Map)for(const[h,m]of s.copy_.entries())p.set(m,h);const f=new Map;if(r instanceof Set)for(const h of s.copy_.values())f.set(h,h);return{next(){const h=d.next();if(!h.done&&h.value&&typeof h.value=="object"){if(e==="entries"&&Array.isArray(h.value)&&h.value.length===2){if(h.value[1]&&typeof h.value[1]=="object"){const m=h.value[0],g={tracker:s,prop:m,updateMap:w=>{s.copy_ instanceof Map&&s.copy_.set(m,w)}},{proxy:y}=i(h.value[1],g);h.value[1]=y}}else if(e==="values"||e===Symbol.iterator.toString()||t===Symbol.iterator)if(e==="values"&&r instanceof Map){const m=p.get(h.value);if(m!==void 0){const g={tracker:s,prop:m,updateMap:w=>{s.copy_ instanceof Map&&s.copy_.set(m,w)}},{proxy:y}=i(h.value,g);h.value=y}}else if(r instanceof Set){const m=h.value,g={tracker:s,prop:m,updateSet:w=>{s.copy_ instanceof Set&&(s.copy_.delete(m),s.copy_.add(w),f.set(m,w))}},{proxy:y}=i(h.value,g);h.value=y}else{const m=Symbol("iterator-value"),{proxy:g}=i(h.value,{tracker:s,prop:m});h.value=g}}return h},[Symbol.iterator](){return this}}}return c}}function Q(...e){const t=typeof window<"u"&&typeof localStorage<"u";t&&localStorage.getItem("DEBUG")==="true"?console.log("[proxy]",...e):!t&&typeof process<"u"&&Y2.DEBUG==="true"&&console.log("[proxy]",...e)}function qt(e,t=new WeakMap){if(e==null||typeof e!="object")return e;if(t.has(e))return t.get(e);if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return new RegExp(e.source,e.flags);if(Array.isArray(e)){const s=[];return t.set(e,s),e.forEach((i,o)=>{s[o]=qt(i,t)}),s}if(ArrayBuffer.isView(e)&&!(e instanceof DataView)){const s=Object.getPrototypeOf(e).constructor,i=new s(e.length);t.set(e,i);for(let o=0;o<e.length;o++)i[o]=e[o];return i}if(e instanceof Map){const s=new Map;return t.set(e,s),e.forEach((i,o)=>{s.set(o,qt(i,t))}),s}if(e instanceof Set){const s=new Set;return t.set(e,s),e.forEach(i=>{s.add(qt(i,t))}),s}if(zr(e))return e;const n={};t.set(e,n);for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=qt(e[s],t));const r=Object.getOwnPropertySymbols(e);for(const s of r)n[s]=qt(e[s],t);return n}let _l=0;function nv(){return _l+=1,_l}function ma(e,t){const n=new Map;function r(d,p){if(Q("Object ID:",d.constructor.name),n.has(d))return n.get(d);{const f=ma(d,p);return n.set(d,f),f}}const s=new Map,i={copy_:qt(e),originalObject:qt(e),proxyCount:nv(),modified:!1,assigned_:{},parent:t,target:e};Q("createChangeProxy called for target",e,i.proxyCount);function o(d){d.modified||(d.modified=!0),d.parent&&(Q("propagating change to parent"),"updateMap"in d.parent?d.parent.updateMap(d.copy_):"updateSet"in d.parent?d.parent.updateSet(d.copy_):(d.parent.tracker.copy_[d.parent.prop]=d.copy_,d.parent.tracker.assigned_[d.parent.prop]=!0),o(d.parent.tracker))}function u(d){if(Q("checkIfReverted called with assigned keys:",Object.keys(d.assigned_)),Object.keys(d.assigned_).length===0&&Object.getOwnPropertySymbols(d.assigned_).length===0)return Q("No assigned properties, returning true"),!0;for(const f in d.assigned_)if(d.assigned_[f]===!0){const h=d.copy_[f],m=d.originalObject[f];if(Q(`Checking property ${String(f)}, current:`,h,"original:",m),!It(h,m))return Q(`Property ${String(f)} is different, returning false`),!1}else if(d.assigned_[f]===!1)return Q(`Property ${String(f)} was deleted, returning false`),!1;const p=Object.getOwnPropertySymbols(d.assigned_);for(const f of p)if(d.assigned_[f]===!0){const h=d.copy_[f],m=d.originalObject[f];if(!It(h,m))return Q("Symbol property is different, returning false"),!1}else if(d.assigned_[f]===!1)return Q("Symbol property was deleted, returning false"),!1;return Q("All properties match original values, returning true"),!0}function a(d,p){Q("checkParentStatus called for child prop:",p);const f=u(d);Q("Parent checkIfReverted returned:",f),f&&(Q("Parent is fully reverted, clearing tracking"),d.modified=!1,d.assigned_={},d.parent&&(Q("Continuing up the parent chain"),a(d.parent.tracker,d.parent.prop)))}function c(d){if(Q("createObjectProxy",d),s.has(d))return Q("proxyCache found match"),s.get(d);const p=new Proxy(d,{get(f,h){Q("get",f,h);const m=i.copy_[h]??i.originalObject[h],g=i.originalObject[h];if(Q("value (at top of proxy get)",m),Object.getOwnPropertyDescriptor(f,h)?.get)return m;if(typeof m=="function"){if(Array.isArray(f)){const w=h.toString();if(H2.has(w))return Sl(m,i,o);const v=Q2(w,m,i,r);if(v)return v;if(h===Symbol.iterator)return ev(i,r)}if(f instanceof Map||f instanceof Set){const w=h.toString();if(X2.has(w))return Sl(m,i,o);const v=tv(w,h,m,f,i,r,o);if(v)return v}return m.bind(f)}if(pa(m)){const w={tracker:i,prop:String(h)},{proxy:v}=r(g,w);return s.set(m,v),v}return m},set(f,h,m){const g=i.copy_[h];if(Q(`set called for property ${String(h)}, current:`,g,"new:",m),It(g,m))Q("Value unchanged, not tracking");else{const y=i.originalObject[h],w=It(m,y);if(Q("value:",m,"original:",y,"isRevertToOriginal:",w),w){Q(`Reverting property ${String(h)} to original value`),delete i.assigned_[h.toString()],Q(`Updating copy with original value for ${String(h)}`),i.copy_[h]=qt(y),Q("Checking if all properties reverted");const v=u(i);Q("All reverted:",v),v?(Q("All properties reverted, clearing tracking"),i.modified=!1,i.assigned_={},t&&(Q("Updating parent for property:",t.prop),a(t.tracker,t.prop))):(Q("Some properties still changed, keeping modified flag"),i.modified=!0)}else Q(`Setting new value for property ${String(h)}`),i.copy_[h]=m,i.assigned_[h.toString()]=!0,Q("Marking object and ancestors as modified",i),o(i)}return!0},defineProperty(f,h,m){const g=Reflect.defineProperty(f,h,m);return g&&"value"in m&&(i.copy_[h]=qt(m.value),i.assigned_[h.toString()]=!0,o(i)),g},getOwnPropertyDescriptor(f,h){return Reflect.getOwnPropertyDescriptor(f,h)},preventExtensions(f){return Reflect.preventExtensions(f)},isExtensible(f){return Reflect.isExtensible(f)},deleteProperty(f,h){Q("deleteProperty",f,h);const m=typeof h=="symbol"?h.toString():h;if(m in f){const g=m in i.originalObject,y=Reflect.deleteProperty(f,h);return y&&(g?(i.assigned_[m]=!1,o(i)):(delete i.assigned_[m],Object.keys(i.assigned_).length===0&&Object.getOwnPropertySymbols(i.assigned_).length===0?i.modified=!1:i.modified=!0)),y}return!0}});return s.set(d,p),p}return{proxy:c(i.copy_),getChanges:()=>{if(Q("getChanges called, modified:",i.modified),Q(i),!i.modified)return Q("Object not modified, returning empty object"),{};if(typeof i.copy_!="object"||Array.isArray(i.copy_)||Object.keys(i.assigned_).length===0)return i.copy_;const d={};for(const p in i.copy_)i.assigned_[p]===!0&&p in i.copy_&&(d[p]=i.copy_[p]);return Q("Returning copy:",d),d}}}function rv(e){const t=e.map(n=>ma(n));return{proxies:t.map(n=>n.proxy),getChanges:()=>t.map(n=>n.getChanges())}}function sv(e,t){const{proxy:n,getChanges:r}=ma(e);return t(n),r()}function iv(e,t){const{proxies:n,getChanges:r}=rv(e);return t(n),r()}function ov(){let e,t,n=!0;return{promise:new Promise((s,i)=>{e=o=>{n=!1,s(o)},t=o=>{n=!1,i(o)}}),resolve:e,reject:t,isPending:()=>n}}function uv(e){return typeof e=="object"&&e!==null&&typeof e.hasPendingGraphRun=="function"}class av{constructor(){this.contexts=new Map,this.clearListeners=new Set}getOrCreateContext(t){let n=this.contexts.get(t);return n||(n={queue:[],jobs:new Map,dependencies:new Map,completed:new Set},this.contexts.set(t,n)),n}schedule({contextId:t,jobId:n,dependencies:r,run:s}){if(typeof t>"u"){s();return}const i=this.getOrCreateContext(t);if(i.jobs.has(n)||i.queue.push(n),i.jobs.set(n,s),r){const o=new Set(r);o.delete(n),i.dependencies.set(n,o)}else i.dependencies.has(n)||i.dependencies.set(n,new Set);i.completed.delete(n)}flush(t){const n=this.contexts.get(t);if(!n)return;const{queue:r,jobs:s,dependencies:i,completed:o}=n;for(;r.length>0;){let u=!1;const a=r.length;for(let c=0;c<a;c++){const l=r.shift(),d=s.get(l);if(!d){i.delete(l),o.delete(l);continue}const p=i.get(l);let f=!p;if(p){f=!0;for(const h of p){if(h===l)continue;const m=uv(h)&&h.hasPendingGraphRun(t);if(s.has(h)&&!o.has(h)||!s.has(h)&&m){f=!1;break}}}f?(s.delete(l),i.delete(l),d(),o.add(l),u=!0):r.push(l)}if(!u)throw new Error(`Scheduler detected unresolved dependencies for context ${String(t)}.`)}this.contexts.delete(t)}flushAll(){for(const t of Array.from(this.contexts.keys()))this.flush(t)}clear(t){this.contexts.delete(t),this.clearListeners.forEach(n=>n(t))}onClear(t){return this.clearListeners.add(t),()=>this.clearListeners.delete(t)}hasPendingJobs(t){const n=this.contexts.get(t);return!!n&&n.jobs.size>0}clearJob(t,n){const r=this.contexts.get(t);r&&(r.jobs.delete(n),r.dependencies.delete(n),r.completed.delete(n),r.queue=r.queue.filter(s=>s!==n),r.jobs.size===0&&this.contexts.delete(t))}}const xi=new av,Si=[];let ns=[],cv=0;function lv(e,t){switch(`${e.type}-${t.type}`){case"insert-update":return{...e,type:"insert",original:{},modified:t.modified,changes:{...e.changes,...t.changes},key:e.key,globalKey:e.globalKey,metadata:t.metadata??e.metadata,syncMetadata:{...e.syncMetadata,...t.syncMetadata},mutationId:t.mutationId,updatedAt:t.updatedAt};case"insert-delete":return null;case"update-delete":return t;case"update-update":return{...t,original:e.original,changes:{...e.changes,...t.changes},metadata:t.metadata??e.metadata,syncMetadata:{...e.syncMetadata,...t.syncMetadata}};case"delete-delete":case"insert-insert":return t;default:{const n=`${e.type}-${t.type}`;throw new Error(`Unhandled mutation combination: ${n}`)}}}function Vs(e){const t=new pv(e);return Si.push(t),t}function Qs(){if(ns.length>0)return ns.slice(-1)[0]}function dv(e){xi.clear(e.id),ns.push(e)}function fv(e){try{xi.flush(e.id)}finally{ns=ns.filter(t=>t.id!==e.id)}}function hv(e){const t=Si.findIndex(n=>n.id===e.id);t!==-1&&Si.splice(t,1)}class pv{constructor(t){if(typeof t.mutationFn>"u")throw new sy;this.id=t.id??crypto.randomUUID(),this.mutationFn=t.mutationFn,this.state="pending",this.mutations=[],this.isPersisted=ov(),this.autoCommit=t.autoCommit??!0,this.createdAt=new Date,this.sequenceNumber=cv++,this.metadata=t.metadata??{}}setState(t){this.state=t,(t==="completed"||t==="failed")&&hv(this)}mutate(t){if(this.state!=="pending")throw new iy;dv(this);try{t()}finally{fv(this)}return this.autoCommit&&this.commit().catch(()=>{}),this}applyMutations(t){for(const n of t){const r=this.mutations.findIndex(s=>s.globalKey===n.globalKey);if(r>=0){const s=this.mutations[r],i=lv(s,n);i===null?this.mutations.splice(r,1):this.mutations[r]=i}else this.mutations.push(n)}}rollback(t){const n=t?.isSecondaryRollback??!1;if(this.state==="completed")throw new oy;if(this.setState("failed"),!n){const r=new Set;this.mutations.forEach(s=>r.add(s.globalKey));for(const s of Si)s.state==="pending"&&s.mutations.some(i=>r.has(i.globalKey))&&s.rollback({isSecondaryRollback:!0})}return this.isPersisted.reject(this.error?.error),this.touchCollection(),this}touchCollection(){const t=new Set;for(const n of this.mutations)t.has(n.collection.id)||(n.collection._state.onTransactionStateChange(),n.collection._state.pendingSyncedTransactions.length>0&&n.collection._state.commitPendingTransactions(),t.add(n.collection.id))}async commit(){if(this.state!=="pending")throw new uy;if(this.setState("persisting"),this.mutations.length===0)return this.setState("completed"),this.isPersisted.resolve(this),this;try{await this.mutationFn({transaction:this}),this.setState("completed"),this.touchCollection(),this.isPersisted.resolve(this)}catch(t){const n=t instanceof Error?t:new Error(String(t));throw this.error={message:n.message,error:n},this.rollback(),n}return this}compareCreatedAt(t){const n=this.createdAt.getTime()-t.createdAt.getTime();return n!==0?n:this.sequenceNumber-t.sequenceNumber}}class mv{constructor(t,n){this.insert=(r,s)=>{this.lifecycle.validateCollectionUsable("insert");const i=this.state,o=Qs();if(!o&&!this.config.onInsert)throw new ty;const u=Array.isArray(r)?r:[r],a=[],c=new Set;if(u.forEach(l=>{const d=this.validateData(l,"insert"),p=this.config.getKey(d);if(this.state.has(p)||c.has(p))throw new Zb(p);c.add(p);const f=this.generateGlobalKey(p,l),h={mutationId:crypto.randomUUID(),original:{},modified:d,changes:Object.fromEntries(Object.keys(l).map(m=>[m,d[m]])),globalKey:f,key:p,metadata:s?.metadata,syncMetadata:this.config.sync.getSyncMetadata?.()||{},optimistic:s?.optimistic??!0,type:"insert",createdAt:new Date,updatedAt:new Date,collection:this.collection};a.push(h)}),o)return o.applyMutations(a),i.transactions.set(o.id,o),i.scheduleTransactionCleanup(o),i.recomputeOptimisticState(!0),o;{const l=Vs({mutationFn:async d=>await this.config.onInsert({transaction:d.transaction,collection:this.collection})});return l.applyMutations(a),l.commit().catch(()=>{}),i.transactions.set(l.id,l),i.scheduleTransactionCleanup(l),i.recomputeOptimisticState(!0),l}},this.delete=(r,s)=>{const i=this.state;this.lifecycle.validateCollectionUsable("delete");const o=Qs();if(!o&&!this.config.onDelete)throw new ry;if(Array.isArray(r)&&r.length===0)throw new Qb;const u=Array.isArray(r)?r:[r],a=[];for(const l of u){if(!this.state.has(l))throw new ey(l);const d=this.generateGlobalKey(l,this.state.get(l)),p={mutationId:crypto.randomUUID(),original:this.state.get(l),modified:this.state.get(l),changes:this.state.get(l),globalKey:d,key:l,metadata:s?.metadata,syncMetadata:i.syncedMetadata.get(l)||{},optimistic:s?.optimistic??!0,type:"delete",createdAt:new Date,updatedAt:new Date,collection:this.collection};a.push(p)}if(o)return o.applyMutations(a),i.transactions.set(o.id,o),i.scheduleTransactionCleanup(o),i.recomputeOptimisticState(!0),o;const c=Vs({autoCommit:!0,mutationFn:async l=>this.config.onDelete({transaction:l.transaction,collection:this.collection})});return c.applyMutations(a),c.commit().catch(()=>{}),i.transactions.set(c.id,c),i.scheduleTransactionCleanup(c),i.recomputeOptimisticState(!0),c},this.id=n,this.config=t}setDeps(t){this.lifecycle=t.lifecycle,this.state=t.state,this.collection=t.collection}ensureStandardSchema(t){if(t&&"~standard"in t)return t;throw new Vb}validateData(t,n,r){if(!this.config.schema)return t;const s=this.ensureStandardSchema(this.config.schema);if(n==="update"&&r){const o=this.state.get(r);if(o&&t&&typeof t=="object"&&typeof o=="object"){const u=Object.assign({},o,t),a=s["~standard"].validate(u);if(a instanceof Promise)throw new Hc;if("issues"in a&&a.issues){const p=a.issues.map(f=>({message:f.message,path:f.path?.map(h=>String(h))}));throw new qc(n,p)}const c=a.value,l=Object.keys(t);return Object.fromEntries(l.map(p=>[p,c[p]]))}}const i=s["~standard"].validate(t);if(i instanceof Promise)throw new Hc;if("issues"in i&&i.issues){const o=i.issues.map(u=>({message:u.message,path:u.path?.map(a=>String(a))}));throw new qc(n,o)}return i.value}generateGlobalKey(t,n){if(typeof t!="string"&&typeof t!="number")throw typeof t>"u"?new Gb(n):new jb(t,n);return`KEY::${this.id}/${t}`}update(t,n,r){if(typeof t>"u")throw new qb;const s=this.state;this.lifecycle.validateCollectionUsable("update");const i=Qs();if(!i&&!this.config.onUpdate)throw new ny;const o=Array.isArray(t),u=o?t:[t];if(o&&u.length===0)throw new Hb;const a=typeof n=="function"?n:r,c=typeof n=="function"?{}:n,l=u.map(h=>{const m=this.state.get(h);if(!m)throw new Xb(h);return m});let d;o?d=iv(l,a):d=[sv(l[0],a)];const p=u.map((h,m)=>{const g=d[m];if(!g||Object.keys(g).length===0)return null;const y=l[m],w=this.validateData(g,"update",h),v=Object.assign({},y,w),b=this.config.getKey(y),x=this.config.getKey(v);if(b!==x)throw new Jb(b,x);const E=this.generateGlobalKey(x,v);return{mutationId:crypto.randomUUID(),original:y,modified:v,changes:Object.fromEntries(Object.keys(g).map(R=>[R,v[R]])),globalKey:E,key:h,metadata:c.metadata,syncMetadata:s.syncedMetadata.get(h)||{},optimistic:c.optimistic??!0,type:"update",createdAt:new Date,updatedAt:new Date,collection:this.collection}}).filter(Boolean);if(p.length===0){const h=Vs({mutationFn:async()=>{}});return h.commit().catch(()=>{}),s.scheduleTransactionCleanup(h),h}if(i)return i.applyMutations(p),s.transactions.set(i.id,i),s.scheduleTransactionCleanup(i),s.recomputeOptimisticState(!0),i;const f=Vs({mutationFn:async h=>this.config.onUpdate({transaction:h.transaction,collection:this.collection})});return f.applyMutations(p),f.commit().catch(()=>{}),s.transactions.set(f.id,f),s.scheduleTransactionCleanup(f),s.recomputeOptimisticState(!0),f}}class gv extends gh{constructor(){super()}setDeps(t){this.collection=t.collection}emit(t,n){this.emitInner(t,n)}emitStatusChange(t,n){this.emit("status:change",{type:"status:change",collection:this.collection,previousStatus:n,status:t});const r=`status:${t}`;this.emit(r,{type:r,collection:this.collection,previousStatus:n,status:t})}emitSubscribersChange(t,n){this.emit("subscribers:change",{type:"subscribers:change",collection:this.collection,previousSubscriberCount:n,subscriberCount:t})}cleanup(){this.clearListeners()}}function Es(e){const t=new ga(e);return e.utils?t.utils=e.utils:t.utils={},t}class ga{constructor(t){if(this.utils={},this.insert=(n,r)=>this._mutations.insert(n,r),this.delete=(n,r)=>this._mutations.delete(n,r),!t)throw new Bb;if(!t.sync)throw new $b;t.id?this.id=t.id:this.id=crypto.randomUUID(),this.config={...t,autoIndex:t.autoIndex??"eager"},this._changes=new M2,this._events=new gv,this._indexes=new Z2,this._lifecycle=new U2(t,this.id),this._mutations=new mv(t,this.id),this._state=new N2(t),this._sync=new z2(t,this.id),this.comparisonOpts=bv(t),this._changes.setDeps({collection:this,lifecycle:this._lifecycle,sync:this._sync,events:this._events}),this._events.setDeps({collection:this}),this._indexes.setDeps({state:this._state,lifecycle:this._lifecycle}),this._lifecycle.setDeps({changes:this._changes,events:this._events,indexes:this._indexes,state:this._state,sync:this._sync}),this._mutations.setDeps({collection:this,lifecycle:this._lifecycle,state:this._state}),this._state.setDeps({collection:this,lifecycle:this._lifecycle,changes:this._changes,indexes:this._indexes,events:this._events}),this._sync.setDeps({collection:this,state:this._state,lifecycle:this._lifecycle,events:this._events}),t.startSync===!0&&this._sync.startSync()}get status(){return this._lifecycle.status}get subscriberCount(){return this._changes.activeSubscribersCount}onFirstReady(t){return this._lifecycle.onFirstReady(t)}isReady(){return this._lifecycle.status==="ready"}get isLoadingSubset(){return this._sync.isLoadingSubset}startSyncImmediate(){this._sync.startSync()}preload(){return this._sync.preload()}get(t){return this._state.get(t)}has(t){return this._state.has(t)}get size(){return this._state.size}*keys(){yield*this._state.keys()}*values(){yield*this._state.values()}*entries(){yield*this._state.entries()}*[Symbol.iterator](){yield*this._state[Symbol.iterator]()}forEach(t){return this._state.forEach(t)}map(t){return this._state.map(t)}getKeyFromItem(t){return this.config.getKey(t)}createIndex(t,n={}){return this._indexes.createIndex(t,n)}get indexes(){return this._indexes.indexes}validateData(t,n,r){return this._mutations.validateData(t,n,r)}get compareOptions(){return{...this.comparisonOpts}}update(t,n,r){return this._mutations.update(t,n,r)}get state(){const t=new Map;for(const[n,r]of this.entries())t.set(n,r);return t}stateWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.state):this.preload().then(()=>this.state)}get toArray(){return Array.from(this.values())}toArrayWhenReady(){return this.size>0||this.isReady()?Promise.resolve(this.toArray):this.preload().then(()=>this.toArray)}currentStateAsChanges(t={}){return O2(this,t)}subscribeChanges(t,n={}){return this._changes.subscribeChanges(t,n)}on(t,n){return this._events.on(t,n)}once(t,n){return this._events.once(t,n)}off(t,n){this._events.off(t,n)}waitFor(t,n){return this._events.waitFor(t,n)}async cleanup(){return this._lifecycle.cleanup(),Promise.resolve()}}function bv(e){if(e.defaultStringCollation){const t=e.defaultStringCollation;return{stringSort:t.stringSort??"locale",locale:t.stringSort==="locale"?t.locale:void 0,localeOptions:t.stringSort==="locale"?t.localeOptions:void 0}}else return{stringSort:"locale"}}class Ae{constructor(t={}){this.query={},this.query={...t}}_createRefForSource(t,n){let r;try{r=Object.keys(t)}catch{const u=t===null?"null":"undefined";throw new Bs(n,u)}if(Array.isArray(t))throw new Bs(n,"array");if(r.length!==1)throw r.length===0?new Bs(n,"empty object"):r.every(u=>!isNaN(Number(u)))?new Bs(n,"string"):new ly(n);const s=r[0],i=t[s];let o;if(i instanceof ga)o=new dr(i,s);else if(i instanceof Ae){const u=i._getQuery();if(!u.from)throw new dy(n);o=new vt(u,s)}else throw new fy(s);return[s,o]}from(t){const[,n]=this._createRefForSource(t,"from clause");return new Ae({...this.query,from:n})}join(t,n,r="left"){const[s,i]=this._createRefForSource(t,"join clause"),u=[...this._getCurrentAliases(),s],a=An(u),c=n(a);let l,d;if(c.type==="func"&&c.name==="eq"&&c.args.length===2)l=c.args[0],d=c.args[1];else throw new hy;const p={from:i,type:r,left:l,right:d},f=this.query.join||[];return new Ae({...this.query,join:[...f,p]})}leftJoin(t,n){return this.join(t,n,"left")}rightJoin(t,n){return this.join(t,n,"right")}innerJoin(t,n){return this.join(t,n,"inner")}fullJoin(t,n){return this.join(t,n,"full")}where(t){const n=this._getCurrentAliases(),r=An(n),s=t(r);if(!Jr(s))throw new Qc(El(s));const i=this.query.where||[];return new Ae({...this.query,where:[...i,s]})}having(t){const n=this._getCurrentAliases(),r=this.query.select||this.query.fnSelect?gl(n):An(n),s=t(r);if(!Jr(s))throw new Qc(El(s));const i=this.query.having||[];return new Ae({...this.query,having:[...i,s]})}select(t){const n=this._getCurrentAliases(),r=An(n),s=t(r),i=yh(s);return new Ae({...this.query,select:i,fnSelect:void 0})}orderBy(t,n="asc"){const r=this._getCurrentAliases(),s=this.query.select||this.query.fnSelect?gl(r):An(r),i=t(s),o=typeof n=="string"?{direction:n,nulls:"first"}:{direction:n.direction??"asc",nulls:n.nulls??"first",stringSort:n.stringSort,locale:n.stringSort==="locale"?n.locale:void 0,localeOptions:n.stringSort==="locale"?n.localeOptions:void 0},u=l=>({expression:ve(l),compareOptions:o}),a=Array.isArray(i)?i.map(l=>u(l)):[u(i)],c=this.query.orderBy||[];return new Ae({...this.query,orderBy:[...c,...a]})}groupBy(t){const n=this._getCurrentAliases(),r=An(n),s=t(r),i=Array.isArray(s)?s.map(u=>ve(u)):[ve(s)],o=this.query.groupBy||[];return new Ae({...this.query,groupBy:[...o,...i]})}limit(t){return new Ae({...this.query,limit:t})}offset(t){return new Ae({...this.query,offset:t})}distinct(){return new Ae({...this.query,distinct:!0})}findOne(){return new Ae({...this.query,singleResult:!0})}_getCurrentAliases(){const t=[];if(this.query.from&&t.push(this.query.from.alias),this.query.join)for(const n of this.query.join)t.push(n.from.alias);return t}get fn(){const t=this;return{select(n){return new Ae({...t.query,select:void 0,fnSelect:n})},where(n){return new Ae({...t.query,fnWhere:[...t.query.fnWhere||[],n]})},having(n){return new Ae({...t.query,fnHaving:[...t.query.fnHaving||[],n]})}}}_getQuery(){if(!this.query.from)throw new py;return this.query}}function El(e){return e===null?"null":e===void 0?"undefined":typeof e=="object"?"object":typeof e}function yv(e){return e===void 0?ve(null):e instanceof na||e instanceof ct||e instanceof Ze||e instanceof He?e:ve(e)}function vv(e){return e!==null&&typeof e=="object"&&!Jr(e)&&!e.__refProxy}function yh(e){if(!vv(e))return yv(e);const t={};for(const[n,r]of Object.entries(e)){if(typeof n=="string"&&n.startsWith("__SPREAD_SENTINEL__")){t[n]=r;continue}t[n]=yh(r)}return t}function wv(e){const t=e(new Ae);return vh(t)}function vh(e){return e._getQuery()}function xv(e){const t=Sv(e);let n=e,r,s=0;const i=10;for(;s<i&&!It(n,r);)r=n,n=hu(n),s++;return{optimizedQuery:wh(n),sourceWhereClauses:t}}function Sv(e){const t=new Map;if(!e.where||e.where.length===0)return t;const r=mu(e.where).map(i=>xh(i)),s=Sh(r);for(const[i,o]of s.singleSource)_v(e,i)&&t.set(i,o);return t}function _v(e,t){if(e.from.alias===t)return e.from.type==="collectionRef";if(e.join){for(const n of e.join)if(n.from.alias===t)return n.from.type==="collectionRef"}return!1}function hu(e){const t={...e,from:e.from.type==="queryRef"?new vt(hu(e.from.query),e.from.alias):e.from,join:e.join?.map(n=>({...n,from:n.from.type==="queryRef"?new vt(hu(n.from.query),n.from.alias):n.from}))};return Ev(t)}function Ev(e){if(!e.where||e.where.length===0)return e;if(!e.join||e.join.length===0){if(e.where.length>1){const u=mu(e.where),a=_i(u);return{...e,where:[a]}}return e}const t=e.where.filter(u=>!Yc(u)),r=mu(t).map(u=>xh(u)),s=Sh(r),i=Cv(e,s),o=e.where.filter(u=>Yc(u));return o.length>0&&(i.where=[...i.where||[],...o]),i}function wh(e){return{...e,from:pu(e.from),join:e.join?.map(t=>({...t,from:pu(t.from)}))}}function pu(e){if(e.type==="collectionRef")return e;const t=wh(e.query);if(kv(t)){const n=pu(t.from);return n.type==="collectionRef"?new dr(n.collection,e.alias):new vt(n.query,e.alias)}return new vt(t,e.alias)}function kv(e){return(!e.where||e.where.length===0)&&!e.select&&(!e.groupBy||e.groupBy.length===0)&&(!e.having||e.having.length===0)&&(!e.orderBy||e.orderBy.length===0)&&(!e.join||e.join.length===0)&&e.limit===void 0&&e.offset===void 0&&!e.fnSelect&&(!e.fnWhere||e.fnWhere.length===0)&&(!e.fnHaving||e.fnHaving.length===0)}function mu(e){const t=[];for(const n of e){const r=ra(n);t.push(...ba(r))}return t}function ba(e){if(e.type==="func"&&e.name==="and"){const t=[];for(const n of e.args)t.push(...ba(n));return t}else return[e]}function xh(e){const t=new Set;let n=!1;function r(s){switch(s.type){case"ref":if(s.path&&s.path.length>0){const i=s.path[0];i&&(t.add(i),s.path.length===1&&(n=!0))}break;case"func":s.args&&s.args.forEach(r);break;case"val":break;case"agg":s.args&&s.args.forEach(r);break}}return r(e),{expression:e,touchedSources:t,hasNamespaceOnlyRef:n}}function Sh(e){const t=new Map,n=[];for(const i of e)if(i.touchedSources.size===1&&!i.hasNamespaceOnlyRef){const o=Array.from(i.touchedSources)[0];t.has(o)||t.set(o,[]),t.get(o).push(i.expression)}else(i.touchedSources.size>1||i.hasNamespaceOnlyRef)&&n.push(i.expression);const r=new Map;for(const[i,o]of t)r.set(i,_i(o));const s=n.length>0?_i(n):void 0;return{singleSource:r,multiSource:s}}function Cv(e,t){const n=new Set,r=kl(e.from,t.singleSource,n),s=e.join?e.join.map(c=>({...c,from:kl(c.from,t.singleSource,n)})):void 0,i=[];t.multiSource&&i.push(t.multiSource);const o=e.join&&e.join.some(c=>c.type==="left"||c.type==="right"||c.type==="full");for(const[c,l]of t.singleSource)n.has(c)?o&&i.push(Lb(l)):i.push(l);const u=i.length>1?[_i(i.flatMap(c=>ba(ra(c))))]:i;return{select:e.select,groupBy:e.groupBy?[...e.groupBy]:void 0,having:e.having?[...e.having]:void 0,orderBy:e.orderBy?[...e.orderBy]:void 0,limit:e.limit,offset:e.offset,distinct:e.distinct,fnSelect:e.fnSelect,fnWhere:e.fnWhere?[...e.fnWhere]:void 0,fnHaving:e.fnHaving?[...e.fnHaving]:void 0,from:r,join:s,where:u.length>0?u:[]}}function er(e){return{from:e.from.type==="collectionRef"?new dr(e.from.collection,e.from.alias):new vt(er(e.from.query),e.from.alias),select:e.select,join:e.join?e.join.map(t=>({type:t.type,left:t.left,right:t.right,from:t.from.type==="collectionRef"?new dr(t.from.collection,t.from.alias):new vt(er(t.from.query),t.from.alias)})):void 0,where:e.where?[...e.where]:void 0,groupBy:e.groupBy?[...e.groupBy]:void 0,having:e.having?[...e.having]:void 0,orderBy:e.orderBy?[...e.orderBy]:void 0,limit:e.limit,offset:e.offset,fnSelect:e.fnSelect,fnWhere:e.fnWhere?[...e.fnWhere]:void 0,fnHaving:e.fnHaving?[...e.fnHaving]:void 0}}function kl(e,t,n){const r=t.get(e.alias);if(!r)return e.type==="collectionRef"?new dr(e.collection,e.alias):new vt(er(e.query),e.alias);if(e.type==="collectionRef"){const o={from:new dr(e.collection,e.alias),where:[r]};return n.add(e.alias),new vt(o,e.alias)}if(!Fv(e.query,r,e.alias))return new vt(er(e.query),e.alias);if(Nv(e.query,r,e.alias))return new vt(er(e.query),e.alias);const s=e.query.where||[],i={...er(e.query),where:[...s,r]};return n.add(e.alias),new vt(i,e.alias)}function Iv(e,t,n){return e.select?_h(e.select)||Dv(e.select,t,n):!1}function Av(e){return e.groupBy&&e.groupBy.length>0}function Rv(e){return e.having&&e.having.length>0}function Tv(e){return e.orderBy&&e.orderBy.length>0&&(e.limit!==void 0||e.offset!==void 0)}function Ov(e){return e.fnSelect||e.fnWhere&&e.fnWhere.length>0||e.fnHaving&&e.fnHaving.length>0}function Fv(e,t,n){return!(Iv(e,t,n)||Av(e)||Rv(e)||Tv(e)||Ov(e))}function _h(e){for(const t of Object.values(e))if(typeof t=="object"){const n=t;if(n.type==="agg"||!("type"in n)&&_h(n))return!0}return!1}function ya(e){const t=[];if(e==null||typeof e!="object")return t;switch(e.type){case"ref":t.push(e);break;case"func":case"agg":for(const n of e.args??[])t.push(...ya(n));break}return t}function Dv(e,t,n){const r=new Set;for(const[i,o]of Object.entries(e))i.startsWith("__SPREAD_SENTINEL__")||o instanceof Ze||r.add(i);const s=ya(t);for(const i of s){const o=i.path;if(!Array.isArray(o)||o.length<2)continue;const u=o[0],a=o[1];if(u===n&&r.has(a))return!0}return!1}function Nv(e,t,n){const r=ya(t);if(r.every(i=>i.path[0]!==n))return!1;if(e.fnSelect)return!0;const s=e.select;if(!s)return!1;for(const i of r){const o=i.path;if(o.length<2||o[0]!==n)continue;const u=s[o[1]];if(!u)continue;if(!(u instanceof Ze)||u.path.length<2)return!0;const[a,c]=u.path;if(a!==n&&a!==e.from.alias||c!==o[1])return!0}return!1}function _i(e){if(e.length===0)throw new Py;return e.length===1?e[0]:new ct("and",e)}function Pv(e,t,n,r,s,i,o,u,a,c,l,d,p,f,h,m,g,y,w){let v=e;for(const b of t)v=Lv(v,b,n,r,s,i,o,u,a,c,l,d,p,f,h,m,g,y,w);return v}function Lv(e,t,n,r,s,i,o,u,a,c,l,d,p,f,h,m,g,y,w){const v=t.from.type==="collectionRef",{alias:b,input:x,collectionId:E}=Bv(t.from,i,a,c,l,d,p,f,o,u,m,g,y,w);n[b]=x,v&&(g[b]=E);const R=a[r],S=a[E];if(!R)throw new el(r);if(!S)throw new el(E);const{activeSource:_,lazySource:A}=Vv(t.type,R,S),F=Object.keys(n),{mainExpr:D,joinedExpr:z}=Mv(t.left,t.right,F,b),K=Xe(D),Z=Xe(z);let se=e.pipe(je(([ee,ie])=>[K(ie),[ee,ie]])),N=x.pipe(je(([ee,ie])=>{const P={[b]:ie};return[Z(P),[ee,P]]}));if(!["inner","left","right","full"].includes(t.type))throw new _y(t.type);if(_){const ee=_==="main"?t.from:h.from,ie=ee.type==="queryRef"&&(ee.query.limit||ee.query.offset),P=D.type==="func"||z.type==="func";if(!ie&&!P){const $=_==="main"?b:s;d.add($);const W=_==="main"?se:N,V=Qr(h,_==="main"?z:D,A),he=V.collection,xe=V.path[0];xe&&Ui(xe,V.path,he);const ke=W.pipe(j1(Ne=>{const Se=y[$]||$,re=c[Se];if(!re)throw new Ly(Se,$,A.id,Object.keys(c));if(re.hasLoadedInitialState())return;const Pe=Ne.getInner().map(([[ft]])=>ft),tt=new Ze(V.path);re.requestSnapshot({where:v2(tt,Pe),optimizedOnly:!0})||re.requestSnapshot()}));_==="main"?se=ke:N=ke}}return se.pipe(Q1(N,t.type),$v(t.type))}function Mv(e,t,n,r){const s=n.filter(u=>u!==r),i=gu(e),o=gu(t);if(i&&s.includes(i)&&o===r)return{mainExpr:e,joinedExpr:t};if(i===r&&o&&s.includes(o))return{mainExpr:t,joinedExpr:e};throw!i||!o?new ky:i===o?new Ey(i):s.includes(i)?o!==r?new Iy(r):new Ay:new Cy(i)}function gu(e){switch(e.type){case"ref":return e.path[0]||null;case"func":{const t=new Set;for(const n of e.args){const r=gu(n);r&&t.add(r)}return t.size===1?Array.from(t)[0]:null}default:return null}}function Bv(e,t,n,r,s,i,o,u,a,c,l,d,p,f){switch(e.type){case"collectionRef":{const h=t[e.alias];if(!h)throw new oh(e.alias,e.collection.id,Object.keys(t));return d[e.alias]=e.collection.id,{alias:e.alias,input:h,collectionId:e.collection.id}}case"queryRef":{const h=c.get(e.query)||e.query,m=l(h,t,n,r,s,i,o,u,a,c);Object.assign(d,m.aliasToCollectionId),Object.assign(p,m.aliasRemapping);const g=c.has(e.query),y=e.query.from.alias;if(!(!g&&e.alias===y))for(const[E,R]of m.sourceWhereClauses)f.set(E,R);const v=Object.keys(m.aliasToCollectionId).find(E=>m.aliasToCollectionId[E]===m.collectionId);v&&v!==e.alias&&(p[e.alias]=v);const x=m.pipeline.pipe(je(E=>{const[R,[S,_]]=E;return[R,S]}));return{alias:e.alias,input:x,collectionId:m.collectionId}}default:throw new Ry(e.type)}}function $v(e){return function(t){return t.pipe(fn(n=>{const[r,[s,i]]=n,o=s?.[1],u=i?.[1];return e==="inner"?!!(o&&u):e==="left"?!!o:e==="right"?!!u:!0}),je(n=>{const[r,[s,i]]=n,o=s?.[0],u=s?.[1],a=i?.[0],c=i?.[1],l={};return u&&Object.assign(l,u),c&&Object.assign(l,c),[`[${o},${a}]`,l]}))}}function Vv(e,t,n){switch(e){case"left":return{activeSource:"main",lazySource:n};case"right":return{activeSource:"joined",lazySource:t};case"inner":return t.size<n.size?{activeSource:"main",lazySource:n}:{activeSource:"joined",lazySource:t};default:return{activeSource:void 0,lazySource:void 0}}}function bu(e){return e instanceof He?e.value:e}function Uv(e,t,n){const r=e.source(t);if(r&&typeof r=="object"){let s=n;const i=e.targetPath;if(i.length===0)for(const[o,u]of Object.entries(r))n[o]=bu(u);else for(let o=0;o<i.length;o++){const u=i[o];if(o===i.length-1){const a=s[u]??={};if(typeof a=="object")for(const[c,l]of Object.entries(r))a[c]=bu(l)}else{const a=s[u];(a==null||typeof a!="object")&&(s[u]={}),s=s[u]}}}}function zv(e,t,n){const r=e.alias.split(".");if(r.length===1)n[e.alias]=e.compiled(t);else{let s=n;for(let i=0;i<r.length-1;i++){const o=r[i],u=s[o];(u==null||typeof u!="object")&&(s[o]={}),s=s[o]}s[r[r.length-1]]=bu(e.compiled(t))}}function Kv([e,t],n){const r={};for(const s of n)s.kind==="merge"?Uv(s,t,r):zv(s,t,r);return[e,{...t,$selected:r}]}function Wv(e,t,n){const r=[];return Eh([],t,r),e.pipe(je(s=>Kv(s,r)))}function Gv(e){return e.type==="agg"}function jv(e){return e&&typeof e=="object"&&!Jr(e)}function Eh(e,t,n){for(const[r,s]of Object.entries(t)){if(r.startsWith("__SPREAD_SENTINEL__")){const o=r.slice(19),u=o.lastIndexOf("__"),a=u>=0?o.slice(0,u):o,c=s&&typeof s=="object"&&"type"in s&&s.type==="ref";if(a.includes(".")||c){const l=[...e],d=c?s:new Ze(a.split(".")),p=Xe(d);n.push({kind:"merge",targetPath:l,source:p})}else{const l=a,d=[...e];n.push({kind:"merge",targetPath:d,source:p=>p[l]})}continue}const i=s;if(jv(i)){Eh([...e,r],i,n);continue}if(Gv(i))n.push({kind:"field",alias:[...e,r].join("."),compiled:()=>null});else{if(i===void 0||!Jr(i)){n.push({kind:"field",alias:[...e,r].join("."),compiled:()=>i});continue}if(i instanceof He){const o=i.value;n.push({kind:"field",alias:[...e,r].join("."),compiled:()=>o})}else n.push({kind:"field",alias:[...e,r].join("."),compiled:Xe(i)})}}}function va(e,t,n,r,s,i,o,u,a=new WeakMap,c=new WeakMap){const l=a.get(e);if(l)return l;yu(e);const{optimizedQuery:d,sourceWhereClauses:p}=xv(e);c.set(d,e),wu(d,e,c);const f={...t},h={},m={},g={},{alias:y,input:w,collectionId:v}=Yv(d.from,f,n,r,s,i,o,u,a,c,h,m,p);g[y]=w;let b=w.pipe(je(([S,_])=>[S,{[y]:_}]));if(d.join&&d.join.length>0&&(b=Pv(b,d.join,g,v,y,f,a,c,n,r,s,i,o,u,e,va,h,m,p)),d.where&&d.where.length>0)for(const S of d.where){const _=ra(S),A=Xe(_);b=b.pipe(fn(([F,D])=>or(A(D))))}if(d.fnWhere&&d.fnWhere.length>0)for(const S of d.fnWhere)b=b.pipe(fn(([_,A])=>or(S(A))));if(d.distinct&&!d.fnSelect&&!d.select)throw new my;if(d.fnSelect?b=b.pipe(je(([S,_])=>{const A=d.fnSelect(_);return[S,{..._,$selected:A}]})):d.select?b=Wv(b,d.select):b=b.pipe(je(([S,_])=>{const A=!d.join&&!d.groupBy?_[y]:_;return[S,{..._,$selected:A}]})),d.groupBy&&d.groupBy.length>0?b=yl(b,d.groupBy,d.having,d.select,d.fnHaving):d.select&&Object.values(d.select).some(_=>_.type==="agg")&&(b=yl(b,[],d.having,d.select,d.fnHaving)),d.having&&(!d.groupBy||d.groupBy.length===0)&&!(d.select?Object.values(d.select).some(_=>_.type==="agg"):!1))throw new gy;if(d.fnHaving&&d.fnHaving.length>0&&(!d.groupBy||d.groupBy.length===0))for(const S of d.fnHaving)b=b.pipe(fn(([_,A])=>S(A)));if(d.distinct&&(b=b.pipe(t2(([S,_])=>_.$selected))),d.orderBy&&d.orderBy.length>0){const A=T2(e,b,d.orderBy,d.select||{},n[v],o,u,d.limit,d.offset).pipe(je(([D,[z,K]])=>{const Z=z.$selected,se=vu(Z);return[D,[se,K]]})),F={collectionId:v,pipeline:A,sourceWhereClauses:p,aliasToCollectionId:h,aliasRemapping:m};return a.set(e,F),F}else if(d.limit!==void 0||d.offset!==void 0)throw new by;const E=b.pipe(je(([S,_])=>{const A=_.$selected,F=vu(A);return[S,[F,void 0]]})),R={collectionId:v,pipeline:E,sourceWhereClauses:p,aliasToCollectionId:h,aliasRemapping:m};return a.set(e,R),R}function Zv(e){const t=new Set;if(e.from.type==="collectionRef"&&t.add(e.from.alias),e.join)for(const n of e.join)n.from.type==="collectionRef"&&t.add(n.from.alias);return t}function yu(e,t=new Set){const n=Zv(e);for(const s of n)if(t.has(s))throw new yy(s,Array.from(t));const r=new Set([...t,...n]);if(e.from.type==="queryRef"&&yu(e.from.query,r),e.join)for(const s of e.join)s.from.type==="queryRef"&&yu(s.from.query,r)}function Yv(e,t,n,r,s,i,o,u,a,c,l,d,p){switch(e.type){case"collectionRef":{const f=t[e.alias];if(!f)throw new oh(e.alias,e.collection.id,Object.keys(t));return l[e.alias]=e.collection.id,{alias:e.alias,input:f,collectionId:e.collection.id}}case"queryRef":{const f=c.get(e.query)||e.query,h=va(f,t,n,r,s,i,o,u,a,c);Object.assign(l,h.aliasToCollectionId),Object.assign(d,h.aliasRemapping);const m=c.has(e.query),g=e.query.from.alias;if(!(!m&&e.alias===g))for(const[x,E]of h.sourceWhereClauses)p.set(x,E);const w=Object.keys(h.aliasToCollectionId).find(x=>h.aliasToCollectionId[x]===h.collectionId);w&&w!==e.alias&&(d[e.alias]=w);const b=h.pipeline.pipe(je(x=>{const[E,[R,S]]=x,_=vu(R);return[E,_]}));return{alias:e.alias,input:b,collectionId:h.collectionId}}default:throw new vy(e.type)}}function qv(e){return e instanceof He||e&&typeof e=="object"&&"type"in e&&e.type==="val"}function vu(e){return qv(e)?e.value:e}function wu(e,t,n){if(e.from.type==="queryRef"&&t.from.type==="queryRef"&&(n.set(e.from.query,t.from.query),wu(e.from.query,t.from.query,n)),e.join&&t.join)for(let r=0;r<e.join.length&&r<t.join.length;r++){const s=e.join[r],i=t.join[r];s.from.type==="queryRef"&&i.from.type==="queryRef"&&(n.set(s.from.query,i.from.query),wu(s.from.query,i.from.query,n))}}function wa(e,t){const n=e.type;if(n==="val")return new He(e.value);if(n==="ref"){const r=e.path;if(Array.isArray(r)){if(r[0]===t&&r.length>1)return new Ze(r.slice(1));if(r.length===1&&r[0]!==void 0)return new Ze([r[0]])}return new Ze(Array.isArray(r)?r:[String(r)])}else{const r=[];for(const s of e.args){const i=wa(s,t);r.push(i)}return new ct(e.name,r)}}function So(e,t){return e.map(r=>{const s=wa(r.expression,t);return{...r,expression:s}})}const Cl=Symbol.for("@tanstack/db.collection-config-builder");class Hv{constructor(t,n,r,s){this.alias=t,this.collectionId=n,this.collection=r,this.collectionConfigBuilder=s,this.biggest=void 0,this.subscriptionLoadingPromises=new Map,this.sentToD2Keys=new Set}subscribe(){const t=this.getWhereClauseForAlias();if(t){const n=wa(t,this.alias);return this.subscribeToChanges(n)}return this.subscribeToChanges()}subscribeToChanges(t){const n=this.getOrderByInfo(),r=u=>{u instanceof Promise&&this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(u)},s=u=>{const a=u.subscription;if(u.status==="loadingSubset")this.ensureLoadingPromise(a);else{const c=this.subscriptionLoadingPromises.get(a);c&&(this.subscriptionLoadingPromises.delete(a),c.resolve())}};let i;if(n)i=this.subscribeToOrderedChanges(t,n,s,r);else{const u=!this.collectionConfigBuilder.isLazyAlias(this.alias);i=this.subscribeToMatchingChanges(t,u,s)}i.status==="loadingSubset"&&this.ensureLoadingPromise(i);const o=()=>{const u=this.subscriptionLoadingPromises.get(i);u&&(this.subscriptionLoadingPromises.delete(i),u.resolve()),i.unsubscribe()};return this.collectionConfigBuilder.currentSyncState.unsubscribeCallbacks.add(o),i}sendChangesToPipeline(t,n){const r=Array.isArray(t)?t:[...t],s=[];for(const a of r){if(a.type==="insert"){if(this.sentToD2Keys.has(a.key))continue;this.sentToD2Keys.add(a.key)}else a.type==="delete"&&this.sentToD2Keys.delete(a.key);s.push(a)}const i=this.collectionConfigBuilder.currentSyncState.inputs[this.alias],u=Xv(i,s,this.collection.config.getKey)>0?n:void 0;this.collectionConfigBuilder.scheduleGraphRun(u,{alias:this.alias})}subscribeToMatchingChanges(t,n,r){const s=m=>{this.sendChangesToPipeline(m)},{orderBy:i,limit:o,offset:u}=this.collectionConfigBuilder.query,a=o!==void 0&&u!==void 0?o+u:o,c=i?So(i,this.alias):void 0,l=c?.every(m=>{const g=m.expression;if(g.type!=="ref")return!1;const y=g.path;return Array.isArray(y)&&y.length===1})??!1,d=l?c:void 0,p=l?a:void 0,f=n?m=>{m instanceof Promise&&this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(m)}:void 0;return this.collection.subscribeChanges(s,{...n&&{includeInitialState:n},whereExpression:t,onStatusChange:r,orderBy:d,limit:p,onLoadSubsetResult:f})}subscribeToOrderedChanges(t,n,r,s){const{orderBy:i,offset:o,limit:u,index:a}=n,c=m=>{m instanceof Promise&&(this.pendingOrderedLoadPromise=m,m.finally(()=>{this.pendingOrderedLoadPromise===m&&(this.pendingOrderedLoadPromise=void 0)})),s(m)};this.orderedLoadSubsetResult=c;const l={},d=m=>{const g=Array.isArray(m)?m:[...m];this.trackSentValues(g,n.comparator);const y=Jv(g);this.sendChangesToPipelineWithTracking(y,l.current)},p=this.collection.subscribeChanges(d,{whereExpression:t,onStatusChange:r});l.current=p;const f=this.collection.on("truncate",()=>{this.biggest=void 0,this.lastLoadRequestKey=void 0,this.pendingOrderedLoadPromise=void 0,this.sentToD2Keys.clear()});p.on("unsubscribed",()=>{f()});const h=So(i,this.alias);return a?(p.setOrderByIndex(a),p.requestLimitedSnapshot({limit:o+u,orderBy:h,trackLoadSubsetPromise:!1,onLoadSubsetResult:c})):p.requestSnapshot({orderBy:h,limit:o+u,trackLoadSubsetPromise:!1,onLoadSubsetResult:c}),p}loadMoreIfNeeded(t){const n=this.getOrderByInfo();if(!n)return!0;const{dataNeeded:r}=n;if(!r||this.pendingOrderedLoadPromise)return!0;const s=r();return s>0&&this.loadNextItems(s,t),!0}sendChangesToPipelineWithTracking(t,n){if(!this.getOrderByInfo()){this.sendChangesToPipeline(t);return}const s=n;s[Cl]??=this.loadMoreIfNeeded.bind(this,n),this.sendChangesToPipeline(t,s[Cl])}loadNextItems(t,n){const r=this.getOrderByInfo();if(!r)return;const{orderBy:s,valueExtractorForRawRow:i,offset:o}=r,u=this.biggest,a=u?i(u):void 0;let c;a!==void 0&&(c=Array.isArray(a)?a:[a]);const l=this.getLoadRequestKey({minValues:c,offset:o,limit:t});if(this.lastLoadRequestKey===l)return;const d=So(s,this.alias);n.requestLimitedSnapshot({orderBy:d,limit:t,minValues:c,trackLoadSubsetPromise:!1,onLoadSubsetResult:this.orderedLoadSubsetResult}),this.lastLoadRequestKey=l}getWhereClauseForAlias(){const t=this.collectionConfigBuilder.sourceWhereClausesCache;if(t)return t.get(this.alias)}getOrderByInfo(){const t=this.collectionConfigBuilder.optimizableOrderByCollections[this.collectionId];if(t&&t.alias===this.alias)return t}trackSentValues(t,n){for(const r of t){if(r.type==="delete")continue;const s=!this.sentToD2Keys.has(r.key);this.biggest?n(this.biggest,r.value)<0?(this.biggest=r.value,this.lastLoadRequestKey=void 0):s&&(this.lastLoadRequestKey=void 0):(this.biggest=r.value,this.lastLoadRequestKey=void 0)}}ensureLoadingPromise(t){if(this.subscriptionLoadingPromises.has(t))return;let n;const r=new Promise(s=>{n=s});this.subscriptionLoadingPromises.set(t,{resolve:n}),this.collectionConfigBuilder.liveQueryCollection._sync.trackLoadPromise(r)}getLoadRequestKey(t){return la({minValues:t.minValues??null,offset:t.offset,limit:t.limit})}}function Xv(e,t,n){const r=[];for(const s of t){const i=n(s.value);s.type==="insert"?r.push([[i,s.value],1]):s.type==="update"?(r.push([[i,s.previousValue],-1]),r.push([[i,s.value],1])):r.push([[i,s.value],-1])}return r.length!==0&&e.sendData(new _e(r)),r.length}function*Jv(e){for(const t of e)t.type==="update"?(yield{type:"delete",key:t.key,value:t.previousValue},yield{type:"insert",key:t.key,value:t.value}):yield t}const kh=new WeakMap;function Qv(e){return e.utils?.[ha]?.getBuilder?.()}function ew(e,t){kh.set(e,t)}function tw(e){return kh.get(e)}let nw=0;class rw{constructor(t){this.config=t,this.compiledAliasToCollectionId={},this.resultKeys=new WeakMap,this.orderByIndices=new WeakMap,this.isGraphRunning=!1,this.runCount=0,this.isInErrorState=!1,this.aliasDependencies={},this.builderDependencies=new Set,this.pendingGraphRuns=new Map,this.subscriptions={},this.lazySourcesCallbacks={},this.lazySources=new Set,this.optimizableOrderByCollections={},this.id=t.id||`live-query-${++nw}`,this.query=sw(t),this.collections=ow(this.query);const n=uw(this.query);this.collectionByAlias={};for(const[r,s]of n.entries()){const i=this.collections[r];if(i)for(const o of s)this.collectionByAlias[o]=i}this.query.orderBy&&this.query.orderBy.length>0&&(this.compare=iw(this.orderByIndices)),this.compareOptions=this.config.defaultStringCollation??Ch(this.query).compareOptions,this.compileBasePipeline()}hasJoins(t){return!!(t.join&&t.join.length>0||t.from.type==="queryRef"&&this.hasJoins(t.from.query))}getConfig(){return{id:this.id,getKey:this.config.getKey||(t=>this.resultKeys.get(t)),sync:this.getSyncConfig(),compare:this.compare,defaultStringCollation:this.compareOptions,gcTime:this.config.gcTime||5e3,schema:this.config.schema,onInsert:this.config.onInsert,onUpdate:this.config.onUpdate,onDelete:this.config.onDelete,startSync:this.config.startSync,singleResult:this.query.singleResult,utils:{getRunCount:this.getRunCount.bind(this),setWindow:this.setWindow.bind(this),getWindow:this.getWindow.bind(this),[ha]:{getBuilder:()=>this,hasCustomGetKey:!!this.config.getKey,hasJoins:this.hasJoins(this.query),hasDistinct:!!this.query.distinct}}}}setWindow(t){if(!this.windowFn)throw new By;return this.currentWindow=t,this.windowFn(t),this.maybeRunGraphFn?.(),this.liveQueryCollection?.isLoadingSubset?new Promise(n=>{const r=this.liveQueryCollection.on("loadingSubset:change",s=>{s.isLoadingSubset||(r(),n())})}):!0}getWindow(){if(!(!this.windowFn||!this.currentWindow))return{offset:this.currentWindow.offset??0,limit:this.currentWindow.limit??0}}getCollectionIdForAlias(t){const n=this.compiledAliasToCollectionId[t];if(n)return n;const r=this.collectionByAlias[t];if(r)return r.id;throw new Error(`Unknown source alias "${t}"`)}isLazyAlias(t){return this.lazySources.has(t)}maybeRunGraph(t){if(!this.isGraphRunning){if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("maybeRunGraph called without active sync session. This should not happen.");this.isGraphRunning=!0;try{const{begin:n,commit:r}=this.currentSyncConfig,s=this.currentSyncState;if(this.isInErrorState)return;if(s.subscribedToAllCollections){for(;s.graph.pendingWork();)s.graph.run(),s.flushPendingChanges?.(),t?.();s.messagesCount===0&&(n(),r()),this.updateLiveQueryStatus(this.currentSyncConfig)}}finally{this.isGraphRunning=!1}}}scheduleGraphRun(t,n){const r=n?.contextId??Qs()?.id,s=n?.jobId??this,i=(()=>{if(n?.dependencies)return n.dependencies;const a=new Set(this.builderDependencies);if(n?.alias){const c=this.aliasDependencies[n.alias];if(c)for(const l of c)a.add(l)}return a.delete(this),Array.from(a)})();if(r)for(const a of i)typeof a.scheduleGraphRun=="function"&&a.scheduleGraphRun(void 0,{contextId:r});if(!this.currentSyncConfig||!this.currentSyncState)throw new Error("scheduleGraphRun called without active sync session. This should not happen.");let o=r?this.pendingGraphRuns.get(r):void 0;o||(o={loadCallbacks:new Set},r&&this.pendingGraphRuns.set(r,o)),t&&o.loadCallbacks.add(t);const u=r?void 0:o;xi.schedule({contextId:r,jobId:s,dependencies:i,run:()=>this.executeGraphRun(r,u)})}clearPendingGraphRun(t){this.pendingGraphRuns.delete(t)}hasPendingGraphRun(t){return this.pendingGraphRuns.has(t)}executeGraphRun(t,n){const r=n??(t?this.pendingGraphRuns.get(t):void 0);if(t&&this.pendingGraphRuns.delete(t),!r||!this.currentSyncConfig||!this.currentSyncState)return;this.incrementRunCount();const s=()=>{let i=!0,o;if(r.loadCallbacks.forEach(u=>{try{i=u()&&i}catch(a){i=!1,o??=a}}),o)throw o;return i};this.maybeRunGraph(s)}getSyncConfig(){return{rowUpdateMode:"full",sync:this.syncFn.bind(this)}}incrementRunCount(){this.runCount++}getRunCount(){return this.runCount}syncFn(t){this.liveQueryCollection=t.collection,this.currentSyncConfig=t;const n={messagesCount:0,subscribedToAllCollections:!1,unsubscribeCallbacks:new Set},r=this.extendPipelineWithChangeProcessing(t,n);this.currentSyncState=r,this.unsubscribeFromSchedulerClears=xi.onClear(o=>{this.clearPendingGraphRun(o)});const s=t.collection.on("loadingSubset:change",o=>{o.isLoadingSubset||this.updateLiveQueryStatus(t)});n.unsubscribeCallbacks.add(s);const i=this.subscribeToAllCollections(t,r);return this.maybeRunGraphFn=()=>this.scheduleGraphRun(i),this.scheduleGraphRun(i),()=>{n.unsubscribeCallbacks.forEach(o=>o()),this.currentSyncConfig=void 0,this.currentSyncState=void 0,this.pendingGraphRuns.clear(),this.graphCache=void 0,this.inputsCache=void 0,this.pipelineCache=void 0,this.sourceWhereClausesCache=void 0,this.lazySources.clear(),this.optimizableOrderByCollections={},this.lazySourcesCallbacks={},Object.keys(this.subscriptions).forEach(o=>delete this.subscriptions[o]),this.compiledAliasToCollectionId={},this.unsubscribeFromSchedulerClears?.(),this.unsubscribeFromSchedulerClears=void 0}}compileBasePipeline(){this.graphCache=new N1,this.inputsCache=Object.fromEntries(Object.keys(this.collectionByAlias).map(r=>[r,this.graphCache.newInput()]));const t=va(this.query,this.inputsCache,this.collections,this.subscriptions,this.lazySourcesCallbacks,this.lazySources,this.optimizableOrderByCollections,r=>{this.windowFn=r});this.pipelineCache=t.pipeline,this.sourceWhereClausesCache=t.sourceWhereClauses,this.compiledAliasToCollectionId=t.aliasToCollectionId;const n=Object.keys(this.compiledAliasToCollectionId).filter(r=>!Object.hasOwn(this.inputsCache,r));if(n.length>0)throw new My(n)}maybeCompileBasePipeline(){return(!this.graphCache||!this.inputsCache||!this.pipelineCache)&&this.compileBasePipeline(),{graph:this.graphCache,inputs:this.inputsCache,pipeline:this.pipelineCache}}extendPipelineWithChangeProcessing(t,n){const{begin:r,commit:s}=t,{graph:i,inputs:o,pipeline:u}=this.maybeCompileBasePipeline();let a=new Map;return u.pipe(q1(c=>{const l=c.getInner();n.messagesCount+=l.length,l.reduce(aw,a)})),n.flushPendingChanges=()=>{a.size!==0&&(r(),a.forEach(this.applyChanges.bind(this,t)),s(),a=new Map)},i.finalize(),n.graph=i,n.inputs=o,n.pipeline=u,n}applyChanges(t,n,r){const{write:s,collection:i}=t,{deletes:o,inserts:u,value:a,orderByIndex:c}=n;if(this.resultKeys.set(a,r),c!==void 0&&this.orderByIndices.set(a,c),u&&o===0)s({value:a,type:"insert"});else if(u>o||u===o&&i.has(i.getKeyFromItem(a)))s({value:a,type:"update"});else if(o>0)s({value:a,type:"delete"});else throw new Error(`Could not apply changes: ${JSON.stringify(n)}. This should never happen.`)}handleSourceStatusChange(t,n,r){const{status:s}=r;if(s==="error"){this.transitionToError(`Source collection '${n}' entered error state`);return}if(s==="cleaned-up"){this.transitionToError(`Source collection '${n}' was manually cleaned up while live query '${this.id}' depends on it. Live queries prevent automatic GC, so this was likely a manual cleanup() call.`);return}this.updateLiveQueryStatus(t)}updateLiveQueryStatus(t){const{markReady:n}=t;if(this.isInErrorState)return;const r=this.currentSyncState?.subscribedToAllCollections,s=this.allCollectionsReady(),i=this.liveQueryCollection?.isLoadingSubset;r&&s&&!i&&n()}transitionToError(t){this.isInErrorState=!0,console.error(`[Live Query Error] ${t}`),this.liveQueryCollection?._lifecycle.setStatus("error")}allCollectionsReady(){return Object.values(this.collections).every(t=>t.isReady())}subscribeToAllCollections(t,n){const r=Object.entries(this.compiledAliasToCollectionId);if(r.length===0)throw new Error(`Compiler returned no alias metadata for query '${this.id}'. This should not happen; please report.`);const s=r.map(([o,u])=>{const a=this.collectionByAlias[o]??this.collections[u],c=tw(a);c&&c!==this?(this.aliasDependencies[o]=[c],this.builderDependencies.add(c)):this.aliasDependencies[o]=[];const l=new Hv(o,u,a,this),d=a.on("status:change",h=>{this.handleSourceStatusChange(t,u,h)});n.unsubscribeCallbacks.add(d);const p=l.subscribe();return this.subscriptions[o]=p,l.loadMoreIfNeeded.bind(l,p)}),i=()=>(s.map(o=>o()),!0);return n.subscribedToAllCollections=!0,i}}function sw(e){return typeof e.query=="function"?wv(e.query):vh(e.query)}function iw(e){return(t,n)=>{const r=e.get(t),s=e.get(n);return r&&s?r<s?-1:r>s?1:0:0}}function ow(e){const t={};function n(s){s.type==="collectionRef"?t[s.collection.id]=s.collection:s.type==="queryRef"&&r(s.query)}function r(s){if(s.from&&n(s.from),s.join&&Array.isArray(s.join))for(const i of s.join)i.from&&n(i.from)}return r(e),t}function Ch(e){const t=e.from;if(t.type==="collectionRef")return t.collection;if(t.type==="queryRef")return Ch(t.query);throw new Error(`Failed to extract collection. Invalid FROM clause: ${JSON.stringify(e)}`)}function uw(e){const t=new Map;function n(s){if(s)if(s.type==="collectionRef"){const{id:i}=s.collection,o=t.get(i);o?o.add(s.alias):t.set(i,new Set([s.alias]))}else s.type==="queryRef"&&r(s.query)}function r(s){if(s&&(n(s.from),s.join))for(const i of s.join)n(i.from)}return r(e),t}function aw(e,[[t,n],r]){const[s,i]=n,o=e.get(t)||{deletes:0,inserts:0,value:s,orderByIndex:i};return r<0?o.deletes+=Math.abs(r):r>0&&(o.inserts+=r,o.value=s,i!==void 0&&(o.orderByIndex=i)),e.set(t,o),e}function Il(e){return new rw(e).getConfig()}function rs(e){if(typeof e=="function"){const n=Il({query:e});return Al(n)}else{const t=e,n=Il(t);return t.utils&&(n.utils={...n.utils,...t.utils}),Al(n)}}function Al(e){const t=Es(e),n=Qv(e);return n&&ew(t,n),t}function Bt(e){const t=J(()=>{if(e.length===1){const d=new Ae,p=e(d);return p==null?null:rs({query:e,startSync:!0})}const l=e();return l==null?null:l instanceof ga?(l.startSyncImmediate(),l):rs({...l,startSync:!0})},void 0,{name:"TanstackDBCollectionMemo"}),n=new Pb,[r,s]=vs([],{name:"TanstackDBData"}),[i,o]=H(t()?t().status:"disabled",{name:"TanstackDBStatus"}),u=l=>{s(d=>Gu(Array.from(l.values()))(d).filter(Boolean))},[a]=Jn(()=>({currentCollection:t()}),async({currentCollection:l})=>{if(!l)return[];o(l.status);try{await l.toArrayWhenReady()}catch(d){throw o("error"),d}return tr(()=>{n.clear();for(const[d,p]of l.entries())n.set(d,p);u(l),o(l.status)}),r},{name:"TanstackDBData",deferStream:!1,initialValue:r});Qe(()=>{const l=t();if(!l){o("disabled"),n.clear(),s([]);return}const d=l.subscribeChanges(p=>{tr(()=>{for(const f of p)switch(f.type){case"insert":case"update":n.set(f.key,f.value);break;case"delete":n.delete(f.key);break}u(l),o(l.status)})},{includeInitialState:!0});Ee(()=>{d.unsubscribe()})});function c(){return a()}return Object.defineProperties(c,{data:{get(){return c()}},status:{get(){return i()}},collection:{get(){return t()}},state:{get(){return n}},isLoading:{get(){return i()==="loading"}},isReady:{get(){return i()==="ready"||i()==="disabled"}},isIdle:{get(){return i()==="idle"}},isError:{get(){return i()==="error"}},isCleanedUp:{get(){return i()==="cleaned-up"}}}),c}function Ei(e){return typeof e=="object"&&e!=null&&!Array.isArray(e)}var cw=e=>typeof e=="object"&&e!==null;function Ih(e){return Object.fromEntries(Object.entries(e??{}).filter(([t,n])=>n!==void 0))}var lw=e=>e==="base";function dw(e){return e.slice().filter(t=>!lw(t))}function Rl(e){return String.fromCharCode(e+(e>25?39:97))}function fw(e){let t="",n;for(n=Math.abs(e);n>52;n=n/52|0)t=Rl(n%52)+t;return Rl(n%52)+t}function hw(e,t){let n=t.length;for(;n;)e=e*33^t.charCodeAt(--n);return e}function pw(e){return fw(hw(5381,e)>>>0)}var Ah=/\s*!(important)?/i;function mw(e){return typeof e=="string"?Ah.test(e):!1}function gw(e){return typeof e=="string"?e.replace(Ah,"").trim():e}function Rh(e){return typeof e=="string"?e.replaceAll(" ","_"):e}var xa=e=>{const t=new Map;return(...r)=>{const s=JSON.stringify(r);if(t.has(s))return t.get(s);const i=e(...r);return t.set(s,i),i}},bw=new Set(["__proto__","constructor","prototype"]);function Th(...e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{if(bw.has(r))return;const s=t[r],i=n[r];Ei(s)&&Ei(i)?t[r]=Th(s,i):t[r]=i}),t),{})}var yw=e=>e!=null;function Sa(e,t,n={}){const{stop:r,getKey:s}=n;function i(o,u=[]){if(cw(o)){const a={};for(const[c,l]of Object.entries(o)){const d=s?.(c,l)??c,p=[...u,d];if(r?.(o,p))return t(o,u);const f=i(l,p);yw(f)&&(a[d]=f)}return a}return t(o,u)}return i(e)}function vw(e,t){return Array.isArray(e)?e.map(n=>t(n)):Ei(e)?Sa(e,n=>t(n)):t(e)}function ww(e,t){return e.reduce((n,r,s)=>{const i=t[s];return r!=null&&(n[i]=r),n},{})}function Oh(e,t,n=!0){const{utility:r,conditions:s}=t,{hasShorthand:i,resolveShorthand:o}=r;return Sa(e,u=>Array.isArray(u)?ww(u,s.breakpoints.keys):u,{stop:u=>Array.isArray(u),getKey:n?u=>i?o(u):u:void 0})}var xw={shift:e=>e,finalize:e=>e,breakpoints:{keys:[]}},Sw=e=>typeof e=="string"?e.replaceAll(/[\n\s]+/g," "):e;function _w(e){const{utility:t,hash:n,conditions:r=xw}=e,s=o=>[t.prefix,o].filter(Boolean).join("-"),i=(o,u)=>{let a;if(n){const c=[...r.finalize(o),u];a=s(t.toHash(c,pw))}else a=[...r.finalize(o),s(u)].join(":");return a};return xa(({base:o,...u}={})=>{const a=Object.assign(u,o),c=Oh(a,e),l=new Set;return Sa(c,(d,p)=>{if(d==null)return;const f=mw(d),[h,...m]=r.shift(p),g=dw(m),y=t.transform(h,gw(Sw(d)));let w=i(g,y.className);f&&(w=`${w}!`),l.add(w)}),Array.from(l).join(" ")})}function Ew(...e){return e.flat().filter(t=>Ei(t)&&Object.keys(Ih(t)).length>0)}function kw(e){function t(s){const i=Ew(...s);return i.length===1?i:i.map(o=>Oh(o,e))}function n(...s){return Th(...t(s))}function r(...s){return Object.assign({},...t(s))}return{mergeCss:xa(n),assignCss:r}}var Cw=/([A-Z])/g,Iw=/^ms-/,Aw=xa(e=>e.startsWith("--")?e:e.replace(Cw,"-$1").replace(Iw,"-ms-").toLowerCase()),Rw=["min","max","clamp","calc"],Tw=new RegExp(`^(${Rw.join("|")})\\(.*\\)`),Ow=e=>typeof e=="string"&&Tw.test(e),Fw="cm,mm,Q,in,pc,pt,px,em,ex,ch,rem,lh,rlh,vw,vh,vmin,vmax,vb,vi,svw,svh,lvw,lvh,dvw,dvh,cqw,cqh,cqi,cqb,cqmin,cqmax,%",Dw=`(?:${Fw.split(",").join("|")})`,Nw=new RegExp(`^[+-]?[0-9]*.?[0-9]+(?:[eE][+-]?[0-9]+)?${Dw}$`),Pw=e=>typeof e=="string"&&Nw.test(e),Lw=e=>typeof e=="string"&&/^var\(--.+\)$/.test(e),_a={map:vw,isCssFunction:Ow,isCssVar:Lw,isCssUnit:Pw},Ea=(e,t)=>{if(!e?.defaultValues)return t;const n=typeof e.defaultValues=="function"?e.defaultValues(t):e.defaultValues;return Object.assign({},n,Ih(t))};const Mw="_hover,_focus,_focusWithin,_focusVisible,_disabled,_active,_visited,_target,_readOnly,_readWrite,_empty,_checked,_enabled,_expanded,_highlighted,_complete,_incomplete,_dragging,_before,_after,_firstLetter,_firstLine,_marker,_selection,_file,_backdrop,_first,_last,_only,_even,_odd,_firstOfType,_lastOfType,_onlyOfType,_peerFocus,_peerHover,_peerActive,_peerFocusWithin,_peerFocusVisible,_peerDisabled,_peerChecked,_peerInvalid,_peerExpanded,_peerPlaceholderShown,_groupFocus,_groupHover,_groupActive,_groupFocusWithin,_groupFocusVisible,_groupDisabled,_groupChecked,_groupExpanded,_groupInvalid,_indeterminate,_required,_valid,_invalid,_autofill,_inRange,_outOfRange,_placeholder,_placeholderShown,_pressed,_selected,_grabbed,_underValue,_overValue,_atValue,_default,_optional,_open,_closed,_fullscreen,_loading,_hidden,_current,_currentPage,_currentStep,_today,_unavailable,_rangeStart,_rangeEnd,_now,_topmost,_motionReduce,_motionSafe,_print,_landscape,_portrait,_dark,_light,_osDark,_osLight,_highContrast,_lessContrast,_moreContrast,_ltr,_rtl,_scrollbar,_scrollbarThumb,_scrollbarTrack,_horizontal,_vertical,_icon,_starting,_noscript,_invertedColors,sm,smOnly,smDown,md,mdOnly,mdDown,lg,lgOnly,lgDown,xl,xlOnly,xlDown,2xl,2xlOnly,2xlDown,smToMd,smToLg,smToXl,smTo2xl,mdToLg,mdToXl,mdTo2xl,lgToXl,lgTo2xl,xlTo2xl,@/xs,@/sm,@/md,@/lg,@/xl,@/2xl,@/3xl,@/4xl,@/5xl,@/6xl,@/7xl,@/8xl,base",Fh=new Set(Mw.split(",")),Bw=/^@|&|&$/;function Tl(e){return Fh.has(e)||Bw.test(e)}const $w=/^_/,Vw=/&|@/;function Uw(e){return e.map(t=>Fh.has(t)?t.replace($w,""):Vw.test(t)?`[${Rh(t.trim())}]`:t)}function zw(e){return e.sort((t,n)=>{const r=Tl(t),s=Tl(n);return r&&!s?1:!r&&s?-1:0})}const Kw="aspectRatio:asp,boxDecorationBreak:bx-db,zIndex:z,boxSizing:bx-s,objectPosition:obj-p,objectFit:obj-f,overscrollBehavior:ovs-b,overscrollBehaviorX:ovs-bx,overscrollBehaviorY:ovs-by,position:pos/1,top:top,left:left,inset:inset,insetInline:inset-x/insetX,insetBlock:inset-y/insetY,insetBlockEnd:inset-be,insetBlockStart:inset-bs,insetInlineEnd:inset-e/insetEnd/end,insetInlineStart:inset-s/insetStart/start,right:right,bottom:bottom,float:float,visibility:vis,display:d,hideFrom:hide,hideBelow:show,flexBasis:flex-b,flex:flex,flexDirection:flex-d/flexDir,flexGrow:flex-g,flexShrink:flex-sh,gridTemplateColumns:grid-tc,gridTemplateRows:grid-tr,gridColumn:grid-c,gridRow:grid-r,gridColumnStart:grid-cs,gridColumnEnd:grid-ce,gridAutoFlow:grid-af,gridAutoColumns:grid-ac,gridAutoRows:grid-ar,gap:gap,gridGap:grid-g,gridRowGap:grid-rg,gridColumnGap:grid-cg,rowGap:rg,columnGap:cg,justifyContent:jc,alignContent:ac,alignItems:ai,alignSelf:as,padding:p/1,paddingLeft:pl/1,paddingRight:pr/1,paddingTop:pt/1,paddingBottom:pb/1,paddingBlock:py/1/paddingY,paddingBlockEnd:pbe,paddingBlockStart:pbs,paddingInline:px/paddingX/1,paddingInlineEnd:pe/1/paddingEnd,paddingInlineStart:ps/1/paddingStart,marginLeft:ml/1,marginRight:mr/1,marginTop:mt/1,marginBottom:mb/1,margin:m/1,marginBlock:my/1/marginY,marginBlockEnd:mbe,marginBlockStart:mbs,marginInline:mx/1/marginX,marginInlineEnd:me/1/marginEnd,marginInlineStart:ms/1/marginStart,spaceX:sx,spaceY:sy,outlineWidth:ring-w/ringWidth,outlineColor:ring-c/ringColor,outline:ring/1,outlineOffset:ring-o/ringOffset,focusRing:focus-ring,focusVisibleRing:focus-v-ring,focusRingColor:focus-ring-c,focusRingOffset:focus-ring-o,focusRingWidth:focus-ring-w,focusRingStyle:focus-ring-s,divideX:dvd-x,divideY:dvd-y,divideColor:dvd-c,divideStyle:dvd-s,width:w/1,inlineSize:w-is,minWidth:min-w/minW,minInlineSize:min-w-is,maxWidth:max-w/maxW,maxInlineSize:max-w-is,height:h/1,blockSize:h-bs,minHeight:min-h/minH,minBlockSize:min-h-bs,maxHeight:max-h/maxH,maxBlockSize:max-b,boxSize:size,color:c,fontFamily:ff,fontSize:fs,fontSizeAdjust:fs-a,fontPalette:fp,fontKerning:fk,fontFeatureSettings:ff-s,fontWeight:fw,fontSmoothing:fsmt,fontVariant:fv,fontVariantAlternates:fv-alt,fontVariantCaps:fv-caps,fontVariationSettings:fv-s,fontVariantNumeric:fv-num,letterSpacing:ls,lineHeight:lh,textAlign:ta,textDecoration:td,textDecorationColor:td-c,textEmphasisColor:te-c,textDecorationStyle:td-s,textDecorationThickness:td-t,textUnderlineOffset:tu-o,textTransform:tt,textIndent:ti,textShadow:tsh,textShadowColor:tsh-c/textShadowColor,WebkitTextFillColor:wktf-c,textOverflow:tov,verticalAlign:va,wordBreak:wb,textWrap:tw,truncate:trunc,lineClamp:lc,listStyleType:li-t,listStylePosition:li-pos,listStyleImage:li-img,listStyle:li-s,backgroundPosition:bg-p/bgPosition,backgroundPositionX:bg-p-x/bgPositionX,backgroundPositionY:bg-p-y/bgPositionY,backgroundAttachment:bg-a/bgAttachment,backgroundClip:bg-cp/bgClip,background:bg/1,backgroundColor:bg-c/bgColor,backgroundOrigin:bg-o/bgOrigin,backgroundImage:bg-i/bgImage,backgroundRepeat:bg-r/bgRepeat,backgroundBlendMode:bg-bm/bgBlendMode,backgroundSize:bg-s/bgSize,backgroundGradient:bg-grad/bgGradient,backgroundLinear:bg-linear/bgLinear,backgroundRadial:bg-radial/bgRadial,backgroundConic:bg-conic/bgConic,textGradient:txt-grad,gradientFromPosition:grad-from-pos,gradientToPosition:grad-to-pos,gradientFrom:grad-from,gradientTo:grad-to,gradientVia:grad-via,gradientViaPosition:grad-via-pos,borderRadius:bdr/rounded,borderTopLeftRadius:bdr-tl/roundedTopLeft,borderTopRightRadius:bdr-tr/roundedTopRight,borderBottomRightRadius:bdr-br/roundedBottomRight,borderBottomLeftRadius:bdr-bl/roundedBottomLeft,borderTopRadius:bdr-t/roundedTop,borderRightRadius:bdr-r/roundedRight,borderBottomRadius:bdr-b/roundedBottom,borderLeftRadius:bdr-l/roundedLeft,borderStartStartRadius:bdr-ss/roundedStartStart,borderStartEndRadius:bdr-se/roundedStartEnd,borderStartRadius:bdr-s/roundedStart,borderEndStartRadius:bdr-es/roundedEndStart,borderEndEndRadius:bdr-ee/roundedEndEnd,borderEndRadius:bdr-e/roundedEnd,border:bd,borderWidth:bd-w,borderTopWidth:bd-t-w,borderLeftWidth:bd-l-w,borderRightWidth:bd-r-w,borderBottomWidth:bd-b-w,borderBlockStartWidth:bd-bs-w,borderBlockEndWidth:bd-be-w,borderColor:bd-c,borderInline:bd-x/borderX,borderInlineWidth:bd-x-w/borderXWidth,borderInlineColor:bd-x-c/borderXColor,borderBlock:bd-y/borderY,borderBlockWidth:bd-y-w/borderYWidth,borderBlockColor:bd-y-c/borderYColor,borderLeft:bd-l,borderLeftColor:bd-l-c,borderInlineStart:bd-s/borderStart,borderInlineStartWidth:bd-s-w/borderStartWidth,borderInlineStartColor:bd-s-c/borderStartColor,borderRight:bd-r,borderRightColor:bd-r-c,borderInlineEnd:bd-e/borderEnd,borderInlineEndWidth:bd-e-w/borderEndWidth,borderInlineEndColor:bd-e-c/borderEndColor,borderTop:bd-t,borderTopColor:bd-t-c,borderBottom:bd-b,borderBottomColor:bd-b-c,borderBlockEnd:bd-be,borderBlockEndColor:bd-be-c,borderBlockStart:bd-bs,borderBlockStartColor:bd-bs-c,opacity:op,boxShadow:bx-sh/shadow,boxShadowColor:bx-sh-c/shadowColor,mixBlendMode:mix-bm,filter:filter,brightness:brightness,contrast:contrast,grayscale:grayscale,hueRotate:hue-rotate,invert:invert,saturate:saturate,sepia:sepia,dropShadow:drop-shadow,blur:blur,backdropFilter:bkdp,backdropBlur:bkdp-blur,backdropBrightness:bkdp-brightness,backdropContrast:bkdp-contrast,backdropGrayscale:bkdp-grayscale,backdropHueRotate:bkdp-hue-rotate,backdropInvert:bkdp-invert,backdropOpacity:bkdp-opacity,backdropSaturate:bkdp-saturate,backdropSepia:bkdp-sepia,borderCollapse:bd-cl,borderSpacing:bd-sp,borderSpacingX:bd-sx,borderSpacingY:bd-sy,tableLayout:tbl,transitionTimingFunction:trs-tmf,transitionDelay:trs-dly,transitionDuration:trs-dur,transitionProperty:trs-prop,transition:trs,animation:anim,animationName:anim-n,animationTimingFunction:anim-tmf,animationDuration:anim-dur,animationDelay:anim-dly,animationPlayState:anim-ps,animationComposition:anim-comp,animationFillMode:anim-fm,animationDirection:anim-dir,animationIterationCount:anim-ic,animationRange:anim-r,animationState:anim-s,animationRangeStart:anim-rs,animationRangeEnd:anim-re,animationTimeline:anim-tl,transformOrigin:trf-o,transformBox:trf-b,transformStyle:trf-s,transform:trf,rotate:rotate,rotateX:rotate-x,rotateY:rotate-y,rotateZ:rotate-z,scale:scale,scaleX:scale-x,scaleY:scale-y,translate:translate,translateX:translate-x/x,translateY:translate-y/y,translateZ:translate-z/z,accentColor:ac-c,caretColor:ca-c,scrollBehavior:scr-bhv,scrollbar:scr-bar,scrollbarColor:scr-bar-c,scrollbarGutter:scr-bar-g,scrollbarWidth:scr-bar-w,scrollMargin:scr-m,scrollMarginLeft:scr-ml,scrollMarginRight:scr-mr,scrollMarginTop:scr-mt,scrollMarginBottom:scr-mb,scrollMarginBlock:scr-my/scrollMarginY,scrollMarginBlockEnd:scr-mbe,scrollMarginBlockStart:scr-mbt,scrollMarginInline:scr-mx/scrollMarginX,scrollMarginInlineEnd:scr-me,scrollMarginInlineStart:scr-ms,scrollPadding:scr-p,scrollPaddingBlock:scr-py/scrollPaddingY,scrollPaddingBlockStart:scr-pbs,scrollPaddingBlockEnd:scr-pbe,scrollPaddingInline:scr-px/scrollPaddingX,scrollPaddingInlineEnd:scr-pe,scrollPaddingInlineStart:scr-ps,scrollPaddingLeft:scr-pl,scrollPaddingRight:scr-pr,scrollPaddingTop:scr-pt,scrollPaddingBottom:scr-pb,scrollSnapAlign:scr-sa,scrollSnapStop:scrs-s,scrollSnapType:scrs-t,scrollSnapStrictness:scrs-strt,scrollSnapMargin:scrs-m,scrollSnapMarginTop:scrs-mt,scrollSnapMarginBottom:scrs-mb,scrollSnapMarginLeft:scrs-ml,scrollSnapMarginRight:scrs-mr,scrollSnapCoordinate:scrs-c,scrollSnapDestination:scrs-d,scrollSnapPointsX:scrs-px,scrollSnapPointsY:scrs-py,scrollSnapTypeX:scrs-tx,scrollSnapTypeY:scrs-ty,scrollTimeline:scrtl,scrollTimelineAxis:scrtl-a,scrollTimelineName:scrtl-n,touchAction:tch-a,userSelect:us,overflow:ov,overflowWrap:ov-wrap,overflowX:ov-x,overflowY:ov-y,overflowAnchor:ov-a,overflowBlock:ov-b,overflowInline:ov-i,overflowClipBox:ovcp-bx,overflowClipMargin:ovcp-m,overscrollBehaviorBlock:ovs-bb,overscrollBehaviorInline:ovs-bi,fill:fill,stroke:stk,strokeWidth:stk-w,strokeDasharray:stk-dsh,strokeDashoffset:stk-do,strokeLinecap:stk-lc,strokeLinejoin:stk-lj,strokeMiterlimit:stk-ml,strokeOpacity:stk-op,srOnly:sr,debug:debug,appearance:ap,backfaceVisibility:bfv,clipPath:cp-path,hyphens:hy,mask:msk,maskImage:msk-i,maskSize:msk-s,textSizeAdjust:txt-adj,container:cq,containerName:cq-n,containerType:cq-t,cursor:cursor,textStyle:textStyle",Dh=new Map,Nh=new Map;Kw.split(",").forEach(e=>{const[t,n]=e.split(":"),[r,...s]=n.split("/");Dh.set(t,r),s.length&&s.forEach(i=>{Nh.set(i==="1"?r:i,t)})});const Ol=e=>Nh.get(e)||e,Ph={conditions:{shift:zw,finalize:Uw,breakpoints:{keys:["base","sm","md","lg","xl","2xl"]}},utility:{transform:(e,t)=>{const n=Ol(e);return{className:`${Dh.get(n)||Aw(n)}_${Rh(t)}`}},hasShorthand:!0,toHash:(e,t)=>t(e.join(":")),resolveShorthand:Ol}},Ww=_w(Ph),O=(...e)=>Ww(Lh(...e));O.raw=(...e)=>Lh(...e);const{mergeCss:Lh}=kw(Ph);function ks(){let e="",t=0,n;for(;t<arguments.length;)(n=arguments[t++])&&typeof n=="string"&&(e&&(e+=" "),e+=n);return e}const Gw={blue:"#3b82f6",orange:"#f97316",red:"#ef4444"};function jw(e){return e<200?"blue":e<1e3?"orange":"red"}function Zw(e){const n=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
  <rect width="24" height="24" rx="6" fill="${Gw[e]}" />
  <path d="M8 6h8.5v2.5H11v3h5v2.5H11V18H8V6Z" fill="white" />
  <circle cx="17" cy="17" r="2" fill="white" />
</svg>`;return`data:image/svg+xml;base64,${btoa(n)}`}const Yw=e=>{let t=null;return Qe(()=>{const n=document.querySelector('link[rel="icon"]');if(n){t===null&&(t=n.getAttribute("href"));const r=jw(e.unreadCount);n.href=Zw(r)}}),Ee(()=>{const n=document.querySelector('link[rel="icon"]');n&&t!==null&&(n.href=t)}),null};var ce;(function(e){e[e.Canceled=1]="Canceled",e[e.Unknown=2]="Unknown",e[e.InvalidArgument=3]="InvalidArgument",e[e.DeadlineExceeded=4]="DeadlineExceeded",e[e.NotFound=5]="NotFound",e[e.AlreadyExists=6]="AlreadyExists",e[e.PermissionDenied=7]="PermissionDenied",e[e.ResourceExhausted=8]="ResourceExhausted",e[e.FailedPrecondition=9]="FailedPrecondition",e[e.Aborted=10]="Aborted",e[e.OutOfRange=11]="OutOfRange",e[e.Unimplemented=12]="Unimplemented",e[e.Internal=13]="Internal",e[e.Unavailable=14]="Unavailable",e[e.DataLoss=15]="DataLoss",e[e.Unauthenticated=16]="Unauthenticated"})(ce||(ce={}));function ka(e,t){return e!==null&&typeof e=="object"&&"$typeName"in e&&typeof e.$typeName=="string"?t===void 0?!0:t.typeName===e.$typeName:!1}var I;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(I||(I={}));function qw(){let e=0,t=0;for(let r=0;r<28;r+=7){let s=this.buf[this.pos++];if(e|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[e,t]}let n=this.buf[this.pos++];if(e|=(n&15)<<28,t=(n&112)>>4,(n&128)==0)return this.assertBounds(),[e,t];for(let r=3;r<=31;r+=7){let s=this.buf[this.pos++];if(t|=(s&127)<<r,(s&128)==0)return this.assertBounds(),[e,t]}throw new Error("invalid varint")}function _o(e,t,n){for(let i=0;i<28;i=i+7){const o=e>>>i,u=!(!(o>>>7)&&t==0),a=(u?o|128:o)&255;if(n.push(a),!u)return}const r=e>>>28&15|(t&7)<<4,s=t>>3!=0;if(n.push((s?r|128:r)&255),!!s){for(let i=3;i<31;i=i+7){const o=t>>>i,u=!!(o>>>7),a=(u?o|128:o)&255;if(n.push(a),!u)return}n.push(t>>>31&1)}}const ei=4294967296;function Fl(e){const t=e[0]==="-";t&&(e=e.slice(1));const n=1e6;let r=0,s=0;function i(o,u){const a=Number(e.slice(o,u));s*=n,r=r*n+a,r>=ei&&(s=s+(r/ei|0),r=r%ei)}return i(-24,-18),i(-18,-12),i(-12,-6),i(-6),t?Bh(r,s):Ca(r,s)}function Hw(e,t){let n=Ca(e,t);const r=n.hi&2147483648;r&&(n=Bh(n.lo,n.hi));const s=Mh(n.lo,n.hi);return r?"-"+s:s}function Mh(e,t){if({lo:e,hi:t}=Xw(e,t),t<=2097151)return String(ei*t+e);const n=e&16777215,r=(e>>>24|t<<8)&16777215,s=t>>16&65535;let i=n+r*6777216+s*6710656,o=r+s*8147497,u=s*2;const a=1e7;return i>=a&&(o+=Math.floor(i/a),i%=a),o>=a&&(u+=Math.floor(o/a),o%=a),u.toString()+Dl(o)+Dl(i)}function Xw(e,t){return{lo:e>>>0,hi:t>>>0}}function Ca(e,t){return{lo:e|0,hi:t|0}}function Bh(e,t){return t=~t,e?e=~e+1:t+=1,Ca(e,t)}const Dl=e=>{const t=String(e);return"0000000".slice(t.length)+t};function xu(e,t){if(e>=0){for(;e>127;)t.push(e&127|128),e=e>>>7;t.push(e)}else{for(let n=0;n<9;n++)t.push(e&127|128),e=e>>7;t.push(1)}}function Jw(){let e=this.buf[this.pos++],t=e&127;if((e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<7,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<14,(e&128)==0)return this.assertBounds(),t;if(e=this.buf[this.pos++],t|=(e&127)<<21,(e&128)==0)return this.assertBounds(),t;e=this.buf[this.pos++],t|=(e&15)<<28;for(let n=5;(e&128)!==0&&n<10;n++)e=this.buf[this.pos++];if((e&128)!=0)throw new Error("invalid varint");return this.assertBounds(),t>>>0}var Nl={};const pe=Qw();function Qw(){const e=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof e.getBigInt64=="function"&&typeof e.getBigUint64=="function"&&typeof e.setBigInt64=="function"&&typeof e.setBigUint64=="function"&&(!!globalThis.Deno||typeof process!="object"||typeof Nl!="object"||Nl.BUF_BIGINT_DISABLE!=="1")){const n=BigInt("-9223372036854775808"),r=BigInt("9223372036854775807"),s=BigInt("0"),i=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(o){const u=typeof o=="bigint"?o:BigInt(o);if(u>r||u<n)throw new Error(`invalid int64: ${o}`);return u},uParse(o){const u=typeof o=="bigint"?o:BigInt(o);if(u>i||u<s)throw new Error(`invalid uint64: ${o}`);return u},enc(o){return e.setBigInt64(0,this.parse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},uEnc(o){return e.setBigInt64(0,this.uParse(o),!0),{lo:e.getInt32(0,!0),hi:e.getInt32(4,!0)}},dec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigInt64(0,!0)},uDec(o,u){return e.setInt32(0,o,!0),e.setInt32(4,u,!0),e.getBigUint64(0,!0)}}}return{zero:"0",supported:!1,parse(n){return typeof n!="string"&&(n=n.toString()),Pl(n),n},uParse(n){return typeof n!="string"&&(n=n.toString()),Ll(n),n},enc(n){return typeof n!="string"&&(n=n.toString()),Pl(n),Fl(n)},uEnc(n){return typeof n!="string"&&(n=n.toString()),Ll(n),Fl(n)},dec(n,r){return Hw(n,r)},uDec(n,r){return Mh(n,r)}}}function Pl(e){if(!/^-?[0-9]+$/.test(e))throw new Error("invalid int64: "+e)}function Ll(e){if(!/^[0-9]+$/.test(e))throw new Error("invalid uint64: "+e)}function fr(e,t){switch(e){case I.STRING:return"";case I.BOOL:return!1;case I.DOUBLE:case I.FLOAT:return 0;case I.INT64:case I.UINT64:case I.SFIXED64:case I.FIXED64:case I.SINT64:return t?"0":pe.zero;case I.BYTES:return new Uint8Array(0);default:return 0}}function ex(e,t){switch(e){case I.BOOL:return t===!1;case I.STRING:return t==="";case I.BYTES:return t instanceof Uint8Array&&!t.byteLength;default:return t==0}}const $h=2,Xt=Symbol.for("reflect unsafe local");function Vh(e,t){const n=e[t.localName].case;return n===void 0?n:t.fields.find(r=>r.localName===n)}function tx(e,t){const n=t.localName;if(t.oneof)return e[t.oneof.localName].case===n;if(t.presence!=$h)return e[n]!==void 0&&Object.prototype.hasOwnProperty.call(e,n);switch(t.fieldKind){case"list":return e[n].length>0;case"map":return Object.keys(e[n]).length>0;case"scalar":return!ex(t.scalar,e[n]);case"enum":return e[n]!==t.enum.values[0].number}throw new Error("message field with implicit presence")}function ss(e,t){return Object.prototype.hasOwnProperty.call(e,t)&&e[t]!==void 0}function Uh(e,t){if(t.oneof){const n=e[t.oneof.localName];return n.case===t.localName?n.value:void 0}return e[t.localName]}function zh(e,t,n){t.oneof?e[t.oneof.localName]={case:t.localName,value:n}:e[t.localName]=n}function nx(e,t){const n=t.localName;if(t.oneof){const r=t.oneof.localName;e[r].case===n&&(e[r]={case:void 0})}else if(t.presence!=$h)delete e[n];else switch(t.fieldKind){case"map":e[n]={};break;case"list":e[n]=[];break;case"enum":e[n]=t.enum.values[0].number;break;case"scalar":e[n]=fr(t.scalar,t.longAsString);break}}function wn(e){return e!==null&&typeof e=="object"&&!Array.isArray(e)}function Ia(e,t){var n,r,s,i;if(wn(e)&&Xt in e&&"add"in e&&"field"in e&&typeof e.field=="function"){if(t!==void 0){const o=t,u=e.field();return o.listKind==u.listKind&&o.scalar===u.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((r=u.message)===null||r===void 0?void 0:r.typeName)&&((s=o.enum)===null||s===void 0?void 0:s.typeName)===((i=u.enum)===null||i===void 0?void 0:i.typeName)}return!0}return!1}function Aa(e,t){var n,r,s,i;if(wn(e)&&Xt in e&&"has"in e&&"field"in e&&typeof e.field=="function"){if(t!==void 0){const o=t,u=e.field();return o.mapKey===u.mapKey&&o.mapKind==u.mapKind&&o.scalar===u.scalar&&((n=o.message)===null||n===void 0?void 0:n.typeName)===((r=u.message)===null||r===void 0?void 0:r.typeName)&&((s=o.enum)===null||s===void 0?void 0:s.typeName)===((i=u.enum)===null||i===void 0?void 0:i.typeName)}return!0}return!1}function Ra(e,t){return wn(e)&&Xt in e&&"desc"in e&&wn(e.desc)&&e.desc.kind==="message"&&(t===void 0||e.desc.typeName==t.typeName)}function rx(e){return Kh(e.$typeName)}function Cs(e){const t=e.fields[0];return Kh(e.typeName)&&t!==void 0&&t.fieldKind=="scalar"&&t.name=="value"&&t.number==1}function Kh(e){return e.startsWith("google.protobuf.")&&["DoubleValue","FloatValue","Int64Value","UInt64Value","Int32Value","UInt32Value","BoolValue","StringValue","BytesValue"].includes(e.substring(16))}const sx=999,ix=998,ti=2;function Tt(e,t){if(ka(t,e))return t;const n=lx(e);return t!==void 0&&ox(e,n,t),n}function ox(e,t,n){for(const r of e.members){let s=n[r.localName];if(s==null)continue;let i;if(r.kind=="oneof"){const o=Vh(n,r);if(!o)continue;i=o,s=Uh(n,o)}else i=r;switch(i.fieldKind){case"message":s=Ta(i,s);break;case"scalar":s=Wh(i,s);break;case"list":s=ax(i,s);break;case"map":s=ux(i,s);break}zh(t,i,s)}return t}function Wh(e,t){return e.scalar==I.BYTES?Oa(t):t}function ux(e,t){if(wn(t)){if(e.scalar==I.BYTES)return Ml(t,Oa);if(e.mapKind=="message")return Ml(t,n=>Ta(e,n))}return t}function ax(e,t){if(Array.isArray(t)){if(e.scalar==I.BYTES)return t.map(Oa);if(e.listKind=="message")return t.map(n=>Ta(e,n))}return t}function Ta(e,t){if(e.fieldKind=="message"&&!e.oneof&&Cs(e.message))return Wh(e.message.fields[0],t);if(wn(t)){if(e.message.typeName=="google.protobuf.Struct"&&e.parent.typeName!=="google.protobuf.Value")return t;if(!ka(t,e.message))return Tt(e.message,t)}return t}function Oa(e){return Array.isArray(e)?new Uint8Array(e):e}function Ml(e,t){const n={};for(const r of Object.entries(e))n[r[0]]=t(r[1]);return n}const cx=Symbol(),Bl=new WeakMap;function lx(e){let t;if(dx(e)){const n=Bl.get(e);let r,s;if(n)({prototype:r,members:s}=n);else{r={},s=new Set;for(const i of e.members)i.kind!="oneof"&&(i.fieldKind!="scalar"&&i.fieldKind!="enum"||i.presence!=ti&&(s.add(i),r[i.localName]=Eo(i)));Bl.set(e,{prototype:r,members:s})}t=Object.create(r),t.$typeName=e.typeName;for(const i of e.members)s.has(i)||i.kind=="field"&&(i.fieldKind=="message"||(i.fieldKind=="scalar"||i.fieldKind=="enum")&&i.presence!=ti)||(t[i.localName]=Eo(i))}else{t={$typeName:e.typeName};for(const n of e.members)(n.kind=="oneof"||n.presence==ti)&&(t[n.localName]=Eo(n))}return t}function dx(e){switch(e.file.edition){case sx:return!1;case ix:return!0;default:return e.fields.some(t=>t.presence!=ti&&t.fieldKind!="message"&&!t.oneof)}}function Eo(e){if(e.kind=="oneof")return{case:void 0};if(e.fieldKind=="list")return[];if(e.fieldKind=="map")return{};if(e.fieldKind=="message")return cx;const t=e.getDefaultValue();return t!==void 0?e.fieldKind=="scalar"&&e.longAsString?t.toString():t:e.fieldKind=="scalar"?fr(e.scalar,e.longAsString):e.enum.values[0].number}const fx=["FieldValueInvalidError","FieldListRangeError","ForeignFieldError"];class ut extends Error{constructor(t,n,r="FieldValueInvalidError"){super(n),this.name=r,this.field=()=>t}}function hx(e){return e instanceof Error&&fx.includes(e.name)&&"field"in e&&typeof e.field=="function"}const ko=Symbol.for("@bufbuild/protobuf/text-encoding");function Fa(){if(globalThis[ko]==null){const e=new globalThis.TextEncoder,t=new globalThis.TextDecoder;globalThis[ko]={encodeUtf8(n){return e.encode(n)},decodeUtf8(n){return t.decode(n)},checkUtf8(n){try{return encodeURIComponent(n),!0}catch{return!1}}}}return globalThis[ko]}var ge;(function(e){e[e.Varint=0]="Varint",e[e.Bit64=1]="Bit64",e[e.LengthDelimited=2]="LengthDelimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"})(ge||(ge={}));const Gh=34028234663852886e22,jh=-34028234663852886e22,Zh=4294967295,Yh=2147483647,qh=-2147483648;class Hh{constructor(t=Fa().encodeUtf8){this.encodeUtf8=t,this.stack=[],this.chunks=[],this.buf=[]}finish(){this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]);let t=0;for(let s=0;s<this.chunks.length;s++)t+=this.chunks[s].length;let n=new Uint8Array(t),r=0;for(let s=0;s<this.chunks.length;s++)n.set(this.chunks[s],r),r+=this.chunks[s].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let t=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(t.byteLength),this.raw(t)}tag(t,n){return this.uint32((t<<3|n)>>>0)}raw(t){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(t),this}uint32(t){for($l(t);t>127;)this.buf.push(t&127|128),t=t>>>7;return this.buf.push(t),this}int32(t){return Co(t),xu(t,this.buf),this}bool(t){return this.buf.push(t?1:0),this}bytes(t){return this.uint32(t.byteLength),this.raw(t)}string(t){let n=this.encodeUtf8(t);return this.uint32(n.byteLength),this.raw(n)}float(t){px(t);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,t,!0),this.raw(n)}double(t){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,t,!0),this.raw(n)}fixed32(t){$l(t);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,t,!0),this.raw(n)}sfixed32(t){Co(t);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,t,!0),this.raw(n)}sint32(t){return Co(t),t=(t<<1^t>>31)>>>0,xu(t,this.buf),this}sfixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),s=pe.enc(t);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}fixed64(t){let n=new Uint8Array(8),r=new DataView(n.buffer),s=pe.uEnc(t);return r.setInt32(0,s.lo,!0),r.setInt32(4,s.hi,!0),this.raw(n)}int64(t){let n=pe.enc(t);return _o(n.lo,n.hi,this.buf),this}sint64(t){const n=pe.enc(t),r=n.hi>>31,s=n.lo<<1^r,i=(n.hi<<1|n.lo>>>31)^r;return _o(s,i,this.buf),this}uint64(t){const n=pe.uEnc(t);return _o(n.lo,n.hi,this.buf),this}}class Da{constructor(t,n=Fa().decodeUtf8){this.decodeUtf8=n,this.varint64=qw,this.uint32=Jw,this.buf=t,this.len=t.length,this.pos=0,this.view=new DataView(t.buffer,t.byteOffset,t.byteLength)}tag(){let t=this.uint32(),n=t>>>3,r=t&7;if(n<=0||r<0||r>5)throw new Error("illegal tag: field no "+n+" wire type "+r);return[n,r]}skip(t,n){let r=this.pos;switch(t){case ge.Varint:for(;this.buf[this.pos++]&128;);break;case ge.Bit64:this.pos+=4;case ge.Bit32:this.pos+=4;break;case ge.LengthDelimited:let s=this.uint32();this.pos+=s;break;case ge.StartGroup:for(;;){const[i,o]=this.tag();if(o===ge.EndGroup){if(n!==void 0&&i!==n)throw new Error("invalid end group tag");break}this.skip(o,i)}break;default:throw new Error("cant skip wire type "+t)}return this.assertBounds(),this.buf.subarray(r,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let t=this.uint32();return t>>>1^-(t&1)}int64(){return pe.dec(...this.varint64())}uint64(){return pe.uDec(...this.varint64())}sint64(){let[t,n]=this.varint64(),r=-(t&1);return t=(t>>>1|(n&1)<<31)^r,n=n>>>1^r,pe.dec(t,n)}bool(){let[t,n]=this.varint64();return t!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return pe.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return pe.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let t=this.uint32(),n=this.pos;return this.pos+=t,this.assertBounds(),this.buf.subarray(n,n+t)}string(){return this.decodeUtf8(this.bytes())}}function Co(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid int32: "+typeof e);if(!Number.isInteger(e)||e>Yh||e<qh)throw new Error("invalid int32: "+e)}function $l(e){if(typeof e=="string")e=Number(e);else if(typeof e!="number")throw new Error("invalid uint32: "+typeof e);if(!Number.isInteger(e)||e>Zh||e<0)throw new Error("invalid uint32: "+e)}function px(e){if(typeof e=="string"){const t=e;if(e=Number(e),Number.isNaN(e)&&t!=="NaN")throw new Error("invalid float32: "+t)}else if(typeof e!="number")throw new Error("invalid float32: "+typeof e);if(Number.isFinite(e)&&(e>Gh||e<jh))throw new Error("invalid float32: "+e)}function Rn(e,t){const n=e.fieldKind=="list"?Ia(t,e):e.fieldKind=="map"?Aa(t,e):Na(e,t);if(n===!0)return;let r;switch(e.fieldKind){case"list":r=`expected ${Qh(e)}, got ${Fe(t)}`;break;case"map":r=`expected ${e0(e)}, got ${Fe(t)}`;break;default:r=ki(e,t,n)}return new ut(e,r)}function Vl(e,t,n){const r=Na(e,n);if(r!==!0)return new ut(e,`list item #${t+1}: ${ki(e,n,r)}`)}function mx(e,t,n){const r=Xh(t,e.mapKey);if(r!==!0)return new ut(e,`invalid map key: ${ki({scalar:e.mapKey},t,r)}`);const s=Na(e,n);if(s!==!0)return new ut(e,`map entry ${Fe(t)}: ${ki(e,n,s)}`)}function Na(e,t){return e.scalar!==void 0?Xh(t,e.scalar):e.enum!==void 0?e.enum.open?Number.isInteger(t):e.enum.values.some(n=>n.number===t):Ra(t,e.message)}function Xh(e,t){switch(t){case I.DOUBLE:return typeof e=="number";case I.FLOAT:return typeof e!="number"?!1:Number.isNaN(e)||!Number.isFinite(e)?!0:e>Gh||e<jh?`${e.toFixed()} out of range`:!0;case I.INT32:case I.SFIXED32:case I.SINT32:return typeof e!="number"||!Number.isInteger(e)?!1:e>Yh||e<qh?`${e.toFixed()} out of range`:!0;case I.FIXED32:case I.UINT32:return typeof e!="number"||!Number.isInteger(e)?!1:e>Zh||e<0?`${e.toFixed()} out of range`:!0;case I.BOOL:return typeof e=="boolean";case I.STRING:return typeof e!="string"?!1:Fa().checkUtf8(e)||"invalid UTF8";case I.BYTES:return e instanceof Uint8Array;case I.INT64:case I.SFIXED64:case I.SINT64:if(typeof e=="bigint"||typeof e=="number"||typeof e=="string"&&e.length>0)try{return pe.parse(e),!0}catch{return`${e} out of range`}return!1;case I.FIXED64:case I.UINT64:if(typeof e=="bigint"||typeof e=="number"||typeof e=="string"&&e.length>0)try{return pe.uParse(e),!0}catch{return`${e} out of range`}return!1}}function ki(e,t,n){return n=typeof n=="string"?`: ${n}`:`, got ${Fe(t)}`,e.scalar!==void 0?`expected ${gx(e.scalar)}`+n:e.enum!==void 0?`expected ${e.enum.toString()}`+n:`expected ${Jh(e.message)}`+n}function Fe(e){switch(typeof e){case"object":return e===null?"null":e instanceof Uint8Array?`Uint8Array(${e.length})`:Array.isArray(e)?`Array(${e.length})`:Ia(e)?Qh(e.field()):Aa(e)?e0(e.field()):Ra(e)?Jh(e.desc):ka(e)?`message ${e.$typeName}`:"object";case"string":return e.length>30?"string":`"${e.split('"').join('\\"')}"`;case"boolean":return String(e);case"number":return String(e);case"bigint":return String(e)+"n";default:return typeof e}}function Jh(e){return`ReflectMessage (${e.typeName})`}function Qh(e){switch(e.listKind){case"message":return`ReflectList (${e.message.toString()})`;case"enum":return`ReflectList (${e.enum.toString()})`;case"scalar":return`ReflectList (${I[e.scalar]})`}}function e0(e){switch(e.mapKind){case"message":return`ReflectMap (${I[e.mapKey]}, ${e.message.toString()})`;case"enum":return`ReflectMap (${I[e.mapKey]}, ${e.enum.toString()})`;case"scalar":return`ReflectMap (${I[e.mapKey]}, ${I[e.scalar]})`}}function gx(e){switch(e){case I.STRING:return"string";case I.BOOL:return"boolean";case I.INT64:case I.SINT64:case I.SFIXED64:return"bigint (int64)";case I.UINT64:case I.FIXED64:return"bigint (uint64)";case I.BYTES:return"Uint8Array";case I.DOUBLE:return"number (float64)";case I.FLOAT:return"number (float32)";case I.FIXED32:case I.UINT32:return"number (uint32)";case I.INT32:case I.SFIXED32:case I.SINT32:return"number (int32)"}}function Ot(e,t,n=!0){return new t0(e,t,n)}const Ul=new WeakMap;class t0{get sortedFields(){const t=Ul.get(this.desc);if(t)return t;const n=this.desc.fields.concat().sort((r,s)=>r.number-s.number);return Ul.set(this.desc,n),n}constructor(t,n,r=!0){this.lists=new Map,this.maps=new Map,this.check=r,this.desc=t,this.message=this[Xt]=n??Tt(t),this.fields=t.fields,this.oneofs=t.oneofs,this.members=t.members}findNumber(t){return this._fieldsByNumber||(this._fieldsByNumber=new Map(this.desc.fields.map(n=>[n.number,n]))),this._fieldsByNumber.get(t)}oneofCase(t){return Or(this.message,t),Vh(this.message,t)}isSet(t){return Or(this.message,t),tx(this.message,t)}clear(t){Or(this.message,t),nx(this.message,t)}get(t){Or(this.message,t);const n=Uh(this.message,t);switch(t.fieldKind){case"list":let r=this.lists.get(t);return(!r||r[Xt]!==n)&&this.lists.set(t,r=new bx(t,n,this.check)),r;case"map":let s=this.maps.get(t);return(!s||s[Xt]!==n)&&this.maps.set(t,s=new yx(t,n,this.check)),s;case"message":return La(t,n,this.check);case"scalar":return n===void 0?fr(t.scalar,!1):Ma(t,n);case"enum":return n??t.enum.values[0].number}}set(t,n){if(Or(this.message,t),this.check){const s=Rn(t,n);if(s)throw s}let r;t.fieldKind=="message"?r=Pa(t,n):Aa(n)||Ia(n)?r=n[Xt]:r=Ba(t,n),zh(this.message,t,r)}getUnknown(){return this.message.$unknown}setUnknown(t){this.message.$unknown=t}}function Or(e,t){if(t.parent.typeName!==e.$typeName)throw new ut(t,`cannot use ${t.toString()} with message ${e.$typeName}`,"ForeignFieldError")}class bx{field(){return this._field}get size(){return this._arr.length}constructor(t,n,r){this._field=t,this._arr=this[Xt]=n,this.check=r}get(t){const n=this._arr[t];return n===void 0?void 0:Io(this._field,n,this.check)}set(t,n){if(t<0||t>=this._arr.length)throw new ut(this._field,`list item #${t+1}: out of range`);if(this.check){const r=Vl(this._field,t,n);if(r)throw r}this._arr[t]=zl(this._field,n)}add(t){if(this.check){const n=Vl(this._field,this._arr.length,t);if(n)throw n}this._arr.push(zl(this._field,t))}clear(){this._arr.splice(0,this._arr.length)}[Symbol.iterator](){return this.values()}keys(){return this._arr.keys()}*values(){for(const t of this._arr)yield Io(this._field,t,this.check)}*entries(){for(let t=0;t<this._arr.length;t++)yield[t,Io(this._field,this._arr[t],this.check)]}}class yx{constructor(t,n,r=!0){this.obj=this[Xt]=n??{},this.check=r,this._field=t}field(){return this._field}set(t,n){if(this.check){const r=mx(this._field,t,n);if(r)throw r}return this.obj[Us(t)]=vx(this._field,n),this}delete(t){const n=Us(t),r=Object.prototype.hasOwnProperty.call(this.obj,n);return r&&delete this.obj[n],r}clear(){for(const t of Object.keys(this.obj))delete this.obj[t]}get(t){let n=this.obj[Us(t)];return n!==void 0&&(n=Ao(this._field,n,this.check)),n}has(t){return Object.prototype.hasOwnProperty.call(this.obj,Us(t))}*keys(){for(const t of Object.keys(this.obj))yield Kl(t,this._field.mapKey)}*entries(){for(const t of Object.entries(this.obj))yield[Kl(t[0],this._field.mapKey),Ao(this._field,t[1],this.check)]}[Symbol.iterator](){return this.entries()}get size(){return Object.keys(this.obj).length}*values(){for(const t of Object.values(this.obj))yield Ao(this._field,t,this.check)}forEach(t,n){for(const r of this.entries())t.call(n,r[1],r[0],this)}}function Pa(e,t){return Ra(t)?rx(t.message)&&!e.oneof&&e.fieldKind=="message"?t.message.value:t.desc.typeName=="google.protobuf.Struct"&&e.parent.typeName!="google.protobuf.Value"?r0(t.message):t.message:t}function La(e,t,n){return t!==void 0&&(Cs(e.message)&&!e.oneof&&e.fieldKind=="message"?t={$typeName:e.message.typeName,value:Ma(e.message.fields[0],t)}:e.message.typeName=="google.protobuf.Struct"&&e.parent.typeName!="google.protobuf.Value"&&wn(t)&&(t=n0(t))),new t0(e.message,t,n)}function zl(e,t){return e.listKind=="message"?Pa(e,t):Ba(e,t)}function Io(e,t,n){return e.listKind=="message"?La(e,t,n):Ma(e,t)}function vx(e,t){return e.mapKind=="message"?Pa(e,t):Ba(e,t)}function Ao(e,t,n){return e.mapKind=="message"?La(e,t,n):t}function Us(e){return typeof e=="string"||typeof e=="number"?e:String(e)}function Kl(e,t){switch(t){case I.STRING:return e;case I.INT32:case I.FIXED32:case I.UINT32:case I.SFIXED32:case I.SINT32:{const n=Number.parseInt(e);if(Number.isFinite(n))return n;break}case I.BOOL:switch(e){case"true":return!0;case"false":return!1}break;case I.UINT64:case I.FIXED64:try{return pe.uParse(e)}catch{}break;default:try{return pe.parse(e)}catch{}break}return e}function Ma(e,t){switch(e.scalar){case I.INT64:case I.SFIXED64:case I.SINT64:"longAsString"in e&&e.longAsString&&typeof t=="string"&&(t=pe.parse(t));break;case I.FIXED64:case I.UINT64:"longAsString"in e&&e.longAsString&&typeof t=="string"&&(t=pe.uParse(t));break}return t}function Ba(e,t){switch(e.scalar){case I.INT64:case I.SFIXED64:case I.SINT64:"longAsString"in e&&e.longAsString?t=String(t):(typeof t=="string"||typeof t=="number")&&(t=pe.parse(t));break;case I.FIXED64:case I.UINT64:"longAsString"in e&&e.longAsString?t=String(t):(typeof t=="string"||typeof t=="number")&&(t=pe.uParse(t));break}return t}function n0(e){const t={$typeName:"google.protobuf.Struct",fields:{}};if(wn(e))for(const[n,r]of Object.entries(e))t.fields[n]=i0(r);return t}function r0(e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=s0(r);return t}function s0(e){switch(e.kind.case){case"structValue":return r0(e.kind.value);case"listValue":return e.kind.value.values.map(s0);case"nullValue":case void 0:return null;default:return e.kind.value}}function i0(e){const t={$typeName:"google.protobuf.Value",kind:{case:void 0}};switch(typeof e){case"number":t.kind={case:"numberValue",value:e};break;case"string":t.kind={case:"stringValue",value:e};break;case"boolean":t.kind={case:"boolValue",value:e};break;case"object":if(e===null)t.kind={case:"nullValue",value:0};else if(Array.isArray(e)){const n={$typeName:"google.protobuf.ListValue",values:[]};if(Array.isArray(e))for(const r of e)n.values.push(i0(r));t.kind={case:"listValue",value:n}}else t.kind={case:"structValue",value:n0(e)};break}return t}function $a(e){const t=wx();let n=e.length*3/4;e[e.length-2]=="="?n-=2:e[e.length-1]=="="&&(n-=1);let r=new Uint8Array(n),s=0,i=0,o,u=0;for(let a=0;a<e.length;a++){if(o=t[e.charCodeAt(a)],o===void 0)switch(e[a]){case"=":i=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string")}switch(i){case 0:u=o,i=1;break;case 1:r[s++]=u<<2|(o&48)>>4,u=o,i=2;break;case 2:r[s++]=(u&15)<<4|(o&60)>>2,u=o,i=3;break;case 3:r[s++]=(u&3)<<6|o,i=0;break}}if(i==1)throw Error("invalid base64 string");return r.subarray(0,s)}function o0(e,t="std"){const n=u0(t),r=t=="std";let s="",i=0,o,u=0;for(let a=0;a<e.length;a++)switch(o=e[a],i){case 0:s+=n[o>>2],u=(o&3)<<4,i=1;break;case 1:s+=n[u|o>>4],u=(o&15)<<2,i=2;break;case 2:s+=n[u|o>>6],s+=n[o&63],i=0;break}return i&&(s+=n[u],r&&(s+="=",i==1&&(s+="="))),s}let zs,Wl,qn;function u0(e){return zs||(zs="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Wl=zs.slice(0,-2).concat("-","_")),e=="url"?Wl:zs}function wx(){if(!qn){qn=[];const e=u0("std");for(let t=0;t<e.length;t++)qn[e[t].charCodeAt(0)]=t;qn[45]=e.indexOf("+"),qn[95]=e.indexOf("/")}return qn}function hr(e){let t=!1;const n=[];for(let r=0;r<e.length;r++){let s=e.charAt(r);switch(s){case"_":t=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(s),t=!1;break;default:t&&(t=!1,s=s.toUpperCase()),n.push(s);break}}return n.join("")}function a0(e){return e.replace(/[A-Z]/g,t=>"_"+t.toLowerCase())}const xx=new Set(["constructor","toString","toJSON","valueOf"]);function is(e){return xx.has(e)?e+"$":e}function Va(e){for(const t of e.field)ss(t,"jsonName")||(t.jsonName=hr(t.name));e.nestedType.forEach(Va)}function Sx(e,t){const n=e.values.find(r=>r.name===t);if(!n)throw new Error(`cannot parse ${e} default value: ${t}`);return n.number}function _x(e,t){switch(e){case I.STRING:return t;case I.BYTES:{const n=Ex(t);if(n===!1)throw new Error(`cannot parse ${I[e]} default value: ${t}`);return n}case I.INT64:case I.SFIXED64:case I.SINT64:return pe.parse(t);case I.UINT64:case I.FIXED64:return pe.uParse(t);case I.DOUBLE:case I.FLOAT:switch(t){case"inf":return Number.POSITIVE_INFINITY;case"-inf":return Number.NEGATIVE_INFINITY;case"nan":return Number.NaN;default:return parseFloat(t)}case I.BOOL:return t==="true";case I.INT32:case I.UINT32:case I.SINT32:case I.FIXED32:case I.SFIXED32:return parseInt(t,10)}}function Ex(e){const t=[],n={tail:e,c:"",next(){return this.tail.length==0?!1:(this.c=this.tail[0],this.tail=this.tail.substring(1),!0)},take(r){if(this.tail.length>=r){const s=this.tail.substring(0,r);return this.tail=this.tail.substring(r),s}return!1}};for(;n.next();)switch(n.c){case"\\":if(n.next())switch(n.c){case"\\":t.push(n.c.charCodeAt(0));break;case"b":t.push(8);break;case"f":t.push(12);break;case"n":t.push(10);break;case"r":t.push(13);break;case"t":t.push(9);break;case"v":t.push(11);break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":{const r=n.c,s=n.take(2);if(s===!1)return!1;const i=parseInt(r+s,8);if(Number.isNaN(i))return!1;t.push(i);break}case"x":{const r=n.c,s=n.take(2);if(s===!1)return!1;const i=parseInt(r+s,16);if(Number.isNaN(i))return!1;t.push(i);break}case"u":{const r=n.c,s=n.take(4);if(s===!1)return!1;const i=parseInt(r+s,16);if(Number.isNaN(i))return!1;const o=new Uint8Array(4);new DataView(o.buffer).setInt32(0,i,!0),t.push(o[0],o[1],o[2],o[3]);break}case"U":{const r=n.c,s=n.take(8);if(s===!1)return!1;const i=pe.uEnc(r+s),o=new Uint8Array(8),u=new DataView(o.buffer);u.setInt32(0,i.lo,!0),u.setInt32(4,i.hi,!0),t.push(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);break}}break;default:t.push(n.c.charCodeAt(0))}return new Uint8Array(t)}function*Su(e){switch(e.kind){case"file":for(const t of e.messages)yield t,yield*Su(t);yield*e.enums,yield*e.services,yield*e.extensions;break;case"message":for(const t of e.nestedMessages)yield t,yield*Su(t);yield*e.nestedEnums,yield*e.nestedExtensions;break}}function c0(...e){const t=kx();if(!e.length)return t;if("$typeName"in e[0]&&e[0].$typeName=="google.protobuf.FileDescriptorSet"){for(const r of e[0].file)Yl(r,t);return t}if("$typeName"in e[0]){let o=function(u){const a=[];for(const c of u.dependency){if(t.getFile(c)!=null||i.has(c))continue;const l=s(c);if(!l)throw new Error(`Unable to resolve ${c}, imported by ${u.name}`);"kind"in l?t.addFile(l,!1,!0):(i.add(l.name),a.push(l))}return a.concat(...a.map(o))};var n=o;const r=e[0],s=e[1],i=new Set;for(const u of[r,...o(r)].reverse())Yl(u,t)}else for(const r of e)for(const s of r.files)t.addFile(s);return t}function kx(){const e=new Map,t=new Map,n=new Map;return{kind:"registry",types:e,extendees:t,[Symbol.iterator](){return e.values()},get files(){return n.values()},addFile(r,s,i){if(n.set(r.proto.name,r),!s)for(const o of Su(r))this.add(o);if(i)for(const o of r.dependencies)this.addFile(o,s,i)},add(r){if(r.kind=="extension"){let s=t.get(r.extendee.typeName);s||t.set(r.extendee.typeName,s=new Map),s.set(r.number,r)}e.set(r.typeName,r)},get(r){return e.get(r)},getFile(r){return n.get(r)},getMessage(r){const s=e.get(r);return s?.kind=="message"?s:void 0},getEnum(r){const s=e.get(r);return s?.kind=="enum"?s:void 0},getExtension(r){const s=e.get(r);return s?.kind=="extension"?s:void 0},getExtensionFor(r,s){var i;return(i=t.get(r.typeName))===null||i===void 0?void 0:i.get(s)},getService(r){const s=e.get(r);return s?.kind=="service"?s:void 0}}}const Cx=998,Ix=999,Ax=9,os=10,Gr=11,Rx=12,Gl=14,Ua=3,Tx=2,jl=1,Ox=0,Ro=1,Zl=2,Fx=3,Dx=1,Nx=2,Px=1,l0={998:{fieldPresence:1,enumType:2,repeatedFieldEncoding:2,utf8Validation:3,messageEncoding:1,jsonFormat:2,enforceNamingStyle:2,defaultSymbolVisibility:1},999:{fieldPresence:2,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1e3:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:2,defaultSymbolVisibility:1},1001:{fieldPresence:1,enumType:1,repeatedFieldEncoding:1,utf8Validation:2,messageEncoding:1,jsonFormat:1,enforceNamingStyle:1,defaultSymbolVisibility:2}};function Yl(e,t){var n,r;const s={kind:"file",proto:e,deprecated:(r=(n=e.options)===null||n===void 0?void 0:n.deprecated)!==null&&r!==void 0?r:!1,edition:$x(e),name:e.name.replace(/\.proto$/,""),dependencies:Vx(e,t),enums:[],messages:[],extensions:[],services:[],toString(){return`file ${e.name}`}},i=new Map,o={get(u){return i.get(u)},add(u){var a;kt(((a=u.proto.options)===null||a===void 0?void 0:a.mapEntry)===!0),i.set(u.typeName,u)}};for(const u of e.enumType)d0(u,s,void 0,t);for(const u of e.messageType)f0(u,s,void 0,t,o);for(const u of e.service)Lx(u,s,t);_u(s,t);for(const u of i.values())Eu(u,t,o);for(const u of s.messages)Eu(u,t,o),_u(u,t);t.addFile(s,!0)}function _u(e,t){switch(e.kind){case"file":for(const n of e.proto.extension){const r=ku(n,e,t);e.extensions.push(r),t.add(r)}break;case"message":for(const n of e.proto.extension){const r=ku(n,e,t);e.nestedExtensions.push(r),t.add(r)}for(const n of e.nestedMessages)_u(n,t);break}}function Eu(e,t,n){const r=e.proto.oneofDecl.map(i=>Bx(i,e)),s=new Set;for(const i of e.proto.field){const o=Kx(i,r),u=ku(i,e,t,o,n);e.fields.push(u),e.field[u.localName]=u,o===void 0?e.members.push(u):(o.fields.push(u),s.has(o)||(s.add(o),e.members.push(o)))}for(const i of r.filter(o=>s.has(o)))e.oneofs.push(i);for(const i of e.nestedMessages)Eu(i,t,n)}function d0(e,t,n,r){var s,i,o,u,a;const c=Ux(e.name,e.value),l={kind:"enum",proto:e,deprecated:(i=(s=e.options)===null||s===void 0?void 0:s.deprecated)!==null&&i!==void 0?i:!1,file:t,parent:n,open:!0,name:e.name,typeName:zi(e,n,t),value:{},values:[],sharedPrefix:c,toString(){return`enum ${this.typeName}`}};l.open=Zx(l),r.add(l);for(const d of e.value){const p=d.name;l.values.push(l.value[d.number]={kind:"enum_value",proto:d,deprecated:(u=(o=d.options)===null||o===void 0?void 0:o.deprecated)!==null&&u!==void 0?u:!1,parent:l,name:p,localName:is(c==null?p:p.substring(c.length)),number:d.number,toString(){return`enum value ${l.typeName}.${p}`}})}((a=n?.nestedEnums)!==null&&a!==void 0?a:t.enums).push(l)}function f0(e,t,n,r,s){var i,o,u,a;const c={kind:"message",proto:e,deprecated:(o=(i=e.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,file:t,parent:n,name:e.name,typeName:zi(e,n,t),fields:[],field:{},oneofs:[],members:[],nestedEnums:[],nestedMessages:[],nestedExtensions:[],toString(){return`message ${this.typeName}`}};((u=e.options)===null||u===void 0?void 0:u.mapEntry)===!0?s.add(c):(((a=n?.nestedMessages)!==null&&a!==void 0?a:t.messages).push(c),r.add(c));for(const l of e.enumType)d0(l,t,c,r);for(const l of e.nestedType)f0(l,t,c,r,s)}function Lx(e,t,n){var r,s;const i={kind:"service",proto:e,deprecated:(s=(r=e.options)===null||r===void 0?void 0:r.deprecated)!==null&&s!==void 0?s:!1,file:t,name:e.name,typeName:zi(e,void 0,t),methods:[],method:{},toString(){return`service ${this.typeName}`}};t.services.push(i),n.add(i);for(const o of e.method){const u=Mx(o,i,n);i.methods.push(u),i.method[u.localName]=u}}function Mx(e,t,n){var r,s,i,o;let u;e.clientStreaming&&e.serverStreaming?u="bidi_streaming":e.clientStreaming?u="client_streaming":e.serverStreaming?u="server_streaming":u="unary";const a=n.getMessage(jt(e.inputType)),c=n.getMessage(jt(e.outputType));kt(a,`invalid MethodDescriptorProto: input_type ${e.inputType} not found`),kt(c,`invalid MethodDescriptorProto: output_type ${e.inputType} not found`);const l=e.name;return{kind:"rpc",proto:e,deprecated:(s=(r=e.options)===null||r===void 0?void 0:r.deprecated)!==null&&s!==void 0?s:!1,parent:t,name:l,localName:is(l.length?is(l[0].toLowerCase()+l.substring(1)):l),methodKind:u,input:a,output:c,idempotency:(o=(i=e.options)===null||i===void 0?void 0:i.idempotencyLevel)!==null&&o!==void 0?o:Ox,toString(){return`rpc ${t.typeName}.${l}`}}}function Bx(e,t){return{kind:"oneof",proto:e,deprecated:!1,parent:t,fields:[],name:e.name,localName:is(hr(e.name)),toString(){return`oneof ${t.typeName}.${this.name}`}}}function ku(e,t,n,r,s){var i,o,u;const a=s===void 0,c={kind:"field",proto:e,deprecated:(o=(i=e.options)===null||i===void 0?void 0:i.deprecated)!==null&&o!==void 0?o:!1,name:e.name,number:e.number,scalar:void 0,message:void 0,enum:void 0,presence:Wx(e,r,a,t),listKind:void 0,mapKind:void 0,mapKey:void 0,delimitedEncoding:void 0,packed:void 0,longAsString:!1,getDefaultValue:void 0};if(a){const f=t.kind=="file"?t:t.file,h=t.kind=="file"?void 0:t,m=zi(e,h,f);c.kind="extension",c.file=f,c.parent=h,c.oneof=void 0,c.typeName=m,c.jsonName=`[${m}]`,c.toString=()=>`extension ${m}`;const g=n.getMessage(jt(e.extendee));kt(g,`invalid FieldDescriptorProto: extendee ${e.extendee} not found`),c.extendee=g}else{const f=t;kt(f.kind=="message"),c.parent=f,c.oneof=r,c.localName=r?hr(e.name):is(hr(e.name)),c.jsonName=e.jsonName,c.toString=()=>`field ${f.typeName}.${e.name}`}const l=e.label,d=e.type,p=(u=e.options)===null||u===void 0?void 0:u.jstype;if(l===Ua){const f=d==Gr?s?.get(jt(e.typeName)):void 0;if(f){c.fieldKind="map";const{key:h,value:m}=jx(f);return c.mapKey=h.scalar,c.mapKind=m.fieldKind,c.message=m.message,c.delimitedEncoding=!1,c.enum=m.enum,c.scalar=m.scalar,c}switch(c.fieldKind="list",d){case Gr:case os:c.listKind="message",c.message=n.getMessage(jt(e.typeName)),kt(c.message),c.delimitedEncoding=ql(e,t);break;case Gl:c.listKind="enum",c.enum=n.getEnum(jt(e.typeName)),kt(c.enum);break;default:c.listKind="scalar",c.scalar=d,c.longAsString=p==jl;break}return c.packed=Gx(e,t),c}switch(d){case Gr:case os:c.fieldKind="message",c.message=n.getMessage(jt(e.typeName)),kt(c.message,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.delimitedEncoding=ql(e,t),c.getDefaultValue=()=>{};break;case Gl:{const f=n.getEnum(jt(e.typeName));kt(f!==void 0,`invalid FieldDescriptorProto: type_name ${e.typeName} not found`),c.fieldKind="enum",c.enum=n.getEnum(jt(e.typeName)),c.getDefaultValue=()=>ss(e,"defaultValue")?Sx(f,e.defaultValue):void 0;break}default:{c.fieldKind="scalar",c.scalar=d,c.longAsString=p==jl,c.getDefaultValue=()=>ss(e,"defaultValue")?_x(d,e.defaultValue):void 0;break}}return c}function $x(e){switch(e.syntax){case"":case"proto2":return Cx;case"proto3":return Ix;case"editions":if(e.edition in l0)return e.edition;throw new Error(`${e.name}: unsupported edition`);default:throw new Error(`${e.name}: unsupported syntax "${e.syntax}"`)}}function Vx(e,t){return e.dependency.map(n=>{const r=t.getFile(n);if(!r)throw new Error(`Cannot find ${n}, imported by ${e.name}`);return r})}function Ux(e,t){const n=zx(e)+"_";for(const r of t){if(!r.name.toLowerCase().startsWith(n))return;const s=r.name.substring(n.length);if(s.length==0||/^\d/.test(s))return}return n}function zx(e){return(e.substring(0,1)+e.substring(1).replace(/[A-Z]/g,t=>"_"+t)).toLowerCase()}function zi(e,t,n){let r;return t?r=`${t.typeName}.${e.name}`:n.proto.package.length>0?r=`${n.proto.package}.${e.name}`:r=`${e.name}`,r}function jt(e){return e.startsWith(".")?e.substring(1):e}function Kx(e,t){if(!ss(e,"oneofIndex")||e.proto3Optional)return;const n=t[e.oneofIndex];return kt(n,`invalid FieldDescriptorProto: oneof #${e.oneofIndex} for field #${e.number} not found`),n}function Wx(e,t,n,r){if(e.label==Tx)return Fx;if(e.label==Ua)return Zl;if(t||e.proto3Optional||n)return Ro;const s=pr("fieldPresence",{proto:e,parent:r});return s==Zl&&(e.type==Gr||e.type==os)?Ro:s}function Gx(e,t){if(e.label!=Ua)return!1;switch(e.type){case Ax:case Rx:case os:case Gr:return!1}const n=e.options;return n&&ss(n,"packed")?n.packed:Dx==pr("repeatedFieldEncoding",{proto:e,parent:t})}function jx(e){const t=e.fields.find(r=>r.number===1),n=e.fields.find(r=>r.number===2);return kt(t&&t.fieldKind=="scalar"&&t.scalar!=I.BYTES&&t.scalar!=I.FLOAT&&t.scalar!=I.DOUBLE&&n&&n.fieldKind!="list"&&n.fieldKind!="map"),{key:t,value:n}}function Zx(e){var t;return Px==pr("enumType",{proto:e.proto,parent:(t=e.parent)!==null&&t!==void 0?t:e.file})}function ql(e,t){return e.type==os?!0:Nx==pr("messageEncoding",{proto:e,parent:t})}function pr(e,t){var n,r;const s=(n=t.proto.options)===null||n===void 0?void 0:n.features;if(s){const i=s[e];if(i!=0)return i}if("kind"in t){if(t.kind=="message")return pr(e,(r=t.parent)!==null&&r!==void 0?r:t.file);const i=l0[t.edition];if(!i)throw new Error(`feature default for edition ${t.edition} not found`);return i[e]}return pr(e,t.parent)}function kt(e,t){if(!e)throw new Error(t)}function Yx(e){const t=qx(e);return t.messageType.forEach(Va),c0(t,()=>{}).getFile(t.name)}function qx(e){return Object.assign(Object.create({syntax:"",edition:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FileDescriptorProto",dependency:[],publicDependency:[],weakDependency:[],optionDependency:[],service:[],extension:[]},e),{messageType:e.messageType.map(h0),enumType:e.enumType.map(p0)}))}function h0(e){var t,n,r,s,i,o,u,a;return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.DescriptorProto",name:e.name,field:(n=(t=e.field)===null||t===void 0?void 0:t.map(Hx))!==null&&n!==void 0?n:[],extension:[],nestedType:(s=(r=e.nestedType)===null||r===void 0?void 0:r.map(h0))!==null&&s!==void 0?s:[],enumType:(o=(i=e.enumType)===null||i===void 0?void 0:i.map(p0))!==null&&o!==void 0?o:[],extensionRange:(a=(u=e.extensionRange)===null||u===void 0?void 0:u.map(l=>Object.assign({$typeName:"google.protobuf.DescriptorProto.ExtensionRange"},l)))!==null&&a!==void 0?a:[],oneofDecl:[],reservedRange:[],reservedName:[]})}function Hx(e){return Object.assign(Object.create({label:1,typeName:"",extendee:"",defaultValue:"",oneofIndex:0,jsonName:"",proto3Optional:!1}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldDescriptorProto"},e),{options:e.options?Xx(e.options):void 0}))}function Xx(e){var t,n,r;return Object.assign(Object.create({ctype:0,packed:!1,jstype:0,lazy:!1,unverifiedLazy:!1,deprecated:!1,weak:!1,debugRedact:!1,retention:0}),Object.assign(Object.assign({$typeName:"google.protobuf.FieldOptions"},e),{targets:(t=e.targets)!==null&&t!==void 0?t:[],editionDefaults:(r=(n=e.editionDefaults)===null||n===void 0?void 0:n.map(i=>Object.assign({$typeName:"google.protobuf.FieldOptions.EditionDefault"},i)))!==null&&r!==void 0?r:[],uninterpretedOption:[]}))}function p0(e){return Object.assign(Object.create({visibility:0}),{$typeName:"google.protobuf.EnumDescriptorProto",name:e.name,reservedName:[],reservedRange:[],value:e.value.map(n=>Object.assign({$typeName:"google.protobuf.EnumValueDescriptorProto"},n))})}function Is(e,t,...n){return n.reduce((r,s)=>r.nestedMessages[s],e.messages[t])}const Jx=Yx({name:"google/protobuf/descriptor.proto",package:"google.protobuf",messageType:[{name:"FileDescriptorSet",field:[{name:"file",number:1,type:11,label:3,typeName:".google.protobuf.FileDescriptorProto"}],extensionRange:[{start:536e6,end:536000001}]},{name:"FileDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"package",number:2,type:9,label:1},{name:"dependency",number:3,type:9,label:3},{name:"public_dependency",number:10,type:5,label:3},{name:"weak_dependency",number:11,type:5,label:3},{name:"option_dependency",number:15,type:9,label:3},{name:"message_type",number:4,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:5,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"service",number:6,type:11,label:3,typeName:".google.protobuf.ServiceDescriptorProto"},{name:"extension",number:7,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FileOptions"},{name:"source_code_info",number:9,type:11,label:1,typeName:".google.protobuf.SourceCodeInfo"},{name:"syntax",number:12,type:9,label:1},{name:"edition",number:14,type:14,label:1,typeName:".google.protobuf.Edition"}]},{name:"DescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"field",number:2,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"extension",number:6,type:11,label:3,typeName:".google.protobuf.FieldDescriptorProto"},{name:"nested_type",number:3,type:11,label:3,typeName:".google.protobuf.DescriptorProto"},{name:"enum_type",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto"},{name:"extension_range",number:5,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ExtensionRange"},{name:"oneof_decl",number:8,type:11,label:3,typeName:".google.protobuf.OneofDescriptorProto"},{name:"options",number:7,type:11,label:1,typeName:".google.protobuf.MessageOptions"},{name:"reserved_range",number:9,type:11,label:3,typeName:".google.protobuf.DescriptorProto.ReservedRange"},{name:"reserved_name",number:10,type:9,label:3},{name:"visibility",number:11,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"ExtensionRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ExtensionRangeOptions"}]},{name:"ReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"ExtensionRangeOptions",field:[{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"},{name:"declaration",number:2,type:11,label:3,typeName:".google.protobuf.ExtensionRangeOptions.Declaration",options:{retention:2}},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"verification",number:3,type:14,label:1,typeName:".google.protobuf.ExtensionRangeOptions.VerificationState",defaultValue:"UNVERIFIED",options:{retention:2}}],nestedType:[{name:"Declaration",field:[{name:"number",number:1,type:5,label:1},{name:"full_name",number:2,type:9,label:1},{name:"type",number:3,type:9,label:1},{name:"reserved",number:5,type:8,label:1},{name:"repeated",number:6,type:8,label:1}]}],enumType:[{name:"VerificationState",value:[{name:"DECLARATION",number:0},{name:"UNVERIFIED",number:1}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:3,type:5,label:1},{name:"label",number:4,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Label"},{name:"type",number:5,type:14,label:1,typeName:".google.protobuf.FieldDescriptorProto.Type"},{name:"type_name",number:6,type:9,label:1},{name:"extendee",number:2,type:9,label:1},{name:"default_value",number:7,type:9,label:1},{name:"oneof_index",number:9,type:5,label:1},{name:"json_name",number:10,type:9,label:1},{name:"options",number:8,type:11,label:1,typeName:".google.protobuf.FieldOptions"},{name:"proto3_optional",number:17,type:8,label:1}],enumType:[{name:"Type",value:[{name:"TYPE_DOUBLE",number:1},{name:"TYPE_FLOAT",number:2},{name:"TYPE_INT64",number:3},{name:"TYPE_UINT64",number:4},{name:"TYPE_INT32",number:5},{name:"TYPE_FIXED64",number:6},{name:"TYPE_FIXED32",number:7},{name:"TYPE_BOOL",number:8},{name:"TYPE_STRING",number:9},{name:"TYPE_GROUP",number:10},{name:"TYPE_MESSAGE",number:11},{name:"TYPE_BYTES",number:12},{name:"TYPE_UINT32",number:13},{name:"TYPE_ENUM",number:14},{name:"TYPE_SFIXED32",number:15},{name:"TYPE_SFIXED64",number:16},{name:"TYPE_SINT32",number:17},{name:"TYPE_SINT64",number:18}]},{name:"Label",value:[{name:"LABEL_OPTIONAL",number:1},{name:"LABEL_REPEATED",number:3},{name:"LABEL_REQUIRED",number:2}]}]},{name:"OneofDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"options",number:2,type:11,label:1,typeName:".google.protobuf.OneofOptions"}]},{name:"EnumDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"value",number:2,type:11,label:3,typeName:".google.protobuf.EnumValueDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumOptions"},{name:"reserved_range",number:4,type:11,label:3,typeName:".google.protobuf.EnumDescriptorProto.EnumReservedRange"},{name:"reserved_name",number:5,type:9,label:3},{name:"visibility",number:6,type:14,label:1,typeName:".google.protobuf.SymbolVisibility"}],nestedType:[{name:"EnumReservedRange",field:[{name:"start",number:1,type:5,label:1},{name:"end",number:2,type:5,label:1}]}]},{name:"EnumValueDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"number",number:2,type:5,label:1},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.EnumValueOptions"}]},{name:"ServiceDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"method",number:2,type:11,label:3,typeName:".google.protobuf.MethodDescriptorProto"},{name:"options",number:3,type:11,label:1,typeName:".google.protobuf.ServiceOptions"}]},{name:"MethodDescriptorProto",field:[{name:"name",number:1,type:9,label:1},{name:"input_type",number:2,type:9,label:1},{name:"output_type",number:3,type:9,label:1},{name:"options",number:4,type:11,label:1,typeName:".google.protobuf.MethodOptions"},{name:"client_streaming",number:5,type:8,label:1,defaultValue:"false"},{name:"server_streaming",number:6,type:8,label:1,defaultValue:"false"}]},{name:"FileOptions",field:[{name:"java_package",number:1,type:9,label:1},{name:"java_outer_classname",number:8,type:9,label:1},{name:"java_multiple_files",number:10,type:8,label:1,defaultValue:"false"},{name:"java_generate_equals_and_hash",number:20,type:8,label:1,options:{deprecated:!0}},{name:"java_string_check_utf8",number:27,type:8,label:1,defaultValue:"false"},{name:"optimize_for",number:9,type:14,label:1,typeName:".google.protobuf.FileOptions.OptimizeMode",defaultValue:"SPEED"},{name:"go_package",number:11,type:9,label:1},{name:"cc_generic_services",number:16,type:8,label:1,defaultValue:"false"},{name:"java_generic_services",number:17,type:8,label:1,defaultValue:"false"},{name:"py_generic_services",number:18,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:23,type:8,label:1,defaultValue:"false"},{name:"cc_enable_arenas",number:31,type:8,label:1,defaultValue:"true"},{name:"objc_class_prefix",number:36,type:9,label:1},{name:"csharp_namespace",number:37,type:9,label:1},{name:"swift_prefix",number:39,type:9,label:1},{name:"php_class_prefix",number:40,type:9,label:1},{name:"php_namespace",number:41,type:9,label:1},{name:"php_metadata_namespace",number:44,type:9,label:1},{name:"ruby_package",number:45,type:9,label:1},{name:"features",number:50,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"OptimizeMode",value:[{name:"SPEED",number:1},{name:"CODE_SIZE",number:2},{name:"LITE_RUNTIME",number:3}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"MessageOptions",field:[{name:"message_set_wire_format",number:1,type:8,label:1,defaultValue:"false"},{name:"no_standard_descriptor_accessor",number:2,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"map_entry",number:7,type:8,label:1},{name:"deprecated_legacy_json_field_conflicts",number:11,type:8,label:1,options:{deprecated:!0}},{name:"features",number:12,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"FieldOptions",field:[{name:"ctype",number:1,type:14,label:1,typeName:".google.protobuf.FieldOptions.CType",defaultValue:"STRING"},{name:"packed",number:2,type:8,label:1},{name:"jstype",number:6,type:14,label:1,typeName:".google.protobuf.FieldOptions.JSType",defaultValue:"JS_NORMAL"},{name:"lazy",number:5,type:8,label:1,defaultValue:"false"},{name:"unverified_lazy",number:15,type:8,label:1,defaultValue:"false"},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"weak",number:10,type:8,label:1,defaultValue:"false",options:{deprecated:!0}},{name:"debug_redact",number:16,type:8,label:1,defaultValue:"false"},{name:"retention",number:17,type:14,label:1,typeName:".google.protobuf.FieldOptions.OptionRetention"},{name:"targets",number:19,type:14,label:3,typeName:".google.protobuf.FieldOptions.OptionTargetType"},{name:"edition_defaults",number:20,type:11,label:3,typeName:".google.protobuf.FieldOptions.EditionDefault"},{name:"features",number:21,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"feature_support",number:22,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],nestedType:[{name:"EditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"value",number:2,type:9,label:1}]},{name:"FeatureSupport",field:[{name:"edition_introduced",number:1,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"edition_deprecated",number:2,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"deprecation_warning",number:3,type:9,label:1},{name:"edition_removed",number:4,type:14,label:1,typeName:".google.protobuf.Edition"}]}],enumType:[{name:"CType",value:[{name:"STRING",number:0},{name:"CORD",number:1},{name:"STRING_PIECE",number:2}]},{name:"JSType",value:[{name:"JS_NORMAL",number:0},{name:"JS_STRING",number:1},{name:"JS_NUMBER",number:2}]},{name:"OptionRetention",value:[{name:"RETENTION_UNKNOWN",number:0},{name:"RETENTION_RUNTIME",number:1},{name:"RETENTION_SOURCE",number:2}]},{name:"OptionTargetType",value:[{name:"TARGET_TYPE_UNKNOWN",number:0},{name:"TARGET_TYPE_FILE",number:1},{name:"TARGET_TYPE_EXTENSION_RANGE",number:2},{name:"TARGET_TYPE_MESSAGE",number:3},{name:"TARGET_TYPE_FIELD",number:4},{name:"TARGET_TYPE_ONEOF",number:5},{name:"TARGET_TYPE_ENUM",number:6},{name:"TARGET_TYPE_ENUM_ENTRY",number:7},{name:"TARGET_TYPE_SERVICE",number:8},{name:"TARGET_TYPE_METHOD",number:9}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"OneofOptions",field:[{name:"features",number:1,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumOptions",field:[{name:"allow_alias",number:2,type:8,label:1},{name:"deprecated",number:3,type:8,label:1,defaultValue:"false"},{name:"deprecated_legacy_json_field_conflicts",number:6,type:8,label:1,options:{deprecated:!0}},{name:"features",number:7,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"EnumValueOptions",field:[{name:"deprecated",number:1,type:8,label:1,defaultValue:"false"},{name:"features",number:2,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"debug_redact",number:3,type:8,label:1,defaultValue:"false"},{name:"feature_support",number:4,type:11,label:1,typeName:".google.protobuf.FieldOptions.FeatureSupport"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"ServiceOptions",field:[{name:"features",number:34,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],extensionRange:[{start:1e3,end:536870912}]},{name:"MethodOptions",field:[{name:"deprecated",number:33,type:8,label:1,defaultValue:"false"},{name:"idempotency_level",number:34,type:14,label:1,typeName:".google.protobuf.MethodOptions.IdempotencyLevel",defaultValue:"IDEMPOTENCY_UNKNOWN"},{name:"features",number:35,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"uninterpreted_option",number:999,type:11,label:3,typeName:".google.protobuf.UninterpretedOption"}],enumType:[{name:"IdempotencyLevel",value:[{name:"IDEMPOTENCY_UNKNOWN",number:0},{name:"NO_SIDE_EFFECTS",number:1},{name:"IDEMPOTENT",number:2}]}],extensionRange:[{start:1e3,end:536870912}]},{name:"UninterpretedOption",field:[{name:"name",number:2,type:11,label:3,typeName:".google.protobuf.UninterpretedOption.NamePart"},{name:"identifier_value",number:3,type:9,label:1},{name:"positive_int_value",number:4,type:4,label:1},{name:"negative_int_value",number:5,type:3,label:1},{name:"double_value",number:6,type:1,label:1},{name:"string_value",number:7,type:12,label:1},{name:"aggregate_value",number:8,type:9,label:1}],nestedType:[{name:"NamePart",field:[{name:"name_part",number:1,type:9,label:2},{name:"is_extension",number:2,type:8,label:2}]}]},{name:"FeatureSet",field:[{name:"field_presence",number:1,type:14,label:1,typeName:".google.protobuf.FeatureSet.FieldPresence",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPLICIT",edition:900},{value:"IMPLICIT",edition:999},{value:"EXPLICIT",edition:1e3}]}},{name:"enum_type",number:2,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnumType",options:{retention:1,targets:[6,1],editionDefaults:[{value:"CLOSED",edition:900},{value:"OPEN",edition:999}]}},{name:"repeated_field_encoding",number:3,type:14,label:1,typeName:".google.protobuf.FeatureSet.RepeatedFieldEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"EXPANDED",edition:900},{value:"PACKED",edition:999}]}},{name:"utf8_validation",number:4,type:14,label:1,typeName:".google.protobuf.FeatureSet.Utf8Validation",options:{retention:1,targets:[4,1],editionDefaults:[{value:"NONE",edition:900},{value:"VERIFY",edition:999}]}},{name:"message_encoding",number:5,type:14,label:1,typeName:".google.protobuf.FeatureSet.MessageEncoding",options:{retention:1,targets:[4,1],editionDefaults:[{value:"LENGTH_PREFIXED",edition:900}]}},{name:"json_format",number:6,type:14,label:1,typeName:".google.protobuf.FeatureSet.JsonFormat",options:{retention:1,targets:[3,6,1],editionDefaults:[{value:"LEGACY_BEST_EFFORT",edition:900},{value:"ALLOW",edition:999}]}},{name:"enforce_naming_style",number:7,type:14,label:1,typeName:".google.protobuf.FeatureSet.EnforceNamingStyle",options:{retention:2,targets:[1,2,3,4,5,6,7,8,9],editionDefaults:[{value:"STYLE_LEGACY",edition:900},{value:"STYLE2024",edition:1001}]}},{name:"default_symbol_visibility",number:8,type:14,label:1,typeName:".google.protobuf.FeatureSet.VisibilityFeature.DefaultSymbolVisibility",options:{retention:2,targets:[1],editionDefaults:[{value:"EXPORT_ALL",edition:900},{value:"EXPORT_TOP_LEVEL",edition:1001}]}}],nestedType:[{name:"VisibilityFeature",enumType:[{name:"DefaultSymbolVisibility",value:[{name:"DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",number:0},{name:"EXPORT_ALL",number:1},{name:"EXPORT_TOP_LEVEL",number:2},{name:"LOCAL_ALL",number:3},{name:"STRICT",number:4}]}]}],enumType:[{name:"FieldPresence",value:[{name:"FIELD_PRESENCE_UNKNOWN",number:0},{name:"EXPLICIT",number:1},{name:"IMPLICIT",number:2},{name:"LEGACY_REQUIRED",number:3}]},{name:"EnumType",value:[{name:"ENUM_TYPE_UNKNOWN",number:0},{name:"OPEN",number:1},{name:"CLOSED",number:2}]},{name:"RepeatedFieldEncoding",value:[{name:"REPEATED_FIELD_ENCODING_UNKNOWN",number:0},{name:"PACKED",number:1},{name:"EXPANDED",number:2}]},{name:"Utf8Validation",value:[{name:"UTF8_VALIDATION_UNKNOWN",number:0},{name:"VERIFY",number:2},{name:"NONE",number:3}]},{name:"MessageEncoding",value:[{name:"MESSAGE_ENCODING_UNKNOWN",number:0},{name:"LENGTH_PREFIXED",number:1},{name:"DELIMITED",number:2}]},{name:"JsonFormat",value:[{name:"JSON_FORMAT_UNKNOWN",number:0},{name:"ALLOW",number:1},{name:"LEGACY_BEST_EFFORT",number:2}]},{name:"EnforceNamingStyle",value:[{name:"ENFORCE_NAMING_STYLE_UNKNOWN",number:0},{name:"STYLE2024",number:1},{name:"STYLE_LEGACY",number:2}]}],extensionRange:[{start:1e3,end:9995},{start:9995,end:1e4},{start:1e4,end:10001}]},{name:"FeatureSetDefaults",field:[{name:"defaults",number:1,type:11,label:3,typeName:".google.protobuf.FeatureSetDefaults.FeatureSetEditionDefault"},{name:"minimum_edition",number:4,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"maximum_edition",number:5,type:14,label:1,typeName:".google.protobuf.Edition"}],nestedType:[{name:"FeatureSetEditionDefault",field:[{name:"edition",number:3,type:14,label:1,typeName:".google.protobuf.Edition"},{name:"overridable_features",number:4,type:11,label:1,typeName:".google.protobuf.FeatureSet"},{name:"fixed_features",number:5,type:11,label:1,typeName:".google.protobuf.FeatureSet"}]}]},{name:"SourceCodeInfo",field:[{name:"location",number:1,type:11,label:3,typeName:".google.protobuf.SourceCodeInfo.Location"}],nestedType:[{name:"Location",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"span",number:2,type:5,label:3,options:{packed:!0}},{name:"leading_comments",number:3,type:9,label:1},{name:"trailing_comments",number:4,type:9,label:1},{name:"leading_detached_comments",number:6,type:9,label:3}]}],extensionRange:[{start:536e6,end:536000001}]},{name:"GeneratedCodeInfo",field:[{name:"annotation",number:1,type:11,label:3,typeName:".google.protobuf.GeneratedCodeInfo.Annotation"}],nestedType:[{name:"Annotation",field:[{name:"path",number:1,type:5,label:3,options:{packed:!0}},{name:"source_file",number:2,type:9,label:1},{name:"begin",number:3,type:5,label:1},{name:"end",number:4,type:5,label:1},{name:"semantic",number:5,type:14,label:1,typeName:".google.protobuf.GeneratedCodeInfo.Annotation.Semantic"}],enumType:[{name:"Semantic",value:[{name:"NONE",number:0},{name:"SET",number:1},{name:"ALIAS",number:2}]}]}]}],enumType:[{name:"Edition",value:[{name:"EDITION_UNKNOWN",number:0},{name:"EDITION_LEGACY",number:900},{name:"EDITION_PROTO2",number:998},{name:"EDITION_PROTO3",number:999},{name:"EDITION_2023",number:1e3},{name:"EDITION_2024",number:1001},{name:"EDITION_UNSTABLE",number:9999},{name:"EDITION_1_TEST_ONLY",number:1},{name:"EDITION_2_TEST_ONLY",number:2},{name:"EDITION_99997_TEST_ONLY",number:99997},{name:"EDITION_99998_TEST_ONLY",number:99998},{name:"EDITION_99999_TEST_ONLY",number:99999},{name:"EDITION_MAX",number:2147483647}]},{name:"SymbolVisibility",value:[{name:"VISIBILITY_UNSET",number:0},{name:"VISIBILITY_LOCAL",number:1},{name:"VISIBILITY_EXPORT",number:2}]}]}),Qx=Is(Jx,1);var Hl;(function(e){e[e.DECLARATION=0]="DECLARATION",e[e.UNVERIFIED=1]="UNVERIFIED"})(Hl||(Hl={}));var Xl;(function(e){e[e.DOUBLE=1]="DOUBLE",e[e.FLOAT=2]="FLOAT",e[e.INT64=3]="INT64",e[e.UINT64=4]="UINT64",e[e.INT32=5]="INT32",e[e.FIXED64=6]="FIXED64",e[e.FIXED32=7]="FIXED32",e[e.BOOL=8]="BOOL",e[e.STRING=9]="STRING",e[e.GROUP=10]="GROUP",e[e.MESSAGE=11]="MESSAGE",e[e.BYTES=12]="BYTES",e[e.UINT32=13]="UINT32",e[e.ENUM=14]="ENUM",e[e.SFIXED32=15]="SFIXED32",e[e.SFIXED64=16]="SFIXED64",e[e.SINT32=17]="SINT32",e[e.SINT64=18]="SINT64"})(Xl||(Xl={}));var Jl;(function(e){e[e.OPTIONAL=1]="OPTIONAL",e[e.REPEATED=3]="REPEATED",e[e.REQUIRED=2]="REQUIRED"})(Jl||(Jl={}));var Ql;(function(e){e[e.SPEED=1]="SPEED",e[e.CODE_SIZE=2]="CODE_SIZE",e[e.LITE_RUNTIME=3]="LITE_RUNTIME"})(Ql||(Ql={}));var ed;(function(e){e[e.STRING=0]="STRING",e[e.CORD=1]="CORD",e[e.STRING_PIECE=2]="STRING_PIECE"})(ed||(ed={}));var td;(function(e){e[e.JS_NORMAL=0]="JS_NORMAL",e[e.JS_STRING=1]="JS_STRING",e[e.JS_NUMBER=2]="JS_NUMBER"})(td||(td={}));var nd;(function(e){e[e.RETENTION_UNKNOWN=0]="RETENTION_UNKNOWN",e[e.RETENTION_RUNTIME=1]="RETENTION_RUNTIME",e[e.RETENTION_SOURCE=2]="RETENTION_SOURCE"})(nd||(nd={}));var rd;(function(e){e[e.TARGET_TYPE_UNKNOWN=0]="TARGET_TYPE_UNKNOWN",e[e.TARGET_TYPE_FILE=1]="TARGET_TYPE_FILE",e[e.TARGET_TYPE_EXTENSION_RANGE=2]="TARGET_TYPE_EXTENSION_RANGE",e[e.TARGET_TYPE_MESSAGE=3]="TARGET_TYPE_MESSAGE",e[e.TARGET_TYPE_FIELD=4]="TARGET_TYPE_FIELD",e[e.TARGET_TYPE_ONEOF=5]="TARGET_TYPE_ONEOF",e[e.TARGET_TYPE_ENUM=6]="TARGET_TYPE_ENUM",e[e.TARGET_TYPE_ENUM_ENTRY=7]="TARGET_TYPE_ENUM_ENTRY",e[e.TARGET_TYPE_SERVICE=8]="TARGET_TYPE_SERVICE",e[e.TARGET_TYPE_METHOD=9]="TARGET_TYPE_METHOD"})(rd||(rd={}));var Cu;(function(e){e[e.IDEMPOTENCY_UNKNOWN=0]="IDEMPOTENCY_UNKNOWN",e[e.NO_SIDE_EFFECTS=1]="NO_SIDE_EFFECTS",e[e.IDEMPOTENT=2]="IDEMPOTENT"})(Cu||(Cu={}));var sd;(function(e){e[e.DEFAULT_SYMBOL_VISIBILITY_UNKNOWN=0]="DEFAULT_SYMBOL_VISIBILITY_UNKNOWN",e[e.EXPORT_ALL=1]="EXPORT_ALL",e[e.EXPORT_TOP_LEVEL=2]="EXPORT_TOP_LEVEL",e[e.LOCAL_ALL=3]="LOCAL_ALL",e[e.STRICT=4]="STRICT"})(sd||(sd={}));var id;(function(e){e[e.FIELD_PRESENCE_UNKNOWN=0]="FIELD_PRESENCE_UNKNOWN",e[e.EXPLICIT=1]="EXPLICIT",e[e.IMPLICIT=2]="IMPLICIT",e[e.LEGACY_REQUIRED=3]="LEGACY_REQUIRED"})(id||(id={}));var od;(function(e){e[e.ENUM_TYPE_UNKNOWN=0]="ENUM_TYPE_UNKNOWN",e[e.OPEN=1]="OPEN",e[e.CLOSED=2]="CLOSED"})(od||(od={}));var ud;(function(e){e[e.REPEATED_FIELD_ENCODING_UNKNOWN=0]="REPEATED_FIELD_ENCODING_UNKNOWN",e[e.PACKED=1]="PACKED",e[e.EXPANDED=2]="EXPANDED"})(ud||(ud={}));var ad;(function(e){e[e.UTF8_VALIDATION_UNKNOWN=0]="UTF8_VALIDATION_UNKNOWN",e[e.VERIFY=2]="VERIFY",e[e.NONE=3]="NONE"})(ad||(ad={}));var cd;(function(e){e[e.MESSAGE_ENCODING_UNKNOWN=0]="MESSAGE_ENCODING_UNKNOWN",e[e.LENGTH_PREFIXED=1]="LENGTH_PREFIXED",e[e.DELIMITED=2]="DELIMITED"})(cd||(cd={}));var ld;(function(e){e[e.JSON_FORMAT_UNKNOWN=0]="JSON_FORMAT_UNKNOWN",e[e.ALLOW=1]="ALLOW",e[e.LEGACY_BEST_EFFORT=2]="LEGACY_BEST_EFFORT"})(ld||(ld={}));var dd;(function(e){e[e.ENFORCE_NAMING_STYLE_UNKNOWN=0]="ENFORCE_NAMING_STYLE_UNKNOWN",e[e.STYLE2024=1]="STYLE2024",e[e.STYLE_LEGACY=2]="STYLE_LEGACY"})(dd||(dd={}));var fd;(function(e){e[e.NONE=0]="NONE",e[e.SET=1]="SET",e[e.ALIAS=2]="ALIAS"})(fd||(fd={}));var hd;(function(e){e[e.EDITION_UNKNOWN=0]="EDITION_UNKNOWN",e[e.EDITION_LEGACY=900]="EDITION_LEGACY",e[e.EDITION_PROTO2=998]="EDITION_PROTO2",e[e.EDITION_PROTO3=999]="EDITION_PROTO3",e[e.EDITION_2023=1e3]="EDITION_2023",e[e.EDITION_2024=1001]="EDITION_2024",e[e.EDITION_UNSTABLE=9999]="EDITION_UNSTABLE",e[e.EDITION_1_TEST_ONLY=1]="EDITION_1_TEST_ONLY",e[e.EDITION_2_TEST_ONLY=2]="EDITION_2_TEST_ONLY",e[e.EDITION_99997_TEST_ONLY=99997]="EDITION_99997_TEST_ONLY",e[e.EDITION_99998_TEST_ONLY=99998]="EDITION_99998_TEST_ONLY",e[e.EDITION_99999_TEST_ONLY=99999]="EDITION_99999_TEST_ONLY",e[e.EDITION_MAX=2147483647]="EDITION_MAX"})(hd||(hd={}));var pd;(function(e){e[e.VISIBILITY_UNSET=0]="VISIBILITY_UNSET",e[e.VISIBILITY_LOCAL=1]="VISIBILITY_LOCAL",e[e.VISIBILITY_EXPORT=2]="VISIBILITY_EXPORT"})(pd||(pd={}));const md={readUnknownFields:!0};function e3(e){return e?Object.assign(Object.assign({},md),e):md}function Ki(e,t,n){const r=Ot(e,void 0,!1);return m0(r,new Da(t),e3(n),!1,t.byteLength),r.message}function m0(e,t,n,r,s){var i;const o=r?t.len:t.pos+s;let u,a;const c=(i=e.getUnknown())!==null&&i!==void 0?i:[];for(;t.pos<o&&([u,a]=t.tag(),!(r&&a==ge.EndGroup));){const l=e.findNumber(u);if(!l){const d=t.skip(a,u);n.readUnknownFields&&c.push({no:u,wireType:a,data:d});continue}g0(e,t,l,a,n)}if(r&&(a!=ge.EndGroup||u!==s))throw new Error("invalid end group tag");c.length>0&&e.setUnknown(c)}function g0(e,t,n,r,s){var i;switch(n.fieldKind){case"scalar":e.set(n,mr(t,n.scalar));break;case"enum":const o=mr(t,I.INT32);if(n.enum.open)e.set(n,o);else if(n.enum.values.some(a=>a.number===o))e.set(n,o);else if(s.readUnknownFields){const a=[];xu(o,a);const c=(i=e.getUnknown())!==null&&i!==void 0?i:[];c.push({no:n.number,wireType:r,data:new Uint8Array(a)}),e.setUnknown(c)}break;case"message":e.set(n,za(t,s,n,e.get(n)));break;case"list":n3(t,r,e.get(n),s);break;case"map":t3(t,e.get(n),s);break}}function t3(e,t,n){const r=t.field();let s,i;const o=e.uint32(),u=e.pos+o;for(;e.pos<u;){const[a]=e.tag();switch(a){case 1:s=mr(e,r.mapKey);break;case 2:switch(r.mapKind){case"scalar":i=mr(e,r.scalar);break;case"enum":i=e.int32();break;case"message":i=za(e,n,r);break}break}}if(s===void 0&&(s=fr(r.mapKey,!1)),i===void 0)switch(r.mapKind){case"scalar":i=fr(r.scalar,!1);break;case"enum":i=r.enum.values[0].number;break;case"message":i=Ot(r.message,void 0,!1);break}t.set(s,i)}function n3(e,t,n,r){var s;const i=n.field();if(i.listKind==="message"){n.add(za(e,r,i));return}const o=(s=i.scalar)!==null&&s!==void 0?s:I.INT32;if(!(t==ge.LengthDelimited&&o!=I.STRING&&o!=I.BYTES)){n.add(mr(e,o));return}const a=e.uint32()+e.pos;for(;e.pos<a;)n.add(mr(e,o))}function za(e,t,n,r){const s=n.delimitedEncoding,i=r??Ot(n.message,void 0,!1);return m0(i,e,t,s,s?n.number:e.uint32()),i}function mr(e,t){switch(t){case I.STRING:return e.string();case I.BOOL:return e.bool();case I.DOUBLE:return e.double();case I.FLOAT:return e.float();case I.INT32:return e.int32();case I.INT64:return e.int64();case I.UINT64:return e.uint64();case I.FIXED64:return e.fixed64();case I.BYTES:return e.bytes();case I.FIXED32:return e.fixed32();case I.SFIXED32:return e.sfixed32();case I.SFIXED64:return e.sfixed64();case I.SINT64:return e.sint64();case I.UINT32:return e.uint32();case I.SINT32:return e.sint32()}}function Er(e,t){var n;const r=Ki(Qx,$a(e));return r.messageType.forEach(Va),r.dependency=(n=t?.map(i=>i.proto.name))!==null&&n!==void 0?n:[],c0(r,i=>t?.find(o=>o.proto.name===i)).getFile(r.name)}const r3=Er("Ch9nb29nbGUvcHJvdG9idWYvdGltZXN0YW1wLnByb3RvEg9nb29nbGUucHJvdG9idWYiKwoJVGltZXN0YW1wEg8KB3NlY29uZHMYASABKAMSDQoFbmFub3MYAiABKAVChQEKE2NvbS5nb29nbGUucHJvdG9idWZCDlRpbWVzdGFtcFByb3RvUAFaMmdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3RpbWVzdGFtcHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),s3=Er("Chlnb29nbGUvcHJvdG9idWYvYW55LnByb3RvEg9nb29nbGUucHJvdG9idWYiJgoDQW55EhAKCHR5cGVfdXJsGAEgASgJEg0KBXZhbHVlGAIgASgMQnYKE2NvbS5nb29nbGUucHJvdG9idWZCCEFueVByb3RvUAFaLGdvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL2FueXBiogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),i3=Is(s3,0),o3=3,gd={writeUnknownFields:!0};function u3(e){return e?Object.assign(Object.assign({},gd),e):gd}function b0(e,t,n){return Ci(new Hh,u3(n),Ot(e,t)).finish()}function Ci(e,t,n){var r;for(const s of n.sortedFields){if(!n.isSet(s)){if(s.presence==o3)throw new Error(`cannot encode ${s} to binary: required field not set`);continue}y0(e,t,n,s)}if(t.writeUnknownFields)for(const{no:s,wireType:i,data:o}of(r=n.getUnknown())!==null&&r!==void 0?r:[])e.tag(s,i).raw(o);return e}function y0(e,t,n,r){var s;switch(r.fieldKind){case"scalar":case"enum":Ii(e,n.desc.typeName,r.name,(s=r.scalar)!==null&&s!==void 0?s:I.INT32,r.number,n.get(r));break;case"list":a3(e,t,r,n.get(r));break;case"message":v0(e,t,r,n.get(r));break;case"map":for(const[i,o]of n.get(r))c3(e,t,r,i,o);break}}function Ii(e,t,n,r,s,i){w0(e.tag(s,l3(r)),t,n,r,i)}function v0(e,t,n,r){n.delimitedEncoding?Ci(e.tag(n.number,ge.StartGroup),t,r).tag(n.number,ge.EndGroup):Ci(e.tag(n.number,ge.LengthDelimited).fork(),t,r).join()}function a3(e,t,n,r){var s;if(n.listKind=="message"){for(const o of r)v0(e,t,n,o);return}const i=(s=n.scalar)!==null&&s!==void 0?s:I.INT32;if(n.packed){if(!r.size)return;e.tag(n.number,ge.LengthDelimited).fork();for(const o of r)w0(e,n.parent.typeName,n.name,i,o);e.join();return}for(const o of r)Ii(e,n.parent.typeName,n.name,i,n.number,o)}function c3(e,t,n,r,s){var i;switch(e.tag(n.number,ge.LengthDelimited).fork(),Ii(e,n.parent.typeName,n.name,n.mapKey,1,r),n.mapKind){case"scalar":case"enum":Ii(e,n.parent.typeName,n.name,(i=n.scalar)!==null&&i!==void 0?i:I.INT32,2,s);break;case"message":Ci(e.tag(2,ge.LengthDelimited).fork(),t,s).join();break}e.join()}function w0(e,t,n,r,s){try{switch(r){case I.STRING:e.string(s);break;case I.BOOL:e.bool(s);break;case I.DOUBLE:e.double(s);break;case I.FLOAT:e.float(s);break;case I.INT32:e.int32(s);break;case I.INT64:e.int64(s);break;case I.UINT64:e.uint64(s);break;case I.FIXED64:e.fixed64(s);break;case I.BYTES:e.bytes(s);break;case I.FIXED32:e.fixed32(s);break;case I.SFIXED32:e.sfixed32(s);break;case I.SFIXED64:e.sfixed64(s);break;case I.SINT64:e.sint64(s);break;case I.UINT32:e.uint32(s);break;case I.SINT32:e.sint32(s);break}}catch(i){throw i instanceof Error?new Error(`cannot encode field ${t}.${n} to binary: ${i.message}`):i}}function l3(e){switch(e){case I.BYTES:case I.STRING:return ge.LengthDelimited;case I.DOUBLE:case I.FIXED64:case I.SFIXED64:return ge.Bit64;case I.FIXED32:case I.SFIXED32:case I.FLOAT:return ge.Bit32;default:return ge.Varint}}function d3(e,t,n){let r=!1;return n||(n=Tt(i3),r=!0),n.value=b0(e,t),n.typeUrl=p3(t.$typeName),r?n:void 0}function f3(e,t){if(e.typeUrl==="")return!1;const n=typeof t=="string"?t:t.typeName,r=x0(e.typeUrl);return n===r}function h3(e,t){if(e.typeUrl==="")return;const n=t.kind=="message"?t:t.getMessage(x0(e.typeUrl));if(!(!n||!f3(e,n)))return Ki(n,e.value)}function p3(e){return`type.googleapis.com/${e}`}function x0(e){const t=e.lastIndexOf("/"),n=t>=0?e.substring(t+1):e;if(!n.length)throw new Error(`invalid type url: ${e}`);return n}const Ka=Er("Chxnb29nbGUvcHJvdG9idWYvc3RydWN0LnByb3RvEg9nb29nbGUucHJvdG9idWYihAEKBlN0cnVjdBIzCgZmaWVsZHMYASADKAsyIy5nb29nbGUucHJvdG9idWYuU3RydWN0LkZpZWxkc0VudHJ5GkUKC0ZpZWxkc0VudHJ5EgsKA2tleRgBIAEoCRIlCgV2YWx1ZRgCIAEoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZToCOAEi6gEKBVZhbHVlEjAKCm51bGxfdmFsdWUYASABKA4yGi5nb29nbGUucHJvdG9idWYuTnVsbFZhbHVlSAASFgoMbnVtYmVyX3ZhbHVlGAIgASgBSAASFgoMc3RyaW5nX3ZhbHVlGAMgASgJSAASFAoKYm9vbF92YWx1ZRgEIAEoCEgAEi8KDHN0cnVjdF92YWx1ZRgFIAEoCzIXLmdvb2dsZS5wcm90b2J1Zi5TdHJ1Y3RIABIwCgpsaXN0X3ZhbHVlGAYgASgLMhouZ29vZ2xlLnByb3RvYnVmLkxpc3RWYWx1ZUgAQgYKBGtpbmQiMwoJTGlzdFZhbHVlEiYKBnZhbHVlcxgBIAMoCzIWLmdvb2dsZS5wcm90b2J1Zi5WYWx1ZSobCglOdWxsVmFsdWUSDgoKTlVMTF9WQUxVRRAAQn8KE2NvbS5nb29nbGUucHJvdG9idWZCC1N0cnVjdFByb3RvUAFaL2dvb2dsZS5nb2xhbmcub3JnL3Byb3RvYnVmL3R5cGVzL2tub3duL3N0cnVjdHBi+AEBogIDR1BCqgIeR29vZ2xlLlByb3RvYnVmLldlbGxLbm93blR5cGVzYgZwcm90bzM"),m3=Is(Ka,0),S0=Is(Ka,1),g3=Is(Ka,2);var Iu;(function(e){e[e.NULL_VALUE=0]="NULL_VALUE"})(Iu||(Iu={}));function b3(e,t){_0(t,e);const n=v3(e.$unknown,t),[r,s,i]=Wi(t);for(const o of n)g0(r,new Da(o.data),s,o.wireType,{readUnknownFields:!0});return i()}function y3(e,t,n){var r;_0(t,e);const s=((r=e.$unknown)!==null&&r!==void 0?r:[]).filter(c=>c.no!==t.number),[i,o]=Wi(t,n),u=new Hh;y0(u,{writeUnknownFields:!0},i,o);const a=new Da(u.finish());for(;a.pos<a.len;){const[c,l]=a.tag(),d=a.skip(l,c);s.push({no:c,wireType:l,data:d})}e.$unknown=s}function v3(e,t){if(e===void 0)return[];if(t.fieldKind==="enum"||t.fieldKind==="scalar"){for(let n=e.length-1;n>=0;--n)if(e[n].no==t.number)return[e[n]];return[]}return e.filter(n=>n.no===t.number)}function Wi(e,t){const n=e.typeName,r=Object.assign(Object.assign({},e),{kind:"field",parent:e.extendee,localName:n}),s=Object.assign(Object.assign({},e.extendee),{fields:[r],members:[r],oneofs:[]}),i=Tt(s,t!==void 0?{[n]:t}:void 0);return[Ot(s,i),r,()=>{const o=i[n];if(o===void 0){const u=e.message;return Cs(u)?fr(u.fields[0].scalar,u.fields[0].longAsString):Tt(u)}return o}]}function _0(e,t){if(e.extendee.typeName!=t.$typeName)throw new Error(`extension ${e.typeName} can only be applied to message ${e.extendee.typeName}`)}const w3=3,x3=2,bd={alwaysEmitImplicit:!1,enumAsInteger:!1,useProtoFieldName:!1};function S3(e){return e?Object.assign(Object.assign({},bd),e):bd}function _3(e,t,n){return As(Ot(e,t),S3(n))}function E3(e,t,n){var r;const s=_3(e,t,n);return JSON.stringify(s,null,(r=n?.prettySpaces)!==null&&r!==void 0?r:0)}function As(e,t){var n;const r=A3(e,t);if(r!==void 0)return r;const s={};for(const i of e.sortedFields){if(!e.isSet(i)){if(i.presence==w3)throw new Error(`cannot encode ${i} to JSON: required field not set`);if(!t.alwaysEmitImplicit||i.presence!==x3)continue}const o=yd(i,e.get(i),t);o!==void 0&&(s[I3(i,t)]=o)}if(t.registry){const i=new Set;for(const{no:o}of(n=e.getUnknown())!==null&&n!==void 0?n:[])if(!i.has(o)){i.add(o);const u=t.registry.getExtensionFor(e.desc,o);if(!u)continue;const a=b3(e.message,u),[c,l]=Wi(u,a),d=yd(l,c.get(l),t);d!==void 0&&(s[u.jsonName]=d)}}return s}function yd(e,t,n){switch(e.fieldKind){case"scalar":return Gi(e,t);case"message":return As(t,n);case"enum":return Wa(e.enum,t,n.enumAsInteger);case"list":return C3(t,n);case"map":return k3(t,n)}}function k3(e,t){const n=e.field(),r={};switch(n.mapKind){case"scalar":for(const[s,i]of e)r[s]=Gi(n,i);break;case"message":for(const[s,i]of e)r[s]=As(i,t);break;case"enum":for(const[s,i]of e)r[s]=Wa(n.enum,i,t.enumAsInteger);break}return t.alwaysEmitImplicit||e.size>0?r:void 0}function C3(e,t){const n=e.field(),r=[];switch(n.listKind){case"scalar":for(const s of e)r.push(Gi(n,s));break;case"enum":for(const s of e)r.push(Wa(n.enum,s,t.enumAsInteger));break;case"message":for(const s of e)r.push(As(s,t));break}return t.alwaysEmitImplicit||r.length>0?r:void 0}function Wa(e,t,n){var r;if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: expected number, got ${Fe(t)}`);if(e.typeName=="google.protobuf.NullValue")return null;if(n)return t;const s=e.value[t];return(r=s?.name)!==null&&r!==void 0?r:t}function Gi(e,t){var n,r,s,i,o,u;switch(e.scalar){case I.INT32:case I.SFIXED32:case I.SINT32:case I.FIXED32:case I.UINT32:if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: ${(n=Rn(e,t))===null||n===void 0?void 0:n.message}`);return t;case I.FLOAT:case I.DOUBLE:if(typeof t!="number")throw new Error(`cannot encode ${e} to JSON: ${(r=Rn(e,t))===null||r===void 0?void 0:r.message}`);return Number.isNaN(t)?"NaN":t===Number.POSITIVE_INFINITY?"Infinity":t===Number.NEGATIVE_INFINITY?"-Infinity":t;case I.STRING:if(typeof t!="string")throw new Error(`cannot encode ${e} to JSON: ${(s=Rn(e,t))===null||s===void 0?void 0:s.message}`);return t;case I.BOOL:if(typeof t!="boolean")throw new Error(`cannot encode ${e} to JSON: ${(i=Rn(e,t))===null||i===void 0?void 0:i.message}`);return t;case I.UINT64:case I.FIXED64:case I.INT64:case I.SFIXED64:case I.SINT64:if(typeof t!="bigint"&&typeof t!="string")throw new Error(`cannot encode ${e} to JSON: ${(o=Rn(e,t))===null||o===void 0?void 0:o.message}`);return t.toString();case I.BYTES:if(t instanceof Uint8Array)return o0(t);throw new Error(`cannot encode ${e} to JSON: ${(u=Rn(e,t))===null||u===void 0?void 0:u.message}`)}}function I3(e,t){return t.useProtoFieldName?e.name:e.jsonName}function A3(e,t){if(e.desc.typeName.startsWith("google.protobuf."))switch(e.desc.typeName){case"google.protobuf.Any":return R3(e.message,t);case"google.protobuf.Timestamp":return F3(e.message);case"google.protobuf.Duration":return T3(e.message);case"google.protobuf.FieldMask":return O3(e.message);case"google.protobuf.Struct":return E0(e.message);case"google.protobuf.Value":return Ga(e.message);case"google.protobuf.ListValue":return k0(e.message);default:if(Cs(e.desc)){const n=e.desc.fields[0];return Gi(n,e.get(n))}return}}function R3(e,t){if(e.typeUrl==="")return{};const{registry:n}=t;let r,s;if(n&&(r=h3(e,n),r&&(s=n.getMessage(r.$typeName))),!s||!r)throw new Error(`cannot encode message ${e.$typeName} to JSON: "${e.typeUrl}" is not in the type registry`);let i=As(Ot(s,r),t);return(s.typeName.startsWith("google.protobuf.")||i===null||Array.isArray(i)||typeof i!="object")&&(i={value:i}),i["@type"]=e.typeUrl,i}function T3(e){const t=Number(e.seconds),n=e.nanos;if(t>315576e6||t<-315576e6)throw new Error(`cannot encode message ${e.$typeName} to JSON: value out of range`);if(t>0&&n<0||t<0&&n>0)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos sign must match seconds sign`);let r=e.seconds.toString();if(n!==0){let s=Math.abs(n).toString();s="0".repeat(9-s.length)+s,s.substring(3)==="000000"?s=s.substring(0,3):s.substring(6)==="000"&&(s=s.substring(0,6)),r+="."+s,n<0&&t==0&&(r="-"+r)}return r+"s"}function O3(e){return e.paths.map(t=>{if(a0(hr(t))!==t)throw new Error(`cannot encode message ${e.$typeName} to JSON: lowerCamelCase of path name "${t}" is irreversible`);return hr(t)}).join(",")}function E0(e){const t={};for(const[n,r]of Object.entries(e.fields))t[n]=Ga(r);return t}function Ga(e){switch(e.kind.case){case"nullValue":return null;case"numberValue":if(!Number.isFinite(e.kind.value))throw new Error(`${e.$typeName} cannot be NaN or Infinity`);return e.kind.value;case"boolValue":return e.kind.value;case"stringValue":return e.kind.value;case"structValue":return E0(e.kind.value);case"listValue":return k0(e.kind.value);default:throw new Error(`${e.$typeName} must have a value`)}}function k0(e){return e.values.map(Ga)}function F3(e){const t=Number(e.seconds)*1e3;if(t<Date.parse("0001-01-01T00:00:00Z")||t>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot encode message ${e.$typeName} to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);if(e.nanos<0)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be negative`);if(e.nanos>999999999)throw new Error(`cannot encode message ${e.$typeName} to JSON: nanos must not be greater than 99999999`);let n="Z";if(e.nanos>0){const r=(e.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?n="."+r.substring(0,3)+"Z":r.substring(6)==="000"?n="."+r.substring(0,6)+"Z":n="."+r+"Z"}return new Date(t).toISOString().replace(".000Z",n)}const vd={ignoreUnknownFields:!1};function D3(e){return e?Object.assign(Object.assign({},vd),e):vd}function N3(e,t,n){return C0(e,z3(t,e.typeName),n)}function C0(e,t,n){const r=Ot(e);try{us(r,t,D3(n))}catch(s){throw hx(s)?new Error(`cannot decode ${s.field()} from JSON: ${s.message}`,{cause:s}):s}return r.message}const To=new WeakMap;function P3(e,t){var n;if(!To.has(e)){const r=new Map;for(const s of e.fields)r.set(s.name,s).set(s.jsonName,s);To.set(e,r)}return(n=To.get(e))===null||n===void 0?void 0:n.get(t)}function us(e,t,n){var r;if(K3(e,t,n))return;if(t==null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode ${e.desc} from JSON: ${Fe(t)}`);const s=new Map;for(const[i,o]of Object.entries(t)){const u=P3(e.desc,i);if(u){if(u.oneof){if(o===null&&u.fieldKind=="scalar")continue;const a=s.get(u.oneof);if(a!==void 0)throw new ut(u.oneof,`oneof set multiple times by ${a.name} and ${u.name}`);s.set(u.oneof,u)}wd(e,u,o,n)}else{let a;if(i.startsWith("[")&&i.endsWith("]")&&(a=(r=n.registry)===null||r===void 0?void 0:r.getExtension(i.substring(1,i.length-1)))&&a.extendee.typeName===e.desc.typeName){const[c,l,d]=Wi(a);wd(c,l,o,n),y3(e.message,a,d())}if(!a&&!n.ignoreUnknownFields)throw new Error(`cannot decode ${e.desc} from JSON: key "${i}" is unknown`)}}}function wd(e,t,n,r){switch(t.fieldKind){case"scalar":V3(e,t,n);break;case"enum":$3(e,t,n,r);break;case"message":B3(e,t,n,r);break;case"list":M3(e.get(t),n,r);break;case"map":L3(e.get(t),n,r);break}}function I0(e,t,n){if(e.scalar&&t!==null)return ja(e,t);if(e.message&&!Ai(e,t)){const r=Ot(e.message);return us(r,t,n),r}if(e.enum&&!Ai(e,t))return A0(e.enum,t,n.ignoreUnknownFields);throw new ut(e,`${e.fieldKind==="list"?"list item":"map value"} must not be null`)}function L3(e,t,n){if(t===null)return;const r=e.field();if(typeof t!="object"||Array.isArray(t))throw new ut(r,"expected object, got "+Fe(t));for(const[s,i]of Object.entries(t)){const o=U3(r.mapKey,s),u=I0(r,i,n);u!==ji&&e.set(o,u)}}function M3(e,t,n){if(t===null)return;const r=e.field();if(!Array.isArray(t))throw new ut(r,"expected Array, got "+Fe(t));for(const s of t){const i=I0(r,s,n);i!==ji&&e.add(i)}}function B3(e,t,n,r){if(Ai(t,n)){e.clear(t);return}const s=e.isSet(t)?e.get(t):Ot(t.message);us(s,n,r),e.set(t,s)}function $3(e,t,n,r){if(Ai(t,n)){e.clear(t);return}const s=A0(t.enum,n,r.ignoreUnknownFields);s!==ji&&e.set(t,s)}function V3(e,t,n){n===null?e.clear(t):e.set(t,ja(t,n))}function Ai(e,t){var n,r;return t===null&&((n=e.message)===null||n===void 0?void 0:n.typeName)!="google.protobuf.Value"&&((r=e.enum)===null||r===void 0?void 0:r.typeName)!="google.protobuf.NullValue"}const ji=Symbol();function A0(e,t,n){if(t===null)return e.values[0].number;switch(typeof t){case"number":if(Number.isInteger(t))return t;break;case"string":const r=e.values.find(s=>s.name===t);if(r!==void 0)return r.number;if(n)return ji;break}throw new Error(`cannot decode ${e} from JSON: ${Fe(t)}`)}function ja(e,t){switch(e.scalar){case I.DOUBLE:case I.FLOAT:if(t==="NaN")return NaN;if(t==="Infinity")return Number.POSITIVE_INFINITY;if(t==="-Infinity")return Number.NEGATIVE_INFINITY;if(typeof t=="number"){if(Number.isNaN(t))throw new ut(e,"unexpected NaN number");if(!Number.isFinite(t))throw new ut(e,"unexpected infinite number");break}if(typeof t=="string"){if(t===""||t.trim().length!==t.length)break;const n=Number(t);if(!Number.isFinite(n))break;return n}break;case I.INT32:case I.FIXED32:case I.SFIXED32:case I.SINT32:case I.UINT32:return R0(t);case I.BYTES:if(typeof t=="string"){if(t==="")return new Uint8Array(0);try{return $a(t)}catch(n){const r=n instanceof Error?n.message:String(n);throw new ut(e,r)}}break}return t}function U3(e,t){switch(e){case I.BOOL:switch(t){case"true":return!0;case"false":return!1}return t;case I.INT32:case I.FIXED32:case I.UINT32:case I.SFIXED32:case I.SINT32:return R0(t);default:return t}}function R0(e){if(typeof e=="string"){if(e===""||e.trim().length!==e.length)return e;const t=Number(e);return Number.isNaN(t)?e:t}return e}function z3(e,t){try{return JSON.parse(e)}catch(n){const r=n instanceof Error?n.message:String(n);throw new Error(`cannot decode message ${t} from JSON: ${r}`,{cause:n})}}function K3(e,t,n){if(!e.desc.typeName.startsWith("google.protobuf."))return!1;switch(e.desc.typeName){case"google.protobuf.Any":return W3(e.message,t,n),!0;case"google.protobuf.Timestamp":return G3(e.message,t),!0;case"google.protobuf.Duration":return j3(e.message,t),!0;case"google.protobuf.FieldMask":return Z3(e.message,t),!0;case"google.protobuf.Struct":return T0(e.message,t),!0;case"google.protobuf.Value":return Za(e.message,t),!0;case"google.protobuf.ListValue":return O0(e.message,t),!0;default:if(Cs(e.desc)){const r=e.desc.fields[0];return t===null?e.clear(r):e.set(r,ja(r,t)),!0}return!1}}function W3(e,t,n){var r;if(t===null||Array.isArray(t)||typeof t!="object")throw new Error(`cannot decode message ${e.$typeName} from JSON: expected object but got ${Fe(t)}`);if(Object.keys(t).length==0)return;const s=t["@type"];if(typeof s!="string"||s=="")throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is empty`);const i=s.includes("/")?s.substring(s.lastIndexOf("/")+1):s;if(!i.length)throw new Error(`cannot decode message ${e.$typeName} from JSON: "@type" is invalid`);const o=(r=n.registry)===null||r===void 0?void 0:r.getMessage(i);if(!o)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${s} is not in the type registry`);const u=Ot(o);if(i.startsWith("google.protobuf.")&&Object.prototype.hasOwnProperty.call(t,"value")){const a=t.value;us(u,a,n)}else{const a=Object.assign({},t);delete a["@type"],us(u,a,n)}d3(u.desc,u.message,e)}function G3(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Fe(t)}`);const n=t.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:\.([0-9]{1,9}))?(?:Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!n)throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);const r=Date.parse(n[1]+"-"+n[2]+"-"+n[3]+"T"+n[4]+":"+n[5]+":"+n[6]+(n[8]?n[8]:"Z"));if(Number.isNaN(r))throw new Error(`cannot decode message ${e.$typeName} from JSON: invalid RFC 3339 string`);if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error(`cannot decode message ${e.$typeName} from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive`);e.seconds=pe.parse(r/1e3),e.nanos=0,n[7]&&(e.nanos=parseInt("1"+n[7]+"0".repeat(9-n[7].length))-1e9)}function j3(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Fe(t)}`);const n=t.match(/^(-?[0-9]+)(?:\.([0-9]+))?s/);if(n===null)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Fe(t)}`);const r=Number(n[1]);if(r>315576e6||r<-315576e6)throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Fe(t)}`);if(e.seconds=pe.parse(r),typeof n[2]!="string")return;const s=n[2]+"0".repeat(9-n[2].length);e.nanos=parseInt(s),(r<0||Object.is(r,-0))&&(e.nanos=-e.nanos)}function Z3(e,t){if(typeof t!="string")throw new Error(`cannot decode message ${e.$typeName} from JSON: ${Fe(t)}`);t!==""&&(e.paths=t.split(",").map(n=>{if(n.includes("_"))throw new Error(`cannot decode message ${e.$typeName} from JSON: path names must be lowerCamelCase`);return a0(n)}))}function T0(e,t){if(typeof t!="object"||t==null||Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${Fe(t)}`);for(const[n,r]of Object.entries(t)){const s=Tt(S0);Za(s,r),e.fields[n]=s}}function Za(e,t){switch(typeof t){case"number":e.kind={case:"numberValue",value:t};break;case"string":e.kind={case:"stringValue",value:t};break;case"boolean":e.kind={case:"boolValue",value:t};break;case"object":if(t===null)e.kind={case:"nullValue",value:Iu.NULL_VALUE};else if(Array.isArray(t)){const n=Tt(g3);O0(n,t),e.kind={case:"listValue",value:n}}else{const n=Tt(m3);T0(n,t),e.kind={case:"structValue",value:n}}break;default:throw new Error(`cannot decode message ${e.$typeName} from JSON ${Fe(t)}`)}return e}function O0(e,t){if(!Array.isArray(t))throw new Error(`cannot decode message ${e.$typeName} from JSON ${Fe(t)}`);for(const n of t){const r=Tt(S0);Za(r,n),e.values.push(r)}}function Au(e){const t=ce[e];return typeof t!="string"?e.toString():t[0].toLowerCase()+t.substring(1).replace(/[A-Z]/g,n=>"_"+n.toLowerCase())}let Ks;function Y3(e){if(!Ks){Ks={};for(const t of Object.values(ce))typeof t!="string"&&(Ks[Au(t)]=t)}return Ks[e]}class be extends Error{constructor(t,n=ce.Unknown,r,s,i){super(q3(t,n)),this.name="ConnectError",Object.setPrototypeOf(this,new.target.prototype),this.rawMessage=t,this.code=n,this.metadata=new Headers(r??{}),this.details=s??[],this.cause=i}static from(t,n=ce.Unknown){return t instanceof be?t:t instanceof Error?t.name=="AbortError"||t.name=="TimeoutError"?new be(t.message,ce.Canceled):new be(t.message,n,void 0,void 0,t):new be(String(t),n,void 0,void 0,t)}static[Symbol.hasInstance](t){return t instanceof Error?Object.getPrototypeOf(t)===be.prototype?!0:t.name==="ConnectError"&&"code"in t&&typeof t.code=="number"&&"metadata"in t&&"details"in t&&Array.isArray(t.details)&&"rawMessage"in t&&typeof t.rawMessage=="string"&&"cause"in t:!1}findDetails(t){const n=t.kind==="message"?{getMessage:s=>s===t.typeName?t:void 0}:t,r=[];for(const s of this.details){if("desc"in s){n.getMessage(s.desc.typeName)&&r.push(Tt(s.desc,s.value));continue}const i=n.getMessage(s.type);if(i)try{r.push(Ki(i,s.value))}catch{}}return r}}function q3(e,t){return e.length?`[${Au(t)}] ${e}`:`[${Au(t)}]`}function H3(...e){const t=new Headers;for(const n of e)n.forEach((r,s)=>{t.append(s,r)});return t}function X3(e,t){const n={};for(const r of e.methods){const s=t(r);s!=null&&(n[r.localName]=s)}return n}const xd=1;function J3(e,t,n=!1){if(t>e){let r=`message size is larger than configured readMaxBytes ${e}`;throw n&&(r=`message size ${t} is larger than configured readMaxBytes ${e}`),new be(r,ce.ResourceExhausted)}}function Q3(e){return new eS(e)}class eS{constructor(t){this.readMaxBytes=t,this.header=new Uint8Array(5),this.headerView=new DataView(this.header.buffer),this.buf=[]}get byteLength(){return this.buf.reduce((t,n)=>t+n.byteLength,0)}decode(t){this.buf.push(t);const n=[];for(;;){let r=this.pop();if(!r)break;n.push(r)}return n}pop(){if(!(!this.env&&(this.env=this.head(),!this.env))&&this.cons(this.env.data)){const t=this.env;return this.env=void 0,t}}head(){if(!this.cons(this.header))return;const t=this.headerView.getUint8(0),n=this.headerView.getUint32(1);return J3(this.readMaxBytes,n,!0),{flags:t,data:new Uint8Array(n)}}cons(t){const n=t.byteLength;if(this.byteLength<n)return!1;let r=0;for(;r<n;){const s=this.buf.shift();s.byteLength>n-r?(t.set(s.subarray(0,n-r),r),this.buf.unshift(s.subarray(n-r)),r+=n-r):(t.set(s,r),r+=s.byteLength)}return!0}}function tS(e){let t;const n=Q3(4294967295);return new ReadableStream({start(){t=e.getReader()},async pull(r){let s=!1;for(;!s;){const i=await t.read();if(i.done)n.byteLength>0&&r.error(new be("protocol error: incomplete envelope",ce.InvalidArgument)),r.close();else for(const o of n.decode(i.value))r.enqueue(o),s=!0}}})}function nS(e,t){const n=new Uint8Array(t.length+5);n.set(t,5);const r=new DataView(n.buffer,n.byteOffset,n.byteLength);return r.setUint8(0,e),r.setUint32(1,t.length),n}var rS=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(u,a){o=e[i](o),s(u,a,o.done,o.value)})}}function s(i,o,u,a){Promise.resolve(a).then(function(c){i({value:c,done:u})},o)}},as=function(e){return this instanceof as?(this.v=e,this):new as(e)},sS=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function u(f,h){r[f]&&(s[f]=function(m){return new Promise(function(g,y){i.push([f,m,g,y])>1||a(f,m)})},h&&(s[f]=h(s[f])))}function a(f,h){try{c(r[f](h))}catch(m){p(i[0][3],m)}}function c(f){f.value instanceof as?Promise.resolve(f.value.v).then(l,d):p(i[0][2],f)}function l(f){a("next",f)}function d(f){a("throw",f)}function p(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}},iS=function(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,i){t[s]=e[s]?function(o){return(n=!n)?{value:as(e[s](o)),done:!1}:i?i(o):o}:i}};function oS(e){return sS(this,arguments,function*(){yield as(yield*iS(rS(e)))})}var F0=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=e[i]&&function(o){return new Promise(function(u,a){o=e[i](o),s(u,a,o.done,o.value)})}}function s(i,o,u,a){Promise.resolve(a).then(function(c){i({value:c,done:u})},o)}},gr=function(e){return this instanceof gr?(this.v=e,this):new gr(e)},uS=function(e){var t,n;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,i){t[s]=e[s]?function(o){return(n=!n)?{value:gr(e[s](o)),done:!1}:i?i(o):o}:i}},aS=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function u(f,h){r[f]&&(s[f]=function(m){return new Promise(function(g,y){i.push([f,m,g,y])>1||a(f,m)})},h&&(s[f]=h(s[f])))}function a(f,h){try{c(r[f](h))}catch(m){p(i[0][3],m)}}function c(f){f.value instanceof gr?Promise.resolve(f.value.v).then(l,d):p(i[0][2],f)}function l(f){a("next",f)}function d(f){a("throw",f)}function p(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}};function Zi(e,t){return X3(e,n=>{switch(n.methodKind){case"unary":return cS(t,n);case"server_streaming":return lS(t,n);case"client_streaming":return dS(t,n);case"bidi_streaming":return fS(t,n);default:return null}})}function cS(e,t){return async(n,r)=>{var s,i;const o=await e.unary(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues);return(s=r?.onHeader)===null||s===void 0||s.call(r,o.header),(i=r?.onTrailer)===null||i===void 0||i.call(r,o.trailer),o.message}}function lS(e,t){return(n,r)=>D0(e.stream(t,r?.signal,r?.timeoutMs,r?.headers,oS([n]),r?.contextValues),r)}function dS(e,t){return async(n,r)=>{var s,i,o,u,a,c;const l=await e.stream(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues);(a=r?.onHeader)===null||a===void 0||a.call(r,l.header);let d,p=0;try{for(var f=!0,h=F0(l.message),m;m=await h.next(),s=m.done,!s;f=!0)u=m.value,f=!1,d=u,p++}catch(g){i={error:g}}finally{try{!f&&!s&&(o=h.return)&&await o.call(h)}finally{if(i)throw i.error}}if(!d)throw new be("protocol error: missing response message",ce.Unimplemented);if(p>1)throw new be("protocol error: received extra messages for client streaming method",ce.Unimplemented);return(c=r?.onTrailer)===null||c===void 0||c.call(r,l.trailer),d}}function fS(e,t){return(n,r)=>D0(e.stream(t,r?.signal,r?.timeoutMs,r?.headers,n,r?.contextValues),r)}function D0(e,t){const n=(function(){return aS(this,arguments,function*(){var r,s;const i=yield gr(e);(r=t?.onHeader)===null||r===void 0||r.call(t,i.header),yield gr(yield*uS(F0(i.message))),(s=t?.onTrailer)===null||s===void 0||s.call(t,i.trailer)})})()[Symbol.asyncIterator]();return{[Symbol.asyncIterator]:()=>({next:()=>n.next()})}}function hS(...e){const t=new AbortController,n=e.filter(s=>s!==void 0).concat(t.signal);for(const s of n){if(s.aborted){r.apply(s);break}s.addEventListener("abort",r)}function r(){t.signal.aborted||t.abort(N0(this));for(const s of n)s.removeEventListener("abort",r)}return t}function pS(e){const t=new AbortController,n=()=>{t.abort(new be("the operation timed out",ce.DeadlineExceeded))};let r;return e!==void 0&&(e<=0?n():r=setTimeout(n,e)),{signal:t.signal,cleanup:()=>clearTimeout(r)}}function N0(e){if(!e.aborted)return;if(e.reason!==void 0)return e.reason;const t=new Error("This operation was aborted");return t.name="AbortError",t}function Sd(){return{get(e){return e.id in this?this[e.id]:e.defaultValue},set(e,t){return this[e.id]=t,this},delete(e){return delete this[e.id],this}}}function Ya(e,t,...n){if(n.length>0)throw new Error;return e.services[t]}function _d(e,t){return e.toString().replace(/\/?$/,`/${t.parent.typeName}/${t.name}`)}function P0(e,t){return Tt(e,t)}function mS(e,t){function n(r){return r.done===!0?r:{done:r.done,value:P0(e,r.value)}}return{[Symbol.asyncIterator](){const r=t[Symbol.asyncIterator](),s={next:()=>r.next().then(n)};return r.throw!==void 0&&(s.throw=i=>r.throw(i).then(n)),r.return!==void 0&&(s.return=i=>r.return(i).then(n)),s}}}function L0(e,t){if(!t)return e;for(const n of t.concat().reverse())e=n(e);return e}function M0(e){var t;const n=Object.assign({},e);return(t=n.ignoreUnknownFields)!==null&&t!==void 0||(n.ignoreUnknownFields=!0),n}function Ed(e,t,n,r){const s=t?kd(e.input,r):Cd(e.input,n);return{parse:(t?kd(e.output,r):Cd(e.output,n)).parse,serialize:s.serialize}}function kd(e,t){return{parse(n){try{return Ki(e,n,t)}catch(r){const s=r instanceof Error?r.message:String(r);throw new be(`parse binary: ${s}`,ce.Internal)}},serialize(n){try{return b0(e,n,t)}catch(r){const s=r instanceof Error?r.message:String(r);throw new be(`serialize binary: ${s}`,ce.Internal)}}}}function Cd(e,t){var n,r;const s=(n=t?.textEncoder)!==null&&n!==void 0?n:new TextEncoder,i=(r=t?.textDecoder)!==null&&r!==void 0?r:new TextDecoder,o=M0(t);return{parse(u){try{const a=i.decode(u);return N3(e,a,o)}catch(a){throw be.from(a,ce.InvalidArgument)}},serialize(u){try{const a=E3(e,u,o);return s.encode(a)}catch(a){throw be.from(a,ce.Internal)}}}}const gS=/^application\/(connect\+)?(?:(json)(?:; ?charset=utf-?8)?|(proto))$/i,bS="application/proto",yS="application/json",vS="application/connect+proto",wS="application/connect+json";function xS(e){const t=e?.match(gS);if(!t)return;const n=!!t[1],r=!!t[3];return{stream:n,binary:r}}function B0(e,t,n){var r;if(t&&new Headers(t).forEach((u,a)=>n.metadata.append(a,u)),typeof e!="object"||e==null||Array.isArray(e))throw n;let s=n.code;"code"in e&&typeof e.code=="string"&&(s=(r=Y3(e.code))!==null&&r!==void 0?r:s);const i=e.message;if(i!=null&&typeof i!="string")throw n;const o=new be(i??"",s,t);if("details"in e&&Array.isArray(e.details))for(const u of e.details){if(u===null||typeof u!="object"||Array.isArray(u)||typeof u.type!="string"||typeof u.value!="string")throw n;try{o.details.push({type:u.type,value:$a(u.value),debug:u.debug})}catch{throw n}}return o}const Id=2;function SS(e){const t=new be("invalid end stream",ce.Unknown);let n;try{n=JSON.parse(typeof e=="string"?e:new TextDecoder().decode(e))}catch{throw t}if(typeof n!="object"||n==null||Array.isArray(n))throw t;const r=new Headers;if("metadata"in n){if(typeof n.metadata!="object"||n.metadata==null||Array.isArray(n.metadata))throw t;for(const[i,o]of Object.entries(n.metadata)){if(!Array.isArray(o)||o.some(u=>typeof u!="string"))throw t;for(const u of o)r.append(i,u)}}const s="error"in n&&n.error!=null?B0(n.error,r,t):void 0;return{metadata:r,error:s}}const Ri="Content-Type",_S="Content-Length",Ad="Content-Encoding",ES="Accept-Encoding",kS="Connect-Timeout-Ms",$0="Connect-Protocol-Version",CS="User-Agent";function IS(e){switch(e){case 400:return ce.Internal;case 401:return ce.Unauthenticated;case 403:return ce.PermissionDenied;case 404:return ce.Unimplemented;case 429:return ce.Unavailable;case 502:return ce.Unavailable;case 503:return ce.Unavailable;case 504:return ce.Unavailable;default:return ce.Unknown}}function Rd(e){const t=new Headers,n=new Headers;return e.forEach((r,s)=>{s.toLowerCase().startsWith("trailer-")?n.append(s.substring(8),r):t.append(s,r)}),[t,n]}const V0="1";function Td(e,t,n,r,s){const i=new Headers(r??{});return n!==void 0&&i.set(kS,`${n}`),i.set(Ri,e=="unary"?t?bS:yS:t?vS:wS),i.set($0,V0),i.has(CS),i}function Od(e,t,n,r){const s=r.get(Ri),i=xS(s);if(n!==200){const u=new be(`HTTP ${n}`,IS(n),r);if(e=="unary"&&i&&!i.binary)return{isUnaryError:!0,unaryError:u};throw u}const o={binary:t,stream:e!=="unary"};if(i?.binary!==o.binary||i.stream!==o.stream)throw new be(`unsupported content type ${s}`,i===void 0?ce.Unknown:ce.Internal,r);return{isUnaryError:!1}}const Fd="application/";function AS(e,t){return t?o0(e,"url"):encodeURIComponent(new TextDecoder().decode(e))}function RS(e,t,n){let r=`?connect=v${V0}`;const s=e.header.get(Ri);s?.indexOf(Fd)===0&&(r+="&encoding="+encodeURIComponent(s.slice(Fd.length)));const i=e.header.get(Ad);i!==null&&i!=="identity"&&(r+="&compression="+encodeURIComponent(i),n=!0),n&&(r+="&base64=1"),r+="&message="+AS(t,n);const o=e.url+r,u=new Headers(e.header);for(const a of[$0,Ri,_S,Ad,ES])u.delete(a);return Object.assign(Object.assign({},e),{requestMethod:"GET",url:o,header:u})}function TS(e){const t=L0(e.next,e.interceptors),[n,r,s]=U0(e),i=Object.assign(Object.assign({},e.req),{message:P0(e.req.method.input,e.req.message),signal:n});return t(i).then(o=>(s(),o),r)}function OS(e){const t=L0(e.next,e.interceptors),[n,r,s]=U0(e),i=Object.assign(Object.assign({},e.req),{message:mS(e.req.method.input,e.req.message),signal:n});let o=!1;return n.addEventListener("abort",function(){var u,a;const c=e.req.message[Symbol.asyncIterator]();o||(u=c.throw)===null||u===void 0||u.call(c,this.reason).catch(()=>{}),(a=c.return)===null||a===void 0||a.call(c).catch(()=>{})}),t(i).then(u=>Object.assign(Object.assign({},u),{message:{[Symbol.asyncIterator](){const a=u.message[Symbol.asyncIterator]();return{next(){return a.next().then(c=>(c.done==!0&&(o=!0,s()),c),r)}}}}}),r)}function U0(e){const{signal:t,cleanup:n}=pS(e.timeoutMs),r=hS(e.signal,t);return[r.signal,function(i){const o=be.from(t.aborted?N0(t):i);return r.abort(o),n(),Promise.reject(o)},function(){n(),r.abort()}]}class En extends lt{constructor(t){super(t),this.name="QueryCollectionError"}}class FS extends En{constructor(){super("[QueryCollection] queryKey must be provided."),this.name="QueryKeyRequiredError"}}class DS extends En{constructor(){super("[QueryCollection] queryFn must be provided."),this.name="QueryFnRequiredError"}}class NS extends En{constructor(){super("[QueryCollection] queryClient must be provided."),this.name="QueryClientRequiredError"}}class PS extends En{constructor(){super("[QueryCollection] getKey must be provided."),this.name="GetKeyRequiredError"}}class LS extends En{constructor(){super("Collection must be in 'ready' state for manual sync operations. Sync not initialized yet."),this.name="SyncNotInitializedError"}}class MS extends En{constructor(t){super(`Duplicate key '${t}' found within batch operations`),this.name="DuplicateKeyInBatchError"}}class BS extends En{constructor(t){super(`Update operation: Item with key '${t}' does not exist`),this.name="UpdateOperationItemNotFoundError"}}class $S extends En{constructor(t){super(`Delete operation: Item with key '${t}' does not exist`),this.name="DeleteOperationItemNotFoundError"}}const In=new WeakMap;function VS(e,t){const n=Array.isArray(e)?e:[e],r=[];for(const s of n)if(s.type==="delete"){const i=Array.isArray(s.key)?s.key:[s.key];for(const o of i)r.push({type:"delete",key:o})}else{const i=Array.isArray(s.data)?s.data:[s.data];for(const o of i){let u;if(s.type==="update")u=t.getKey(o);else{const a=t.collection.validateData(o,s.type==="upsert"?"insert":s.type);u=t.getKey(a)}r.push({type:s.type,key:u,data:o})}}return r}function US(e,t){const n=new Set;for(const r of e){if(n.has(r.key))throw new MS(r.key);if(n.add(r.key),r.type==="update"){if(!t.collection._state.syncedData.has(r.key))throw new BS(r.key)}else if(r.type==="delete"&&!t.collection._state.syncedData.has(r.key))throw new $S(r.key)}}function Fr(e,t){const n=VS(e,t);US(n,t),t.begin({immediate:!0});for(const s of n)switch(s.type){case"insert":{const i=t.collection.validateData(s.data,"insert");t.write({type:"insert",value:i});break}case"update":{const o={...t.collection._state.syncedData.get(s.key),...s.data},u=t.collection.validateData(o,"update",s.key);t.write({type:"update",value:u});break}case"delete":{const i=t.collection._state.syncedData.get(s.key);t.write({type:"delete",value:i});break}case"upsert":{const i=t.collection._state.syncedData.has(s.key),o=t.collection.validateData(s.data,i?"update":"insert",s.key);i?t.write({type:"update",value:o}):t.write({type:"insert",value:o});break}}t.commit();const r=Array.from(t.collection._state.syncedData.values());t.updateCacheData?t.updateCacheData(r):t.queryClient.setQueryData(t.queryKey,r)}function zS(e){function t(){const n=e();if(!n)throw new LS;return n}return{writeInsert(n){const r={type:"insert",data:n},s=t(),i=In.get(s);if(i?.isActive){i.operations.push(r);return}Fr(r,s)},writeUpdate(n){const r={type:"update",data:n},s=t(),i=In.get(s);if(i?.isActive){i.operations.push(r);return}Fr(r,s)},writeDelete(n){const r={type:"delete",key:n},s=t(),i=In.get(s);if(i?.isActive){i.operations.push(r);return}Fr(r,s)},writeUpsert(n){const r={type:"upsert",data:n},s=t(),i=In.get(s);if(i?.isActive){i.operations.push(r);return}Fr(r,s)},writeBatch(n){const r=t();if(In.get(r)?.isActive)throw new Error("Cannot nest writeBatch calls. Complete the current batch before starting a new one.");const i={operations:[],isActive:!0};In.set(r,i);try{const o=n();if(o&&typeof o=="object"&&"then"in o&&typeof o.then=="function")throw new Error("writeBatch does not support async callbacks. The callback must be synchronous.");i.operations.length>0&&Fr(i.operations,r)}finally{i.isActive=!1,In.delete(r)}}}}function KS(e){if(!e)return;const t={};return e.where&&(t.where=Ru(e.where)),e.orderBy?.length&&(t.orderBy=e.orderBy.map(n=>{const r={expression:Ru(n.expression),direction:n.compareOptions.direction,nulls:n.compareOptions.nulls,stringSort:n.compareOptions.stringSort};return n.compareOptions.stringSort==="locale"?{...r,locale:n.compareOptions.locale,localeOptions:n.compareOptions.localeOptions}:r})),e.limit!==void 0&&(t.limit=e.limit),e.offset!==void 0&&(t.offset=e.offset),Object.keys(t).length===0?void 0:JSON.stringify(t)}function Ru(e){if(!e)return null;switch(e.type){case"val":return{type:"val",value:Tu(e.value)};case"ref":return{type:"ref",path:[...e.path]};case"func":return{type:"func",name:e.name,args:e.args.map(t=>Ru(t))};default:return null}}function Tu(e){if(e===void 0)return{__type:"undefined"};if(typeof e=="number"){if(Number.isNaN(e))return{__type:"nan"};if(e===Number.POSITIVE_INFINITY)return{__type:"infinity",sign:1};if(e===Number.NEGATIVE_INFINITY)return{__type:"infinity",sign:-1}}return e===null||typeof e=="string"||typeof e=="number"||typeof e=="boolean"?e:e instanceof Date?{__type:"date",value:e.toJSON()}:Array.isArray(e)?e.map(t=>Tu(t)):typeof e=="object"?Object.fromEntries(Object.entries(e).map(([t,n])=>[t,Tu(n)])):e}class WS{constructor(t,n,r){this.state=t,this.refetchFn=n,this.refetch=n,this.writeInsert=r.writeInsert,this.writeUpdate=r.writeUpdate,this.writeDelete=r.writeDelete,this.writeUpsert=r.writeUpsert,this.writeBatch=r.writeBatch}async clearError(){this.state.lastError=void 0,this.state.errorCount=0,this.state.lastErrorUpdatedAt=0,await this.refetchFn({throwOnError:!0})}get lastError(){return this.state.lastError}get isError(){return!!this.state.lastError}get errorCount(){return this.state.errorCount}get isFetching(){return Array.from(this.state.observers.values()).some(t=>t.getCurrentResult().isFetching)}get isRefetching(){return Array.from(this.state.observers.values()).some(t=>t.getCurrentResult().isRefetching)}get isLoading(){return Array.from(this.state.observers.values()).some(t=>t.getCurrentResult().isLoading)}get dataUpdatedAt(){return Math.max(0,...Array.from(this.state.observers.values()).map(t=>t.getCurrentResult().dataUpdatedAt))}get fetchStatus(){return Array.from(this.state.observers.values()).map(t=>t.getCurrentResult().fetchStatus)}}function Yi(e){const{queryKey:t,queryFn:n,select:r,queryClient:s,enabled:i,refetchInterval:o,retry:u,retryDelay:a,staleTime:c,getKey:l,onInsert:d,onUpdate:p,onDelete:f,meta:h,...m}=e,g=m.syncMode??"eager";if(!t)throw new FS;if(!n)throw new DS;if(!s)throw new NS;if(!l)throw new PS;const y={lastError:void 0,errorCount:0,lastErrorUpdatedAt:0,observers:new Map},w=new Map,v=new Map,b=new Map,x=new Map,E=new Map,R=(P,$)=>{const W=b.get(P)||new Set;W.add($),b.set(P,W);const ne=v.get($)||new Set;ne.add(P),v.set($,ne)},S=(P,$)=>{const W=b.get(P)||new Set;W.delete($),b.set(P,W);const ne=v.get($)||new Set;return ne.delete(P),v.set($,ne),W.size===0},_=P=>{const{begin:$,write:W,commit:ne,markReady:V,collection:he}=P;let xe=!1;const ke=j=>{if(typeof t=="function")return t(j);if(g==="on-demand"){const ue=KS(j);return ue!==void 0?[...t,ue]:t}else return t},Ne=(j={},ue=n)=>{const ae=ke(j),te=Ct(ae),Le={...h,loadSubsetOptions:j};if(y.observers.has(te)){E.set(te,(E.get(te)||0)+1);const We=y.observers.get(te),pt=We.getCurrentResult();return pt.isSuccess?!0:pt.isError?Promise.reject(pt.error):s.getQueryData(ae)!==void 0?!0:new Promise((Cr,kp)=>{const ac=We.subscribe(ro=>{queueMicrotask(()=>{ro.isSuccess?(ac(),Cr()):ro.isError&&(ac(),kp(ro.error))})})})}const Ye={queryKey:ae,queryFn:ue,meta:Le,structuralSharing:!0,notifyOnChangeProps:"all",...i!==void 0&&{enabled:i},...o!==void 0&&{refetchInterval:o},...u!==void 0&&{retry:u},...a!==void 0&&{retryDelay:a},...c!==void 0&&{staleTime:c}},Dt=new Ff(s,Ye);if(w.set(te,ae),y.observers.set(te,Dt),E.set(te,(E.get(te)||0)+1),s.getQueryData(ae)!==void 0)return(xe||he.subscriberCount>0)&&Pe(Dt,te),!0;const $e=new Promise((We,pt)=>{const Cn=Dt.subscribe(Cr=>{queueMicrotask(()=>{Cr.isSuccess?(Cn(),We()):Cr.isError&&(Cn(),pt(Cr.error))})})});return(xe||he.subscriberCount>0)&&Pe(Dt,te),$e},Se=j=>{const ue=Ct(j);return te=>{if(te.isSuccess){y.lastError=void 0,y.errorCount=0;const Le=te.data,Ye=r?r(Le):Le;if(!Array.isArray(Ye)||Ye.some($e=>typeof $e!="object")){const $e=r?`@tanstack/query-db-collection: select() must return an array of objects. Got: ${typeof Ye} for queryKey ${JSON.stringify(j)}`:`@tanstack/query-db-collection: queryFn must return an array of objects. Got: ${typeof Ye} for queryKey ${JSON.stringify(j)}`;console.error($e);return}const Dt=new Map(he._state.syncedData.entries()),kn=new Map;Ye.forEach($e=>{const We=l($e);kn.set(We,$e)}),$(),Dt.forEach(($e,We)=>{const pt=kn.get(We);pt?It($e,pt)||W({type:"update",value:pt}):S(We,ue)&&W({type:"delete",value:$e})}),kn.forEach(($e,We)=>{R(We,ue),Dt.has(We)||W({type:"insert",value:$e})}),ne(),V()}else te.isError&&((te.errorUpdatedAt!==y.lastErrorUpdatedAt||te.error!==y.lastError)&&(y.lastError=te.error,y.errorCount++,y.lastErrorUpdatedAt=te.errorUpdatedAt),console.error(`[QueryCollection] Error observing query ${String(j)}:`,te.error),V())}},re=j=>x.has(j),Pe=(j,ue)=>{if(!re(ue)){const ae=w.get(ue),te=Se(ae),Le=j.subscribe(te);x.set(ue,Le);const Ye=j.getCurrentResult();(Ye.isSuccess||Ye.isError)&&te(Ye)}},tt=()=>{y.observers.forEach(Pe)},nt=()=>{x.forEach(j=>{j()}),x.clear()};xe=!0;const ft=he.on("subscribers:change",({subscriberCount:j})=>{j>0?tt():j===0&&nt()});if(g==="eager"){const j=Ne({});j instanceof Promise&&j.catch(()=>{})}else V();tt(),y.observers.forEach((j,ue)=>{const ae=w.get(ue);Se(ae)(j.getCurrentResult())});const M=j=>{x.get(j)?.(),x.delete(j);const ue=v.get(j)??new Set,ae=[];ue.forEach(te=>{const Le=b.get(te);Le&&(Le.delete(j),Le.size===0&&(b.delete(te),he.has(te)&&ae.push(he.get(te))))}),ae.length>0&&($(),ae.forEach(te=>{W({type:"delete",value:te})}),ne()),y.observers.delete(j),v.delete(j),w.delete(j),E.delete(j)},de=j=>{const ue=E.get(j)||0,ae=y.observers.get(j);if(ue<=0&&(x.get(j)?.(),x.delete(j)),ae?.hasListeners()??!1){E.set(j,0);return}ue>0&&console.warn(`[cleanupQueryIfIdle] Invariant violation: refcount=${ue} but no listeners. Cleaning up to prevent leak.`,{hashedQueryKey:j}),M(j)},Ke=j=>{M(j)},ht=s.getQueryCache().subscribe(j=>{const ue=j.query.queryHash;j.type==="removed"&&w.has(ue)&&de(ue)});return{loadSubset:g==="eager"?void 0:Ne,unloadSubset:g==="eager"?void 0:j=>{const ue=ke(j),ae=Ct(ue),Le=(E.get(ae)||0)-1;Le<=0?(E.set(ae,0),de(ae)):E.set(ae,Le)},cleanup:async()=>{ft(),nt();const j=[...w.values()],ue=[...y.observers.keys()];for(const ae of ue)Ke(ae);ht(),await Promise.all(j.map(async ae=>{await s.cancelQueries({queryKey:ae,exact:!0}),s.removeQueries({queryKey:ae,exact:!0})}))}}},A=async P=>{const W=[...w.values()].map(ne=>y.observers.get(Ct(ne)).refetch({throwOnError:P?.throwOnError}));return Promise.all(W)},F=(P,$)=>{r?s.setQueryData(P,W=>{if(!W||typeof W!="object")return W;if(Array.isArray(W))return $;const ne=r(W);if(Array.isArray(ne)){for(const V of Object.keys(W))if(W[V]===ne)return{...W,[V]:$}}if(Array.isArray(W.data))return{...W,data:$};if(Array.isArray(W.items))return{...W,items:$};if(Array.isArray(W.results))return{...W,results:$};for(const V of Object.keys(W))if(Array.isArray(W[V]))return{...W,[V]:$};return W}):s.setQueryData(P,$)},D=P=>{const $=Array.from(w.values());if($.length>0)for(const W of $)F(W,P);else{const W=typeof t=="function"?t({}):t;F(W,P)}};let z=null;const K=P=>{const{begin:$,write:W,commit:ne,collection:V}=P,he=typeof t=="function"?t({}):t;return z={collection:V,queryClient:s,queryKey:he,getKey:l,begin:$,write:W,commit:ne,updateCacheData:D},_(P)},Z=zS(()=>z),se=d?async P=>{const $=await d(P)??{};return $.refetch!==!1&&await A(),$}:void 0,N=p?async P=>{const $=await p(P)??{};return $.refetch!==!1&&await A(),$}:void 0,ee=f?async P=>{const $=await f(P)??{};return $.refetch!==!1&&await A(),$}:void 0,ie=new WS(y,A,Z);return{...m,getKey:l,syncMode:g,sync:{sync:K},onInsert:se,onUpdate:N,onDelete:ee,utils:ie}}const GS=Er("ChJpdGVtL3YxL2l0ZW0ucHJvdG8SB2l0ZW0udjEi1wEKBEl0ZW0SCgoCaWQYASABKAkSCwoDdXJsGAIgASgJEg0KBXRpdGxlGAMgASgJEhMKC2Rlc2NyaXB0aW9uGAQgASgJEhQKDHB1Ymxpc2hlZF9hdBgFIAEoCRIPCgdmZWVkX2lkGAYgASgJEg8KB2lzX3JlYWQYByABKAgSDgoGYXV0aG9yGAkgASgJEg8KB2NvbnRlbnQYCiABKAkSEQoJaW1hZ2VfdXJsGAsgASgJEhIKCmNhdGVnb3JpZXMYDCABKAkSEgoKY3JlYXRlZF9hdBgNIAEoCSKTAQoITGlzdEl0ZW0SCgoCaWQYASABKAkSDQoFdGl0bGUYAiABKAkSEwoLZGVzY3JpcHRpb24YAyABKAkSFAoMcHVibGlzaGVkX2F0GAQgASgJEhIKCmNyZWF0ZWRfYXQYBSABKAkSDwoHaXNfcmVhZBgGIAEoCBIPCgdmZWVkX2lkGAcgASgJEgsKA3VybBgIIAEoCSIcCg5HZXRJdGVtUmVxdWVzdBIKCgJpZBgBIAEoCSIuCg9HZXRJdGVtUmVzcG9uc2USGwoEaXRlbRgBIAEoCzINLml0ZW0udjEuSXRlbSLPAQoQTGlzdEl0ZW1zUmVxdWVzdBIUCgdmZWVkX2lkGAEgASgJSACIAQESFAoHaXNfcmVhZBgCIAEoCEgBiAEBEhMKBnRhZ19pZBgHIAEoCUgCiAEBEi4KBXNpbmNlGAggASgLMhouZ29vZ2xlLnByb3RvYnVmLlRpbWVzdGFtcEgDiAEBEg0KBWxpbWl0GAUgASgFEg4KBm9mZnNldBgGIAEoBUIKCghfZmVlZF9pZEIKCghfaXNfcmVhZEIJCgdfdGFnX2lkQggKBl9zaW5jZSJKChFMaXN0SXRlbXNSZXNwb25zZRIgCgVpdGVtcxgBIAMoCzIRLml0ZW0udjEuTGlzdEl0ZW0SEwoLdG90YWxfY291bnQYAiABKAUiSAoXVXBkYXRlSXRlbVN0YXR1c1JlcXVlc3QSCwoDaWRzGAEgAygJEhQKB2lzX3JlYWQYAiABKAhIAIgBAUIKCghfaXNfcmVhZCIaChhVcGRhdGVJdGVtU3RhdHVzUmVzcG9uc2UiJwoUTGlzdEl0ZW1GZWVkc1JlcXVlc3QSDwoHaXRlbV9pZBgBIAEoCSKDAQoISXRlbUZlZWQSDwoHZmVlZF9pZBgBIAEoCRIXCgpmZWVkX3RpdGxlGAIgASgJSACIAQESGQoMcHVibGlzaGVkX2F0GAMgASgJSAGIAQESEgoKY3JlYXRlZF9hdBgEIAEoCUINCgtfZmVlZF90aXRsZUIPCg1fcHVibGlzaGVkX2F0IjkKFUxpc3RJdGVtRmVlZHNSZXNwb25zZRIgCgVmZWVkcxgBIAMoCzIRLml0ZW0udjEuSXRlbUZlZWQyuAIKC0l0ZW1TZXJ2aWNlEjwKB0dldEl0ZW0SFy5pdGVtLnYxLkdldEl0ZW1SZXF1ZXN0GhguaXRlbS52MS5HZXRJdGVtUmVzcG9uc2USQgoJTGlzdEl0ZW1zEhkuaXRlbS52MS5MaXN0SXRlbXNSZXF1ZXN0GhouaXRlbS52MS5MaXN0SXRlbXNSZXNwb25zZRJXChBVcGRhdGVJdGVtU3RhdHVzEiAuaXRlbS52MS5VcGRhdGVJdGVtU3RhdHVzUmVxdWVzdBohLml0ZW0udjEuVXBkYXRlSXRlbVN0YXR1c1Jlc3BvbnNlEk4KDUxpc3RJdGVtRmVlZHMSHS5pdGVtLnYxLkxpc3RJdGVtRmVlZHNSZXF1ZXN0Gh4uaXRlbS52MS5MaXN0SXRlbUZlZWRzUmVzcG9uc2VCPVo7Z2l0aHViLmNvbS9uYWthdGFuYWthdGFuYS9mZWVkLXJlYWRlci9nZW4vZ28vaXRlbS92MTtpdGVtdjFiBnByb3RvMw",[r3]),jS=Ya(GS,0),ZS="30d",YS=!1;function qS(){const[e,t]=vs({showRead:YS,since:ZS,transientRemovedIds:{}});return{state:e,setShowRead:o=>{t("showRead",o)},setDateFilter:o=>{t("since",o)},addTransientRemovedIds:o=>{const u={};for(const a of o)u[a]=!0;t("transientRemovedIds",a=>({...a,...u}))},clearTransientRemovedIds:()=>{t("transientRemovedIds",Gu({}))}}}const qe=Jt(qS),z0=e=>({seconds:BigInt(Math.floor(e.getTime()/1e3)),nanos:e.getTime()%1e3*1e6}),HS=e=>{if(e==="all")return;const t=new Date;let n;switch(e){case"24h":n=new Date(t.getTime()-1440*60*1e3);break;case"7d":n=new Date(t.getTime()-10080*60*1e3);break;case"30d":n=new Date(t.getTime()-720*60*60*1e3);break;case"90d":n=new Date(t.getTime()-2160*60*60*1e3);break;case"365d":n=new Date(t.getTime()-365*24*60*60*1e3);break;default:return}return z0(n)},Dd=e=>e>=1e3?"999+":e.toString(),cs=e=>{if(!e)return"";try{return new Date(e).toLocaleString()}catch{return e}},XS=e=>{if(!e)return"";try{const t=new Date(e),n=new Date,r=Math.floor((t.getTime()-n.getTime())/1e3),s=new Intl.RelativeTimeFormat(void 0,{numeric:"auto"});if(Math.abs(r)<60)return s.format(r,"second");const o=Math.floor(r/60);if(Math.abs(o)<60)return s.format(o,"minute");const a=Math.floor(o/60);if(Math.abs(a)<24)return s.format(a,"hour");const l=Math.floor(a/24);if(Math.abs(l)<30)return s.format(l,"day");const p=Math.floor(l/30);if(Math.abs(p)<12)return s.format(p,"month");const h=Math.floor(p/12);return s.format(h,"year")}catch{return e}},JS=e=>{if(!e)return[];const t=e.trim(),n=s=>{const i=s.trim();return i.length>=2&&i.startsWith('"')&&i.endsWith('"')?i.slice(1,-1).trim():i};if(t.startsWith("[")&&t.endsWith("]"))try{const s=JSON.parse(t);if(Array.isArray(s))return s.filter(i=>i!=null).map(i=>n(String(i))).filter(i=>i.length>0)}catch{}let r=t;return r.startsWith("[")&&(r=r.slice(1)),r.endsWith("]")&&(r=r.slice(0,-1)),r.split(",").map(s=>n(s)).filter(s=>s.length>0)};function QS(){try{new Headers}catch{throw new Error("connect-web requires the fetch API. Are you running on an old version of Node.js? Node.js is not supported in Connect for Web - please stay tuned for Connect for Node.")}}var ls=function(e){return this instanceof ls?(this.v=e,this):new ls(e)},e_=function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),s,i=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(f){return function(h){return Promise.resolve(h).then(f,d)}}function u(f,h){r[f]&&(s[f]=function(m){return new Promise(function(g,y){i.push([f,m,g,y])>1||a(f,m)})},h&&(s[f]=h(s[f])))}function a(f,h){try{c(r[f](h))}catch(m){p(i[0][3],m)}}function c(f){f.value instanceof ls?Promise.resolve(f.value.v).then(l,d):p(i[0][2],f)}function l(f){a("next",f)}function d(f){a("throw",f)}function p(f,h){f(h),i.shift(),i.length&&a(i[0][0],i[0][1])}};const Nd={redirect:"error"};function t_(e){var t;QS();const n=(t=e.useBinaryFormat)!==null&&t!==void 0?t:!1;return{async unary(r,s,i,o,u,a){const{serialize:c,parse:l}=Ed(r,n,e.jsonOptions,e.binaryOptions);return i=i===void 0?e.defaultTimeoutMs:i<=0?void 0:i,await TS({interceptors:e.interceptors,signal:s,timeoutMs:i,req:{stream:!1,service:r.parent,method:r,requestMethod:"POST",url:_d(e.baseUrl,r),header:Td(r.methodKind,n,i,o,!1),contextValues:a??Sd(),message:u},next:async d=>{var p;const f=e.useHttpGet===!0&&r.idempotency===Cu.NO_SIDE_EFFECTS;let h=null;f?d=RS(d,c(d.message),n):h=c(d.message);const g=await((p=e.fetch)!==null&&p!==void 0?p:globalThis.fetch)(d.url,Object.assign(Object.assign({},Nd),{method:d.requestMethod,headers:d.header,signal:d.signal,body:h})),{isUnaryError:y,unaryError:w}=Od(r.methodKind,n,g.status,g.headers);if(y)throw B0(await g.json(),H3(...Rd(g.headers)),w);const[v,b]=Rd(g.headers);return{stream:!1,service:r.parent,method:r,header:v,message:n?l(new Uint8Array(await g.arrayBuffer())):C0(r.output,await g.json(),M0(e.jsonOptions)),trailer:b}}})},async stream(r,s,i,o,u,a){const{serialize:c,parse:l}=Ed(r,n,e.jsonOptions,e.binaryOptions);function d(f,h,m,g){return e_(this,arguments,function*(){const w=tS(f).getReader();let v=!1;for(;;){const b=yield ls(w.read());if(b.done)break;const{flags:x,data:E}=b.value;if((x&xd)===xd)throw new be("protocol error: received unsupported compressed output",ce.Internal);if((x&Id)===Id){v=!0;const R=SS(E);if(R.error){const S=R.error;throw m.forEach((_,A)=>{S.metadata.append(A,_)}),S}R.metadata.forEach((S,_)=>h.set(_,S));continue}yield yield ls(l(E))}if("throwIfAborted"in g&&g.throwIfAborted(),!v)throw"missing EndStreamResponse"})}async function p(f){if(r.methodKind!="server_streaming")throw"The fetch API does not support streaming request bodies";const h=await f[Symbol.asyncIterator]().next();if(h.done==!0)throw"missing request message";return nS(0,c(h.value))}return i=i===void 0?e.defaultTimeoutMs:i<=0?void 0:i,await OS({interceptors:e.interceptors,timeoutMs:i,signal:s,req:{stream:!0,service:r.parent,method:r,requestMethod:"POST",url:_d(e.baseUrl,r),header:Td(r.methodKind,n,i,o,!1),contextValues:a??Sd(),message:u},next:async f=>{var h;const g=await((h=e.fetch)!==null&&h!==void 0?h:globalThis.fetch)(f.url,Object.assign(Object.assign({},Nd),{method:f.requestMethod,headers:f.header,signal:f.signal,body:await p(f.message)}));if(Od(r.methodKind,n,g.status,g.headers),g.body===null)throw"missing response body";const y=new Headers;return Object.assign(Object.assign({},f),{header:g.headers,trailer:y,message:d(g.body,y,g.headers,f.signal)})}})}}}const Rs=t_({baseUrl:"/api"}),we=new Zm;typeof window<"u"&&(window.__queryClient=we);const Ou=Zi(jS,Rs),[Fu,Pd]=H(null),n_=(e,t)=>{Pd(null);const n=e?{}:{isRead:!1},r=t!=="all"?HS(t):void 0;return Es(Yi({id:"items",gcTime:5*1e3,queryClient:we,refetchInterval:60*1e3,queryKey:["items",{since:t,showRead:e}],queryFn:async({queryKey:s})=>{qe.clearTransientRemovedIds();const i=we.getQueryData(s)||[],o=Fu(),u=o===null?r:z0(o),a=await Ou.listItems({since:u,limit:1e4,offset:0,...n});Pd(new Date);const c=a.items.map(l=>({id:l.id,title:l.title,description:l.description,publishedAt:l.publishedAt,isRead:l.isRead,createdAt:l.createdAt,feedId:l.feedId,url:l.url}));return[...i,...c]},getKey:s=>s.id,onUpdate:async({transaction:s})=>{const i=s.mutations.map(a=>(en().utils.writeUpdate({...a.modified}),a.modified.id)),u=s.mutations[0].modified.isRead;return await Ou.updateItemStatus({ids:i,isRead:u}),{refetch:!1}}}))},en=Jt(()=>J(()=>n_(qe.state.showRead,qe.state.since))),Du=Jt(()=>{const e=rs(t=>t.from({item:en()}).where(({item:n})=>Je(n.isRead,!1)).select(({item:n})=>({...n})));return()=>e}),K0=async e=>(await Ou.getItem({id:e})).item;var r_=B("<div><p>This is the notFoundComponent configured on root route"),s_=B("<header>");const qi=pb({component:i_,notFoundComponent:()=>(()=>{var e=r_();return e.firstChild,T(e,k(ir,{to:"/",children:"Start Over"}),null),e})()});function i_(){const e=Bt(s=>s.from({item:Du()})),t=O({paddingX:"4",paddingY:"2",display:"flex",alignItems:"center",borderBottomWidth:"1px",borderBottomStyle:"solid",borderBottomColor:"gray.100",gap:"6",fontSize:"md",backgroundColor:"white",position:"sticky",top:0,zIndex:10}),n=O({position:"relative",paddingX:"3",paddingY:"1.5",borderRadius:"md",color:"gray.500",transition:"all 0.2s",fontWeight:"medium",fontSize:"sm",_hover:{backgroundColor:"gray.50",color:"gray.900"}}),r=O({fontWeight:"semibold",color:"blue.700 !important",backgroundColor:"blue.50 !important",borderBottomWidth:"2px",borderBottomStyle:"solid",borderBottomColor:"blue.600",borderBottomRadius:"0"});return[k(Yw,{get unreadCount(){return e().length}}),(()=>{var s=s_();return C(s,t),T(s,k(ir,{to:"/",class:n,activeProps:{class:r},activeOptions:{exact:!0},children:"Home"}),null),T(s,k(ir,{to:"/feeds",class:n,activeProps:{class:r},children:"Feeds"}),null),T(s,k(ir,{to:"/tags",class:n,activeProps:{class:r},children:"Tags"}),null),s})(),k(Bi,{})]}const Ld={transform(e){const{direction:t,align:n,justify:r,wrap:s,basis:i,grow:o,shrink:u,...a}=e;return{display:"flex",flexDirection:t,alignItems:n,justifyContent:r,flexWrap:s,flexBasis:i,flexGrow:o,flexShrink:u,...a}}},W0=(e={})=>{const t=Ea(Ld,e);return Ld.transform(t,_a)},X=e=>O(W0(e));X.raw=W0;const Md={transform(e){const{align:t,justify:n,direction:r,gap:s,...i}=e;return{display:"flex",flexDirection:r,alignItems:t,justifyContent:n,gap:s,...i}},defaultValues:{direction:"column",gap:"8px"}},G0=(e={})=>{const t=Ea(Md,e);return Md.transform(t,_a)},me=e=>O(G0(e));me.raw=G0;const Bd={transform(e){const{inline:t,...n}=e;return{display:t?"inline-flex":"flex",alignItems:"center",justifyContent:"center",...n}}},j0=(e={})=>{const t=Ea(Bd,e);return Bd.transform(t,_a)},Hi=e=>O(j0(e));Hi.raw=j0;const Z0=Er("ChB0YWcvdjEvdGFnLnByb3RvEgZ0YWcudjEicQoDVGFnEgoKAmlkGAEgASgJEgwKBG5hbWUYAiABKAkSEgoKY3JlYXRlZF9hdBgDIAEoCRISCgp1cGRhdGVkX2F0GAQgASgJEhQKDHVucmVhZF9jb3VudBgFIAEoAxISCgpmZWVkX2NvdW50GAYgASgDIk0KB0xpc3RUYWcSCgoCaWQYASABKAkSDAoEbmFtZRgCIAEoCRIUCgx1bnJlYWRfY291bnQYAyABKAMSEgoKZmVlZF9jb3VudBgEIAEoAyIgChBDcmVhdGVUYWdSZXF1ZXN0EgwKBG5hbWUYASABKAkiLQoRQ3JlYXRlVGFnUmVzcG9uc2USGAoDdGFnGAEgASgLMgsudGFnLnYxLlRhZyIRCg9MaXN0VGFnc1JlcXVlc3QiTQoQTGlzdFRhZ3NSZXNwb25zZRIdCgR0YWdzGAEgAygLMg8udGFnLnYxLkxpc3RUYWcSGgoSdG90YWxfdW5yZWFkX2NvdW50GAIgASgDIh4KEERlbGV0ZVRhZ1JlcXVlc3QSCgoCaWQYASABKAkiEwoRRGVsZXRlVGFnUmVzcG9uc2UyzwEKClRhZ1NlcnZpY2USQAoJQ3JlYXRlVGFnEhgudGFnLnYxLkNyZWF0ZVRhZ1JlcXVlc3QaGS50YWcudjEuQ3JlYXRlVGFnUmVzcG9uc2USPQoITGlzdFRhZ3MSFy50YWcudjEuTGlzdFRhZ3NSZXF1ZXN0GhgudGFnLnYxLkxpc3RUYWdzUmVzcG9uc2USQAoJRGVsZXRlVGFnEhgudGFnLnYxLkRlbGV0ZVRhZ1JlcXVlc3QaGS50YWcudjEuRGVsZXRlVGFnUmVzcG9uc2VCO1o5Z2l0aHViLmNvbS9uYWthdGFuYWthdGFuYS9mZWVkLXJlYWRlci9nZW4vZ28vdGFnL3YxO3RhZ3YxYgZwcm90bzM"),o_=Ya(Z0,0),u_=Er("ChJmZWVkL3YxL2ZlZWQucHJvdG8SB2ZlZWQudjEi4QMKBEZlZWQSCgoCaWQYASABKAkSCwoDdXJsGAIgASgJEhEKBGxpbmsYAyABKAlIAIgBARINCgV0aXRsZRgEIAEoCRIYCgtkZXNjcmlwdGlvbhgFIAEoCUgBiAEBEhEKBGxhbmcYBiABKAlIAogBARIWCglpbWFnZV91cmwYByABKAlIA4gBARIWCgljb3B5cmlnaHQYCCABKAlIBIgBARIWCglmZWVkX3R5cGUYCSABKAlIBYgBARIZCgxmZWVkX3ZlcnNpb24YCiABKAlIBogBARIcCg9sYXN0X2ZldGNoZWRfYXQYCyABKAlIB4gBARISCgpjcmVhdGVkX2F0GAwgASgJEhIKCnVwZGF0ZWRfYXQYDSABKAkSGQoEdGFncxgOIAMoCzILLnRhZy52MS5UYWcSFAoMdW5yZWFkX2NvdW50GA8gASgDEhcKCm5leHRfZmV0Y2gYECABKAlICIgBAUIHCgVfbGlua0IOCgxfZGVzY3JpcHRpb25CBwoFX2xhbmdCDAoKX2ltYWdlX3VybEIMCgpfY29weXJpZ2h0QgwKCl9mZWVkX3R5cGVCDwoNX2ZlZWRfdmVyc2lvbkISChBfbGFzdF9mZXRjaGVkX2F0Qg0KC19uZXh0X2ZldGNoItkBCghMaXN0RmVlZBIKCgJpZBgBIAEoCRILCgN1cmwYAiABKAkSDQoFdGl0bGUYAyABKAkSFAoMdW5yZWFkX2NvdW50GAQgASgDEhkKBHRhZ3MYBSADKAsyCy50YWcudjEuVGFnEhEKBGxpbmsYBiABKAlIAIgBARIcCg9sYXN0X2ZldGNoZWRfYXQYByABKAlIAYgBARIXCgpuZXh0X2ZldGNoGAggASgJSAKIAQFCBwoFX2xpbmtCEgoQX2xhc3RfZmV0Y2hlZF9hdEINCgtfbmV4dF9mZXRjaCIcCg5HZXRGZWVkUmVxdWVzdBIKCgJpZBgBIAEoCSIuCg9HZXRGZWVkUmVzcG9uc2USGwoEZmVlZBgBIAEoCzINLmZlZWQudjEuRmVlZCIyChBMaXN0RmVlZHNSZXF1ZXN0EhMKBnRhZ19pZBgBIAEoCUgAiAEBQgkKB190YWdfaWQiNQoRTGlzdEZlZWRzUmVzcG9uc2USIAoFZmVlZHMYASADKAsyES5mZWVkLnYxLkxpc3RGZWVkIs8CChFDcmVhdGVGZWVkUmVxdWVzdBILCgN1cmwYASABKAkSEgoFdGl0bGUYAiABKAlIAIgBARIRCgRsaW5rGAMgASgJSAGIAQESGAoLZGVzY3JpcHRpb24YBCABKAlIAogBARIRCgRsYW5nGAUgASgJSAOIAQESFgoJaW1hZ2VfdXJsGAYgASgJSASIAQESFgoJY29weXJpZ2h0GAcgASgJSAWIAQESFgoJZmVlZF90eXBlGAggASgJSAaIAQESGQoMZmVlZF92ZXJzaW9uGAkgASgJSAeIAQESDwoHdGFnX2lkcxgKIAMoCUIICgZfdGl0bGVCBwoFX2xpbmtCDgoMX2Rlc2NyaXB0aW9uQgcKBV9sYW5nQgwKCl9pbWFnZV91cmxCDAoKX2NvcHlyaWdodEIMCgpfZmVlZF90eXBlQg8KDV9mZWVkX3ZlcnNpb24iMQoSQ3JlYXRlRmVlZFJlc3BvbnNlEhsKBGZlZWQYASABKAsyDS5mZWVkLnYxLkZlZWQi1AIKEVVwZGF0ZUZlZWRSZXF1ZXN0EgoKAmlkGAEgASgJEhIKBXRpdGxlGAMgASgJSACIAQESEQoEbGluaxgEIAEoCUgBiAEBEhgKC2Rlc2NyaXB0aW9uGAUgASgJSAKIAQESEQoEbGFuZxgGIAEoCUgDiAEBEhYKCWltYWdlX3VybBgHIAEoCUgEiAEBEhYKCWNvcHlyaWdodBgIIAEoCUgFiAEBEhYKCWZlZWRfdHlwZRgJIAEoCUgGiAEBEhkKDGZlZWRfdmVyc2lvbhgKIAEoCUgHiAEBEg8KB3RhZ19pZHMYDCADKAlCCAoGX3RpdGxlQgcKBV9saW5rQg4KDF9kZXNjcmlwdGlvbkIHCgVfbGFuZ0IMCgpfaW1hZ2VfdXJsQgwKCl9jb3B5cmlnaHRCDAoKX2ZlZWRfdHlwZUIPCg1fZmVlZF92ZXJzaW9uSgQICxAMIjEKElVwZGF0ZUZlZWRSZXNwb25zZRIbCgRmZWVkGAEgASgLMg0uZmVlZC52MS5GZWVkIh8KEURlbGV0ZUZlZWRSZXF1ZXN0EgoKAmlkGAEgASgJIhQKEkRlbGV0ZUZlZWRSZXNwb25zZSIiChNSZWZyZXNoRmVlZHNSZXF1ZXN0EgsKA2lkcxgBIAMoCSJ6Cg9GZWVkRmV0Y2hTdGF0dXMSDwoHZmVlZF9pZBgBIAEoCRIPCgdzdWNjZXNzGAIgASgIEhcKD25ld19pdGVtc19jb3VudBgDIAEoBRIaCg1lcnJvcl9tZXNzYWdlGAQgASgJSACIAQFCEAoOX2Vycm9yX21lc3NhZ2UiQQoUUmVmcmVzaEZlZWRzUmVzcG9uc2USKQoHcmVzdWx0cxgBIAMoCzIYLmZlZWQudjEuRmVlZEZldGNoU3RhdHVzIikKEUltcG9ydE9wbWxSZXF1ZXN0EhQKDG9wbWxfY29udGVudBgBIAEoDCJ2ChJJbXBvcnRPcG1sUmVzcG9uc2USDQoFdG90YWwYASABKAUSDwoHc3VjY2VzcxgCIAEoBRIPCgdza2lwcGVkGAMgASgFEi8KDGZhaWxlZF9mZWVkcxgEIAMoCzIZLmZlZWQudjEuSW1wb3J0RmFpbGVkRmVlZCI2ChBJbXBvcnRGYWlsZWRGZWVkEgsKA3VybBgBIAEoCRIVCg1lcnJvcl9tZXNzYWdlGAIgASgJIiAKEUV4cG9ydE9wbWxSZXF1ZXN0EgsKA2lkcxgBIAMoCSIqChJFeHBvcnRPcG1sUmVzcG9uc2USFAoMb3BtbF9jb250ZW50GAEgASgMIjYKElNldEZlZWRUYWdzUmVxdWVzdBIPCgdmZWVkX2lkGAEgASgJEg8KB3RhZ19pZHMYAiADKAkiFQoTU2V0RmVlZFRhZ3NSZXNwb25zZSJWChVNYW5hZ2VGZWVkVGFnc1JlcXVlc3QSEAoIZmVlZF9pZHMYASADKAkSEwoLYWRkX3RhZ19pZHMYAiADKAkSFgoOcmVtb3ZlX3RhZ19pZHMYAyADKAkiGAoWTWFuYWdlRmVlZFRhZ3NSZXNwb25zZSIqCgdGZWVkVGFnEg8KB2ZlZWRfaWQYASABKAkSDgoGdGFnX2lkGAIgASgJIlcKE0xpc3RGZWVkVGFnc1JlcXVlc3QSFAoHZmVlZF9pZBgBIAEoCUgAiAEBEhMKBnRhZ19pZBgCIAEoCUgBiAEBQgoKCF9mZWVkX2lkQgkKB190YWdfaWQiOwoUTGlzdEZlZWRUYWdzUmVzcG9uc2USIwoJZmVlZF90YWdzGAEgAygLMhAuZmVlZC52MS5GZWVkVGFnIjsKE1N1c3BlbmRGZWVkc1JlcXVlc3QSCwoDaWRzGAEgAygJEhcKD3N1c3BlbmRfc2Vjb25kcxgCIAEoAyIWChRTdXNwZW5kRmVlZHNSZXNwb25zZTL2BgoLRmVlZFNlcnZpY2USPAoHR2V0RmVlZBIXLmZlZWQudjEuR2V0RmVlZFJlcXVlc3QaGC5mZWVkLnYxLkdldEZlZWRSZXNwb25zZRJCCglMaXN0RmVlZHMSGS5mZWVkLnYxLkxpc3RGZWVkc1JlcXVlc3QaGi5mZWVkLnYxLkxpc3RGZWVkc1Jlc3BvbnNlEkUKCkNyZWF0ZUZlZWQSGi5mZWVkLnYxLkNyZWF0ZUZlZWRSZXF1ZXN0GhsuZmVlZC52MS5DcmVhdGVGZWVkUmVzcG9uc2USRQoKVXBkYXRlRmVlZBIaLmZlZWQudjEuVXBkYXRlRmVlZFJlcXVlc3QaGy5mZWVkLnYxLlVwZGF0ZUZlZWRSZXNwb25zZRJFCgpEZWxldGVGZWVkEhouZmVlZC52MS5EZWxldGVGZWVkUmVxdWVzdBobLmZlZWQudjEuRGVsZXRlRmVlZFJlc3BvbnNlEksKDFJlZnJlc2hGZWVkcxIcLmZlZWQudjEuUmVmcmVzaEZlZWRzUmVxdWVzdBodLmZlZWQudjEuUmVmcmVzaEZlZWRzUmVzcG9uc2USRQoKSW1wb3J0T3BtbBIaLmZlZWQudjEuSW1wb3J0T3BtbFJlcXVlc3QaGy5mZWVkLnYxLkltcG9ydE9wbWxSZXNwb25zZRJFCgpFeHBvcnRPcG1sEhouZmVlZC52MS5FeHBvcnRPcG1sUmVxdWVzdBobLmZlZWQudjEuRXhwb3J0T3BtbFJlc3BvbnNlEksKDExpc3RGZWVkVGFncxIcLmZlZWQudjEuTGlzdEZlZWRUYWdzUmVxdWVzdBodLmZlZWQudjEuTGlzdEZlZWRUYWdzUmVzcG9uc2USSAoLU2V0RmVlZFRhZ3MSGy5mZWVkLnYxLlNldEZlZWRUYWdzUmVxdWVzdBocLmZlZWQudjEuU2V0RmVlZFRhZ3NSZXNwb25zZRJRCg5NYW5hZ2VGZWVkVGFncxIeLmZlZWQudjEuTWFuYWdlRmVlZFRhZ3NSZXF1ZXN0Gh8uZmVlZC52MS5NYW5hZ2VGZWVkVGFnc1Jlc3BvbnNlEksKDFN1c3BlbmRGZWVkcxIcLmZlZWQudjEuU3VzcGVuZEZlZWRzUmVxdWVzdBodLmZlZWQudjEuU3VzcGVuZEZlZWRzUmVzcG9uc2VCPVo7Z2l0aHViLmNvbS9uYWthdGFuYWthdGFuYS9mZWVkLXJlYWRlci9nZW4vZ28vZmVlZC92MTtmZWVkdjFiBnByb3RvMw",[Z0]),Y0=Ya(u_,0),[$d,Ws]=vs({fetchingFeedIds:new Set,errors:{}}),Yt={get isFetching(){return e=>$d.fetchingFeedIds.has(e)},get error(){return e=>$d.errors[e]},startFetching(e){Ws("fetchingFeedIds",t=>{const n=new Set(t);for(const r of e)n.add(r);return n}),Ws("errors",t=>{const n={...t};for(const r of e)delete n[r];return n})},finishFetching(e,t){Ws("fetchingFeedIds",n=>{const r=new Set(n);for(const s of e)r.delete(s);return r}),t&&Ws("errors",n=>{const r={...n};for(const s of t)s.errorMessage?r[s.feedId]=s.errorMessage:delete r[s.feedId];return r})}},tn=Zi(Y0,Rs),a_=async e=>{await tn.manageFeedTags(e),we.invalidateQueries({queryKey:["feeds"]}),we.invalidateQueries({queryKey:["tags"]}),we.invalidateQueries({queryKey:["feed-tags"]})},c_=async e=>{Yt.startFetching(e);try{const t=await tn.refreshFeeds({ids:e});return Yt.finishFetching(e,t.results.map(n=>({feedId:n.feedId,errorMessage:n.errorMessage}))),we.invalidateQueries({queryKey:["feeds"]}),we.invalidateQueries({queryKey:["items"]}),we.invalidateQueries({queryKey:["tags"]}),t}catch(t){throw Yt.finishFetching(e,e.map(n=>({feedId:n,errorMessage:t instanceof Error?t.message:String(t)}))),t}},l_=async(e,t)=>{await tn.suspendFeeds({ids:e,suspendSeconds:BigInt(t)}),we.invalidateQueries({queryKey:["feeds"]})},d_=async e=>{const t=await tn.exportOpml({ids:e}),n=new Blob([t.opmlContent],{type:"application/xml"}),r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download="feeds.opml",document.body.appendChild(s),s.click(),document.body.removeChild(s),setTimeout(()=>URL.revokeObjectURL(r),100)},f_=Es(Yi({id:"feeds",queryClient:we,queryKey:["feeds"],gcTime:5*1e3,queryFn:async()=>(await tn.listFeeds({})).feeds.map(t=>({id:t.id,url:t.url,link:t.link,title:t.title,unreadCount:t.unreadCount,lastFetchedAt:t.lastFetchedAt,nextFetch:t.nextFetch,tags:t.tags})),getKey:e=>e.id,onDelete:async({transaction:e})=>{for(const t of e.mutations)t.type==="delete"&&await tn.deleteFeed({id:t.key})}})),h_=async(e,t)=>{const n=t.map(r=>r.id);await tn.createFeed({url:e,tagIds:n}),await we.invalidateQueries({queryKey:["feeds"]})},p_=async e=>{await tn.deleteFeed({id:e}),await we.invalidateQueries({queryKey:["feeds"]}),await we.invalidateQueries({queryKey:["tags"]}),await we.invalidateQueries({queryKey:["feed-tags"]})},br=Es(Yi({id:"feed-tags",queryClient:we,queryKey:["feed-tags"],queryFn:async()=>(await tn.listFeedTags({})).feedTags.map(t=>({id:`${t.feedId}-${t.tagId}`,feedId:t.feedId,tagId:t.tagId})),getKey:e=>e.id})),Oo=Zi(o_,Rs),ds=Es(Yi({id:"tags",queryClient:we,queryKey:["tags"],queryFn:async()=>(await Oo.listTags({})).tags.map(t=>({id:t.id,name:t.name,unreadCount:t.unreadCount,feedCount:t.feedCount})),onInsert:async({transaction:e})=>{e.mutations.map(async t=>{await Oo.createTag({name:t.modified.name})})},onDelete:async({transaction:e})=>{e.mutations.map(async t=>{await Oo.deleteTag({id:t.modified.id})})},getKey:e=>e.id})),m_=rs(e=>e.from({tag:ds}).select(({tag:t})=>({...t}))),qa=rs(e=>e.from({tag:m_}).leftJoin({ft:br},({tag:t,ft:n})=>Je(t.id,n.tagId)).groupBy(({tag:t})=>[t.id,t.name,t.unreadCount,t.feedCount]).select(({tag:t,ft:n})=>({id:t.id,name:t.name,unreadCount:t.unreadCount,feedCount:t.feedCount??lu(n?.feedId)})));var g_=B("<span>"),b_=B("<button>");function ye(e){const t=()=>e.variant??"secondary",n=()=>e.size??"md",r=()=>n()==="sm"?{fontSize:"xs",py:"1.5",px:"3"}:{fontSize:"sm",py:"2",px:"4"},s=()=>{switch(t()){case"primary":return{bg:"blue.600",color:"white",_hover:{bg:"blue.700"}};case"ghost":return{bg:"transparent",color:"blue.600",_hover:{bg:"blue.50",color:"blue.700"}};case"danger":return{bg:"red.50",color:"red.600",_hover:{bg:"red.100"}};default:return{bg:"transparent",color:"gray.600",_hover:{bg:"gray.50",color:"gray.700"}}}};return(()=>{var i=b_();return Ni(i,Mt(e,{get type(){return e.type??"button"},onClick:o=>{e.onClickEvent?.(o),e.onClick?.(o)},get disabled(){return e.disabled},get"aria-label"(){return e.ariaLabel},get class(){return ks(O({borderRadius:"md",fontWeight:"medium",cursor:"pointer",border:"1px solid",borderColor:t()==="ghost"?"transparent":t()==="danger"?"red.200":t()==="primary"?"blue.600":"gray.300",transition:"all 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center",gap:"2",_disabled:{opacity:.5,cursor:"not-allowed"},...r(),...s()}),e.class)}}),!1,!0),T(i,()=>e.icon,null),T(i,k(G,{get when(){return e.hideTextOnMobile},get fallback(){return e.children},get children(){var o=g_();return T(o,()=>e.children),L(()=>C(o,O({display:{base:"none",md:"inline"}}))),o}}),null),i})()}var y_=B("<span>");function fs(e){const t=()=>e.variant??"neutral";return(()=>{var n=y_();return T(n,()=>e.children),L(()=>C(n,ks(O({fontSize:"xs",fontWeight:"bold",paddingX:"2",paddingY:"0.5",borderRadius:"full",minWidth:"2rem",textAlign:"center",backgroundColor:t()==="primary"?"blue.100":"gray.100",color:t()==="primary"?"blue.700":"gray.700"}),e.class))),n})()}var v_=B("<div><div><div>"),w_=B("<div>");function Ha(e){return(()=>{var t=v_(),n=t.firstChild,r=n.firstChild;return T(r,()=>e.title),T(n,(()=>{var s=le(()=>!!e.description);return()=>s()?(()=>{var i=w_();return T(i,()=>e.description),L(()=>C(i,O({fontSize:"sm",color:"gray.500"}))),i})():null})(),null),T(n,()=>e.action,null),L(s=>{var i=Hi({border:"1px dashed",borderColor:"gray.200",borderRadius:"md",padding:"6",textAlign:"center",color:"gray.600"}),o=me({gap:"2",alignItems:"center"}),u=O({fontWeight:"medium"});return i!==s.e&&C(t,s.e=i),o!==s.t&&C(n,s.t=o),u!==s.a&&C(r,s.a=u),s},{e:void 0,t:void 0,a:void 0}),t})()}var x_=B('<div><div><form><input type=text placeholder="New tag name"></form></div><div><span>Tag</span><span>Feeds</span><span> tags</span></div><div><div><div>'),S_=B("<div><span>");const __=()=>{const[e,t]=H(""),n=Bt(i=>i.from({tag:qa}).orderBy(({tag:o})=>o.feedCount,"desc")),r=i=>{i.preventDefault(),e()&&(ds.insert({id:"dummy",name:e(),unreadCount:0n,feedCount:0n}),t(""))},s=(i,o,u)=>{u>0n&&!confirm(`Delete "${o}"? It is used by ${u.toString()} feed(s).`)||ds.delete(i)};return(()=>{var i=x_(),o=i.firstChild,u=o.firstChild,a=u.firstChild,c=o.nextSibling,l=c.firstChild,d=l.nextSibling,p=d.nextSibling,f=p.firstChild,h=c.nextSibling,m=h.firstChild,g=m.firstChild;return u.addEventListener("submit",r),a.$$input=y=>t(y.currentTarget.value),T(u,k(ye,{type:"submit",variant:"primary",children:"Add Tag"}),null),T(p,()=>n().length,f),T(g,k(G,{get when(){return n().length>0},get children(){return k(At,{get each(){return n()},children:y=>(()=>{var w=S_(),v=w.firstChild;return T(v,()=>y.name),T(w,k(fs,{get children(){return["feed: ",le(()=>y.feedCount.toString())]}}),null),T(w,k(ye,{variant:"danger",size:"sm",onClick:()=>s(y.id,y.name,y.feedCount?BigInt(y.feedCount):0n),get ariaLabel(){return`Delete ${y.name}`},children:"Delete"}),null),L(b=>{var x=O({display:"grid",gridTemplateColumns:"1fr auto auto",gap:"3",alignItems:"center",px:"3",py:"2",border:"1px solid",borderColor:"gray.100",rounded:"md",_hover:{bg:"gray.50"}}),E=O({fontWeight:"medium"});return x!==b.e&&C(w,b.e=x),E!==b.t&&C(v,b.t=E),b},{e:void 0,t:void 0}),w})()})}}),null),T(g,k(G,{get when(){return n().length===0},get children(){return k(Ha,{title:"No tags yet.",description:"Create one to get started."})}}),null),L(y=>{var w=me({gap:"4",height:"full",minHeight:0}),v=me({gap:"3",bg:"white",p:"4",rounded:"md",shadow:"sm",border:"1px solid",borderColor:"gray.200"}),b=X({gap:"3",alignItems:"center",flexWrap:"wrap"}),x=O({flex:"1",minW:"220px",px:"3",py:"2",border:"1px solid",borderColor:"gray.300",rounded:"md",_focusVisible:{outlineColor:"blue.500"}}),E=O({display:"grid",gridTemplateColumns:"1fr auto auto",gap:"3",fontSize:"xs",color:"gray.500",backgroundColor:"gray.50",borderRadius:"md",paddingY:"2",textTransform:"uppercase",letterSpacing:"wide",px:"2"}),R=O({textAlign:"right",fontWeight:"semibold"}),S=me({gap:"3",bg:"white",p:"4",rounded:"md",shadow:"sm",border:"1px solid",borderColor:"gray.200",flex:1,minHeight:0}),_=me({gap:"2",flex:1,minHeight:0}),A=me({gap:"2",flex:1,minHeight:0,overflowY:"auto",paddingRight:"1"});return w!==y.e&&C(i,y.e=w),v!==y.t&&C(o,y.t=v),b!==y.a&&C(u,y.a=b),x!==y.o&&C(a,y.o=x),E!==y.i&&C(c,y.i=E),R!==y.n&&C(p,y.n=R),S!==y.s&&C(h,y.s=S),_!==y.h&&C(m,y.h=_),A!==y.r&&C(g,y.r=A),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0}),L(()=>a.value=e()),i})()};_t(["input"]);var E_=B("<div>");function Xa(e){return(()=>{var t=E_();return T(t,()=>e.children),L(()=>C(t,me({padding:{base:"2",md:"4"},gap:{base:"2",md:"6"},height:"calc(100vh - 56px)",minHeight:0,overflow:"hidden",backgroundColor:"gray.50"}))),t})()}var k_=B("<div>");const C_=zn("/tags")({component:I_});function I_(){return k(Xa,{get children(){var e=k_();return T(e,k(__,{})),L(()=>C(e,O({flex:"1",minHeight:0,overflow:"auto"}))),e}})}var A_=B('<button type=button aria-label="Scroll left"><svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>Scroll left</title><path d="m15 18-6-6 6-6">'),R_=B('<button type=button aria-label="Scroll right"><svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>Scroll right</title><path d="m9 18 6-6-6-6">'),T_=B('<div><section data-testid=horizontal-scroll-container aria-label="Scrollable content">');function q0(e){let t;const[n,r]=H(!1),[s,i]=H(!1),o=()=>{if(!t)return;const{scrollLeft:a,scrollWidth:c,clientWidth:l}=t;r(a>0),i(a<c-l-1)};Kn(()=>{o(),t?.addEventListener("scroll",o),window.addEventListener("resize",o)}),Ee(()=>{t?.removeEventListener("scroll",o),window.removeEventListener("resize",o)});const u=a=>{if(!t)return;const c=t.clientWidth*.8;t.scrollBy({left:a==="left"?-c:c,behavior:"smooth"})};return(()=>{var a=T_(),c=a.firstChild;T(a,k(G,{get when(){return n()},get children(){var d=A_();return d.$$click=()=>u("left"),L(()=>C(d,O({position:"absolute",left:0,zIndex:1,height:"full",width:"8",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to right, white 60%, transparent)",cursor:"pointer",border:"none",color:"gray.600",_hover:{color:"gray.900"}}))),d}}),c),c.addEventListener("mouseenter",o);var l=t;return typeof l=="function"?mn(l,c):t=c,T(c,()=>e.children),T(a,k(G,{get when(){return s()},get children(){var d=R_();return d.$$click=()=>u("right"),L(()=>C(d,O({position:"absolute",right:0,zIndex:1,height:"full",width:"8",display:"flex",alignItems:"center",justifyContent:"center",background:"linear-gradient(to left, white 60%, transparent)",cursor:"pointer",border:"none",color:"gray.600",_hover:{color:"gray.900"}}))),d}}),null),L(d=>{var p=ks(O({position:"relative",width:"full",display:"flex",alignItems:"center",minWidth:0}),e.class),f=X({gap:"2",overflowX:"auto",flexWrap:"nowrap",width:"full",alignItems:"center",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"},paddingX:"1",minWidth:0});return p!==d.e&&C(a,d.e=p),f!==d.t&&C(c,d.t=f),d},{e:void 0,t:void 0}),a})()}_t(["click"]);var O_=B("<button type=button>");function Nu(e){return(()=>{var t=O_();return Vu(t,"click",e.onClick,!0),T(t,()=>e.children),L(()=>C(t,ks(O({px:"3",py:"1",minH:"8",rounded:"full",fontSize:"xs",cursor:"pointer",border:"1px solid",display:"inline-flex",alignItems:"center",gap:"1.5",transition:"all 0.2s",...e.selected?{bg:"blue.600",borderColor:"blue.600",color:"white"}:{bg:"transparent",borderColor:"gray.300",color:"gray.600"}}),e.class))),t})()}_t(["click"]);var F_=B('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>Add</title><line x1=12 y1=5 x2=12 y2=19></line><line x1=5 y1=12 x2=19 y2=12>'),D_=B('<div><form><div><input type=text placeholder="Feed URL"></div><div><span>Tags:'),N_=B("<p>Error: ");function P_(e){const[t,n]=H(""),[r,s]=H([]),[i,o]=H(!1),[u,a]=H(null),c=Bt(f=>f.from({tag:qa}).orderBy(({tag:h})=>h.feedCount,"desc")),l=async f=>{f.preventDefault(),o(!0),a(null);try{const h=c().filter(m=>r().includes(m.id));await h_(t(),h),n(""),s([])}catch(h){a(h instanceof Error?h:new Error("Unknown error"))}finally{o(!1)}},d=f=>{r().includes(f)?s(r().filter(h=>h!==f)):s([...r(),f])},p=()=>F_();return(()=>{var f=D_(),h=f.firstChild,m=h.firstChild,g=m.firstChild,y=m.nextSibling,w=y.firstChild;return h.addEventListener("submit",l),g.$$input=v=>n(v.currentTarget.value),T(m,k(ye,{type:"submit",variant:"primary",get disabled(){return i()},get icon(){return k(p,{})},hideTextOnMobile:!0,ariaLabel:"Add Feed",get children(){return i()?"Adding...":"Add Feed"}}),null),T(m,k(G,{get when(){return e.headerActions},get children(){return e.headerActions}}),null),T(y,k(q0,{get children(){return k(At,{get each(){return c()},children:v=>k(Nu,{get selected(){return r().includes(v.id)},onClick:()=>d(v.id),get children(){return v.name}})})}}),null),T(h,(()=>{var v=le(()=>!!u());return()=>v()&&(()=>{var b=N_();return b.firstChild,T(b,()=>u()?.message,null),L(()=>C(b,O({color:"red.500",fontSize:"sm",width:"full"}))),b})()})(),null),L(v=>{var b=X({flexDirection:"column",gap:"2",width:"full"}),x=X({gap:{base:"2",md:"4"},alignItems:"flex-start",flexDirection:"column",width:"full",bg:"white",p:{base:"2",md:"4"},rounded:"md",shadow:"sm",border:"1px solid",borderColor:"gray.200"}),E=X({gap:"2",width:"full",flexDirection:"row",alignItems:"center"}),R=i(),S=O({border:"1px solid",borderColor:"gray.300",padding:"2",borderRadius:"md",flex:"1",minWidth:0,_disabled:{opacity:.5}}),_=X({gap:"2",alignItems:"center",width:"full",minWidth:0}),A=O({fontSize:"sm",color:"gray.600",whiteSpace:"nowrap"});return b!==v.e&&C(f,v.e=b),x!==v.t&&C(h,v.t=x),E!==v.a&&C(m,v.a=E),R!==v.o&&(g.disabled=v.o=R),S!==v.i&&C(g,v.i=S),_!==v.n&&C(y,v.n=_),A!==v.s&&C(w,v.s=A),v},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),L(()=>g.value=t()),f})()}_t(["input"]);var L_=B("<div data-testid=bulk-action-bar><span> <!> selected</span><div>");function H0(e){return k(G,{get when(){return e.selectedCount>0},get children(){var t=L_(),n=t.firstChild,r=n.firstChild,s=r.nextSibling;s.nextSibling;var i=n.nextSibling;return T(n,()=>e.selectedCount,r),T(n,()=>e.unit||"items",s),T(i,k(ye,{size:"sm",variant:"secondary",get onClick(){return e.onClear},children:"Clear"}),null),T(i,k(G,{get when(){return e.onExport},get children(){return k(ye,{size:"sm",variant:"secondary",onClick:()=>e.onExport?.(),children:"Export OPML"})}}),null),T(i,()=>e.children,null),L(o=>{var u=X({position:"fixed",bottom:"6",left:"50%",transform:"translateX(-50%)",zIndex:100,backgroundColor:"blue.50",border:"1px solid",borderColor:"blue.200",borderRadius:"lg",padding:"4",justifyContent:"space-between",alignItems:"center",boxShadow:"xl",width:"max-content",minWidth:"300px",gap:"8"}),a=O({fontSize:"sm",fontWeight:"medium",color:"blue.800",whiteSpace:"nowrap"}),c=X({gap:"2"});return u!==o.e&&C(t,o.e=u),a!==o.t&&C(n,o.t=a),c!==o.a&&C(i,o.a=c),o},{e:void 0,t:void 0,a:void 0}),t}})}var M_=B("<h2>"),B_=B("<button type=button aria-label=Close>"),$_=B("<div><div>"),V_=B("<div>"),U_=B("<div><div tabindex=-1 role=dialog aria-modal=true><div>");function Ja(e){let t;Kn(()=>{t&&t.focus()});const n=()=>e.size??"standard",r=()=>O({backgroundColor:"white",borderRadius:{base:"none",md:"lg"},boxShadow:"xl",overflow:"hidden",position:"relative",textAlign:"left",outline:"none",display:"flex",flexDirection:"column",width:n()==="full"?{base:"full",md:"90vw"}:{base:"96vw",md:"80vw",lg:"50vw"},height:n()==="full"?{base:"full",md:"90vh"}:"auto",maxWidth:n()==="full"?{base:"full",md:"none"}:"48rem",maxHeight:n()==="full"?{base:"full",md:"90vh"}:"90vh"}),s=o=>{e.disableBackdropClose||o.target===o.currentTarget&&e.onClose()},i=o=>{if(e.onKeyDown?.(o),o.key==="Escape"&&!e.disableBackdropClose&&e.onClose(),o.key==="Tab"&&t){const a=Array.from(t.querySelectorAll('button:not([disabled]), [href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'));if(a.length===0)return;const c=a[0],l=a[a.length-1];o.shiftKey?(document.activeElement===c||document.activeElement===t)&&(o.preventDefault(),l.focus()):document.activeElement===l&&(o.preventDefault(),c.focus())}};return k(G,{get when(){return e.isOpen},get children(){var o=U_(),u=o.firstChild,a=u.firstChild;return o.$$keydown=i,o.$$click=s,u.$$keydown=i,u.$$click=c=>c.stopPropagation(),mn(c=>{t=c,e.ref?.(c)},u),T(u,k(G,{get when(){return e.title||!e.hideClose},get children(){var c=$_(),l=c.firstChild;return T(l,k(G,{get when(){return e.title},get children(){var d=M_();return T(d,()=>e.title),L(()=>C(d,O({fontSize:"lg",fontWeight:"bold"}))),d}}),null),T(l,()=>e.headerExtras,null),T(c,k(G,{get when(){return!e.hideClose},get children(){var d=B_();return Vu(d,"click",e.onClose,!0),L(()=>C(d,O({padding:"2",cursor:"pointer",color:"gray.500",_hover:{color:"gray.700"}}))),d}}),null),L(d=>{var p=X({justifyContent:"space-between",alignItems:"center",padding:"4",borderBottom:"1px solid",borderColor:"gray.100"}),f=X({gap:"3",alignItems:"center",flex:1});return p!==d.e&&C(c,d.e=p),f!==d.t&&C(l,d.t=f),d},{e:void 0,t:void 0}),c}}),a),T(a,()=>e.children),T(u,k(G,{get when(){return e.footer},get children(){var c=V_();return T(c,()=>e.footer),L(()=>C(c,X({justifyContent:"space-between",alignItems:"center",padding:"4",borderTop:"1px solid",borderColor:"gray.100",backgroundColor:"gray.50"}))),c}}),null),L(c=>{var l=Hi({position:"fixed",top:0,left:0,width:"screen",height:"screen",backgroundColor:"rgba(0, 0, 0, 0.5)",zIndex:1e3,padding:{base:"0",md:"4"}}),d=e.ariaLabel??e.title,p=r(),f=me({padding:e.bodyPadding===!1?"0":"6",gap:"4",overflowY:"auto",flex:1,minHeight:0});return l!==c.e&&C(o,c.e=l),d!==c.t&&st(u,"aria-label",c.t=d),p!==c.a&&C(u,c.a=p),f!==c.o&&C(a,c.o=f),c},{e:void 0,t:void 0,a:void 0,o:void 0}),o}})}_t(["click","keydown"]);var z_=B("<div><p>Select tags to add to or remove from all selected feeds.</p><div><h3>All Tags</h3><div>"),K_=B("<div>"),W_=B("<div><span></span><div>");function G_(e){const t=Bt(l=>l.from({tag:ds}).select(({tag:d})=>({...d}))),n=Qo(()=>({mutationFn:a_})),[r,s]=H([]),[i,o]=H([]),u=l=>{r().includes(l)?s(r().filter(d=>d!==l)):(s([...r(),l]),o(i().filter(d=>d!==l)))},a=l=>{i().includes(l)?o(i().filter(d=>d!==l)):(o([...i(),l]),s(r().filter(d=>d!==l)))},c=async()=>{try{await n.mutateAsync({feedIds:e.feedIds,addTagIds:r(),removeTagIds:i()}),e.onClose(),s([]),o([])}catch(l){console.error("Failed to manage tags",l)}};return k(Ja,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},size:"standard",get title(){return`Manage Tags for ${e.feedIds.length} feeds`},ariaLabel:"Manage tags",get footer(){return(()=>{var l=K_();return T(l,k(ye,{variant:"secondary",get onClick(){return e.onClose},children:"Cancel"}),null),T(l,k(ye,{variant:"primary",onClick:c,get disabled(){return n.isPending||r().length===0&&i().length===0},get children(){return n.isPending?"Saving...":"Save Changes"}}),null),L(()=>C(l,X({justifyContent:"flex-end",gap:"3",width:"full"}))),l})()},get children(){var l=z_(),d=l.firstChild,p=d.nextSibling,f=p.firstChild,h=f.nextSibling;return T(h,k(At,{get each(){return t()},children:m=>(()=>{var g=W_(),y=g.firstChild,w=y.nextSibling;return T(y,()=>m.name),T(w,k(ye,{size:"sm",get variant(){return r().includes(m.id)?"primary":"secondary"},onClick:()=>u(m.id),children:"Add"}),null),T(w,k(ye,{size:"sm",get variant(){return i().includes(m.id)?"danger":"secondary"},onClick:()=>a(m.id),children:"Remove"}),null),L(v=>{var b=X({justifyContent:"space-between",alignItems:"center",padding:"2",borderBottom:"1px solid",borderColor:"gray.100",_last:{borderBottom:"none"}}),x=O({fontSize:"sm"}),E=X({gap:"2"});return b!==v.e&&C(g,v.e=b),x!==v.t&&C(y,v.t=x),E!==v.a&&C(w,v.a=E),v},{e:void 0,t:void 0,a:void 0}),g})()})),L(m=>{var g=me({gap:"4"}),y=O({fontSize:"sm",color:"gray.500"}),w=me({gap:"2"}),v=O({fontSize:"md",fontWeight:"semibold"}),b=O({maxHeight:"60",overflowY:"auto",border:"1px solid",borderColor:"gray.200",rounded:"md"});return g!==m.e&&C(l,m.e=g),y!==m.t&&C(d,m.t=y),w!==m.a&&C(p,m.a=w),v!==m.o&&C(f,m.o=v),b!==m.i&&C(h,m.i=b),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),l}})}var j_=B("<div role=menu>"),Z_=B('<div><button type=button aria-haspopup=menu><svg xmlns=http://www.w3.org/2000/svg width=20 height=20 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>More actions</title><circle cx=12 cy=12 r=1></circle><circle cx=12 cy=5 r=1></circle><circle cx=12 cy=19 r=1>'),Y_=B("<button type=button role=menuitem>");function q_(e){const[t,n]=H(!1),[r,s]=H(-1);let i,o;const u=[],a=p=>{p.stopPropagation();const f=!t();n(f),f&&s(-1)},c=p=>{t()&&i&&!i.contains(p.target)&&o&&!o.contains(p.target)&&n(!1)},l=p=>{if(!t()){(p.key==="Enter"||p.key===" ")&&i===document.activeElement&&(n(!0),s(-1));return}if(p.key==="Escape")n(!1),i?.focus();else if(p.key==="ArrowDown"){p.preventDefault();const f=(r()+1)%e.actions.length;s(f),u[f]?.focus()}else if(p.key==="ArrowUp"){p.preventDefault();const f=(r()-1+e.actions.length)%e.actions.length;s(f),u[f]?.focus()}else p.key==="Home"?(p.preventDefault(),s(0),u[0]?.focus()):p.key==="End"&&(p.preventDefault(),s(e.actions.length-1),u[e.actions.length-1]?.focus())};Kn(()=>{document.addEventListener("click",c),document.addEventListener("keydown",l)}),Ee(()=>{document.removeEventListener("click",c),document.removeEventListener("keydown",l)});const d=()=>{if(!i)return{top:"0px",left:"0px"};const p=i.getBoundingClientRect(),f=window.scrollX||window.pageXOffset,h=window.scrollY||window.pageYOffset,m=window.innerWidth,g=window.innerHeight,y=160,w=o?.offsetHeight??0;let v=p.bottom+h+4,b=p.right+f-y;const x=4,E=f+x,R=f+m-y-x;b<E&&(b=E),b>R&&(b=R);const S=h+g-w-x;return v>S&&(v=S),{top:`${v}px`,left:`${b}px`}};return(()=>{var p=Z_(),f=p.firstChild;f.$$click=a;var h=i;return typeof h=="function"?mn(h,f):i=f,T(p,k(G,{get when(){return t()},get children(){return k(cm,{get children(){var m=j_(),g=o;return typeof g=="function"?mn(g,m):o=m,T(m,k(At,{get each(){return e.actions},children:(y,w)=>(()=>{var v=Y_();return v.$$click=b=>{b.stopPropagation(),y.onClick(),n(!1)},mn(b=>{u[w()]=b},v),T(v,()=>y.label),L(()=>C(v,ks(O({width:"full",textAlign:"left",px:"4",py:"2",fontSize:"sm",cursor:"pointer",_hover:{bg:"gray.50"},_focus:{bg:"gray.50",outline:"none"}}),y.variant==="danger"?O({color:"red.600",_hover:{bg:"red.50"},_focus:{bg:"red.50"}}):""))),v})()})),L(y=>{var w=O({position:"absolute",zIndex:1e3,bg:"white",border:"1px solid",borderColor:"gray.200",rounded:"md",shadow:"lg",minWidth:"160px",py:"1"}),v=d();return w!==y.e&&C(m,y.e=w),y.t=Sf(m,v,y.t),y},{e:void 0,t:void 0}),m}})}}),null),L(m=>{var g=O({position:"relative",display:"inline-block"}),y=e.ariaLabel||"More actions",w=t(),v=O({p:"1",rounded:"md",cursor:"pointer",_hover:{bg:"gray.100"},display:"flex",alignItems:"center",justifyContent:"center"});return g!==m.e&&C(p,m.e=g),y!==m.t&&st(f,"aria-label",m.t=y),w!==m.a&&st(f,"aria-expanded",m.a=w),v!==m.o&&C(f,m.o=v),m},{e:void 0,t:void 0,a:void 0,o:void 0}),p})()}_t(["click"]);var H_=B("<p>Loading..."),X_=B("<p>Delete Error: "),J_=B('<div><select aria-label="Suspend selected feeds"><option value=0>Suspend Selected...</option><option value=86400>1 Day</option><option value=259200>3 Days</option><option value=604800>1 Week</option><option value=2592000>1 Month'),Q_=B('<div><div><div><div><input type=checkbox id=select-all-visible aria-label="Select all visible feeds"></div><label for=sort-by>Sort by:</label><select id=sort-by aria-label="Sort by"><option value=title_asc>Title (A-Z)</option><option value=title_desc>Title (Z-A)</option><option value=last_fetched>Last Fetched</option><option value=next_fetch>Next Fetch</option></select><span>Filter:</span><select aria-label="Filter by tag"><option value=all>All</option><option value=untagged>Untagged</option></select></div></div><div><div><ul>'),eE=B("<option>"),tE=B("<div title=Fetching...>"),nE=B('<div><svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>Error fetching feed</title><circle cx=12 cy=12 r=10></circle><line x1=12 y1=8 x2=12 y2=12></line><line x1=12 y1=16 x2=12.01 y2=16>'),rE=B("<span>Next fetch: "),sE=B('<li><div><input type=checkbox><div><div><a target=_blank rel="noopener noreferrer"></a><div></div></div><div><span></span><button type=button title="Copy URL"><svg xmlns=http://www.w3.org/2000/svg width=12 height=12 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>Copy URL</title><rect width=14 height=14 x=8 y=8 rx=2 ry=2></rect><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"></path></svg></button></div><div><span>Last fetched: </span></div></div></div><div><div><div><select aria-label="Suspend fetching"><option value=0>Suspend...</option><option value=86400>1 Day</option><option value=259200>3 Days</option><option value=604800>1 Week</option><option value=2592000>1 Month</option></select></div></div><div>');function iE(){const e=Qo(()=>({mutationFn:c_})),t=Qo(()=>({mutationFn:b=>l_(b.ids,b.seconds)})),[n,r]=H(),[s,i]=H("title_asc"),[o,u]=H([]),[a,c]=H(!1),l=Bt(b=>b.from({tag:qa}).select(({tag:x})=>({...x}))),d=Bt(b=>{const x=n(),E=s();let R=b.from({feed:f_});return x===null&&(R=R.leftJoin({ft:br},({feed:S,ft:_})=>Je(S.id,_.feedId)).where(({ft:S})=>y2(S))),x&&x!==null&&(R=R.leftJoin({ft:br},({feed:S,ft:_})=>Je(S.id,_.feedId)).where(({ft:S})=>Je(S?.tagId,x))),E==="title_desc"?R=R.orderBy(({feed:S})=>S.title,"desc"):E==="last_fetched"?R=R.orderBy(({feed:S})=>S.lastFetchedAt||"","asc").orderBy(({feed:S})=>S.title,"asc"):E==="next_fetch"?R=R.orderBy(({feed:S})=>S.nextFetch||"","asc").orderBy(({feed:S})=>S.title,"asc"):R=R.orderBy(({feed:S})=>S.title,"asc"),R.select(({feed:S})=>({...S}))}),p=()=>{const b=d();return b.length===0?!1:b.every(x=>o().includes(x.id))},f=()=>{const b=d();if(b.length===0)return!1;const x=b.filter(E=>o().includes(E.id)).length;return x>0&&x<b.length},h=()=>{const b=d();if(p()){const x=b.map(E=>E.id);u(o().filter(E=>!x.includes(E)))}else{const E=[...o()];for(const R of b)E.includes(R.id)||E.push(R.id);u(E)}},[m,g]=H(null),y=async b=>{g(null);try{await p_(b)}catch(x){g(x instanceof Error?x:new Error("Failed to delete feed"))}},w=async(b,x)=>{try{await t.mutateAsync({ids:b,seconds:x})}catch(E){console.error("Failed to suspend feeds:",E)}},v=b=>{o().includes(b)?u(o().filter(x=>x!==b)):u([...o(),b])};return(()=>{var b=Q_(),x=b.firstChild,E=x.firstChild,R=E.firstChild,S=R.firstChild,_=R.nextSibling,A=_.nextSibling,F=A.nextSibling,D=F.nextSibling,z=D.firstChild;z.nextSibling;var K=x.nextSibling,Z=K.firstChild,se=Z.firstChild;return S.addEventListener("change",()=>h()),mn(N=>{Qe(()=>{N.indeterminate=f()})},S),A.$$input=N=>i(N.currentTarget.value),D.$$input=N=>{const ee=N.currentTarget.value;r(ee==="all"?void 0:ee==="untagged"?null:ee)},T(D,k(At,{get each(){return l()},children:N=>(()=>{var ee=eE();return T(ee,()=>N.name,null),T(ee,()=>` (${N.feedCount??0})`,null),L(()=>ee.value=N.id),ee})()}),null),T(K,k(G,{get when(){return d.isLoading},get children(){var N=H_();return L(()=>C(N,O({color:"gray.500",fontSize:"sm"}))),N}}),Z),T(K,k(G,{get when(){return m()},get children(){var N=X_();return N.firstChild,T(N,()=>m()?.message,null),L(()=>C(N,O({color:"red.500"}))),N}}),Z),T(K,k(G,{get when(){return le(()=>!d.isLoading)()&&d().length===0},get children(){return k(Ha,{title:"No feeds found."})}}),Z),T(se,k(At,{get each(){return d()},children:N=>(()=>{var ee=sE(),ie=ee.firstChild,P=ie.firstChild,$=P.nextSibling,W=$.firstChild,ne=W.firstChild,V=ne.nextSibling,he=W.nextSibling,xe=he.firstChild,ke=xe.nextSibling,Ne=he.nextSibling,Se=Ne.firstChild;Se.firstChild;var re=ie.nextSibling,Pe=re.firstChild,tt=Pe.firstChild,nt=tt.firstChild,ft=Pe.nextSibling;return ee.$$keydown=M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),v(N.id))},ee.$$click=()=>v(N.id),P.$$click=M=>M.stopPropagation(),P.addEventListener("change",M=>{M.stopPropagation(),v(N.id)}),ne.$$click=M=>M.stopPropagation(),T(ne,()=>N.title||"Untitled Feed"),T(W,k(G,{get when(){return le(()=>!!N.unreadCount)()&&N.unreadCount>0n},get children(){return k(fs,{variant:"primary",get class(){return O({flexShrink:0})},get children(){return N.unreadCount?.toString()}})}}),V),T(W,k(At,{get each(){return N.tags},children:M=>k(fs,{get class(){return O({flexShrink:0})},get children(){return M.name}})}),V),T(V,k(G,{get when(){return Yt.isFetching(N.id)},get children(){var M=tE();return L(()=>C(M,O({width:"4",height:"4",border:"2px solid",borderColor:"blue.200",borderTopColor:"blue.600",borderRadius:"full",animation:"spin 1s linear infinite"}))),M}}),null),T(V,k(G,{get when(){return Yt.error(N.id)},get children(){var M=nE();return L(de=>{var Ke=O({color:"red.500",cursor:"help",display:"flex",alignItems:"center"}),ht=Yt.error(N.id);return Ke!==de.e&&C(M,de.e=Ke),ht!==de.t&&st(M,"title",de.t=ht),de},{e:void 0,t:void 0}),M}}),null),T(xe,()=>N.url),ke.$$click=M=>{M.stopPropagation(),navigator.clipboard.writeText(N.url);const de=M.currentTarget,Ke=de.innerHTML;de.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><polyline points="20 6 9 17 4 12"/></svg>',de.classList.add(O({color:"green.600!"})),setTimeout(()=>{de.innerHTML=Ke,de.classList.remove(O({color:"green.600!"}))},2e3)},T(Se,(()=>{var M=le(()=>!!N.lastFetchedAt);return()=>M()?cs(N.lastFetchedAt):"Not fetched yet"})(),null),T(Ne,k(G,{get when(){return le(()=>!!N.nextFetch)()&&new Date(N.nextFetch)>new Date},get children(){var M=rE();return M.firstChild,T(M,()=>XS(N.nextFetch??""),null),L(()=>C(M,O({fontSize:"xs",color:"orange.600",fontWeight:"medium"}))),M}}),null),nt.$$click=M=>M.stopPropagation(),nt.addEventListener("change",M=>{M.stopPropagation();const de=Number(M.currentTarget.value);de>0&&w([N.id],de),M.currentTarget.value="0"}),T(Pe,k(ye,{size:"sm",variant:"ghost",onClickEvent:M=>{M.stopPropagation(),e.mutate([N.id])},get disabled(){return Yt.isFetching(N.id)},get children(){return Yt.isFetching(N.id)?"Fetching...":"Fetch"}}),null),T(Pe,k(ye,{size:"sm",variant:"danger",onClickEvent:M=>{M.stopPropagation(),y(N.id)},children:"Delete"}),null),T(ft,k(q_,{get ariaLabel(){return`Actions for ${N.title}`},get actions(){return[{label:Yt.isFetching(N.id)?"Fetching...":"Fetch",onClick:()=>e.mutate([N.id])},{label:"Suspend 1 Day",onClick:()=>w([N.id],86400)},{label:"Suspend 3 Days",onClick:()=>w([N.id],259200)},{label:"Suspend 1 Week",onClick:()=>w([N.id],604800)},{label:"Suspend 1 Month",onClick:()=>w([N.id],2592e3)},{label:"Delete",variant:"danger",onClick:()=>y(N.id)}]}})),L(M=>{var de=X({justifyContent:"space-between",alignItems:"center",padding:"3",border:"1px solid",borderColor:"gray.100",borderRadius:"md",gap:"3",cursor:"pointer",_hover:{backgroundColor:"gray.50"}}),Ke=X({gap:"3",alignItems:"center",flex:1,minWidth:0}),ht=O({cursor:"pointer"}),Zn=me({gap:"1",flex:1,minWidth:0}),to=X({gap:"2",alignItems:"center",width:"full"}),no=N.link||N.url,j=O({fontWeight:"medium",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0,_hover:{textDecoration:"underline",color:"blue.600"}}),ue=X({gap:"2",alignItems:"center"}),ae=X({gap:"2",alignItems:"center",minWidth:0}),te=O({fontSize:"xs",color:"gray.500",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",minWidth:0}),Le=O({color:"gray.400",cursor:"pointer",flexShrink:0,_hover:{color:"gray.600"},display:"inline-flex",alignItems:"center",transition:"all 0.2s"}),Ye=X({gap:"4",alignItems:"center",flexWrap:"wrap"}),Dt=O({fontSize:"xs",color:"gray.500"}),kn=X({gap:"2",alignItems:"center",flexShrink:0}),$e=X({gap:"2",alignItems:"center",display:{base:"none",md:"flex"}}),We=O({position:"relative"}),pt=O({fontSize:"xs",px:"2",py:"1.5",rounded:"md",border:"1px solid",borderColor:"gray.300",bg:"white",cursor:"pointer",_hover:{borderColor:"gray.400"}}),Cn=O({display:{base:"block",md:"none"}});return de!==M.e&&C(ee,M.e=de),Ke!==M.t&&C(ie,M.t=Ke),ht!==M.a&&C(P,M.a=ht),Zn!==M.o&&C($,M.o=Zn),to!==M.i&&C(W,M.i=to),no!==M.n&&st(ne,"href",M.n=no),j!==M.s&&C(ne,M.s=j),ue!==M.h&&C(V,M.h=ue),ae!==M.r&&C(he,M.r=ae),te!==M.d&&C(xe,M.d=te),Le!==M.l&&C(ke,M.l=Le),Ye!==M.u&&C(Ne,M.u=Ye),Dt!==M.c&&C(Se,M.c=Dt),kn!==M.w&&C(re,M.w=kn),$e!==M.m&&C(Pe,M.m=$e),We!==M.f&&C(tt,M.f=We),pt!==M.y&&C(nt,M.y=pt),Cn!==M.g&&C(ft,M.g=Cn),M},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0,f:void 0,y:void 0,g:void 0}),L(()=>P.checked=o().includes(N.id)),ee})()})),T(b,k(G_,{get isOpen(){return a()},onClose:()=>{c(!1),u([])},get feedIds(){return o()}}),null),T(b,k(H0,{get selectedCount(){return o().length},unit:"feeds",onClear:()=>u([]),onExport:async()=>{try{await d_(o())}catch(N){alert(`Failed to export feeds: ${N}`)}},get children(){return[(()=>{var N=J_(),ee=N.firstChild;return ee.addEventListener("change",ie=>{const P=Number(ie.currentTarget.value);P>0&&(w(o(),P),u([])),ie.currentTarget.value="0"}),L(ie=>{var P=X({gap:"2",alignItems:"center"}),$=O({fontSize:"xs",px:"2",py:"1.5",rounded:"md",border:"1px solid",borderColor:"gray.300",bg:"white",cursor:"pointer"});return P!==ie.e&&C(N,ie.e=P),$!==ie.t&&C(ee,ie.t=$),ie},{e:void 0,t:void 0}),N})(),k(ye,{size:"sm",variant:"secondary",onClick:()=>e.mutate(o()),get disabled(){return e.isPending},get children(){return e.isPending?"Fetching...":"Fetch Selected"}}),k(ye,{size:"sm",variant:"primary",onClick:()=>c(!0),children:"Manage Tags"})]}}),null),L(N=>{var ee=O({display:"flex",flexDirection:"column",gap:"4",flex:"1",minHeight:0,width:"100%",minWidth:0}),ie=O({display:"flex",justifyContent:"space-between",alignItems:"stretch",flexDirection:"column",gap:"2",position:"sticky",top:0,zIndex:2,backgroundColor:"gray.50",paddingBottom:"1",md:{alignItems:"center",flexDirection:"row"}}),P=O({display:"flex",gap:"2",alignItems:"center",flexWrap:"nowrap",justifyContent:"flex-start",width:"100%",minWidth:0,md:{justifyContent:"flex-end"}}),$=X({gap:"2",alignItems:"center",mr:"auto"}),W=O({cursor:"pointer"}),ne=O({fontSize:"sm",color:"gray.600"}),V=O({fontSize:"xs",px:"2",py:"1.5",rounded:"md",border:"1px solid",borderColor:"gray.300",bg:"white"}),he=O({fontSize:"sm",color:"gray.600",ml:"2"}),xe=O({fontSize:"xs",px:"2",py:"1.5",rounded:"md",border:"1px solid",borderColor:"gray.300",bg:"white",minW:"10rem"}),ke=O({display:"flex",flexDirection:"column",gap:"2",flex:"1",minHeight:0,backgroundColor:"white"}),Ne=O({flex:"1",minHeight:0,overflowY:"auto",overflowX:"hidden",pr:"1",width:"100%"}),Se=me({gap:"2",width:"full"});return ee!==N.e&&C(b,N.e=ee),ie!==N.t&&C(x,N.t=ie),P!==N.a&&C(E,N.a=P),$!==N.o&&C(R,N.o=$),W!==N.i&&C(S,N.i=W),ne!==N.n&&C(_,N.n=ne),V!==N.s&&C(A,N.s=V),he!==N.h&&C(F,N.h=he),xe!==N.r&&C(D,N.r=xe),ke!==N.d&&C(K,N.d=ke),Ne!==N.l&&C(Z,N.l=Ne),Se!==N.u&&C(se,N.u=Se),N},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0}),L(()=>S.checked=p()),L(()=>A.value=s()),L(()=>D.value=n()??"all"),b})()}_t(["input","click","keydown"]);const X0=Sn(Rs);function oE(e){return k(X0.Provider,{get value(){return e.transport},get children(){return e.children}})}function uE(){const e=nn(X0);if(!e)throw new Error("useTransport must be used within a TransportProvider");return e}var aE=B("<div><div><div></div><div>");function cE(e){return(()=>{var t=aE(),n=t.firstChild,r=n.firstChild,s=r.nextSibling;return T(s,()=>e.label),L(i=>{var o=Hi({padding:"10"}),u=me({gap:"3",alignItems:"center"}),a=O({width:"8",height:"8",border:"4px solid",borderColor:"blue.100",borderTopColor:"blue.600",borderRadius:"full",animation:"spin 1s linear infinite"}),c=O({color:"gray.600",fontSize:"sm"});return o!==i.e&&C(t,i.e=o),u!==i.t&&C(n,i.t=u),a!==i.a&&C(r,i.a=a),c!==i.o&&C(s,i.o=c),i},{e:void 0,t:void 0,a:void 0,o:void 0}),t})()}var lE=B("<p>Select an .opml or .xml file to import your feed subscriptions."),dE=B("<input type=file accept=.opml,.xml>"),fE=B("<p>Error: "),hE=B("<div><p>Failed Items</p><div>"),pE=B("<div><div><p>Import Summary</p><ul><li>Total: </li><li>Success: </li><li>Skipped: </li><li>Failed: "),mE=B("<div><p></p><p>");function gE(e){const t=uE(),n=Zi(Y0,t),[r,s]=H(!1),[i,o]=H(null),[u,a]=H(null),c=async l=>{const d=l.target,p=d.files?.[0];if(p){s(!0),o(null),a(null);try{const f=new FileReader,h=await new Promise((g,y)=>{f.onload=()=>g(new Uint8Array(f.result)),f.onerror=y,f.readAsArrayBuffer(p)}),m=await n.importOpml({opmlContent:h});a({total:m.total,success:m.success,skipped:m.skipped,failedFeeds:m.failedFeeds.map(g=>({url:g.url,errorMessage:g.errorMessage}))}),we.invalidateQueries({queryKey:["feeds"]})}catch(f){o(f instanceof Error?f.message:"Failed to import OPML")}finally{s(!1),d.value=""}}};return k(Ja,{get isOpen(){return e.isOpen},get onClose(){return e.onClose},size:"standard",title:"Import OPML",get disableBackdropClose(){return r()},ariaLabel:"Import OPML",get children(){return[k(G,{get when(){return le(()=>!u())()&&!r()},get children(){return[(()=>{var l=lE();return L(()=>C(l,O({color:"gray.600",fontSize:"sm"}))),l})(),(()=>{var l=dE();return l.addEventListener("change",c),L(()=>C(l,O({width:"full",padding:"2",border:"1px dashed",borderColor:"gray.300",borderRadius:"md",cursor:"pointer"}))),l})()]}}),k(G,{get when(){return r()},get children(){return k(cE,{label:"Processing OPML file..."})}}),k(G,{get when(){return i()},get children(){var l=fE();return l.firstChild,T(l,i,null),L(()=>C(l,O({color:"red.500",fontSize:"sm"}))),l}}),k(G,{get when(){return u()},children:l=>(()=>{var d=pE(),p=d.firstChild,f=p.firstChild,h=f.nextSibling,m=h.firstChild;m.firstChild;var g=m.nextSibling;g.firstChild;var y=g.nextSibling;y.firstChild;var w=y.nextSibling;return w.firstChild,T(m,()=>l().total,null),T(g,()=>l().success,null),T(y,()=>l().skipped,null),T(w,()=>l().failedFeeds.length,null),T(d,k(G,{get when(){return l().failedFeeds.length>0},get children(){var v=hE(),b=v.firstChild,x=b.nextSibling;return T(x,k(At,{get each(){return l().failedFeeds},children:E=>(()=>{var R=mE(),S=R.firstChild,_=S.nextSibling;return T(S,()=>E.url),T(_,()=>E.errorMessage),L(A=>{var F=O({padding:"3",border:"1px solid",borderColor:"red.100",borderRadius:"md",backgroundColor:"red.50"}),D=O({fontSize:"xs",fontWeight:"medium",color:"red.800",wordBreak:"break-all"}),z=O({fontSize:"xs",color:"red.600",marginTop:"1"});return F!==A.e&&C(R,A.e=F),D!==A.t&&C(S,A.t=D),z!==A.a&&C(_,A.a=z),A},{e:void 0,t:void 0,a:void 0}),R})()})),L(E=>{var R=me({gap:"2"}),S=O({fontSize:"sm",fontWeight:"bold",color:"red.600"}),_=me({gap:"2",maxHeight:"60",overflowY:"auto",padding:"1"});return R!==E.e&&C(v,E.e=R),S!==E.t&&C(b,E.t=S),_!==E.a&&C(x,E.a=_),E},{e:void 0,t:void 0,a:void 0}),v}}),null),T(d,k(ye,{variant:"primary",get onClick(){return e.onClose},children:"Done"}),null),L(v=>{var b=me({gap:"4"}),x=O({padding:"3",backgroundColor:"blue.50",borderRadius:"md",border:"1px solid",borderColor:"blue.100"}),E=O({fontWeight:"bold",color:"blue.800",marginBottom:"2"}),R=X({gap:"4",fontSize:"sm",color:"blue.700",flexWrap:"wrap"});return b!==v.e&&C(d,v.e=b),x!==v.t&&C(p,v.t=x),E!==v.a&&C(f,v.a=E),R!==v.o&&C(h,v.o=R),v},{e:void 0,t:void 0,a:void 0,o:void 0}),d})()})]}})}var bE=B('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>Import</title><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="17 8 12 3 7 8"></polyline><line x1=12 y1=3 x2=12 y2=15>'),yE=B("<div><div>");const vE=zn("/feeds")({component:wE});function wE(){const[e,t]=H(!1),n=()=>bE();return k(Xa,{get children(){return[(()=>{var r=yE(),s=r.firstChild;return T(r,k(P_,{get headerActions(){return k(ye,{variant:"ghost",onClick:()=>t(!0),get icon(){return k(n,{})},hideTextOnMobile:!0,ariaLabel:"Import OPML",children:"Import OPML"})}}),s),T(s,k(iE,{})),L(i=>{var o=me({gap:"2",flex:"1",minHeight:0}),u=O({flex:"1",minHeight:0,display:"flex"});return o!==i.e&&C(r,i.e=o),u!==i.t&&C(s,i.t=u),i},{e:void 0,t:void 0}),r})(),k(Bi,{}),k(gE,{get isOpen(){return e()},onClose:()=>t(!1)})]}})}var xE=B("<div><label for=date-filter-select>Date:</label><select id=date-filter-select><option value=all>All Time</option><option value=24h>Past 24 Hours</option><option value=7d>Past 7 Days</option><option value=30d>Past 30 Days</option><option value=90d>Past 90 Days</option><option value=365d>Past 365 Days");function Vd(e){return(()=>{var t=xE(),n=t.firstChild,r=n.nextSibling;return r.addEventListener("change",s=>e.onSelect(s.currentTarget.value)),L(s=>{var i=X({gap:"2",alignItems:"center"}),o=O({fontSize:"sm",color:"gray.600",fontWeight:"medium"}),u=O({padding:"1",paddingInline:"2",fontSize:"sm",border:"1px solid",borderColor:"gray.300",borderRadius:"md",backgroundColor:"white",cursor:"pointer",_focus:{outline:"none",borderColor:"blue.500",boxShadow:"0 0 0 1px rgba(59, 130, 246, 0.5)"}});return i!==s.e&&C(t,s.e=i),o!==s.t&&C(n,s.t=o),u!==s.a&&C(r,s.a=u),s},{e:void 0,t:void 0,a:void 0}),L(()=>r.value=e.value),t})()}var SE=B("<div>"),_E=B("<span>"),EE=B("<span>Read"),kE=B("<div><div><div><input type=checkbox></div><button type=button><div></div><div><span>Received: ");function CE(e){const t=async u=>{try{en().update(e.item.id,a=>{a.id=e.item.id,a.isRead=u})}catch(a){console.error("Failed to update item status",a)}},n=u=>{try{const a=new URL(u);return a.protocol==="http:"||a.protocol==="https:"}catch{return!1}},r=u=>{u.stopPropagation(),e.onToggleSelection?.(u.target.checked)},s=u=>{u.button===1&&(u.preventDefault(),u.stopPropagation(),e.item.url&&n(e.item.url)&&(window.open(e.item.url,"_blank","noopener,noreferrer"),e.item.isRead||t(!0)))},i=u=>{u.preventDefault(),e.onClick(e.item)},o=u=>{(u.key==="Enter"||u.key===" ")&&(u.preventDefault(),e.onClick(e.item))};return(()=>{var u=kE(),a=u.firstChild,c=a.firstChild,l=c.firstChild,d=c.nextSibling,p=d.firstChild,f=p.nextSibling,h=f.firstChild;return h.firstChild,l.$$click=r,d.$$keydown=o,d.$$mousedown=s,d.$$click=i,T(p,()=>e.item.title||"Untitled Article"),T(d,k(G,{get when(){return e.item.description},get children(){var m=SE();return T(m,()=>e.item.description),L(()=>C(m,O({fontSize:"sm",color:"gray.600",lineClamp:1,marginTop:"0.5"}))),m}}),f),T(h,()=>cs(e.item.createdAt),null),T(h,k(G,{get when(){return e.item.publishedAt},get children(){return[(()=>{var m=_E();return L(()=>C(m,O({marginInline:"1"}))),m})(),"Published: ",le(()=>cs(e.item.publishedAt))]}}),null),T(f,k(G,{get when(){return e.item.isRead},get children(){var m=EE();return L(()=>C(m,O({fontSize:"xs",color:"gray.400",backgroundColor:"gray.100",paddingInline:"1.5",borderRadius:"sm"}))),m}}),null),L(m=>{var g=X({justifyContent:"space-between",alignItems:"center",border:"1px solid",borderColor:"gray.100",borderRadius:"md",cursor:"pointer",width:"full",overflow:"hidden",_hover:{backgroundColor:"gray.50"}}),y=X({alignItems:"center",flex:1}),w=O({paddingInline:"3"}),v=O({cursor:"pointer"}),b=me({gap:"1",flex:1,paddingX:"3",paddingY:"1.5",textAlign:"left",cursor:"pointer"}),x=O({fontWeight:"medium",color:e.item.isRead?"gray.500":"blue.600",textDecoration:e.item.isRead?"none":"underline",_hover:{color:"blue.800"},lineClamp:1}),E=X({gap:"2",alignItems:"center",marginTop:"1"}),R=O({fontSize:"xs",color:"gray.500"});return g!==m.e&&C(u,m.e=g),y!==m.t&&C(a,m.t=y),w!==m.a&&C(c,m.a=w),v!==m.o&&C(l,m.o=v),b!==m.i&&C(d,m.i=b),x!==m.n&&C(p,m.n=x),E!==m.s&&C(f,m.s=E),R!==m.h&&C(h,m.h=R),m},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0}),L(()=>l.checked=e.selected),u})()}_t(["click","mousedown","keydown"]);var IE=B("<div><button type=button>Clear Read Items</button><label><input type=checkbox><span>Show Read</span></label><label><input type=checkbox><span>Select All"),AE=B("<div><div><span>Filter by Tag:</span></div><div><div></div><div><div><div><input id=show-read-toggle type=checkbox><label for=show-read-toggle>Show Read</label></div><div><input id=select-all-checkbox type=checkbox><label for=select-all-checkbox>Select All</label></div></div><div><div>"),RE=B('<svg xmlns=http://www.w3.org/2000/svg width=16 height=16 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round><title>More actions</title><circle cx=12 cy=12 r=1></circle><circle cx=12 cy=5 r=1></circle><circle cx=12 cy=19 r=1>'),TE=B("<div>Loading items..."),OE=B("<div><div>"),Ud=B("<div>");function FE(e){const t=ws(),n=Ib(),[r,s]=H(new Set),[i,o]=H(!1),[u,a]=H(!1);let c;Kn(()=>{const S=_=>{c&&!c.contains(_.target)&&a(!1)};document.addEventListener("click",S),Ee(()=>document.removeEventListener("click",S))}),Qe(()=>{e.dateFilter&&qe.setDateFilter(e.dateFilter)});const l=Bt(S=>{let _=S.from({item:en()}).orderBy(({item:A})=>A.publishedAt,{direction:"asc",nulls:"last"}).orderBy(({item:A})=>A.createdAt,"asc");return e.tagId&&(_=_.innerJoin({ft:br},({item:A,ft:F})=>Je(A.feedId,F.feedId)).where(({ft:A})=>Je(A.tagId,e.tagId))),_.select(({item:A})=>({...A}))}),d=J(()=>l().filter(S=>!qe.state.transientRemovedIds[S.id])),p=()=>{const S=d().filter(_=>_.isRead).map(_=>_.id);qe.addTransientRemovedIds(S),s(_=>{const A=new Set(_);for(const F of S)A.delete(F);return A})},f=Bt(S=>S.from({i:Du()}).select(({i:_})=>({total:lu(_.id)}))),h=Bt(S=>S.from({tag:ds}).leftJoin({tf:br},({tag:_,tf:A})=>Je(_.id,A.tagId)).leftJoin({i:Du()},({tf:_,i:A})=>Je(_?.feedId,A.feedId)).groupBy(({tag:_})=>[_.id,_.name]).select(({tag:_,i:A})=>({id:_.id,name:_.name,unreadCount:lu(A?.id)}))),m=S=>{qe.setDateFilter(S),t({search:_=>({..._,since:S==="all"?void 0:S})})},g=()=>d().length>0&&r().size===d().length,y=S=>{s(S?new Set(d().map(_=>_.id)):new Set)},w=(S,_)=>{const A=new Set(r());_?A.add(S):A.delete(S),s(A)},v=S=>{const _=n().pathname.includes("/items/");t({to:"/items/$itemId",params:{itemId:S},search:{tagId:e.tagId,since:e.dateFilter},replace:_})},b=S=>{t({to:".",search:{tagId:S}})},x=async()=>{const S=Array.from(r());if(S.length!==0){o(!0);try{en().update(S,_=>{for(const A of _)A.isRead=!0})}finally{o(!1)}s(new Set)}},E=(()=>{var S=AE(),_=S.firstChild,A=_.firstChild,F=_.nextSibling,D=F.firstChild,z=D.nextSibling,K=z.firstChild,Z=K.firstChild,se=Z.firstChild,N=se.nextSibling,ee=Z.nextSibling,ie=ee.firstChild,P=ie.nextSibling,$=K.nextSibling,W=$.firstChild;T(_,k(q0,{get children(){return[k(Nu,{get selected(){return e.tagId===void 0},onClick:()=>b(void 0),get children(){return["All",k(G,{get when(){return(f()[0]?.total??0n)>0n},get children(){return k(fs,{get variant(){return e.tagId===void 0?"primary":"neutral"},get class(){return O({ml:"1.5",fontSize:"10px",minWidth:"1.5rem"})},get children(){return Dd(Number(f()[0].total))}})}})]}}),k(At,{get each(){return h()},children:V=>k(Nu,{get selected(){return e.tagId===V.id},onClick:()=>b(V.id),get children(){return[le(()=>V.name),k(G,{get when(){return(V.unreadCount??0n)>0n},get children(){return k(fs,{get variant(){return e.tagId===V.id?"primary":"neutral"},get class(){return O({ml:"1.5",fontSize:"10px",minWidth:"1.5rem"})},get children(){return Dd(Number(V.unreadCount))}})}})]}})})]}}),null),T(D,()=>e.headerActions),T(K,k(ye,{size:"sm",variant:"secondary",onClick:p,get disabled(){return!d().some(V=>V.isRead)},"aria-label":"Clear read items from current view",children:"Clear Read Items"}),Z),T(K,k(Vd,{get value(){return qe.state.since},onSelect:m}),Z),se.addEventListener("change",V=>qe.setShowRead(V.currentTarget.checked)),ie.addEventListener("change",V=>y(V.currentTarget.checked)),T($,k(Vd,{get value(){return qe.state.since},onSelect:m}),W);var ne=c;return typeof ne=="function"?mn(ne,W):c=W,T(W,k(ye,{size:"sm",variant:"secondary",onClick:()=>a(!u()),"aria-label":"More actions",get icon(){return RE()},children:"More"}),null),T(W,k(G,{get when(){return u()},get children(){var V=IE(),he=V.firstChild,xe=he.nextSibling,ke=xe.firstChild,Ne=xe.nextSibling,Se=Ne.firstChild;return he.$$click=()=>{p(),a(!1)},ke.addEventListener("change",re=>{qe.setShowRead(re.currentTarget.checked)}),Se.addEventListener("change",re=>{y(re.currentTarget.checked)}),L(re=>{var Pe=O({position:"absolute",top:"100%",right:0,mt:"1",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",boxShadow:"lg",zIndex:100,minW:"160px",display:"flex",flexDirection:"column",padding:"1",gap:"1"}),tt=!d().some(ht=>ht.isRead),nt=O({display:"flex",alignItems:"center",px:"3",py:"2",fontSize:"sm",color:"gray.700",borderRadius:"sm",textAlign:"left",cursor:"pointer",_hover:{bg:"gray.50"},_disabled:{opacity:.5,cursor:"not-allowed",_hover:{bg:"transparent"}}}),ft=O({display:"flex",alignItems:"center",gap:"2",px:"3",py:"2",fontSize:"sm",color:"gray.700",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.50"}}),M=O({cursor:"pointer"}),de=O({display:"flex",alignItems:"center",gap:"2",px:"3",py:"2",fontSize:"sm",color:"gray.700",borderRadius:"sm",cursor:"pointer",_hover:{bg:"gray.50"}}),Ke=O({cursor:"pointer"});return Pe!==re.e&&C(V,re.e=Pe),tt!==re.t&&(he.disabled=re.t=tt),nt!==re.a&&C(he,re.a=nt),ft!==re.o&&C(xe,re.o=ft),M!==re.i&&C(ke,re.i=M),de!==re.n&&C(Ne,re.n=de),Ke!==re.s&&C(Se,re.s=Ke),re},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0}),L(()=>ke.checked=qe.state.showRead),L(()=>Se.checked=g()),V}}),null),T(S,k(H0,{get selectedCount(){return r().size},onClear:()=>s(new Set),get children(){return k(ye,{size:"sm",variant:"primary",onClick:x,get disabled(){return i()},get children(){return i()?"Processing...":"Mark as Read"}})}}),null),L(V=>{var he=me({gap:"2",width:"full"}),xe=X({gap:"2",alignItems:"center",width:"full",minWidth:0}),ke=O({fontSize:"sm",color:"gray.600",whiteSpace:"nowrap"}),Ne=X({justifyContent:"space-between",alignItems:"center",gap:"2",flexWrap:"nowrap"}),Se=X({gap:"2",alignItems:"center",flexShrink:0,minW:0}),re=X({gap:{base:"2",md:"4"},alignItems:"center",flexShrink:0}),Pe=X({display:{base:"none",md:"flex"},gap:"4",alignItems:"center"}),tt=X({gap:"2",alignItems:"center"}),nt=O({cursor:"pointer"}),ft=O({fontSize:"sm",color:"gray.600",cursor:"pointer",whiteSpace:"nowrap"}),M=X({gap:"2",alignItems:"center"}),de=O({cursor:"pointer"}),Ke=O({fontSize:"sm",color:"gray.600",cursor:"pointer",whiteSpace:"nowrap"}),ht=X({display:{base:"flex",md:"none"},gap:"2",alignItems:"center"}),Zn=O({position:"relative"});return he!==V.e&&C(S,V.e=he),xe!==V.t&&C(_,V.t=xe),ke!==V.a&&C(A,V.a=ke),Ne!==V.o&&C(F,V.o=Ne),Se!==V.i&&C(D,V.i=Se),re!==V.n&&C(z,V.n=re),Pe!==V.s&&C(K,V.s=Pe),tt!==V.h&&C(Z,V.h=tt),nt!==V.r&&C(se,V.r=nt),ft!==V.d&&C(N,V.d=ft),M!==V.l&&C(ee,V.l=M),de!==V.u&&C(ie,V.u=de),Ke!==V.c&&C(P,V.c=Ke),ht!==V.w&&C($,V.w=ht),Zn!==V.m&&C(W,V.m=Zn),V},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0,s:void 0,h:void 0,r:void 0,d:void 0,l:void 0,u:void 0,c:void 0,w:void 0,m:void 0}),L(()=>se.checked=qe.state.showRead),L(()=>ie.checked=g()),S})(),R=(()=>{var S=OE(),_=S.firstChild;return T(_,k(At,{get each(){return d()},children:A=>k(CE,{item:A,onClick:()=>v(A.id),get selected(){return r().has(A.id)},onToggleSelection:F=>w(A.id,F)})})),T(S,k(G,{get when(){return l.isLoading},get children(){var A=TE();return L(()=>C(A,O({textAlign:"center",padding:"8",color:"gray.500"}))),A}}),null),T(S,k(G,{get when(){return le(()=>!l.isLoading)()&&d().length===0},get children(){return k(Ha,{title:"No items found."})}}),null),L(A=>{var F=me({gap:"4",padding:"0",paddingBottom:r().size>0?"24":"0"}),D=me({gap:"2",padding:"0"});return F!==A.e&&C(S,A.e=F),D!==A.t&&C(_,A.t=D),A},{e:void 0,t:void 0}),S})();return(()=>{var S=Ud();return T(S,E,null),T(S,k(G,{get when(){return e.fixedControls},fallback:R,get children(){var _=Ud();return T(_,R),L(()=>C(_,O({flex:"1",minHeight:0,overflow:"auto",display:"flex",flexDirection:"column",backgroundColor:"white"}))),_}}),null),L(()=>C(S,me({gap:"4",width:"full",position:"relative",minHeight:0,flex:"1",height:"full"}))),S})()}_t(["click"]);var zd=B("<div>"),DE=B("<span>");const J0=zn("/_items")({validateSearch:e=>{const t=e.since,n=e.tagId;return{tagId:n,since:t??(n?void 0:"30d")}},component:NE});function NE(){const e=J0.useSearch(),t=en();return Kn(()=>{const n=r=>{r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement||r.key==="r"&&!r.ctrlKey&&!r.metaKey&&!r.altKey&&(r.preventDefault(),t.utils.refetch())};window.addEventListener("keydown",n),Ee(()=>window.removeEventListener("keydown",n))}),k(Xa,{get children(){var n=zd();return T(n,k(FE,{get tagId(){return e()?.tagId},get dateFilter(){return e()?.since},fixedControls:!0,get headerActions(){return(()=>{var r=zd();return T(r,(()=>{var s=le(()=>!!Fu());return()=>s()&&(()=>{var i=DE();return T(i,()=>Fu()?.toLocaleTimeString()),L(()=>C(i,O({fontSize:"sm",color:"gray.500"}))),i})()})(),null),T(r,k(ye,{size:"sm",variant:"secondary",onClick:()=>t.utils.refetch(),get disabled(){return t.isFetching},get children(){return t.isFetching?"Refreshing...":"Refresh"}}),null),L(()=>C(r,X({gap:"2",alignItems:"center"}))),r})()}}),null),T(n,k(Bi,{}),null),L(()=>C(n,O({flex:"1",minHeight:0,overflow:"hidden",display:"flex",flexDirection:"column"}))),n}})}const PE=zn("/_items/")({component:()=>null}),Q0=300*1e3;async function LE(e){if(!e||e.length===0)return;const t=e.filter(n=>n!=="end-of-list"&&!we.getQueryData(["item",n])).map(n=>we.prefetchQuery({queryKey:["item",n],queryFn:async()=>await K0(n),staleTime:Q0}));await Promise.allSettled(t)}function ME(e,t){if(e<0||e>=t.length||!t||t.length===0)return[];const n=[],r=5;for(let s=e+1;s<=Math.min(t.length-1,e+r);s++)n.push(t[s].id);return n}function BE(e={}){const[t,n]=H(0),[r,s]=H(!1);let i=0,o=0,u=!1,a=!1;return{x:t,isSwiping:r,handlers:{ontouchstart:f=>{e.disabled||f.touches.length!==1||(i=f.touches[0].clientX,o=f.touches[0].clientY,u=!0,s(!0),a=!1)},ontouchmove:f=>{if(!u||a||f.touches.length!==1)return;const h=f.touches[0].clientX,m=f.touches[0].clientY,g=h-i,y=m-o;if(Math.abs(y)>Math.abs(g)&&Math.abs(y)>10||Math.abs(y)>50){a=!0,s(!1),n(0);return}f.preventDefault(),n(g)},ontouchend:f=>{if(!u||a){n(0),u=!1,s(!1);return}const h=t(),m=e.threshold??50;h>m&&e.onSwipeRight?e.onSwipeRight():h<-m&&e.onSwipeLeft&&e.onSwipeLeft(),n(0),u=!1,s(!1)},ontouchcancel:f=>{n(0),u=!1,s(!1),a=!1}}}}const Kd={};function $E(e){let t=Kd[e];if(t)return t;t=Kd[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);t.push(r)}for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);t[r]="%"+("0"+r.toString(16).toUpperCase()).slice(-2)}return t}function yr(e,t){typeof t!="string"&&(t=yr.defaultChars);const n=$E(t);return e.replace(/(%[a-f0-9]{2})+/gi,function(r){let s="";for(let i=0,o=r.length;i<o;i+=3){const u=parseInt(r.slice(i+1,i+3),16);if(u<128){s+=n[u];continue}if((u&224)===192&&i+3<o){const a=parseInt(r.slice(i+4,i+6),16);if((a&192)===128){const c=u<<6&1984|a&63;c<128?s+="":s+=String.fromCharCode(c),i+=3;continue}}if((u&240)===224&&i+6<o){const a=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16);if((a&192)===128&&(c&192)===128){const l=u<<12&61440|a<<6&4032|c&63;l<2048||l>=55296&&l<=57343?s+="":s+=String.fromCharCode(l),i+=6;continue}}if((u&248)===240&&i+9<o){const a=parseInt(r.slice(i+4,i+6),16),c=parseInt(r.slice(i+7,i+9),16),l=parseInt(r.slice(i+10,i+12),16);if((a&192)===128&&(c&192)===128&&(l&192)===128){let d=u<<18&1835008|a<<12&258048|c<<6&4032|l&63;d<65536||d>1114111?s+="":(d-=65536,s+=String.fromCharCode(55296+(d>>10),56320+(d&1023))),i+=9;continue}}s+=""}return s})}yr.defaultChars=";/?:@&=+$,#";yr.componentChars="";const Wd={};function VE(e){let t=Wd[e];if(t)return t;t=Wd[e]=[];for(let n=0;n<128;n++){const r=String.fromCharCode(n);/^[0-9a-z]$/i.test(r)?t.push(r):t.push("%"+("0"+n.toString(16).toUpperCase()).slice(-2))}for(let n=0;n<e.length;n++)t[e.charCodeAt(n)]=e[n];return t}function Ts(e,t,n){typeof t!="string"&&(n=t,t=Ts.defaultChars),typeof n>"u"&&(n=!0);const r=VE(t);let s="";for(let i=0,o=e.length;i<o;i++){const u=e.charCodeAt(i);if(n&&u===37&&i+2<o&&/^[0-9a-f]{2}$/i.test(e.slice(i+1,i+3))){s+=e.slice(i,i+3),i+=2;continue}if(u<128){s+=r[u];continue}if(u>=55296&&u<=57343){if(u>=55296&&u<=56319&&i+1<o){const a=e.charCodeAt(i+1);if(a>=56320&&a<=57343){s+=encodeURIComponent(e[i]+e[i+1]),i++;continue}}s+="%EF%BF%BD";continue}s+=encodeURIComponent(e[i])}return s}Ts.defaultChars=";/?:@&=+$,-_.!~*'()#";Ts.componentChars="-_.!~*'()";function Qa(e){let t="";return t+=e.protocol||"",t+=e.slashes?"//":"",t+=e.auth?e.auth+"@":"",e.hostname&&e.hostname.indexOf(":")!==-1?t+="["+e.hostname+"]":t+=e.hostname||"",t+=e.port?":"+e.port:"",t+=e.pathname||"",t+=e.search||"",t+=e.hash||"",t}function Ti(){this.protocol=null,this.slashes=null,this.auth=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.pathname=null}const UE=/^([a-z0-9.+-]+:)/i,zE=/:[0-9]*$/,KE=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,WE=["<",">",'"',"`"," ","\r",`
`,"	"],GE=["{","}","|","\\","^","`"].concat(WE),jE=["'"].concat(GE),Gd=["%","/","?",";","#"].concat(jE),jd=["/","?","#"],ZE=255,Zd=/^[+a-z0-9A-Z_-]{0,63}$/,YE=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,Yd={javascript:!0,"javascript:":!0},qd={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0};function ec(e,t){if(e&&e instanceof Ti)return e;const n=new Ti;return n.parse(e,t),n}Ti.prototype.parse=function(e,t){let n,r,s,i=e;if(i=i.trim(),!t&&e.split("#").length===1){const c=KE.exec(i);if(c)return this.pathname=c[1],c[2]&&(this.search=c[2]),this}let o=UE.exec(i);if(o&&(o=o[0],n=o.toLowerCase(),this.protocol=o,i=i.substr(o.length)),(t||o||i.match(/^\/\/[^@\/]+@[^@\/]+/))&&(s=i.substr(0,2)==="//",s&&!(o&&Yd[o])&&(i=i.substr(2),this.slashes=!0)),!Yd[o]&&(s||o&&!qd[o])){let c=-1;for(let h=0;h<jd.length;h++)r=i.indexOf(jd[h]),r!==-1&&(c===-1||r<c)&&(c=r);let l,d;c===-1?d=i.lastIndexOf("@"):d=i.lastIndexOf("@",c),d!==-1&&(l=i.slice(0,d),i=i.slice(d+1),this.auth=l),c=-1;for(let h=0;h<Gd.length;h++)r=i.indexOf(Gd[h]),r!==-1&&(c===-1||r<c)&&(c=r);c===-1&&(c=i.length),i[c-1]===":"&&c--;const p=i.slice(0,c);i=i.slice(c),this.parseHost(p),this.hostname=this.hostname||"";const f=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!f){const h=this.hostname.split(/\./);for(let m=0,g=h.length;m<g;m++){const y=h[m];if(y&&!y.match(Zd)){let w="";for(let v=0,b=y.length;v<b;v++)y.charCodeAt(v)>127?w+="x":w+=y[v];if(!w.match(Zd)){const v=h.slice(0,m),b=h.slice(m+1),x=y.match(YE);x&&(v.push(x[1]),b.unshift(x[2])),b.length&&(i=b.join(".")+i),this.hostname=v.join(".");break}}}}this.hostname.length>ZE&&(this.hostname=""),f&&(this.hostname=this.hostname.substr(1,this.hostname.length-2))}const u=i.indexOf("#");u!==-1&&(this.hash=i.substr(u),i=i.slice(0,u));const a=i.indexOf("?");return a!==-1&&(this.search=i.substr(a),i=i.slice(0,a)),i&&(this.pathname=i),qd[n]&&this.hostname&&!this.pathname&&(this.pathname=""),this};Ti.prototype.parseHost=function(e){let t=zE.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const qE=Object.freeze(Object.defineProperty({__proto__:null,decode:yr,encode:Ts,format:Qa,parse:ec},Symbol.toStringTag,{value:"Module"})),ep=/[\0-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,tp=/[\0-\x1F\x7F-\x9F]/,HE=/[\xAD\u0600-\u0605\u061C\u06DD\u070F\u0890\u0891\u08E2\u180E\u200B-\u200F\u202A-\u202E\u2060-\u2064\u2066-\u206F\uFEFF\uFFF9-\uFFFB]|\uD804[\uDCBD\uDCCD]|\uD80D[\uDC30-\uDC3F]|\uD82F[\uDCA0-\uDCA3]|\uD834[\uDD73-\uDD7A]|\uDB40[\uDC01\uDC20-\uDC7F]/,tc=/[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F]/,np=/[\$\+<->\^`\|~\xA2-\xA6\xA8\xA9\xAC\xAE-\xB1\xB4\xB8\xD7\xF7\u02C2-\u02C5\u02D2-\u02DF\u02E5-\u02EB\u02ED\u02EF-\u02FF\u0375\u0384\u0385\u03F6\u0482\u058D-\u058F\u0606-\u0608\u060B\u060E\u060F\u06DE\u06E9\u06FD\u06FE\u07F6\u07FE\u07FF\u0888\u09F2\u09F3\u09FA\u09FB\u0AF1\u0B70\u0BF3-\u0BFA\u0C7F\u0D4F\u0D79\u0E3F\u0F01-\u0F03\u0F13\u0F15-\u0F17\u0F1A-\u0F1F\u0F34\u0F36\u0F38\u0FBE-\u0FC5\u0FC7-\u0FCC\u0FCE\u0FCF\u0FD5-\u0FD8\u109E\u109F\u1390-\u1399\u166D\u17DB\u1940\u19DE-\u19FF\u1B61-\u1B6A\u1B74-\u1B7C\u1FBD\u1FBF-\u1FC1\u1FCD-\u1FCF\u1FDD-\u1FDF\u1FED-\u1FEF\u1FFD\u1FFE\u2044\u2052\u207A-\u207C\u208A-\u208C\u20A0-\u20C0\u2100\u2101\u2103-\u2106\u2108\u2109\u2114\u2116-\u2118\u211E-\u2123\u2125\u2127\u2129\u212E\u213A\u213B\u2140-\u2144\u214A-\u214D\u214F\u218A\u218B\u2190-\u2307\u230C-\u2328\u232B-\u2426\u2440-\u244A\u249C-\u24E9\u2500-\u2767\u2794-\u27C4\u27C7-\u27E5\u27F0-\u2982\u2999-\u29D7\u29DC-\u29FB\u29FE-\u2B73\u2B76-\u2B95\u2B97-\u2BFF\u2CE5-\u2CEA\u2E50\u2E51\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFF\u3004\u3012\u3013\u3020\u3036\u3037\u303E\u303F\u309B\u309C\u3190\u3191\u3196-\u319F\u31C0-\u31E3\u31EF\u3200-\u321E\u322A-\u3247\u3250\u3260-\u327F\u328A-\u32B0\u32C0-\u33FF\u4DC0-\u4DFF\uA490-\uA4C6\uA700-\uA716\uA720\uA721\uA789\uA78A\uA828-\uA82B\uA836-\uA839\uAA77-\uAA79\uAB5B\uAB6A\uAB6B\uFB29\uFBB2-\uFBC2\uFD40-\uFD4F\uFDCF\uFDFC-\uFDFF\uFE62\uFE64-\uFE66\uFE69\uFF04\uFF0B\uFF1C-\uFF1E\uFF3E\uFF40\uFF5C\uFF5E\uFFE0-\uFFE6\uFFE8-\uFFEE\uFFFC\uFFFD]|\uD800[\uDD37-\uDD3F\uDD79-\uDD89\uDD8C-\uDD8E\uDD90-\uDD9C\uDDA0\uDDD0-\uDDFC]|\uD802[\uDC77\uDC78\uDEC8]|\uD805\uDF3F|\uD807[\uDFD5-\uDFF1]|\uD81A[\uDF3C-\uDF3F\uDF45]|\uD82F\uDC9C|\uD833[\uDF50-\uDFC3]|\uD834[\uDC00-\uDCF5\uDD00-\uDD26\uDD29-\uDD64\uDD6A-\uDD6C\uDD83\uDD84\uDD8C-\uDDA9\uDDAE-\uDDEA\uDE00-\uDE41\uDE45\uDF00-\uDF56]|\uD835[\uDEC1\uDEDB\uDEFB\uDF15\uDF35\uDF4F\uDF6F\uDF89\uDFA9\uDFC3]|\uD836[\uDC00-\uDDFF\uDE37-\uDE3A\uDE6D-\uDE74\uDE76-\uDE83\uDE85\uDE86]|\uD838[\uDD4F\uDEFF]|\uD83B[\uDCAC\uDCB0\uDD2E\uDEF0\uDEF1]|\uD83C[\uDC00-\uDC2B\uDC30-\uDC93\uDCA0-\uDCAE\uDCB1-\uDCBF\uDCC1-\uDCCF\uDCD1-\uDCF5\uDD0D-\uDDAD\uDDE6-\uDE02\uDE10-\uDE3B\uDE40-\uDE48\uDE50\uDE51\uDE60-\uDE65\uDF00-\uDFFF]|\uD83D[\uDC00-\uDED7\uDEDC-\uDEEC\uDEF0-\uDEFC\uDF00-\uDF76\uDF7B-\uDFD9\uDFE0-\uDFEB\uDFF0]|\uD83E[\uDC00-\uDC0B\uDC10-\uDC47\uDC50-\uDC59\uDC60-\uDC87\uDC90-\uDCAD\uDCB0\uDCB1\uDD00-\uDE53\uDE60-\uDE6D\uDE70-\uDE7C\uDE80-\uDE88\uDE90-\uDEBD\uDEBF-\uDEC5\uDECE-\uDEDB\uDEE0-\uDEE8\uDEF0-\uDEF8\uDF00-\uDF92\uDF94-\uDFCA]/,rp=/[ \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,XE=Object.freeze(Object.defineProperty({__proto__:null,Any:ep,Cc:tp,Cf:HE,P:tc,S:np,Z:rp},Symbol.toStringTag,{value:"Module"})),JE=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),QE=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Fo;const ek=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),tk=(Fo=String.fromCodePoint)!==null&&Fo!==void 0?Fo:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function nk(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=ek.get(e))!==null&&t!==void 0?t:e}var Te;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Te||(Te={}));const rk=32;var hn;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(hn||(hn={}));function Pu(e){return e>=Te.ZERO&&e<=Te.NINE}function sk(e){return e>=Te.UPPER_A&&e<=Te.UPPER_F||e>=Te.LOWER_A&&e<=Te.LOWER_F}function ik(e){return e>=Te.UPPER_A&&e<=Te.UPPER_Z||e>=Te.LOWER_A&&e<=Te.LOWER_Z||Pu(e)}function ok(e){return e===Te.EQUALS||ik(e)}var Ie;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ie||(Ie={}));var an;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(an||(an={}));class uk{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ie.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=an.Strict}startEntity(t){this.decodeMode=t,this.state=Ie.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ie.EntityStart:return t.charCodeAt(n)===Te.NUM?(this.state=Ie.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ie.NamedEntity,this.stateNamedEntity(t,n));case Ie.NumericStart:return this.stateNumericStart(t,n);case Ie.NumericDecimal:return this.stateNumericDecimal(t,n);case Ie.NumericHex:return this.stateNumericHex(t,n);case Ie.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|rk)===Te.LOWER_X?(this.state=Ie.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ie.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,s){if(n!==r){const i=r-n;this.result=this.result*Math.pow(s,i)+parseInt(t.substr(n,i),s),this.consumed+=i}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Pu(s)||sk(s))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(s,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const s=t.charCodeAt(n);if(Pu(s))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(s,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Te.SEMI)this.consumed+=1;else if(this.decodeMode===an.Strict)return 0;return this.emitCodePoint(nk(this.result),this.consumed),this.errors&&(t!==Te.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let s=r[this.treeIndex],i=(s&hn.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=ak(r,s,this.treeIndex+Math.max(1,i),o),this.treeIndex<0)return this.result===0||this.decodeMode===an.Attribute&&(i===0||ok(o))?0:this.emitNotTerminatedNamedEntity();if(s=r[this.treeIndex],i=(s&hn.VALUE_LENGTH)>>14,i!==0){if(o===Te.SEMI)return this.emitNamedEntityData(this.treeIndex,i,this.consumed+this.excess);this.decodeMode!==an.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,s=(r[n]&hn.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,s,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:s}=this;return this.emitCodePoint(n===1?s[t]&~hn.VALUE_LENGTH:s[t+1],r),n===3&&this.emitCodePoint(s[t+2],r),r}end(){var t;switch(this.state){case Ie.NamedEntity:return this.result!==0&&(this.decodeMode!==an.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ie.NumericDecimal:return this.emitNumericEntity(0,2);case Ie.NumericHex:return this.emitNumericEntity(0,3);case Ie.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ie.EntityStart:return 0}}}function sp(e){let t="";const n=new uk(e,r=>t+=tk(r));return function(s,i){let o=0,u=0;for(;(u=s.indexOf("&",u))>=0;){t+=s.slice(o,u),n.startEntity(i);const c=n.write(s,u+1);if(c<0){o=u+n.end();break}o=u+c,u=c===0?o+1:o}const a=t+s.slice(o);return t="",a}}function ak(e,t,n,r){const s=(t&hn.BRANCH_LENGTH)>>7,i=t&hn.JUMP_TABLE;if(s===0)return i!==0&&r===i?n:-1;if(i){const a=r-i;return a<0||a>=s?-1:e[n+a]-1}let o=n,u=o+s-1;for(;o<=u;){const a=o+u>>>1,c=e[a];if(c<r)o=a+1;else if(c>r)u=a-1;else return e[a+s]}return-1}const ck=sp(JE);sp(QE);function ip(e,t=an.Legacy){return ck(e,t)}function lk(e){return Object.prototype.toString.call(e)}function nc(e){return lk(e)==="[object String]"}const dk=Object.prototype.hasOwnProperty;function fk(e,t){return dk.call(e,t)}function Xi(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){if(n){if(typeof n!="object")throw new TypeError(n+"must be object");Object.keys(n).forEach(function(r){e[r]=n[r]})}}),e}function op(e,t,n){return[].concat(e.slice(0,t),n,e.slice(t+1))}function rc(e){return!(e>=55296&&e<=57343||e>=64976&&e<=65007||(e&65535)===65535||(e&65535)===65534||e>=0&&e<=8||e===11||e>=14&&e<=31||e>=127&&e<=159||e>1114111)}function Oi(e){if(e>65535){e-=65536;const t=55296+(e>>10),n=56320+(e&1023);return String.fromCharCode(t,n)}return String.fromCharCode(e)}const up=/\\([!"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~])/g,hk=/&([a-z#][a-z0-9]{1,31});/gi,pk=new RegExp(up.source+"|"+hk.source,"gi"),mk=/^#((?:x[a-f0-9]{1,8}|[0-9]{1,8}))$/i;function gk(e,t){if(t.charCodeAt(0)===35&&mk.test(t)){const r=t[1].toLowerCase()==="x"?parseInt(t.slice(2),16):parseInt(t.slice(1),10);return rc(r)?Oi(r):e}const n=ip(e);return n!==e?n:e}function bk(e){return e.indexOf("\\")<0?e:e.replace(up,"$1")}function vr(e){return e.indexOf("\\")<0&&e.indexOf("&")<0?e:e.replace(pk,function(t,n,r){return n||gk(t,r)})}const yk=/[&<>"]/,vk=/[&<>"]/g,wk={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"};function xk(e){return wk[e]}function xn(e){return yk.test(e)?e.replace(vk,xk):e}const Sk=/[.?*+^$[\]\\(){}|-]/g;function _k(e){return e.replace(Sk,"\\$&")}function fe(e){switch(e){case 9:case 32:return!0}return!1}function hs(e){if(e>=8192&&e<=8202)return!0;switch(e){case 9:case 10:case 11:case 12:case 13:case 32:case 160:case 5760:case 8239:case 8287:case 12288:return!0}return!1}function ps(e){return tc.test(e)||np.test(e)}function ms(e){switch(e){case 33:case 34:case 35:case 36:case 37:case 38:case 39:case 40:case 41:case 42:case 43:case 44:case 45:case 46:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 124:case 125:case 126:return!0;default:return!1}}function Ji(e){return e=e.trim().replace(/\s+/g," "),"".toLowerCase()===""&&(e=e.replace(//g,"")),e.toLowerCase().toUpperCase()}const Ek={mdurl:qE,ucmicro:XE},kk=Object.freeze(Object.defineProperty({__proto__:null,arrayReplaceAt:op,assign:Xi,escapeHtml:xn,escapeRE:_k,fromCodePoint:Oi,has:fk,isMdAsciiPunct:ms,isPunctChar:ps,isSpace:fe,isString:nc,isValidEntityCode:rc,isWhiteSpace:hs,lib:Ek,normalizeReference:Ji,unescapeAll:vr,unescapeMd:bk},Symbol.toStringTag,{value:"Module"}));function Ck(e,t,n){let r,s,i,o;const u=e.posMax,a=e.pos;for(e.pos=t+1,r=1;e.pos<u;){if(i=e.src.charCodeAt(e.pos),i===93&&(r--,r===0)){s=!0;break}if(o=e.pos,e.md.inline.skipToken(e),i===91){if(o===e.pos-1)r++;else if(n)return e.pos=a,-1}}let c=-1;return s&&(c=e.pos),e.pos=a,c}function Ik(e,t,n){let r,s=t;const i={ok:!1,pos:0,str:""};if(e.charCodeAt(s)===60){for(s++;s<n;){if(r=e.charCodeAt(s),r===10||r===60)return i;if(r===62)return i.pos=s+1,i.str=vr(e.slice(t+1,s)),i.ok=!0,i;if(r===92&&s+1<n){s+=2;continue}s++}return i}let o=0;for(;s<n&&(r=e.charCodeAt(s),!(r===32||r<32||r===127));){if(r===92&&s+1<n){if(e.charCodeAt(s+1)===32)break;s+=2;continue}if(r===40&&(o++,o>32))return i;if(r===41){if(o===0)break;o--}s++}return t===s||o!==0||(i.str=vr(e.slice(t,s)),i.pos=s,i.ok=!0),i}function Ak(e,t,n,r){let s,i=t;const o={ok:!1,can_continue:!1,pos:0,str:"",marker:0};if(r)o.str=r.str,o.marker=r.marker;else{if(i>=n)return o;let u=e.charCodeAt(i);if(u!==34&&u!==39&&u!==40)return o;t++,i++,u===40&&(u=41),o.marker=u}for(;i<n;){if(s=e.charCodeAt(i),s===o.marker)return o.pos=i+1,o.str+=vr(e.slice(t,i)),o.ok=!0,o;if(s===40&&o.marker===41)return o;s===92&&i+1<n&&i++,i++}return o.can_continue=!0,o.str+=vr(e.slice(t,i)),o}const Rk=Object.freeze(Object.defineProperty({__proto__:null,parseLinkDestination:Ik,parseLinkLabel:Ck,parseLinkTitle:Ak},Symbol.toStringTag,{value:"Module"})),Kt={};Kt.code_inline=function(e,t,n,r,s){const i=e[t];return"<code"+s.renderAttrs(i)+">"+xn(i.content)+"</code>"};Kt.code_block=function(e,t,n,r,s){const i=e[t];return"<pre"+s.renderAttrs(i)+"><code>"+xn(e[t].content)+`</code></pre>
`};Kt.fence=function(e,t,n,r,s){const i=e[t],o=i.info?vr(i.info).trim():"";let u="",a="";if(o){const l=o.split(/(\s+)/g);u=l[0],a=l.slice(2).join("")}let c;if(n.highlight?c=n.highlight(i.content,u,a)||xn(i.content):c=xn(i.content),c.indexOf("<pre")===0)return c+`
`;if(o){const l=i.attrIndex("class"),d=i.attrs?i.attrs.slice():[];l<0?d.push(["class",n.langPrefix+u]):(d[l]=d[l].slice(),d[l][1]+=" "+n.langPrefix+u);const p={attrs:d};return`<pre><code${s.renderAttrs(p)}>${c}</code></pre>
`}return`<pre><code${s.renderAttrs(i)}>${c}</code></pre>
`};Kt.image=function(e,t,n,r,s){const i=e[t];return i.attrs[i.attrIndex("alt")][1]=s.renderInlineAsText(i.children,n,r),s.renderToken(e,t,n)};Kt.hardbreak=function(e,t,n){return n.xhtmlOut?`<br />
`:`<br>
`};Kt.softbreak=function(e,t,n){return n.breaks?n.xhtmlOut?`<br />
`:`<br>
`:`
`};Kt.text=function(e,t){return xn(e[t].content)};Kt.html_block=function(e,t){return e[t].content};Kt.html_inline=function(e,t){return e[t].content};function kr(){this.rules=Xi({},Kt)}kr.prototype.renderAttrs=function(t){let n,r,s;if(!t.attrs)return"";for(s="",n=0,r=t.attrs.length;n<r;n++)s+=" "+xn(t.attrs[n][0])+'="'+xn(t.attrs[n][1])+'"';return s};kr.prototype.renderToken=function(t,n,r){const s=t[n];let i="";if(s.hidden)return"";s.block&&s.nesting!==-1&&n&&t[n-1].hidden&&(i+=`
`),i+=(s.nesting===-1?"</":"<")+s.tag,i+=this.renderAttrs(s),s.nesting===0&&r.xhtmlOut&&(i+=" /");let o=!1;if(s.block&&(o=!0,s.nesting===1&&n+1<t.length)){const u=t[n+1];(u.type==="inline"||u.hidden||u.nesting===-1&&u.tag===s.tag)&&(o=!1)}return i+=o?`>
`:">",i};kr.prototype.renderInline=function(e,t,n){let r="";const s=this.rules;for(let i=0,o=e.length;i<o;i++){const u=e[i].type;typeof s[u]<"u"?r+=s[u](e,i,t,n,this):r+=this.renderToken(e,i,t)}return r};kr.prototype.renderInlineAsText=function(e,t,n){let r="";for(let s=0,i=e.length;s<i;s++)switch(e[s].type){case"text":r+=e[s].content;break;case"image":r+=this.renderInlineAsText(e[s].children,t,n);break;case"html_inline":case"html_block":r+=e[s].content;break;case"softbreak":case"hardbreak":r+=`
`;break}return r};kr.prototype.render=function(e,t,n){let r="";const s=this.rules;for(let i=0,o=e.length;i<o;i++){const u=e[i].type;u==="inline"?r+=this.renderInline(e[i].children,t,n):typeof s[u]<"u"?r+=s[u](e,i,t,n,this):r+=this.renderToken(e,i,t,n)}return r};function et(){this.__rules__=[],this.__cache__=null}et.prototype.__find__=function(e){for(let t=0;t<this.__rules__.length;t++)if(this.__rules__[t].name===e)return t;return-1};et.prototype.__compile__=function(){const e=this,t=[""];e.__rules__.forEach(function(n){n.enabled&&n.alt.forEach(function(r){t.indexOf(r)<0&&t.push(r)})}),e.__cache__={},t.forEach(function(n){e.__cache__[n]=[],e.__rules__.forEach(function(r){r.enabled&&(n&&r.alt.indexOf(n)<0||e.__cache__[n].push(r.fn))})})};et.prototype.at=function(e,t,n){const r=this.__find__(e),s=n||{};if(r===-1)throw new Error("Parser rule not found: "+e);this.__rules__[r].fn=t,this.__rules__[r].alt=s.alt||[],this.__cache__=null};et.prototype.before=function(e,t,n,r){const s=this.__find__(e),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};et.prototype.after=function(e,t,n,r){const s=this.__find__(e),i=r||{};if(s===-1)throw new Error("Parser rule not found: "+e);this.__rules__.splice(s+1,0,{name:t,enabled:!0,fn:n,alt:i.alt||[]}),this.__cache__=null};et.prototype.push=function(e,t,n){const r=n||{};this.__rules__.push({name:e,enabled:!0,fn:t,alt:r.alt||[]}),this.__cache__=null};et.prototype.enable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!0,n.push(r)},this),this.__cache__=null,n};et.prototype.enableOnly=function(e,t){Array.isArray(e)||(e=[e]),this.__rules__.forEach(function(n){n.enabled=!1}),this.enable(e,t)};et.prototype.disable=function(e,t){Array.isArray(e)||(e=[e]);const n=[];return e.forEach(function(r){const s=this.__find__(r);if(s<0){if(t)return;throw new Error("Rules manager: invalid rule name "+r)}this.__rules__[s].enabled=!1,n.push(r)},this),this.__cache__=null,n};et.prototype.getRules=function(e){return this.__cache__===null&&this.__compile__(),this.__cache__[e]||[]};function Ft(e,t,n){this.type=e,this.tag=t,this.attrs=null,this.map=null,this.nesting=n,this.level=0,this.children=null,this.content="",this.markup="",this.info="",this.meta=null,this.block=!1,this.hidden=!1}Ft.prototype.attrIndex=function(t){if(!this.attrs)return-1;const n=this.attrs;for(let r=0,s=n.length;r<s;r++)if(n[r][0]===t)return r;return-1};Ft.prototype.attrPush=function(t){this.attrs?this.attrs.push(t):this.attrs=[t]};Ft.prototype.attrSet=function(t,n){const r=this.attrIndex(t),s=[t,n];r<0?this.attrPush(s):this.attrs[r]=s};Ft.prototype.attrGet=function(t){const n=this.attrIndex(t);let r=null;return n>=0&&(r=this.attrs[n][1]),r};Ft.prototype.attrJoin=function(t,n){const r=this.attrIndex(t);r<0?this.attrPush([t,n]):this.attrs[r][1]=this.attrs[r][1]+" "+n};function ap(e,t,n){this.src=e,this.env=n,this.tokens=[],this.inlineMode=!1,this.md=t}ap.prototype.Token=Ft;const Tk=/\r\n?|\n/g,Ok=/\0/g;function Fk(e){let t;t=e.src.replace(Tk,`
`),t=t.replace(Ok,""),e.src=t}function Dk(e){let t;e.inlineMode?(t=new e.Token("inline","",0),t.content=e.src,t.map=[0,1],t.children=[],e.tokens.push(t)):e.md.block.parse(e.src,e.md,e.env,e.tokens)}function Nk(e){const t=e.tokens;for(let n=0,r=t.length;n<r;n++){const s=t[n];s.type==="inline"&&e.md.inline.parse(s.content,e.md,e.env,s.children)}}function Pk(e){return/^<a[>\s]/i.test(e)}function Lk(e){return/^<\/a\s*>/i.test(e)}function Mk(e){const t=e.tokens;if(e.md.options.linkify)for(let n=0,r=t.length;n<r;n++){if(t[n].type!=="inline"||!e.md.linkify.pretest(t[n].content))continue;let s=t[n].children,i=0;for(let o=s.length-1;o>=0;o--){const u=s[o];if(u.type==="link_close"){for(o--;s[o].level!==u.level&&s[o].type!=="link_open";)o--;continue}if(u.type==="html_inline"&&(Pk(u.content)&&i>0&&i--,Lk(u.content)&&i++),!(i>0)&&u.type==="text"&&e.md.linkify.test(u.content)){const a=u.content;let c=e.md.linkify.match(a);const l=[];let d=u.level,p=0;c.length>0&&c[0].index===0&&o>0&&s[o-1].type==="text_special"&&(c=c.slice(1));for(let f=0;f<c.length;f++){const h=c[f].url,m=e.md.normalizeLink(h);if(!e.md.validateLink(m))continue;let g=c[f].text;c[f].schema?c[f].schema==="mailto:"&&!/^mailto:/i.test(g)?g=e.md.normalizeLinkText("mailto:"+g).replace(/^mailto:/,""):g=e.md.normalizeLinkText(g):g=e.md.normalizeLinkText("http://"+g).replace(/^http:\/\//,"");const y=c[f].index;if(y>p){const x=new e.Token("text","",0);x.content=a.slice(p,y),x.level=d,l.push(x)}const w=new e.Token("link_open","a",1);w.attrs=[["href",m]],w.level=d++,w.markup="linkify",w.info="auto",l.push(w);const v=new e.Token("text","",0);v.content=g,v.level=d,l.push(v);const b=new e.Token("link_close","a",-1);b.level=--d,b.markup="linkify",b.info="auto",l.push(b),p=c[f].lastIndex}if(p<a.length){const f=new e.Token("text","",0);f.content=a.slice(p),f.level=d,l.push(f)}t[n].children=s=op(s,o,l)}}}}const cp=/\+-|\.\.|\?\?\?\?|!!!!|,,|--/,Bk=/\((c|tm|r)\)/i,$k=/\((c|tm|r)\)/ig,Vk={c:"",r:"",tm:""};function Uk(e,t){return Vk[t.toLowerCase()]}function zk(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&(r.content=r.content.replace($k,Uk)),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Kk(e){let t=0;for(let n=e.length-1;n>=0;n--){const r=e[n];r.type==="text"&&!t&&cp.test(r.content)&&(r.content=r.content.replace(/\+-/g,"").replace(/\.{2,}/g,"").replace(/([?!])/g,"$1..").replace(/([?!]){4,}/g,"$1$1$1").replace(/,{2,}/g,",").replace(/(^|[^-])---(?=[^-]|$)/mg,"$1").replace(/(^|\s)--(?=\s|$)/mg,"$1").replace(/(^|[^-\s])--(?=[^-\s]|$)/mg,"$1")),r.type==="link_open"&&r.info==="auto"&&t--,r.type==="link_close"&&r.info==="auto"&&t++}}function Wk(e){let t;if(e.md.options.typographer)for(t=e.tokens.length-1;t>=0;t--)e.tokens[t].type==="inline"&&(Bk.test(e.tokens[t].content)&&zk(e.tokens[t].children),cp.test(e.tokens[t].content)&&Kk(e.tokens[t].children))}const Gk=/['"]/,Hd=/['"]/g,Xd="";function Gs(e,t,n){return e.slice(0,t)+n+e.slice(t+1)}function jk(e,t){let n;const r=[];for(let s=0;s<e.length;s++){const i=e[s],o=e[s].level;for(n=r.length-1;n>=0&&!(r[n].level<=o);n--);if(r.length=n+1,i.type!=="text")continue;let u=i.content,a=0,c=u.length;e:for(;a<c;){Hd.lastIndex=a;const l=Hd.exec(u);if(!l)break;let d=!0,p=!0;a=l.index+1;const f=l[0]==="'";let h=32;if(l.index-1>=0)h=u.charCodeAt(l.index-1);else for(n=s-1;n>=0&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n--)if(e[n].content){h=e[n].content.charCodeAt(e[n].content.length-1);break}let m=32;if(a<c)m=u.charCodeAt(a);else for(n=s+1;n<e.length&&!(e[n].type==="softbreak"||e[n].type==="hardbreak");n++)if(e[n].content){m=e[n].content.charCodeAt(0);break}const g=ms(h)||ps(String.fromCharCode(h)),y=ms(m)||ps(String.fromCharCode(m)),w=hs(h),v=hs(m);if(v?d=!1:y&&(w||g||(d=!1)),w?p=!1:g&&(v||y||(p=!1)),m===34&&l[0]==='"'&&h>=48&&h<=57&&(p=d=!1),d&&p&&(d=g,p=y),!d&&!p){f&&(i.content=Gs(i.content,l.index,Xd));continue}if(p)for(n=r.length-1;n>=0;n--){let b=r[n];if(r[n].level<o)break;if(b.single===f&&r[n].level===o){b=r[n];let x,E;f?(x=t.md.options.quotes[2],E=t.md.options.quotes[3]):(x=t.md.options.quotes[0],E=t.md.options.quotes[1]),i.content=Gs(i.content,l.index,E),e[b.token].content=Gs(e[b.token].content,b.pos,x),a+=E.length-1,b.token===s&&(a+=x.length-1),u=i.content,c=u.length,r.length=n;continue e}}d?r.push({token:s,pos:l.index,single:f,level:o}):p&&f&&(i.content=Gs(i.content,l.index,Xd))}}}function Zk(e){if(e.md.options.typographer)for(let t=e.tokens.length-1;t>=0;t--)e.tokens[t].type!=="inline"||!Gk.test(e.tokens[t].content)||jk(e.tokens[t].children,e)}function Yk(e){let t,n;const r=e.tokens,s=r.length;for(let i=0;i<s;i++){if(r[i].type!=="inline")continue;const o=r[i].children,u=o.length;for(t=0;t<u;t++)o[t].type==="text_special"&&(o[t].type="text");for(t=n=0;t<u;t++)o[t].type==="text"&&t+1<u&&o[t+1].type==="text"?o[t+1].content=o[t].content+o[t+1].content:(t!==n&&(o[n]=o[t]),n++);t!==n&&(o.length=n)}}const Do=[["normalize",Fk],["block",Dk],["inline",Nk],["linkify",Mk],["replacements",Wk],["smartquotes",Zk],["text_join",Yk]];function sc(){this.ruler=new et;for(let e=0;e<Do.length;e++)this.ruler.push(Do[e][0],Do[e][1])}sc.prototype.process=function(e){const t=this.ruler.getRules("");for(let n=0,r=t.length;n<r;n++)t[n](e)};sc.prototype.State=ap;function Wt(e,t,n,r){this.src=e,this.md=t,this.env=n,this.tokens=r,this.bMarks=[],this.eMarks=[],this.tShift=[],this.sCount=[],this.bsCount=[],this.blkIndent=0,this.line=0,this.lineMax=0,this.tight=!1,this.ddIndent=-1,this.listIndent=-1,this.parentType="root",this.level=0;const s=this.src;for(let i=0,o=0,u=0,a=0,c=s.length,l=!1;o<c;o++){const d=s.charCodeAt(o);if(!l)if(fe(d)){u++,d===9?a+=4-a%4:a++;continue}else l=!0;(d===10||o===c-1)&&(d!==10&&o++,this.bMarks.push(i),this.eMarks.push(o),this.tShift.push(u),this.sCount.push(a),this.bsCount.push(0),l=!1,u=0,a=0,i=o+1)}this.bMarks.push(s.length),this.eMarks.push(s.length),this.tShift.push(0),this.sCount.push(0),this.bsCount.push(0),this.lineMax=this.bMarks.length-1}Wt.prototype.push=function(e,t,n){const r=new Ft(e,t,n);return r.block=!0,n<0&&this.level--,r.level=this.level,n>0&&this.level++,this.tokens.push(r),r};Wt.prototype.isEmpty=function(t){return this.bMarks[t]+this.tShift[t]>=this.eMarks[t]};Wt.prototype.skipEmptyLines=function(t){for(let n=this.lineMax;t<n&&!(this.bMarks[t]+this.tShift[t]<this.eMarks[t]);t++);return t};Wt.prototype.skipSpaces=function(t){for(let n=this.src.length;t<n;t++){const r=this.src.charCodeAt(t);if(!fe(r))break}return t};Wt.prototype.skipSpacesBack=function(t,n){if(t<=n)return t;for(;t>n;)if(!fe(this.src.charCodeAt(--t)))return t+1;return t};Wt.prototype.skipChars=function(t,n){for(let r=this.src.length;t<r&&this.src.charCodeAt(t)===n;t++);return t};Wt.prototype.skipCharsBack=function(t,n,r){if(t<=r)return t;for(;t>r;)if(n!==this.src.charCodeAt(--t))return t+1;return t};Wt.prototype.getLines=function(t,n,r,s){if(t>=n)return"";const i=new Array(n-t);for(let o=0,u=t;u<n;u++,o++){let a=0;const c=this.bMarks[u];let l=c,d;for(u+1<n||s?d=this.eMarks[u]+1:d=this.eMarks[u];l<d&&a<r;){const p=this.src.charCodeAt(l);if(fe(p))p===9?a+=4-(a+this.bsCount[u])%4:a++;else if(l-c<this.tShift[u])a++;else break;l++}a>r?i[o]=new Array(a-r+1).join(" ")+this.src.slice(l,d):i[o]=this.src.slice(l,d)}return i.join("")};Wt.prototype.Token=Ft;const qk=65536;function No(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];return e.src.slice(n,r)}function Jd(e){const t=[],n=e.length;let r=0,s=e.charCodeAt(r),i=!1,o=0,u="";for(;r<n;)s===124&&(i?(u+=e.substring(o,r-1),o=r):(t.push(u+e.substring(o,r)),u="",o=r+1)),i=s===92,r++,s=e.charCodeAt(r);return t.push(u+e.substring(o)),t}function Hk(e,t,n,r){if(t+2>n)return!1;let s=t+1;if(e.sCount[s]<e.blkIndent||e.sCount[s]-e.blkIndent>=4)return!1;let i=e.bMarks[s]+e.tShift[s];if(i>=e.eMarks[s])return!1;const o=e.src.charCodeAt(i++);if(o!==124&&o!==45&&o!==58||i>=e.eMarks[s])return!1;const u=e.src.charCodeAt(i++);if(u!==124&&u!==45&&u!==58&&!fe(u)||o===45&&fe(u))return!1;for(;i<e.eMarks[s];){const b=e.src.charCodeAt(i);if(b!==124&&b!==45&&b!==58&&!fe(b))return!1;i++}let a=No(e,t+1),c=a.split("|");const l=[];for(let b=0;b<c.length;b++){const x=c[b].trim();if(!x){if(b===0||b===c.length-1)continue;return!1}if(!/^:?-+:?$/.test(x))return!1;x.charCodeAt(x.length-1)===58?l.push(x.charCodeAt(0)===58?"center":"right"):x.charCodeAt(0)===58?l.push("left"):l.push("")}if(a=No(e,t).trim(),a.indexOf("|")===-1||e.sCount[t]-e.blkIndent>=4)return!1;c=Jd(a),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop();const d=c.length;if(d===0||d!==l.length)return!1;if(r)return!0;const p=e.parentType;e.parentType="table";const f=e.md.block.ruler.getRules("blockquote"),h=e.push("table_open","table",1),m=[t,0];h.map=m;const g=e.push("thead_open","thead",1);g.map=[t,t+1];const y=e.push("tr_open","tr",1);y.map=[t,t+1];for(let b=0;b<c.length;b++){const x=e.push("th_open","th",1);l[b]&&(x.attrs=[["style","text-align:"+l[b]]]);const E=e.push("inline","",0);E.content=c[b].trim(),E.children=[],e.push("th_close","th",-1)}e.push("tr_close","tr",-1),e.push("thead_close","thead",-1);let w,v=0;for(s=t+2;s<n&&!(e.sCount[s]<e.blkIndent);s++){let b=!1;for(let E=0,R=f.length;E<R;E++)if(f[E](e,s,n,!0)){b=!0;break}if(b||(a=No(e,s).trim(),!a)||e.sCount[s]-e.blkIndent>=4||(c=Jd(a),c.length&&c[0]===""&&c.shift(),c.length&&c[c.length-1]===""&&c.pop(),v+=d-c.length,v>qk))break;if(s===t+2){const E=e.push("tbody_open","tbody",1);E.map=w=[t+2,0]}const x=e.push("tr_open","tr",1);x.map=[s,s+1];for(let E=0;E<d;E++){const R=e.push("td_open","td",1);l[E]&&(R.attrs=[["style","text-align:"+l[E]]]);const S=e.push("inline","",0);S.content=c[E]?c[E].trim():"",S.children=[],e.push("td_close","td",-1)}e.push("tr_close","tr",-1)}return w&&(e.push("tbody_close","tbody",-1),w[1]=s),e.push("table_close","table",-1),m[1]=s,e.parentType=p,e.line=s,!0}function Xk(e,t,n){if(e.sCount[t]-e.blkIndent<4)return!1;let r=t+1,s=r;for(;r<n;){if(e.isEmpty(r)){r++;continue}if(e.sCount[r]-e.blkIndent>=4){r++,s=r;continue}break}e.line=s;const i=e.push("code_block","code",0);return i.content=e.getLines(t,s,4+e.blkIndent,!1)+`
`,i.map=[t,e.line],!0}function Jk(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||s+3>i)return!1;const o=e.src.charCodeAt(s);if(o!==126&&o!==96)return!1;let u=s;s=e.skipChars(s,o);let a=s-u;if(a<3)return!1;const c=e.src.slice(u,s),l=e.src.slice(s,i);if(o===96&&l.indexOf(String.fromCharCode(o))>=0)return!1;if(r)return!0;let d=t,p=!1;for(;d++,!(d>=n||(s=u=e.bMarks[d]+e.tShift[d],i=e.eMarks[d],s<i&&e.sCount[d]<e.blkIndent));)if(e.src.charCodeAt(s)===o&&!(e.sCount[d]-e.blkIndent>=4)&&(s=e.skipChars(s,o),!(s-u<a)&&(s=e.skipSpaces(s),!(s<i)))){p=!0;break}a=e.sCount[t],e.line=d+(p?1:0);const f=e.push("fence","code",0);return f.info=l,f.content=e.getLines(t+1,d,a,!0),f.markup=c,f.map=[t,e.line],!0}function Qk(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];const o=e.lineMax;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==62)return!1;if(r)return!0;const u=[],a=[],c=[],l=[],d=e.md.block.ruler.getRules("blockquote"),p=e.parentType;e.parentType="blockquote";let f=!1,h;for(h=t;h<n;h++){const v=e.sCount[h]<e.blkIndent;if(s=e.bMarks[h]+e.tShift[h],i=e.eMarks[h],s>=i)break;if(e.src.charCodeAt(s++)===62&&!v){let x=e.sCount[h]+1,E,R;e.src.charCodeAt(s)===32?(s++,x++,R=!1,E=!0):e.src.charCodeAt(s)===9?(E=!0,(e.bsCount[h]+x)%4===3?(s++,x++,R=!1):R=!0):E=!1;let S=x;for(u.push(e.bMarks[h]),e.bMarks[h]=s;s<i;){const _=e.src.charCodeAt(s);if(fe(_))_===9?S+=4-(S+e.bsCount[h]+(R?1:0))%4:S++;else break;s++}f=s>=i,a.push(e.bsCount[h]),e.bsCount[h]=e.sCount[h]+1+(E?1:0),c.push(e.sCount[h]),e.sCount[h]=S-x,l.push(e.tShift[h]),e.tShift[h]=s-e.bMarks[h];continue}if(f)break;let b=!1;for(let x=0,E=d.length;x<E;x++)if(d[x](e,h,n,!0)){b=!0;break}if(b){e.lineMax=h,e.blkIndent!==0&&(u.push(e.bMarks[h]),a.push(e.bsCount[h]),l.push(e.tShift[h]),c.push(e.sCount[h]),e.sCount[h]-=e.blkIndent);break}u.push(e.bMarks[h]),a.push(e.bsCount[h]),l.push(e.tShift[h]),c.push(e.sCount[h]),e.sCount[h]=-1}const m=e.blkIndent;e.blkIndent=0;const g=e.push("blockquote_open","blockquote",1);g.markup=">";const y=[t,0];g.map=y,e.md.block.tokenize(e,t,h);const w=e.push("blockquote_close","blockquote",-1);w.markup=">",e.lineMax=o,e.parentType=p,y[1]=e.line;for(let v=0;v<l.length;v++)e.bMarks[v+t]=u[v],e.tShift[v+t]=l[v],e.sCount[v+t]=c[v],e.bsCount[v+t]=a[v];return e.blkIndent=m,!0}function e6(e,t,n,r){const s=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let i=e.bMarks[t]+e.tShift[t];const o=e.src.charCodeAt(i++);if(o!==42&&o!==45&&o!==95)return!1;let u=1;for(;i<s;){const c=e.src.charCodeAt(i++);if(c!==o&&!fe(c))return!1;c===o&&u++}if(u<3)return!1;if(r)return!0;e.line=t+1;const a=e.push("hr","hr",0);return a.map=[t,e.line],a.markup=Array(u+1).join(String.fromCharCode(o)),!0}function Qd(e,t){const n=e.eMarks[t];let r=e.bMarks[t]+e.tShift[t];const s=e.src.charCodeAt(r++);if(s!==42&&s!==45&&s!==43)return-1;if(r<n){const i=e.src.charCodeAt(r);if(!fe(i))return-1}return r}function ef(e,t){const n=e.bMarks[t]+e.tShift[t],r=e.eMarks[t];let s=n;if(s+1>=r)return-1;let i=e.src.charCodeAt(s++);if(i<48||i>57)return-1;for(;;){if(s>=r)return-1;if(i=e.src.charCodeAt(s++),i>=48&&i<=57){if(s-n>=10)return-1;continue}if(i===41||i===46)break;return-1}return s<r&&(i=e.src.charCodeAt(s),!fe(i))?-1:s}function t6(e,t){const n=e.level+2;for(let r=t+2,s=e.tokens.length-2;r<s;r++)e.tokens[r].level===n&&e.tokens[r].type==="paragraph_open"&&(e.tokens[r+2].hidden=!0,e.tokens[r].hidden=!0,r+=2)}function n6(e,t,n,r){let s,i,o,u,a=t,c=!0;if(e.sCount[a]-e.blkIndent>=4||e.listIndent>=0&&e.sCount[a]-e.listIndent>=4&&e.sCount[a]<e.blkIndent)return!1;let l=!1;r&&e.parentType==="paragraph"&&e.sCount[a]>=e.blkIndent&&(l=!0);let d,p,f;if((f=ef(e,a))>=0){if(d=!0,o=e.bMarks[a]+e.tShift[a],p=Number(e.src.slice(o,f-1)),l&&p!==1)return!1}else if((f=Qd(e,a))>=0)d=!1;else return!1;if(l&&e.skipSpaces(f)>=e.eMarks[a])return!1;if(r)return!0;const h=e.src.charCodeAt(f-1),m=e.tokens.length;d?(u=e.push("ordered_list_open","ol",1),p!==1&&(u.attrs=[["start",p]])):u=e.push("bullet_list_open","ul",1);const g=[a,0];u.map=g,u.markup=String.fromCharCode(h);let y=!1;const w=e.md.block.ruler.getRules("list"),v=e.parentType;for(e.parentType="list";a<n;){i=f,s=e.eMarks[a];const b=e.sCount[a]+f-(e.bMarks[a]+e.tShift[a]);let x=b;for(;i<s;){const Z=e.src.charCodeAt(i);if(Z===9)x+=4-(x+e.bsCount[a])%4;else if(Z===32)x++;else break;i++}const E=i;let R;E>=s?R=1:R=x-b,R>4&&(R=1);const S=b+R;u=e.push("list_item_open","li",1),u.markup=String.fromCharCode(h);const _=[a,0];u.map=_,d&&(u.info=e.src.slice(o,f-1));const A=e.tight,F=e.tShift[a],D=e.sCount[a],z=e.listIndent;if(e.listIndent=e.blkIndent,e.blkIndent=S,e.tight=!0,e.tShift[a]=E-e.bMarks[a],e.sCount[a]=x,E>=s&&e.isEmpty(a+1)?e.line=Math.min(e.line+2,n):e.md.block.tokenize(e,a,n,!0),(!e.tight||y)&&(c=!1),y=e.line-a>1&&e.isEmpty(e.line-1),e.blkIndent=e.listIndent,e.listIndent=z,e.tShift[a]=F,e.sCount[a]=D,e.tight=A,u=e.push("list_item_close","li",-1),u.markup=String.fromCharCode(h),a=e.line,_[1]=a,a>=n||e.sCount[a]<e.blkIndent||e.sCount[a]-e.blkIndent>=4)break;let K=!1;for(let Z=0,se=w.length;Z<se;Z++)if(w[Z](e,a,n,!0)){K=!0;break}if(K)break;if(d){if(f=ef(e,a),f<0)break;o=e.bMarks[a]+e.tShift[a]}else if(f=Qd(e,a),f<0)break;if(h!==e.src.charCodeAt(f-1))break}return d?u=e.push("ordered_list_close","ol",-1):u=e.push("bullet_list_close","ul",-1),u.markup=String.fromCharCode(h),g[1]=a,e.line=a,e.parentType=v,c&&t6(e,m),!0}function r6(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t],o=t+1;if(e.sCount[t]-e.blkIndent>=4||e.src.charCodeAt(s)!==91)return!1;function u(w){const v=e.lineMax;if(w>=v||e.isEmpty(w))return null;let b=!1;if(e.sCount[w]-e.blkIndent>3&&(b=!0),e.sCount[w]<0&&(b=!0),!b){const R=e.md.block.ruler.getRules("reference"),S=e.parentType;e.parentType="reference";let _=!1;for(let A=0,F=R.length;A<F;A++)if(R[A](e,w,v,!0)){_=!0;break}if(e.parentType=S,_)return null}const x=e.bMarks[w]+e.tShift[w],E=e.eMarks[w];return e.src.slice(x,E+1)}let a=e.src.slice(s,i+1);i=a.length;let c=-1;for(s=1;s<i;s++){const w=a.charCodeAt(s);if(w===91)return!1;if(w===93){c=s;break}else if(w===10){const v=u(o);v!==null&&(a+=v,i=a.length,o++)}else if(w===92&&(s++,s<i&&a.charCodeAt(s)===10)){const v=u(o);v!==null&&(a+=v,i=a.length,o++)}}if(c<0||a.charCodeAt(c+1)!==58)return!1;for(s=c+2;s<i;s++){const w=a.charCodeAt(s);if(w===10){const v=u(o);v!==null&&(a+=v,i=a.length,o++)}else if(!fe(w))break}const l=e.md.helpers.parseLinkDestination(a,s,i);if(!l.ok)return!1;const d=e.md.normalizeLink(l.str);if(!e.md.validateLink(d))return!1;s=l.pos;const p=s,f=o,h=s;for(;s<i;s++){const w=a.charCodeAt(s);if(w===10){const v=u(o);v!==null&&(a+=v,i=a.length,o++)}else if(!fe(w))break}let m=e.md.helpers.parseLinkTitle(a,s,i);for(;m.can_continue;){const w=u(o);if(w===null)break;a+=w,s=i,i=a.length,o++,m=e.md.helpers.parseLinkTitle(a,s,i,m)}let g;for(s<i&&h!==s&&m.ok?(g=m.str,s=m.pos):(g="",s=p,o=f);s<i;){const w=a.charCodeAt(s);if(!fe(w))break;s++}if(s<i&&a.charCodeAt(s)!==10&&g)for(g="",s=p,o=f;s<i;){const w=a.charCodeAt(s);if(!fe(w))break;s++}if(s<i&&a.charCodeAt(s)!==10)return!1;const y=Ji(a.slice(1,c));return y?(r||(typeof e.env.references>"u"&&(e.env.references={}),typeof e.env.references[y]>"u"&&(e.env.references[y]={title:g,href:d}),e.line=o),!0):!1}const s6=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],i6="[a-zA-Z_:][a-zA-Z0-9:._-]*",o6="[^\"'=<>`\\x00-\\x20]+",u6="'[^']*'",a6='"[^"]*"',c6="(?:"+o6+"|"+u6+"|"+a6+")",l6="(?:\\s+"+i6+"(?:\\s*=\\s*"+c6+")?)",lp="<[A-Za-z][A-Za-z0-9\\-]*"+l6+"*\\s*\\/?>",dp="<\\/[A-Za-z][A-Za-z0-9\\-]*\\s*>",d6="<!---?>|<!--(?:[^-]|-[^-]|--[^>])*-->",f6="<[?][\\s\\S]*?[?]>",h6="<![A-Za-z][^>]*>",p6="<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",m6=new RegExp("^(?:"+lp+"|"+dp+"|"+d6+"|"+f6+"|"+h6+"|"+p6+")"),g6=new RegExp("^(?:"+lp+"|"+dp+")"),Hn=[[/^<(script|pre|style|textarea)(?=(\s|>|$))/i,/<\/(script|pre|style|textarea)>/i,!0],[/^<!--/,/-->/,!0],[/^<\?/,/\?>/,!0],[/^<![A-Z]/,/>/,!0],[/^<!\[CDATA\[/,/\]\]>/,!0],[new RegExp("^</?("+s6.join("|")+")(?=(\\s|/?>|$))","i"),/^$/,!0],[new RegExp(g6.source+"\\s*$"),/^$/,!1]];function b6(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4||!e.md.options.html||e.src.charCodeAt(s)!==60)return!1;let o=e.src.slice(s,i),u=0;for(;u<Hn.length&&!Hn[u][0].test(o);u++);if(u===Hn.length)return!1;if(r)return Hn[u][2];let a=t+1;if(!Hn[u][1].test(o)){for(;a<n&&!(e.sCount[a]<e.blkIndent);a++)if(s=e.bMarks[a]+e.tShift[a],i=e.eMarks[a],o=e.src.slice(s,i),Hn[u][1].test(o)){o.length!==0&&a++;break}}e.line=a;const c=e.push("html_block","",0);return c.map=[t,a],c.content=e.getLines(t,a,e.blkIndent,!0),!0}function y6(e,t,n,r){let s=e.bMarks[t]+e.tShift[t],i=e.eMarks[t];if(e.sCount[t]-e.blkIndent>=4)return!1;let o=e.src.charCodeAt(s);if(o!==35||s>=i)return!1;let u=1;for(o=e.src.charCodeAt(++s);o===35&&s<i&&u<=6;)u++,o=e.src.charCodeAt(++s);if(u>6||s<i&&!fe(o))return!1;if(r)return!0;i=e.skipSpacesBack(i,s);const a=e.skipCharsBack(i,35,s);a>s&&fe(e.src.charCodeAt(a-1))&&(i=a),e.line=t+1;const c=e.push("heading_open","h"+String(u),1);c.markup="########".slice(0,u),c.map=[t,e.line];const l=e.push("inline","",0);l.content=e.src.slice(s,i).trim(),l.map=[t,e.line],l.children=[];const d=e.push("heading_close","h"+String(u),-1);return d.markup="########".slice(0,u),!0}function v6(e,t,n){const r=e.md.block.ruler.getRules("paragraph");if(e.sCount[t]-e.blkIndent>=4)return!1;const s=e.parentType;e.parentType="paragraph";let i=0,o,u=t+1;for(;u<n&&!e.isEmpty(u);u++){if(e.sCount[u]-e.blkIndent>3)continue;if(e.sCount[u]>=e.blkIndent){let f=e.bMarks[u]+e.tShift[u];const h=e.eMarks[u];if(f<h&&(o=e.src.charCodeAt(f),(o===45||o===61)&&(f=e.skipChars(f,o),f=e.skipSpaces(f),f>=h))){i=o===61?1:2;break}}if(e.sCount[u]<0)continue;let p=!1;for(let f=0,h=r.length;f<h;f++)if(r[f](e,u,n,!0)){p=!0;break}if(p)break}if(!i)return!1;const a=e.getLines(t,u,e.blkIndent,!1).trim();e.line=u+1;const c=e.push("heading_open","h"+String(i),1);c.markup=String.fromCharCode(o),c.map=[t,e.line];const l=e.push("inline","",0);l.content=a,l.map=[t,e.line-1],l.children=[];const d=e.push("heading_close","h"+String(i),-1);return d.markup=String.fromCharCode(o),e.parentType=s,!0}function w6(e,t,n){const r=e.md.block.ruler.getRules("paragraph"),s=e.parentType;let i=t+1;for(e.parentType="paragraph";i<n&&!e.isEmpty(i);i++){if(e.sCount[i]-e.blkIndent>3||e.sCount[i]<0)continue;let c=!1;for(let l=0,d=r.length;l<d;l++)if(r[l](e,i,n,!0)){c=!0;break}if(c)break}const o=e.getLines(t,i,e.blkIndent,!1).trim();e.line=i;const u=e.push("paragraph_open","p",1);u.map=[t,e.line];const a=e.push("inline","",0);return a.content=o,a.map=[t,e.line],a.children=[],e.push("paragraph_close","p",-1),e.parentType=s,!0}const js=[["table",Hk,["paragraph","reference"]],["code",Xk],["fence",Jk,["paragraph","reference","blockquote","list"]],["blockquote",Qk,["paragraph","reference","blockquote","list"]],["hr",e6,["paragraph","reference","blockquote","list"]],["list",n6,["paragraph","reference","blockquote"]],["reference",r6],["html_block",b6,["paragraph","reference","blockquote"]],["heading",y6,["paragraph","reference","blockquote"]],["lheading",v6],["paragraph",w6]];function Qi(){this.ruler=new et;for(let e=0;e<js.length;e++)this.ruler.push(js[e][0],js[e][1],{alt:(js[e][2]||[]).slice()})}Qi.prototype.tokenize=function(e,t,n){const r=this.ruler.getRules(""),s=r.length,i=e.md.options.maxNesting;let o=t,u=!1;for(;o<n&&(e.line=o=e.skipEmptyLines(o),!(o>=n||e.sCount[o]<e.blkIndent));){if(e.level>=i){e.line=n;break}const a=e.line;let c=!1;for(let l=0;l<s;l++)if(c=r[l](e,o,n,!1),c){if(a>=e.line)throw new Error("block rule didn't increment state.line");break}if(!c)throw new Error("none of the block rules matched");e.tight=!u,e.isEmpty(e.line-1)&&(u=!0),o=e.line,o<n&&e.isEmpty(o)&&(u=!0,o++,e.line=o)}};Qi.prototype.parse=function(e,t,n,r){if(!e)return;const s=new this.State(e,t,n,r);this.tokenize(s,s.line,s.lineMax)};Qi.prototype.State=Wt;function Os(e,t,n,r){this.src=e,this.env=n,this.md=t,this.tokens=r,this.tokens_meta=Array(r.length),this.pos=0,this.posMax=this.src.length,this.level=0,this.pending="",this.pendingLevel=0,this.cache={},this.delimiters=[],this._prev_delimiters=[],this.backticks={},this.backticksScanned=!1,this.linkLevel=0}Os.prototype.pushPending=function(){const e=new Ft("text","",0);return e.content=this.pending,e.level=this.pendingLevel,this.tokens.push(e),this.pending="",e};Os.prototype.push=function(e,t,n){this.pending&&this.pushPending();const r=new Ft(e,t,n);let s=null;return n<0&&(this.level--,this.delimiters=this._prev_delimiters.pop()),r.level=this.level,n>0&&(this.level++,this._prev_delimiters.push(this.delimiters),this.delimiters=[],s={delimiters:this.delimiters}),this.pendingLevel=this.level,this.tokens.push(r),this.tokens_meta.push(s),r};Os.prototype.scanDelims=function(e,t){const n=this.posMax,r=this.src.charCodeAt(e),s=e>0?this.src.charCodeAt(e-1):32;let i=e;for(;i<n&&this.src.charCodeAt(i)===r;)i++;const o=i-e,u=i<n?this.src.charCodeAt(i):32,a=ms(s)||ps(String.fromCharCode(s)),c=ms(u)||ps(String.fromCharCode(u)),l=hs(s),d=hs(u),p=!d&&(!c||l||a),f=!l&&(!a||d||c);return{can_open:p&&(t||!f||a),can_close:f&&(t||!p||c),length:o}};Os.prototype.Token=Ft;function x6(e){switch(e){case 10:case 33:case 35:case 36:case 37:case 38:case 42:case 43:case 45:case 58:case 60:case 61:case 62:case 64:case 91:case 92:case 93:case 94:case 95:case 96:case 123:case 125:case 126:return!0;default:return!1}}function S6(e,t){let n=e.pos;for(;n<e.posMax&&!x6(e.src.charCodeAt(n));)n++;return n===e.pos?!1:(t||(e.pending+=e.src.slice(e.pos,n)),e.pos=n,!0)}const _6=/(?:^|[^a-z0-9.+-])([a-z][a-z0-9.+-]*)$/i;function E6(e,t){if(!e.md.options.linkify||e.linkLevel>0)return!1;const n=e.pos,r=e.posMax;if(n+3>r||e.src.charCodeAt(n)!==58||e.src.charCodeAt(n+1)!==47||e.src.charCodeAt(n+2)!==47)return!1;const s=e.pending.match(_6);if(!s)return!1;const i=s[1],o=e.md.linkify.matchAtStart(e.src.slice(n-i.length));if(!o)return!1;let u=o.url;if(u.length<=i.length)return!1;let a=u.length;for(;a>0&&u.charCodeAt(a-1)===42;)a--;a!==u.length&&(u=u.slice(0,a));const c=e.md.normalizeLink(u);if(!e.md.validateLink(c))return!1;if(!t){e.pending=e.pending.slice(0,-i.length);const l=e.push("link_open","a",1);l.attrs=[["href",c]],l.markup="linkify",l.info="auto";const d=e.push("text","",0);d.content=e.md.normalizeLinkText(u);const p=e.push("link_close","a",-1);p.markup="linkify",p.info="auto"}return e.pos+=u.length-i.length,!0}function k6(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==10)return!1;const r=e.pending.length-1,s=e.posMax;if(!t)if(r>=0&&e.pending.charCodeAt(r)===32)if(r>=1&&e.pending.charCodeAt(r-1)===32){let i=r-1;for(;i>=1&&e.pending.charCodeAt(i-1)===32;)i--;e.pending=e.pending.slice(0,i),e.push("hardbreak","br",0)}else e.pending=e.pending.slice(0,-1),e.push("softbreak","br",0);else e.push("softbreak","br",0);for(n++;n<s&&fe(e.src.charCodeAt(n));)n++;return e.pos=n,!0}const ic=[];for(let e=0;e<256;e++)ic.push(0);"\\!\"#$%&'()*+,./:;<=>?@[]^_`{|}~-".split("").forEach(function(e){ic[e.charCodeAt(0)]=1});function C6(e,t){let n=e.pos;const r=e.posMax;if(e.src.charCodeAt(n)!==92||(n++,n>=r))return!1;let s=e.src.charCodeAt(n);if(s===10){for(t||e.push("hardbreak","br",0),n++;n<r&&(s=e.src.charCodeAt(n),!!fe(s));)n++;return e.pos=n,!0}let i=e.src[n];if(s>=55296&&s<=56319&&n+1<r){const u=e.src.charCodeAt(n+1);u>=56320&&u<=57343&&(i+=e.src[n+1],n++)}const o="\\"+i;if(!t){const u=e.push("text_special","",0);s<256&&ic[s]!==0?u.content=i:u.content=o,u.markup=o,u.info="escape"}return e.pos=n+1,!0}function I6(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==96)return!1;const s=n;n++;const i=e.posMax;for(;n<i&&e.src.charCodeAt(n)===96;)n++;const o=e.src.slice(s,n),u=o.length;if(e.backticksScanned&&(e.backticks[u]||0)<=s)return t||(e.pending+=o),e.pos+=u,!0;let a=n,c;for(;(c=e.src.indexOf("`",a))!==-1;){for(a=c+1;a<i&&e.src.charCodeAt(a)===96;)a++;const l=a-c;if(l===u){if(!t){const d=e.push("code_inline","code",0);d.markup=o,d.content=e.src.slice(n,c).replace(/\n/g," ").replace(/^ (.+) $/,"$1")}return e.pos=a,!0}e.backticks[l]=c}return e.backticksScanned=!0,t||(e.pending+=o),e.pos+=u,!0}function A6(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==126)return!1;const s=e.scanDelims(e.pos,!0);let i=s.length;const o=String.fromCharCode(r);if(i<2)return!1;let u;i%2&&(u=e.push("text","",0),u.content=o,i--);for(let a=0;a<i;a+=2)u=e.push("text","",0),u.content=o+o,e.delimiters.push({marker:r,length:0,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close});return e.pos+=s.length,!0}function tf(e,t){let n;const r=[],s=t.length;for(let i=0;i<s;i++){const o=t[i];if(o.marker!==126||o.end===-1)continue;const u=t[o.end];n=e.tokens[o.token],n.type="s_open",n.tag="s",n.nesting=1,n.markup="~~",n.content="",n=e.tokens[u.token],n.type="s_close",n.tag="s",n.nesting=-1,n.markup="~~",n.content="",e.tokens[u.token-1].type==="text"&&e.tokens[u.token-1].content==="~"&&r.push(u.token-1)}for(;r.length;){const i=r.pop();let o=i+1;for(;o<e.tokens.length&&e.tokens[o].type==="s_close";)o++;o--,i!==o&&(n=e.tokens[o],e.tokens[o]=e.tokens[i],e.tokens[i]=n)}}function R6(e){const t=e.tokens_meta,n=e.tokens_meta.length;tf(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&tf(e,t[r].delimiters)}const fp={tokenize:A6,postProcess:R6};function T6(e,t){const n=e.pos,r=e.src.charCodeAt(n);if(t||r!==95&&r!==42)return!1;const s=e.scanDelims(e.pos,r===42);for(let i=0;i<s.length;i++){const o=e.push("text","",0);o.content=String.fromCharCode(r),e.delimiters.push({marker:r,length:s.length,token:e.tokens.length-1,end:-1,open:s.can_open,close:s.can_close})}return e.pos+=s.length,!0}function nf(e,t){const n=t.length;for(let r=n-1;r>=0;r--){const s=t[r];if(s.marker!==95&&s.marker!==42||s.end===-1)continue;const i=t[s.end],o=r>0&&t[r-1].end===s.end+1&&t[r-1].marker===s.marker&&t[r-1].token===s.token-1&&t[s.end+1].token===i.token+1,u=String.fromCharCode(s.marker),a=e.tokens[s.token];a.type=o?"strong_open":"em_open",a.tag=o?"strong":"em",a.nesting=1,a.markup=o?u+u:u,a.content="";const c=e.tokens[i.token];c.type=o?"strong_close":"em_close",c.tag=o?"strong":"em",c.nesting=-1,c.markup=o?u+u:u,c.content="",o&&(e.tokens[t[r-1].token].content="",e.tokens[t[s.end+1].token].content="",r--)}}function O6(e){const t=e.tokens_meta,n=e.tokens_meta.length;nf(e,e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&nf(e,t[r].delimiters)}const hp={tokenize:T6,postProcess:O6};function F6(e,t){let n,r,s,i,o="",u="",a=e.pos,c=!0;if(e.src.charCodeAt(e.pos)!==91)return!1;const l=e.pos,d=e.posMax,p=e.pos+1,f=e.md.helpers.parseLinkLabel(e,e.pos,!0);if(f<0)return!1;let h=f+1;if(h<d&&e.src.charCodeAt(h)===40){for(c=!1,h++;h<d&&(n=e.src.charCodeAt(h),!(!fe(n)&&n!==10));h++);if(h>=d)return!1;if(a=h,s=e.md.helpers.parseLinkDestination(e.src,h,e.posMax),s.ok){for(o=e.md.normalizeLink(s.str),e.md.validateLink(o)?h=s.pos:o="",a=h;h<d&&(n=e.src.charCodeAt(h),!(!fe(n)&&n!==10));h++);if(s=e.md.helpers.parseLinkTitle(e.src,h,e.posMax),h<d&&a!==h&&s.ok)for(u=s.str,h=s.pos;h<d&&(n=e.src.charCodeAt(h),!(!fe(n)&&n!==10));h++);}(h>=d||e.src.charCodeAt(h)!==41)&&(c=!0),h++}if(c){if(typeof e.env.references>"u")return!1;if(h<d&&e.src.charCodeAt(h)===91?(a=h+1,h=e.md.helpers.parseLinkLabel(e,h),h>=0?r=e.src.slice(a,h++):h=f+1):h=f+1,r||(r=e.src.slice(p,f)),i=e.env.references[Ji(r)],!i)return e.pos=l,!1;o=i.href,u=i.title}if(!t){e.pos=p,e.posMax=f;const m=e.push("link_open","a",1),g=[["href",o]];m.attrs=g,u&&g.push(["title",u]),e.linkLevel++,e.md.inline.tokenize(e),e.linkLevel--,e.push("link_close","a",-1)}return e.pos=h,e.posMax=d,!0}function D6(e,t){let n,r,s,i,o,u,a,c,l="";const d=e.pos,p=e.posMax;if(e.src.charCodeAt(e.pos)!==33||e.src.charCodeAt(e.pos+1)!==91)return!1;const f=e.pos+2,h=e.md.helpers.parseLinkLabel(e,e.pos+1,!1);if(h<0)return!1;if(i=h+1,i<p&&e.src.charCodeAt(i)===40){for(i++;i<p&&(n=e.src.charCodeAt(i),!(!fe(n)&&n!==10));i++);if(i>=p)return!1;for(c=i,u=e.md.helpers.parseLinkDestination(e.src,i,e.posMax),u.ok&&(l=e.md.normalizeLink(u.str),e.md.validateLink(l)?i=u.pos:l=""),c=i;i<p&&(n=e.src.charCodeAt(i),!(!fe(n)&&n!==10));i++);if(u=e.md.helpers.parseLinkTitle(e.src,i,e.posMax),i<p&&c!==i&&u.ok)for(a=u.str,i=u.pos;i<p&&(n=e.src.charCodeAt(i),!(!fe(n)&&n!==10));i++);else a="";if(i>=p||e.src.charCodeAt(i)!==41)return e.pos=d,!1;i++}else{if(typeof e.env.references>"u")return!1;if(i<p&&e.src.charCodeAt(i)===91?(c=i+1,i=e.md.helpers.parseLinkLabel(e,i),i>=0?s=e.src.slice(c,i++):i=h+1):i=h+1,s||(s=e.src.slice(f,h)),o=e.env.references[Ji(s)],!o)return e.pos=d,!1;l=o.href,a=o.title}if(!t){r=e.src.slice(f,h);const m=[];e.md.inline.parse(r,e.md,e.env,m);const g=e.push("image","img",0),y=[["src",l],["alt",""]];g.attrs=y,g.children=m,g.content=r,a&&y.push(["title",a])}return e.pos=i,e.posMax=p,!0}const N6=/^([a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*)$/,P6=/^([a-zA-Z][a-zA-Z0-9+.-]{1,31}):([^<>\x00-\x20]*)$/;function L6(e,t){let n=e.pos;if(e.src.charCodeAt(n)!==60)return!1;const r=e.pos,s=e.posMax;for(;;){if(++n>=s)return!1;const o=e.src.charCodeAt(n);if(o===60)return!1;if(o===62)break}const i=e.src.slice(r+1,n);if(P6.test(i)){const o=e.md.normalizeLink(i);if(!e.md.validateLink(o))return!1;if(!t){const u=e.push("link_open","a",1);u.attrs=[["href",o]],u.markup="autolink",u.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}if(N6.test(i)){const o=e.md.normalizeLink("mailto:"+i);if(!e.md.validateLink(o))return!1;if(!t){const u=e.push("link_open","a",1);u.attrs=[["href",o]],u.markup="autolink",u.info="auto";const a=e.push("text","",0);a.content=e.md.normalizeLinkText(i);const c=e.push("link_close","a",-1);c.markup="autolink",c.info="auto"}return e.pos+=i.length+2,!0}return!1}function M6(e){return/^<a[>\s]/i.test(e)}function B6(e){return/^<\/a\s*>/i.test(e)}function $6(e){const t=e|32;return t>=97&&t<=122}function V6(e,t){if(!e.md.options.html)return!1;const n=e.posMax,r=e.pos;if(e.src.charCodeAt(r)!==60||r+2>=n)return!1;const s=e.src.charCodeAt(r+1);if(s!==33&&s!==63&&s!==47&&!$6(s))return!1;const i=e.src.slice(r).match(m6);if(!i)return!1;if(!t){const o=e.push("html_inline","",0);o.content=i[0],M6(o.content)&&e.linkLevel++,B6(o.content)&&e.linkLevel--}return e.pos+=i[0].length,!0}const U6=/^&#((?:x[a-f0-9]{1,6}|[0-9]{1,7}));/i,z6=/^&([a-z][a-z0-9]{1,31});/i;function K6(e,t){const n=e.pos,r=e.posMax;if(e.src.charCodeAt(n)!==38||n+1>=r)return!1;if(e.src.charCodeAt(n+1)===35){const i=e.src.slice(n).match(U6);if(i){if(!t){const o=i[1][0].toLowerCase()==="x"?parseInt(i[1].slice(1),16):parseInt(i[1],10),u=e.push("text_special","",0);u.content=rc(o)?Oi(o):Oi(65533),u.markup=i[0],u.info="entity"}return e.pos+=i[0].length,!0}}else{const i=e.src.slice(n).match(z6);if(i){const o=ip(i[0]);if(o!==i[0]){if(!t){const u=e.push("text_special","",0);u.content=o,u.markup=i[0],u.info="entity"}return e.pos+=i[0].length,!0}}}return!1}function rf(e){const t={},n=e.length;if(!n)return;let r=0,s=-2;const i=[];for(let o=0;o<n;o++){const u=e[o];if(i.push(0),(e[r].marker!==u.marker||s!==u.token-1)&&(r=o),s=u.token,u.length=u.length||0,!u.close)continue;t.hasOwnProperty(u.marker)||(t[u.marker]=[-1,-1,-1,-1,-1,-1]);const a=t[u.marker][(u.open?3:0)+u.length%3];let c=r-i[r]-1,l=c;for(;c>a;c-=i[c]+1){const d=e[c];if(d.marker===u.marker&&d.open&&d.end<0){let p=!1;if((d.close||u.open)&&(d.length+u.length)%3===0&&(d.length%3!==0||u.length%3!==0)&&(p=!0),!p){const f=c>0&&!e[c-1].open?i[c-1]+1:0;i[o]=o-c+f,i[c]=f,u.open=!1,d.end=o,d.close=!1,l=-1,s=-2;break}}}l!==-1&&(t[u.marker][(u.open?3:0)+(u.length||0)%3]=l)}}function W6(e){const t=e.tokens_meta,n=e.tokens_meta.length;rf(e.delimiters);for(let r=0;r<n;r++)t[r]&&t[r].delimiters&&rf(t[r].delimiters)}function G6(e){let t,n,r=0;const s=e.tokens,i=e.tokens.length;for(t=n=0;t<i;t++)s[t].nesting<0&&r--,s[t].level=r,s[t].nesting>0&&r++,s[t].type==="text"&&t+1<i&&s[t+1].type==="text"?s[t+1].content=s[t].content+s[t+1].content:(t!==n&&(s[n]=s[t]),n++);t!==n&&(s.length=n)}const Po=[["text",S6],["linkify",E6],["newline",k6],["escape",C6],["backticks",I6],["strikethrough",fp.tokenize],["emphasis",hp.tokenize],["link",F6],["image",D6],["autolink",L6],["html_inline",V6],["entity",K6]],Lo=[["balance_pairs",W6],["strikethrough",fp.postProcess],["emphasis",hp.postProcess],["fragments_join",G6]];function Fs(){this.ruler=new et;for(let e=0;e<Po.length;e++)this.ruler.push(Po[e][0],Po[e][1]);this.ruler2=new et;for(let e=0;e<Lo.length;e++)this.ruler2.push(Lo[e][0],Lo[e][1])}Fs.prototype.skipToken=function(e){const t=e.pos,n=this.ruler.getRules(""),r=n.length,s=e.md.options.maxNesting,i=e.cache;if(typeof i[t]<"u"){e.pos=i[t];return}let o=!1;if(e.level<s){for(let u=0;u<r;u++)if(e.level++,o=n[u](e,!0),e.level--,o){if(t>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}else e.pos=e.posMax;o||e.pos++,i[t]=e.pos};Fs.prototype.tokenize=function(e){const t=this.ruler.getRules(""),n=t.length,r=e.posMax,s=e.md.options.maxNesting;for(;e.pos<r;){const i=e.pos;let o=!1;if(e.level<s){for(let u=0;u<n;u++)if(o=t[u](e,!1),o){if(i>=e.pos)throw new Error("inline rule didn't increment state.pos");break}}if(o){if(e.pos>=r)break;continue}e.pending+=e.src[e.pos++]}e.pending&&e.pushPending()};Fs.prototype.parse=function(e,t,n,r){const s=new this.State(e,t,n,r);this.tokenize(s);const i=this.ruler2.getRules(""),o=i.length;for(let u=0;u<o;u++)i[u](s)};Fs.prototype.State=Os;function j6(e){const t={};e=e||{},t.src_Any=ep.source,t.src_Cc=tp.source,t.src_Z=rp.source,t.src_P=tc.source,t.src_ZPCc=[t.src_Z,t.src_P,t.src_Cc].join("|"),t.src_ZCc=[t.src_Z,t.src_Cc].join("|");const n="[><]";return t.src_pseudo_letter="(?:(?!"+n+"|"+t.src_ZPCc+")"+t.src_Any+")",t.src_ip4="(?:(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)",t.src_auth="(?:(?:(?!"+t.src_ZCc+"|[@/\\[\\]()]).)+@)?",t.src_port="(?::(?:6(?:[0-4]\\d{3}|5(?:[0-4]\\d{2}|5(?:[0-2]\\d|3[0-5])))|[1-5]?\\d{1,4}))?",t.src_host_terminator="(?=$|"+n+"|"+t.src_ZPCc+")(?!"+(e["---"]?"-(?!--)|":"-|")+"_|:\\d|\\.-|\\.(?!$|"+t.src_ZPCc+"))",t.src_path="(?:[/?#](?:(?!"+t.src_ZCc+"|"+n+`|[()[\\]{}.,"'?!\\-;]).|\\[(?:(?!`+t.src_ZCc+"|\\]).)*\\]|\\((?:(?!"+t.src_ZCc+"|[)]).)*\\)|\\{(?:(?!"+t.src_ZCc+'|[}]).)*\\}|\\"(?:(?!'+t.src_ZCc+`|["]).)+\\"|\\'(?:(?!`+t.src_ZCc+"|[']).)+\\'|\\'(?="+t.src_pseudo_letter+"|[-])|\\.{2,}[a-zA-Z0-9%/&]|\\.(?!"+t.src_ZCc+"|[.]|$)|"+(e["---"]?"\\-(?!--(?:[^-]|$))(?:-*)|":"\\-+|")+",(?!"+t.src_ZCc+"|$)|;(?!"+t.src_ZCc+"|$)|\\!+(?!"+t.src_ZCc+"|[!]|$)|\\?(?!"+t.src_ZCc+"|[?]|$))+|\\/)?",t.src_email_name='[\\-;:&=\\+\\$,\\.a-zA-Z0-9_][\\-;:&=\\+\\$,\\"\\.a-zA-Z0-9_]*',t.src_xn="xn--[a-z0-9\\-]{1,59}",t.src_domain_root="(?:"+t.src_xn+"|"+t.src_pseudo_letter+"{1,63})",t.src_domain="(?:"+t.src_xn+"|(?:"+t.src_pseudo_letter+")|(?:"+t.src_pseudo_letter+"(?:-|"+t.src_pseudo_letter+"){0,61}"+t.src_pseudo_letter+"))",t.src_host="(?:(?:(?:(?:"+t.src_domain+")\\.)*"+t.src_domain+"))",t.tpl_host_fuzzy="(?:"+t.src_ip4+"|(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%)))",t.tpl_host_no_ip_fuzzy="(?:(?:(?:"+t.src_domain+")\\.)+(?:%TLDS%))",t.src_host_strict=t.src_host+t.src_host_terminator,t.tpl_host_fuzzy_strict=t.tpl_host_fuzzy+t.src_host_terminator,t.src_host_port_strict=t.src_host+t.src_port+t.src_host_terminator,t.tpl_host_port_fuzzy_strict=t.tpl_host_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_port_no_ip_fuzzy_strict=t.tpl_host_no_ip_fuzzy+t.src_port+t.src_host_terminator,t.tpl_host_fuzzy_test="localhost|www\\.|\\.\\d{1,3}\\.|(?:\\.(?:%TLDS%)(?:"+t.src_ZPCc+"|>|$))",t.tpl_email_fuzzy="(^|"+n+'|"|\\(|'+t.src_ZCc+")("+t.src_email_name+"@"+t.tpl_host_fuzzy_strict+")",t.tpl_link_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_fuzzy_strict+t.src_path+")",t.tpl_link_no_ip_fuzzy="(^|(?![.:/\\-_@])(?:[$+<=>^`|]|"+t.src_ZPCc+"))((?![$+<=>^`|])"+t.tpl_host_port_no_ip_fuzzy_strict+t.src_path+")",t}function Lu(e){return Array.prototype.slice.call(arguments,1).forEach(function(n){n&&Object.keys(n).forEach(function(r){e[r]=n[r]})}),e}function eo(e){return Object.prototype.toString.call(e)}function Z6(e){return eo(e)==="[object String]"}function Y6(e){return eo(e)==="[object Object]"}function q6(e){return eo(e)==="[object RegExp]"}function sf(e){return eo(e)==="[object Function]"}function H6(e){return e.replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}const pp={fuzzyLink:!0,fuzzyEmail:!0,fuzzyIP:!1};function X6(e){return Object.keys(e||{}).reduce(function(t,n){return t||pp.hasOwnProperty(n)},!1)}const J6={"http:":{validate:function(e,t,n){const r=e.slice(t);return n.re.http||(n.re.http=new RegExp("^\\/\\/"+n.re.src_auth+n.re.src_host_port_strict+n.re.src_path,"i")),n.re.http.test(r)?r.match(n.re.http)[0].length:0}},"https:":"http:","ftp:":"http:","//":{validate:function(e,t,n){const r=e.slice(t);return n.re.no_http||(n.re.no_http=new RegExp("^"+n.re.src_auth+"(?:localhost|(?:(?:"+n.re.src_domain+")\\.)+"+n.re.src_domain_root+")"+n.re.src_port+n.re.src_host_terminator+n.re.src_path,"i")),n.re.no_http.test(r)?t>=3&&e[t-3]===":"||t>=3&&e[t-3]==="/"?0:r.match(n.re.no_http)[0].length:0}},"mailto:":{validate:function(e,t,n){const r=e.slice(t);return n.re.mailto||(n.re.mailto=new RegExp("^"+n.re.src_email_name+"@"+n.re.src_host_strict,"i")),n.re.mailto.test(r)?r.match(n.re.mailto)[0].length:0}}},Q6="a[cdefgilmnoqrstuwxz]|b[abdefghijmnorstvwyz]|c[acdfghiklmnoruvwxyz]|d[ejkmoz]|e[cegrstu]|f[ijkmor]|g[abdefghilmnpqrstuwy]|h[kmnrtu]|i[delmnoqrst]|j[emop]|k[eghimnprwyz]|l[abcikrstuvy]|m[acdeghklmnopqrstuvwxyz]|n[acefgilopruz]|om|p[aefghklmnrstwy]|qa|r[eosuw]|s[abcdeghijklmnortuvxyz]|t[cdfghjklmnortvwz]|u[agksyz]|v[aceginu]|w[fs]|y[et]|z[amw]",eC="biz|com|edu|gov|net|org|pro|web|xxx|aero|asia|coop|info|museum|name|shop|".split("|");function tC(e){e.__index__=-1,e.__text_cache__=""}function nC(e){return function(t,n){const r=t.slice(n);return e.test(r)?r.match(e)[0].length:0}}function of(){return function(e,t){t.normalize(e)}}function Fi(e){const t=e.re=j6(e.__opts__),n=e.__tlds__.slice();e.onCompile(),e.__tlds_replaced__||n.push(Q6),n.push(t.src_xn),t.src_tlds=n.join("|");function r(u){return u.replace("%TLDS%",t.src_tlds)}t.email_fuzzy=RegExp(r(t.tpl_email_fuzzy),"i"),t.link_fuzzy=RegExp(r(t.tpl_link_fuzzy),"i"),t.link_no_ip_fuzzy=RegExp(r(t.tpl_link_no_ip_fuzzy),"i"),t.host_fuzzy_test=RegExp(r(t.tpl_host_fuzzy_test),"i");const s=[];e.__compiled__={};function i(u,a){throw new Error('(LinkifyIt) Invalid schema "'+u+'": '+a)}Object.keys(e.__schemas__).forEach(function(u){const a=e.__schemas__[u];if(a===null)return;const c={validate:null,link:null};if(e.__compiled__[u]=c,Y6(a)){q6(a.validate)?c.validate=nC(a.validate):sf(a.validate)?c.validate=a.validate:i(u,a),sf(a.normalize)?c.normalize=a.normalize:a.normalize?i(u,a):c.normalize=of();return}if(Z6(a)){s.push(u);return}i(u,a)}),s.forEach(function(u){e.__compiled__[e.__schemas__[u]]&&(e.__compiled__[u].validate=e.__compiled__[e.__schemas__[u]].validate,e.__compiled__[u].normalize=e.__compiled__[e.__schemas__[u]].normalize)}),e.__compiled__[""]={validate:null,normalize:of()};const o=Object.keys(e.__compiled__).filter(function(u){return u.length>0&&e.__compiled__[u]}).map(H6).join("|");e.re.schema_test=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","i"),e.re.schema_search=RegExp("(^|(?!_)(?:[><]|"+t.src_ZPCc+"))("+o+")","ig"),e.re.schema_at_start=RegExp("^"+e.re.schema_search.source,"i"),e.re.pretest=RegExp("("+e.re.schema_test.source+")|("+e.re.host_fuzzy_test.source+")|@","i"),tC(e)}function rC(e,t){const n=e.__index__,r=e.__last_index__,s=e.__text_cache__.slice(n,r);this.schema=e.__schema__.toLowerCase(),this.index=n+t,this.lastIndex=r+t,this.raw=s,this.text=s,this.url=s}function Mu(e,t){const n=new rC(e,t);return e.__compiled__[n.schema].normalize(n,e),n}function at(e,t){if(!(this instanceof at))return new at(e,t);t||X6(e)&&(t=e,e={}),this.__opts__=Lu({},pp,t),this.__index__=-1,this.__last_index__=-1,this.__schema__="",this.__text_cache__="",this.__schemas__=Lu({},J6,e),this.__compiled__={},this.__tlds__=eC,this.__tlds_replaced__=!1,this.re={},Fi(this)}at.prototype.add=function(t,n){return this.__schemas__[t]=n,Fi(this),this};at.prototype.set=function(t){return this.__opts__=Lu(this.__opts__,t),this};at.prototype.test=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return!1;let n,r,s,i,o,u,a,c,l;if(this.re.schema_test.test(t)){for(a=this.re.schema_search,a.lastIndex=0;(n=a.exec(t))!==null;)if(i=this.testSchemaAt(t,n[2],a.lastIndex),i){this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+i;break}}return this.__opts__.fuzzyLink&&this.__compiled__["http:"]&&(c=t.search(this.re.host_fuzzy_test),c>=0&&(this.__index__<0||c<this.__index__)&&(r=t.match(this.__opts__.fuzzyIP?this.re.link_fuzzy:this.re.link_no_ip_fuzzy))!==null&&(o=r.index+r[1].length,(this.__index__<0||o<this.__index__)&&(this.__schema__="",this.__index__=o,this.__last_index__=r.index+r[0].length))),this.__opts__.fuzzyEmail&&this.__compiled__["mailto:"]&&(l=t.indexOf("@"),l>=0&&(s=t.match(this.re.email_fuzzy))!==null&&(o=s.index+s[1].length,u=s.index+s[0].length,(this.__index__<0||o<this.__index__||o===this.__index__&&u>this.__last_index__)&&(this.__schema__="mailto:",this.__index__=o,this.__last_index__=u))),this.__index__>=0};at.prototype.pretest=function(t){return this.re.pretest.test(t)};at.prototype.testSchemaAt=function(t,n,r){return this.__compiled__[n.toLowerCase()]?this.__compiled__[n.toLowerCase()].validate(t,r,this):0};at.prototype.match=function(t){const n=[];let r=0;this.__index__>=0&&this.__text_cache__===t&&(n.push(Mu(this,r)),r=this.__last_index__);let s=r?t.slice(r):t;for(;this.test(s);)n.push(Mu(this,r)),s=s.slice(this.__last_index__),r+=this.__last_index__;return n.length?n:null};at.prototype.matchAtStart=function(t){if(this.__text_cache__=t,this.__index__=-1,!t.length)return null;const n=this.re.schema_at_start.exec(t);if(!n)return null;const r=this.testSchemaAt(t,n[2],n[0].length);return r?(this.__schema__=n[2],this.__index__=n.index+n[1].length,this.__last_index__=n.index+n[0].length+r,Mu(this,0)):null};at.prototype.tlds=function(t,n){return t=Array.isArray(t)?t:[t],n?(this.__tlds__=this.__tlds__.concat(t).sort().filter(function(r,s,i){return r!==i[s-1]}).reverse(),Fi(this),this):(this.__tlds__=t.slice(),this.__tlds_replaced__=!0,Fi(this),this)};at.prototype.normalize=function(t){t.schema||(t.url="http://"+t.url),t.schema==="mailto:"&&!/^mailto:/i.test(t.url)&&(t.url="mailto:"+t.url)};at.prototype.onCompile=function(){};const ur=2147483647,Pt=36,oc=1,gs=26,sC=38,iC=700,mp=72,gp=128,bp="-",oC=/^xn--/,uC=/[^\0-\x7F]/,aC=/[\x2E\u3002\uFF0E\uFF61]/g,cC={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Mo=Pt-oc,Lt=Math.floor,Bo=String.fromCharCode;function un(e){throw new RangeError(cC[e])}function lC(e,t){const n=[];let r=e.length;for(;r--;)n[r]=t(e[r]);return n}function yp(e,t){const n=e.split("@");let r="";n.length>1&&(r=n[0]+"@",e=n[1]),e=e.replace(aC,".");const s=e.split("."),i=lC(s,t).join(".");return r+i}function vp(e){const t=[];let n=0;const r=e.length;for(;n<r;){const s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){const i=e.charCodeAt(n++);(i&64512)==56320?t.push(((s&1023)<<10)+(i&1023)+65536):(t.push(s),n--)}else t.push(s)}return t}const dC=e=>String.fromCodePoint(...e),fC=function(e){return e>=48&&e<58?26+(e-48):e>=65&&e<91?e-65:e>=97&&e<123?e-97:Pt},uf=function(e,t){return e+22+75*(e<26)-((t!=0)<<5)},wp=function(e,t,n){let r=0;for(e=n?Lt(e/iC):e>>1,e+=Lt(e/t);e>Mo*gs>>1;r+=Pt)e=Lt(e/Mo);return Lt(r+(Mo+1)*e/(e+sC))},xp=function(e){const t=[],n=e.length;let r=0,s=gp,i=mp,o=e.lastIndexOf(bp);o<0&&(o=0);for(let u=0;u<o;++u)e.charCodeAt(u)>=128&&un("not-basic"),t.push(e.charCodeAt(u));for(let u=o>0?o+1:0;u<n;){const a=r;for(let l=1,d=Pt;;d+=Pt){u>=n&&un("invalid-input");const p=fC(e.charCodeAt(u++));p>=Pt&&un("invalid-input"),p>Lt((ur-r)/l)&&un("overflow"),r+=p*l;const f=d<=i?oc:d>=i+gs?gs:d-i;if(p<f)break;const h=Pt-f;l>Lt(ur/h)&&un("overflow"),l*=h}const c=t.length+1;i=wp(r-a,c,a==0),Lt(r/c)>ur-s&&un("overflow"),s+=Lt(r/c),r%=c,t.splice(r++,0,s)}return String.fromCodePoint(...t)},Sp=function(e){const t=[];e=vp(e);const n=e.length;let r=gp,s=0,i=mp;for(const a of e)a<128&&t.push(Bo(a));const o=t.length;let u=o;for(o&&t.push(bp);u<n;){let a=ur;for(const l of e)l>=r&&l<a&&(a=l);const c=u+1;a-r>Lt((ur-s)/c)&&un("overflow"),s+=(a-r)*c,r=a;for(const l of e)if(l<r&&++s>ur&&un("overflow"),l===r){let d=s;for(let p=Pt;;p+=Pt){const f=p<=i?oc:p>=i+gs?gs:p-i;if(d<f)break;const h=d-f,m=Pt-f;t.push(Bo(uf(f+h%m,0))),d=Lt(h/m)}t.push(Bo(uf(d,0))),i=wp(s,c,u===o),s=0,++u}++s,++r}return t.join("")},hC=function(e){return yp(e,function(t){return oC.test(t)?xp(t.slice(4).toLowerCase()):t})},pC=function(e){return yp(e,function(t){return uC.test(t)?"xn--"+Sp(t):t})},_p={version:"2.3.1",ucs2:{decode:vp,encode:dC},decode:xp,encode:Sp,toASCII:pC,toUnicode:hC},mC={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:100},components:{core:{},block:{},inline:{}}},gC={options:{html:!1,xhtmlOut:!1,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["paragraph"]},inline:{rules:["text"],rules2:["balance_pairs","fragments_join"]}}},bC={options:{html:!0,xhtmlOut:!0,breaks:!1,langPrefix:"language-",linkify:!1,typographer:!1,quotes:"",highlight:null,maxNesting:20},components:{core:{rules:["normalize","block","inline","text_join"]},block:{rules:["blockquote","code","fence","heading","hr","html_block","lheading","list","reference","paragraph"]},inline:{rules:["autolink","backticks","emphasis","entity","escape","html_inline","image","link","newline","text"],rules2:["balance_pairs","emphasis","fragments_join"]}}},yC={default:mC,zero:gC,commonmark:bC},vC=/^(vbscript|javascript|file|data):/,wC=/^data:image\/(gif|png|jpeg|webp);/;function xC(e){const t=e.trim().toLowerCase();return vC.test(t)?wC.test(t):!0}const Ep=["http:","https:","mailto:"];function SC(e){const t=ec(e,!0);if(t.hostname&&(!t.protocol||Ep.indexOf(t.protocol)>=0))try{t.hostname=_p.toASCII(t.hostname)}catch{}return Ts(Qa(t))}function _C(e){const t=ec(e,!0);if(t.hostname&&(!t.protocol||Ep.indexOf(t.protocol)>=0))try{t.hostname=_p.toUnicode(t.hostname)}catch{}return yr(Qa(t),yr.defaultChars+"%")}function St(e,t){if(!(this instanceof St))return new St(e,t);t||nc(e)||(t=e||{},e="default"),this.inline=new Fs,this.block=new Qi,this.core=new sc,this.renderer=new kr,this.linkify=new at,this.validateLink=xC,this.normalizeLink=SC,this.normalizeLinkText=_C,this.utils=kk,this.helpers=Xi({},Rk),this.options={},this.configure(e),t&&this.set(t)}St.prototype.set=function(e){return Xi(this.options,e),this};St.prototype.configure=function(e){const t=this;if(nc(e)){const n=e;if(e=yC[n],!e)throw new Error('Wrong `markdown-it` preset "'+n+'", check name')}if(!e)throw new Error("Wrong `markdown-it` preset, can't be empty");return e.options&&t.set(e.options),e.components&&Object.keys(e.components).forEach(function(n){e.components[n].rules&&t[n].ruler.enableOnly(e.components[n].rules),e.components[n].rules2&&t[n].ruler2.enableOnly(e.components[n].rules2)}),this};St.prototype.enable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.enable(e,!0))},this),n=n.concat(this.inline.ruler2.enable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to enable unknown rule(s): "+r);return this};St.prototype.disable=function(e,t){let n=[];Array.isArray(e)||(e=[e]),["core","block","inline"].forEach(function(s){n=n.concat(this[s].ruler.disable(e,!0))},this),n=n.concat(this.inline.ruler2.disable(e,!0));const r=e.filter(function(s){return n.indexOf(s)<0});if(r.length&&!t)throw new Error("MarkdownIt. Failed to disable unknown rule(s): "+r);return this};St.prototype.use=function(e){const t=[this].concat(Array.prototype.slice.call(arguments,1));return e.apply(e,t),this};St.prototype.parse=function(e,t){if(typeof e!="string")throw new Error("Input data should be a String");const n=new this.core.State(e,this,t);return this.core.process(n),n.tokens};St.prototype.render=function(e,t){return t=t||{},this.renderer.render(this.parse(e,t),this.options,t)};St.prototype.parseInline=function(e,t){const n=new this.core.State(e,this,t);return n.inlineMode=!0,this.core.process(n),n.tokens};St.prototype.renderInline=function(e,t){return t=t||{},this.renderer.render(this.parseInline(e,t),this.options,t)};var EC=B("<div>");const kC=new St({html:!1,linkify:!0}),CC=e=>{const t=J(()=>e.content?kC.render(e.content):"");return(()=>{var n=EC();return L(()=>n.innerHTML=t()),n})()};var IC=B("<span>End of List"),AC=B("<div><h2>"),RC=B('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round aria-hidden=true><path d="M18 6L6 18M6 6l12 12">'),TC=B("<div><button type=button>"),OC=B("<div id=swipe-instruction>"),FC=B("<div><div aria-hidden=true></div><div><h3>You've reached the end of the list!</h3><p>You've caught up with all the items in this view."),DC=B("<div>Loading content..."),NC=B("<div data-testid=swipe-container aria-describedby=swipe-instruction>"),PC=B('<a target=_blank rel="noopener noreferrer">'),LC=B('<svg xmlns=http://www.w3.org/2000/svg width=24 height=24 viewBox="0 0 24 24"fill=none stroke=currentColor stroke-width=2 stroke-linecap=round stroke-linejoin=round aria-hidden=true><path d="M20 6L9 17l-5-5">'),MC=B("<span>Published: "),BC=B("<span>By "),af=B("<div>"),$C=B("<div><span>Received: "),VC=B("<div><img alt>"),UC=B("<span>");function zC(e){let t;const{x:n,isSwiping:r,handlers:s}=BE({onSwipeLeft:()=>{e.onNext&&e.nextItemId&&e.itemId!=="end-of-list"&&e.onNext()},onSwipeRight:()=>{e.onPrev&&e.prevItemId&&e.onPrev()},threshold:100,disabled:e.itemId==="end-of-list"}),i=()=>!!(e.onNext&&e.nextItemId&&e.itemId!=="end-of-list"),o=()=>!!(e.onPrev&&e.prevItemId),u=()=>{const m=n();return m>0&&!o()?m**.7:m<0&&!i()?-(Math.abs(m)**.7):m};Qe(()=>{const m=e.itemId,g=c(),y=l();if(m&&!y&&g&&t){const w=t,v=[];requestAnimationFrame(()=>{w&&w.focus();const b=w.querySelectorAll("img");for(const x of b){const E=()=>{const R=x.naturalHeight;let S="other";if(!R){x.setAttribute("data-layout",S);return}const _=x.naturalWidth/R;_>1.1?S="hero":_>=.9&&_<=1.1&&(S="icon"),x.setAttribute("data-layout",S)};x.complete?E():(x.addEventListener("load",E,{once:!0}),v.push(()=>x.removeEventListener("load",E)))}}),Ee(()=>{for(const b of v)b()})}});const a=jm(()=>({queryKey:["item",e.itemId],queryFn:async()=>!e.itemId||e.itemId==="end-of-list"?null:await K0(e.itemId),enabled:!!e.itemId&&e.itemId!=="end-of-list",staleTime:Q0})),c=()=>a.data??null,l=()=>a.isPending,d=()=>e.itemId==="end-of-list",p=()=>{const m=c();!m||d()||en().update(m.id,g=>{g.isRead=!m.isRead})},f=m=>{if(m.key==="Escape")e.onClose();else if(m.key==="ArrowLeft"||m.key==="k"||m.key==="K"||m.key==="h"||m.key==="H"){const g=e.prevItemId;e.onPrev&&g&&e.onPrev()}else if(m.key==="ArrowRight"||m.key==="j"||m.key==="J"||m.key==="l"||m.key==="L"){const g=e.nextItemId;!d()&&e.onNext&&g&&e.onNext()}},h=()=>{if(e.footerExtras)return e.footerExtras;if(d())return k(ye,{variant:"primary",get onClick(){return e.onClose},children:"Back to List"})};return k(G,{get when(){return e.itemId},get children(){return k(Ja,{ref:m=>{t=m},get isOpen(){return!!e.itemId},get onClose(){return e.onClose},size:"full",hideClose:!0,get ariaLabel(){return d()?"End of list reached":"Item details"},onKeyDown:f,bodyPadding:!1,get footer(){return h()},get children(){return[(()=>{var m=AC(),g=m.firstChild;return T(g,k(G,{get when(){return d()},get children(){return IC()}}),null),T(g,k(G,{get when(){return!d()},get children(){return k(G,{get when(){return c()},fallback:"Loading...",children:y=>(()=>{var w=PC();return T(w,()=>y().title),L(v=>{var b=y().url,x=O({color:"inherit",textDecoration:"none",_hover:{textDecoration:"underline",color:"blue.600"}});return b!==v.e&&st(w,"href",v.e=b),x!==v.t&&C(w,v.t=x),v},{e:void 0,t:void 0}),w})()})}}),null),T(m,k(ye,{variant:"ghost",get onClick(){return e.onClose},children:"Close"}),null),L(y=>{var w=X({justifyContent:"space-between",alignItems:"center",padding:"2",borderBottom:"1px solid",borderColor:"gray.100"}),v=O({fontSize:"md",fontWeight:"bold",truncate:!0,flex:1});return w!==y.e&&C(m,y.e=w),v!==y.t&&C(g,y.t=v),y},{e:void 0,t:void 0}),m})(),k(G,{get when(){return le(()=>!d())()&&c()},get children(){var m=TC(),g=m.firstChild;return g.$$click=p,T(g,k(G,{get when(){return c()?.isRead},get fallback(){return LC()},get children(){return RC()}})),L(y=>{var w=O({position:"absolute",bottom:{base:"6",md:"8"},right:{base:"6",md:"8"},zIndex:10}),v=c()?.isRead?"Mark as Unread":"Mark as Read",b=c()?.isRead?"Mark as Unread":"Mark as Read",x=c()?.isRead??!1,E=O({width:"14",height:"14",borderRadius:"full",bg:c()?.isRead?"white":"blue.600",color:c()?.isRead?"blue.600":"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"lg",cursor:"pointer",border:"1px solid",borderColor:c()?.isRead?"blue.600":"transparent",transition:"all 0.2s",_hover:{transform:"scale(1.05)",bg:c()?.isRead?"blue.50":"blue.700"},_active:{transform:"scale(0.95)"}});return w!==y.e&&C(m,y.e=w),v!==y.t&&st(g,"title",y.t=v),b!==y.a&&st(g,"aria-label",y.a=b),x!==y.o&&st(g,"aria-pressed",y.o=x),E!==y.i&&C(g,y.i=E),y},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),m}}),(()=>{var m=OC();return T(m,k(G,{get when(){return i()||o()},fallback:"Swipe navigation not available.",children:"Swipe left for next item, right for previous."})),L(()=>C(m,O({position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"}))),m})(),(()=>{var m=NC();return Ni(m,Mt({get class(){return X({flexDirection:"column",gap:"4",padding:"6",pb:"24",overflowY:"auto",height:"full"})},get style(){return{transform:`translateX(${u()}px)`,transition:r()?"none":"transform 0.2s ease-out","will-change":i()||o()?"transform":void 0}}},s),!1,!0),T(m,k(G,{get when(){return d()},get children(){var g=FC(),y=g.firstChild,w=y.nextSibling,v=w.firstChild,b=v.nextSibling;return L(x=>{var E=X({flexDirection:"column",alignItems:"center",justifyContent:"center",height:"full",gap:"6",textAlign:"center"}),R=O({fontSize:"4xl",color:"gray.300"}),S=O({fontSize:"xl",fontWeight:"bold",color:"gray.700",mb:"2"}),_=O({color:"gray.500"});return E!==x.e&&C(g,x.e=E),R!==x.t&&C(y,x.t=R),S!==x.a&&C(v,x.a=S),_!==x.o&&C(b,x.o=_),x},{e:void 0,t:void 0,a:void 0,o:void 0}),g}}),null),T(m,k(G,{get when(){return le(()=>!!l())()&&!d()},get children(){var g=DC();return L(()=>C(g,O({textAlign:"center",padding:"10",color:"gray.500"}))),g}}),null),T(m,k(G,{get when(){return le(()=>!d())()&&c()},children:g=>{const y=()=>{const w=g().content||g().description||"";return g().imageUrl&&w.includes(g().imageUrl)};return[(()=>{var w=$C(),v=w.firstChild;return v.firstChild,T(w,k(G,{get when(){return!!g().publishedAt},get children(){var b=MC();return b.firstChild,T(b,()=>cs(g().publishedAt),null),b}}),v),T(v,()=>cs(g().createdAt),null),T(w,k(G,{get when(){return g().author},get children(){var b=BC();return b.firstChild,T(b,()=>g().author,null),b}}),null),T(w,k(G,{get when(){return g().categories},get children(){var b=af();return T(b,k(At,{get each(){return JS(g().categories??"")},children:x=>(()=>{var E=UC();return T(E,x),L(()=>C(E,O({px:"2",py:"0.5",bg:"gray.100",rounded:"full",fontSize:"10px",color:"gray.600",border:"1px solid",borderColor:"gray.200"}))),E})()})),L(()=>C(b,X({gap:"1",flexWrap:"wrap"}))),b}}),null),L(()=>C(w,X({gap:"4",fontSize:"sm",color:"gray.500",flexWrap:"wrap",alignItems:"center"}))),w})(),k(G,{get when(){return le(()=>!!g().imageUrl)()&&!y()},get children(){var w=VC(),v=w.firstChild;return L(b=>{var x=O({my:"4"}),E=g().imageUrl,R=O({maxWidth:"full",height:"auto",borderRadius:"md",boxShadow:"sm",opacity:0,transition:"opacity 0.2s",maxHeight:"10vh","&[data-layout]":{opacity:1},"&[data-layout='hero']":{maxHeight:"30vh"},"&[data-layout='icon']":{maxHeight:"5vh"},"&[data-layout='other']":{maxHeight:"10vh"}});return x!==b.e&&C(w,b.e=x),E!==b.t&&st(v,"src",b.t=E),R!==b.a&&C(v,b.a=R),b},{e:void 0,t:void 0,a:void 0}),w}}),(()=>{var w=af();return T(w,k(CC,{get content(){return g().content||g().description||""}})),L(()=>C(w,O({lineHeight:"relaxed","& a":{color:"blue.600",textDecoration:"underline"},"& p":{marginBottom:"4"},"& p:has(img + img), & p:has(a + a), & p:has(img + a), & p:has(a + img)":{display:"flex",flexWrap:"wrap",gap:"2",alignItems:"center"},"& img":{maxWidth:"full",height:"auto",my:"4",opacity:0,transition:"opacity 0.2s",maxHeight:"10vh","&[data-layout]":{opacity:1},"&[data-layout='hero']":{maxHeight:"30vh"},"&[data-layout='icon']":{maxHeight:"5vh"},"&[data-layout='other']":{maxHeight:"10vh"}},"& pre":{overflowX:"auto",maxWidth:"full",backgroundColor:"gray.50",padding:"4",borderRadius:"md",border:"1px solid",borderColor:"gray.200",my:"4"},"& code":{fontFamily:"mono",fontSize:"0.9em",backgroundColor:"gray.100",padding:"0.2em 0.4em",borderRadius:"sm"},"& pre code":{backgroundColor:"transparent",padding:0,borderRadius:0,fontSize:"sm"},'& a:is([href*="#gh-light-mode-only"], [href*="%23gh-light-mode-only"]) img':{display:"inline-block"},'& a:is([href*="#gh-dark-mode-only"], [href*="%23gh-dark-mode-only"]) img':{display:"none"},"@media (prefers-color-scheme: dark)":{'& a:is([href*="#gh-light-mode-only"], [href*="%23gh-light-mode-only"]) img':{display:"none !important"},'& a:is([href*="#gh-dark-mode-only"], [href*="%23gh-dark-mode-only"]) img':{display:"inline-block !important"}},"@media (prefers-color-scheme: light)":{'& a:is([href*="#gh-light-mode-only"], [href*="%23gh-light-mode-only"]) img':{display:"inline-block !important"},'& a:is([href*="#gh-dark-mode-only"], [href*="%23gh-dark-mode-only"]) img':{display:"none !important"}}}))),w})()]}}),null),m})()]}})}})}_t(["click"]);function KC(e){const t=ws();Qe(()=>{e.since&&qe.setDateFilter(e.since)}),Qe(()=>{const h=o(),m=i();if(h>=0&&m&&m.length>0){const g=ME(h,m);LE(g)}});const n=h=>{if(!h)return;const m="/items/$itemId",g={itemId:h},y={tagId:e.tagId,since:e.since};return{to:m,params:g,search:y}},r=()=>e.itemId==="end-of-list",s=Bt(h=>{let m=h.from({item:en()}).orderBy(({item:g})=>g.publishedAt,{direction:"asc",nulls:"last"}).orderBy(({item:g})=>g.createdAt,"asc");return e.tagId&&(m=m.innerJoin({ft:br},({item:g,ft:y})=>Je(g.feedId,y.feedId)).where(({ft:g})=>Je(g.tagId,e.tagId))),m.select(({item:g})=>({...g}))}),i=J(()=>{const h=s();return h||[]}),o=J(()=>{const h=i();return!h||h.length===0||!e.itemId?-1:h.findIndex(m=>m.id===e.itemId)}),u=()=>{const h=i(),m=o();return h&&m>0?h[m-1]:void 0},a=()=>{const h=i(),m=o();return h&&m>=0&&m<h.length-1?h[m+1]:void 0},c=()=>{if(d(),r())return;const h=a();if(h){const m=n(h.id);m&&t({to:m.to,params:m.params,search:m.search,replace:!0})}else{const m=i(),g=o();if(m&&m.length>0&&g===m.length-1){const y=n("end-of-list");y&&t({to:y.to,params:y.params,search:y.search,replace:!0})}}},l=()=>{if(d(),r()){const m=i(),g=m&&m.length>0?m[m.length-1]:void 0;if(g){const y=n(g.id);y&&t({to:y.to,params:y.params,search:y.search,replace:!0})}return}const h=u();if(h){const m=n(h.id);m&&t({to:m.to,params:m.params,search:m.search,replace:!0})}},d=()=>{!e.itemId||r()||en().update(e.itemId,h=>{h.isRead=!0})},p=J(()=>{if(r()){const h=i();return h&&h.length>0?h[h.length-1]?.id:void 0}return u()?.id}),f=J(()=>{const h=i();return!r()&&h&&h.length>0&&o()===h.length-1?"end-of-list":a()?.id});return k(zC,{get itemId(){return e.itemId},onClose:()=>{t({to:"/",search:{tagId:e.tagId,since:e.since},replace:!0})},get prevItemId(){return p()},get nextItemId(){return f()},onPrev:l,onNext:c})}const Bu=zn("/_items/items/$itemId")({component:WC});function WC(){const e=Bu.useParams(),t=Bu.useSearch();return k(KC,{get itemId(){return e()?.itemId},get tagId(){return t()?.tagId},get since(){return t()?.since}})}const GC=C_.update({id:"/tags",path:"/tags",getParentRoute:()=>qi}),jC=vE.update({id:"/feeds",path:"/feeds",getParentRoute:()=>qi}),uc=J0.update({id:"/_items",getParentRoute:()=>qi}),ZC=PE.update({id:"/",path:"/",getParentRoute:()=>uc}),YC=Bu.update({id:"/items/$itemId",path:"/items/$itemId",getParentRoute:()=>uc}),qC={ItemsIndexRoute:ZC,ItemsItemsItemIdRoute:YC},HC=uc._addFileChildren(qC),XC={ItemsRoute:HC,FeedsRoute:jC,TagsRoute:GC},JC=qi._addFileChildren(XC)._addFileTypes();async function QC(e){}Fb();const eI=_b({routeTree:JC,defaultPreload:"intent",defaultStaleTime:5e3,scrollRestoration:!0}),$o=document.getElementById("app");$o&&!$o.innerHTML&&QC().then(()=>{Qp(()=>k(oE,{transport:Rs,get children(){return k(Um,{client:we,get children(){return k(Cb,{router:eI})}})}}),$o)});
